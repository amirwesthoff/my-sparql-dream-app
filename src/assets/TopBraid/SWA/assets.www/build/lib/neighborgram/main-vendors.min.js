require=function(){function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return r(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}return t}()({1:[function(t,e,i){(function(e){!function(n){var r="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,i){r.Backbone=n(r,i,t,e)});else if(void 0!==i){var o,s=t("underscore");try{o=t("jquery")}catch(t){}n(r,i,s,o)}else r.Backbone=n(r,{},r._,r.jQuery||r.Zepto||r.ender||r.$)}(function(t,e,i,n){var r=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,r){return i[e](this[n],l(t,this),r)};case 4:return function(t,r,o){return i[e](this[n],l(t,this),r,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},a=function(t,e,n){i.each(e,function(e,r){i[r]&&(t.prototype[r]=s(e,r,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?c(t):i.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},h=e.Events={},u=/\s+/,d=function(t,e,n,r,o){var s,a=0;if(n&&"object"==typeof n){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=i.keys(n);a<s.length;a++)e=d(t,e,s[a],n[s[a]],o)}else if(n&&u.test(n))for(s=n.split(u);a<s.length;a++)e=t(e,s[a],r,o);else e=t(e,n,r,o);return e};h.on=function(t,e,i){return p(this,t,e,i)};var p=function(t,e,i,n,r){if(t._events=d(f,t._events||{},e,i,{context:n,ctx:t,listening:r}),r){(t._listeners||(t._listeners={}))[r.id]=r}return t};h.listenTo=function(t,e,n){if(!t)return this;var r=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[r];if(!s){var a=this._listenId||(this._listenId=i.uniqueId("l"));s=o[r]={obj:t,objId:r,id:a,listeningTo:o,count:0}}return p(t,e,n,this,s),this};var f=function(t,e,i,n){if(i){var r=t[e]||(t[e]=[]),o=n.context,s=n.ctx,a=n.listening;a&&a.count++,r.push({callback:i,context:o,ctx:o||s,listening:a})}return t};h.off=function(t,e,i){return this._events?(this._events=d(g,this._events,t,e,{context:i,listeners:this._listeners}),this):this},h.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:i.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(e,n,this)}return this};var g=function(t,e,n,r){if(t){var o,s=0,a=r.context,l=r.listeners;if(e||n||a){for(var c=e?[e]:i.keys(t);s<c.length;s++){e=c[s];var h=t[e];if(!h)break;for(var u=[],d=0;d<h.length;d++){var p=h[d];n&&n!==p.callback&&n!==p.callback._callback||a&&a!==p.context?u.push(p):(o=p.listening)&&0==--o.count&&(delete l[o.id],delete o.listeningTo[o.objId])}u.length?t[e]=u:delete t[e]}return t}for(var f=i.keys(l);s<f.length;s++)o=l[f[s]],delete l[o.id],delete o.listeningTo[o.objId]}};h.once=function(t,e,n){var r=d(m,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(r,e,n)},h.listenToOnce=function(t,e,n){var r=d(m,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,r)};var m=function(t,e,n,r){if(n){var o=t[e]=i.once(function(){r(e,o),n.apply(this,arguments)});o._callback=n}return t};h.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return d(v,this._events,t,void 0,i),this};var v=function(t,e,i,n){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&y(r,n),o&&y(o,[e].concat(n))}return t},y=function(t,e){var i,n=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}};h.bind=h.on,h.unbind=h.off,i.extend(e,h);var b=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var r=i.result(this,"defaults");n=i.defaults(i.extend({},r,n),r),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(b.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var r;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;var o=n.unset,s=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,h=this.changed,u=this._previousAttributes;for(var d in r)e=r[d],i.isEqual(c[d],e)||a.push(d),i.isEqual(u[d],e)?delete h[d]:h[d]=e,o?delete c[d]:c[d]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=n);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],n)}if(l)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var r in t){var o=t[r];i.isEqual(e[r],o)||(n[r]=o)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var r=t.parse?e.parse(i,t):i;if(!e.set(r,t))return!1;n&&n.call(t.context,e,i,t),e.trigger("sync",e,i,t)},Z(this,t),this.sync("read",this,t)},save:function(t,e,n){var r;null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var o=n.wait;if(r&&!o){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;var s=this,a=n.success,l=this.attributes;n.success=function(t){s.attributes=l;var e=n.parse?s.parse(t,n):t;if(o&&(e=i.extend({},r,e)),e&&!s.set(e,n))return!1;a&&a.call(n.context,s,t,n),s.trigger("sync",s,t,n)},Z(this,n),r&&o&&(this.attributes=i.extend({},l,r));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=r);var h=this.sync(c,this,n);return this.attributes=l,h},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){r&&o(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var s=!1;return this.isNew()?i.defer(t.success):(Z(this,t),s=this.sync("delete",this,t)),r||o(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||O();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}}),a(b,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var I=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},w=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,r=Array(t.length-i),o=e.length;for(n=0;n<r.length;n++)r[n]=t[n+i];for(n=0;n<o;n++)t[n+i]=e[n];for(n=0;n<r.length;n++)t[n+o+i]=r[n]};i.extend(I.prototype,h,{model:b,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,C))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),n?r[0]:r},set:function(t,e){if(null!=t){e=i.extend({},x,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,s,a=[],l=[],c=[],h=[],u={},d=e.add,p=e.merge,f=e.remove,g=!1,m=this.comparator&&null==r&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){o=t[s];var y=this.get(o);if(y){if(p&&o!==y){var b=this._isModel(o)?o.attributes:o;e.parse&&(b=y.parse(b,e)),y.set(b,e),c.push(y),m&&!g&&(g=y.hasChanged(v))}u[y.cid]||(u[y.cid]=!0,a.push(y)),t[s]=y}else d&&(o=t[s]=this._prepareModel(o,e))&&(l.push(o),this._addReference(o,e),u[o.cid]=!0,a.push(o))}if(f){for(s=0;s<this.length;s++)o=this.models[s],u[o.cid]||h.push(o);h.length&&this._removeModels(h,e)}var I=!1,C=!m&&d&&f;if(a.length&&C?(I=this.length!==a.length||i.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,w(this.models,a,0),this.length=this.models.length):l.length&&(m&&(g=!0),w(this.models,l,null==r?this.length:r),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(s=0;s<l.length;s++)null!=r&&(e.index=r+s),o=l[s],o.trigger("add",o,this,e);(g||I)&&this.trigger("sort",this,e),(l.length||h.length||c.length)&&(e.changes={added:l,removed:h,merged:c},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},Z(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,i){n&&r.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var r=this.get(t[n]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],e.silent||(e.index=o,r.trigger("remove",r,this,e)),i.push(r),this._removeReference(r,e)}}return i},_isModel:function(t){return t instanceof b},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}}),a(I,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var A=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,N)),this._ensureElement(),this.initialize.apply(this,arguments)},M=/^(\S+)\s*(.*)$/,N=["model","collection","el","id","attributes","className","tagName","events"];i.extend(A.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var r=e.match(M);this.delegate(r[1],r[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,r){var o=k[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||O()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var l=r.error;r.error=function(t,e,i){r.textStatus=e,r.errorThrown=i,l&&l.call(r.context,t,e,i)};var c=r.xhr=e.ajax(i.extend(s,r));return n.trigger("request",n,c,r),c};var k={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,j=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(S.prototype,h,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var o=this;return e.history.route(t,function(i){var s=o._extractParameters(t,i);!1!==o.execute(r,s,n)&&(o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),e.history.trigger("route",o,n,s))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(z,"\\$&").replace(T,"(?:$1)?").replace(D,function(t,e){return e?t:"([^/?]+)"}).replace(j,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var E=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,B=/^\/+|\/+$/g,P=/#.*$/;E.started=!1,i.extend(E.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(L,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");if(E.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(B,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,r=n.insertBefore(this.iframe,n.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),E.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!E.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(P,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new E;var G=function(t,e){var n,r=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e),n.prototype=i.create(r.prototype,t),n.prototype.constructor=n,n.__super__=r.prototype,n};b.extend=I.extend=S.extend=A.extend=E.extend=G;var O=function(){throw new Error('A "url" property or function must be specified')},Z=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jquery:52,underscore:59}],2:[function(t,e,i){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":7,"./lib/graphlib":8,"./lib/layout":10,"./lib/util":30,"./lib/version":31}],3:[function(t,e,i){"use strict";function n(t){var e="greedy"===t.graph().acyclicer?a(t,function(t){return function(e){return t.edge(e).weight}}(t)):r(t);s.each(e,function(e){var i=t.edge(e);t.removeEdge(e),i.forwardName=e.name,i.reversed=!0,t.setEdge(e.w,e.v,i,s.uniqueId("rev"))})}function r(t){function e(o){s.has(r,o)||(r[o]=!0,n[o]=!0,s.each(t.outEdges(o),function(t){s.has(n,t.w)?i.push(t):e(t.w)}),delete n[o])}var i=[],n={},r={};return s.each(t.nodes(),e),i}function o(t){s.each(t.edges(),function(e){var i=t.edge(e);if(i.reversed){t.removeEdge(e);var n=i.forwardName;delete i.reversed,delete i.forwardName,t.setEdge(e.w,e.v,i,n)}})}var s=t("./lodash"),a=t("./greedy-fas");e.exports={run:n,undo:o}},{"./greedy-fas":9,"./lodash":11}],4:[function(t,e,i){function n(t){function e(i){var n=t.children(i),s=t.node(i);if(n.length&&o.each(n,e),o.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,l=s.maxRank+1;a<l;++a)r(t,"borderLeft","_bl",i,s,a),r(t,"borderRight","_br",i,s,a)}}o.each(t.children(),e)}function r(t,e,i,n,r,o){var a={width:0,height:0,rank:o,borderType:e},l=r[e][o-1],c=s.addDummyNode(t,"border",a,i);r[e][o]=c,t.setParent(c,n),l&&t.setEdge(l,c,{weight:1})}var o=t("./lodash"),s=t("./util");e.exports=n},{"./lodash":11,"./util":30}],5:[function(t,e,i){"use strict";function n(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)}function r(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||a(t),"lr"!==e&&"rl"!==e||(c(t),o(t))}function o(t){u.each(t.nodes(),function(e){s(t.node(e))}),u.each(t.edges(),function(e){s(t.edge(e))})}function s(t){var e=t.width;t.width=t.height,t.height=e}function a(t){u.each(t.nodes(),function(e){l(t.node(e))}),u.each(t.edges(),function(e){var i=t.edge(e);u.each(i.points,l),u.has(i,"y")&&l(i)})}function l(t){t.y=-t.y}function c(t){u.each(t.nodes(),function(e){h(t.node(e))}),u.each(t.edges(),function(e){var i=t.edge(e);u.each(i.points,h),u.has(i,"x")&&h(i)})}function h(t){var e=t.x;t.x=t.y,t.y=e}var u=t("./lodash");e.exports={adjust:n,undo:r}},{"./lodash":11}],6:[function(t,e,i){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}e.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,i=e._prev;i!==e;)t.push(JSON.stringify(i,o)),i=i._prev;return"["+t.join(", ")+"]"}},{}],7:[function(t,e,i){function n(t){var e=o.buildLayerMatrix(t),i=new s({compound:!0,multigraph:!0}).setGraph({});return r.each(t.nodes(),function(e){i.setNode(e,{label:e}),i.setParent(e,"layer"+t.node(e).rank)}),r.each(t.edges(),function(t){i.setEdge(t.v,t.w,{},t.name)}),r.each(e,function(t,e){var n="layer"+e;i.setNode(n,{rank:"same"}),r.reduce(t,function(t,e){return i.setEdge(t,e,{style:"invis"}),e})}),i}var r=t("./lodash"),o=t("./util"),s=t("./graphlib").Graph;e.exports={debugOrdering:n}},{"./graphlib":8,"./lodash":11,"./util":30}],8:[function(t,e,i){var n;if("function"==typeof t)try{n=t("graphlib")}catch(t){}n||(n=window.graphlib),e.exports=n},{graphlib:32}],9:[function(t,e,i){function n(t,e){if(t.nodeCount()<=1)return[];var i=s(t,e||u),n=r(i.graph,i.buckets,i.zeroIdx);return l.flatten(l.map(n,function(e){return t.outEdges(e.v,e.w)}),!0)}function r(t,e,i){for(var n,r=[],s=e[e.length-1],a=e[0];t.nodeCount();){for(;n=a.dequeue();)o(t,e,i,n);for(;n=s.dequeue();)o(t,e,i,n);if(t.nodeCount())for(var l=e.length-2;l>0;--l)if(n=e[l].dequeue()){r=r.concat(o(t,e,i,n,!0));break}}return r}function o(t,e,i,n,r){var o=r?[]:void 0;return l.each(t.inEdges(n.v),function(n){var s=t.edge(n),l=t.node(n.v);r&&o.push({v:n.v,w:n.w}),l.out-=s,a(e,i,l)}),l.each(t.outEdges(n.v),function(n){var r=t.edge(n),o=n.w,s=t.node(o);s.in-=r,a(e,i,s)}),t.removeNode(n.v),o}function s(t,e){var i=new c,n=0,r=0;l.each(t.nodes(),function(t){i.setNode(t,{v:t,in:0,out:0})}),l.each(t.edges(),function(t){var o=i.edge(t.v,t.w)||0,s=e(t),a=o+s;i.setEdge(t.v,t.w,a),r=Math.max(r,i.node(t.v).out+=s),n=Math.max(n,i.node(t.w).in+=s)});var o=l.range(r+n+3).map(function(){return new h}),s=n+1;return l.each(i.nodes(),function(t){a(o,s,i.node(t))}),{graph:i,buckets:o,zeroIdx:s}}function a(t,e,i){i.out?i.in?t[i.out-i.in+e].enqueue(i):t[t.length-1].enqueue(i):t[0].enqueue(i)}var l=t("./lodash"),c=t("./graphlib").Graph,h=t("./data/list");e.exports=n;var u=l.constant(1)},{"./data/list":6,"./graphlib":8,"./lodash":11}],10:[function(t,e,i){"use strict";function n(t,e){var i=e&&e.debugTiming?E.time:E.notime;i("layout",function(){var e=i("  buildLayoutGraph",function(){return s(t)});i("  runLayout",function(){r(e,i)}),i("  updateInputGraph",function(){o(t,e)})})}function r(t,e){e("    makeSpaceForEdgeLabels",function(){a(t)}),e("    removeSelfEdges",function(){m(t)}),e("    acyclic",function(){C.run(t)}),e("    nestingGraph.run",function(){S.run(t)}),e("    rank",function(){A(E.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){l(t)}),e("    removeEmptyRanks",function(){k(t)}),e("    nestingGraph.cleanup",function(){S.cleanup(t)}),e("    normalizeRanks",function(){M(t)}),e("    assignRankMinMax",function(){c(t)}),e("    removeEdgeLabelProxies",function(){h(t)}),e("    normalize.run",function(){w.run(t)}),e("    parentDummyChains",function(){N(t)}),e("    addBorderSegments",function(){T(t)}),e("    order",function(){j(t)}),e("    insertSelfEdges",function(){v(t)}),e("    adjustCoordinateSystem",function(){D.adjust(t)}),e("    position",function(){z(t)}),e("    positionSelfEdges",function(){y(t)}),e("    removeBorderNodes",function(){g(t)}),e("    normalize.undo",function(){w.undo(t)}),e("    fixupEdgeLabelCoords",function(){p(t)}),e("    undoCoordinateSystem",function(){D.undo(t)}),e("    translateGraph",function(){u(t)}),e("    assignNodeIntersects",function(){d(t)}),e("    reversePoints",function(){f(t)}),e("    acyclic.undo",function(){C.undo(t)})}function o(t,e){x.each(t.nodes(),function(i){var n=t.node(i),r=e.node(i);n&&(n.x=r.x,n.y=r.y,e.children(i).length&&(n.width=r.width,n.height=r.height))}),x.each(t.edges(),function(i){var n=t.edge(i),r=e.edge(i);n.points=r.points,x.has(r,"x")&&(n.x=r.x,n.y=r.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function s(t){var e=new L({multigraph:!0,compound:!0}),i=I(t.graph());return e.setGraph(x.merge({},P,b(i,B),x.pick(i,G))),x.each(t.nodes(),function(i){var n=I(t.node(i));e.setNode(i,x.defaults(b(n,O),Z)),e.setParent(i,t.parent(i))}),x.each(t.edges(),function(i){var n=I(t.edge(i));e.setEdge(i,x.merge({},R,b(n,_),x.pick(n,W)))}),e}function a(t){var e=t.graph();e.ranksep/=2,x.each(t.edges(),function(i){var n=t.edge(i);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function l(t){x.each(t.edges(),function(e){var i=t.edge(e);if(i.width&&i.height){var n=t.node(e.v),r=t.node(e.w),o={rank:(r.rank-n.rank)/2+n.rank,e:e};E.addDummyNode(t,"edge-proxy",o,"_ep")}})}function c(t){var e=0;x.each(t.nodes(),function(i){var n=t.node(i);n.borderTop&&(n.minRank=t.node(n.borderTop).rank,n.maxRank=t.node(n.borderBottom).rank,e=x.max(e,n.maxRank))}),t.graph().maxRank=e}function h(t){x.each(t.nodes(),function(e){var i=t.node(e);"edge-proxy"===i.dummy&&(t.edge(i.e).labelRank=i.rank,t.removeNode(e))})}function u(t){function e(t){var e=t.x,s=t.y,a=t.width,l=t.height;i=Math.min(i,e-a/2),n=Math.max(n,e+a/2),r=Math.min(r,s-l/2),o=Math.max(o,s+l/2)}var i=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,s=t.graph(),a=s.marginx||0,l=s.marginy||0;x.each(t.nodes(),function(i){e(t.node(i))}),x.each(t.edges(),function(i){var n=t.edge(i);x.has(n,"x")&&e(n)}),i-=a,r-=l,x.each(t.nodes(),function(e){var n=t.node(e);n.x-=i,n.y-=r}),x.each(t.edges(),function(e){var n=t.edge(e);x.each(n.points,function(t){t.x-=i,t.y-=r}),x.has(n,"x")&&(n.x-=i),x.has(n,"y")&&(n.y-=r)}),s.width=n-i+a,s.height=o-r+l}function d(t){x.each(t.edges(),function(e){var i,n,r=t.edge(e),o=t.node(e.v),s=t.node(e.w);r.points?(i=r.points[0],n=r.points[r.points.length-1]):(r.points=[],i=s,n=o),r.points.unshift(E.intersectRect(o,i)),r.points.push(E.intersectRect(s,n))})}function p(t){x.each(t.edges(),function(e){var i=t.edge(e);if(x.has(i,"x"))switch("l"!==i.labelpos&&"r"!==i.labelpos||(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset}})}function f(t){x.each(t.edges(),function(e){var i=t.edge(e);i.reversed&&i.points.reverse()})}function g(t){
x.each(t.nodes(),function(e){if(t.children(e).length){var i=t.node(e),n=t.node(i.borderTop),r=t.node(i.borderBottom),o=t.node(x.last(i.borderLeft)),s=t.node(x.last(i.borderRight));i.width=Math.abs(s.x-o.x),i.height=Math.abs(r.y-n.y),i.x=o.x+i.width/2,i.y=n.y+i.height/2}}),x.each(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function m(t){x.each(t.edges(),function(e){if(e.v===e.w){var i=t.node(e.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function v(t){var e=E.buildLayerMatrix(t);x.each(e,function(e){var i=0;x.each(e,function(e,n){var r=t.node(e);r.order=n+i,x.each(r.selfEdges,function(e){E.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:r.rank,order:n+ ++i,e:e.e,label:e.label},"_se")}),delete r.selfEdges})})}function y(t){x.each(t.nodes(),function(e){var i=t.node(e);if("selfedge"===i.dummy){var n=t.node(i.e.v),r=n.x+n.width/2,o=n.y,s=i.x-r,a=n.height/2;t.setEdge(i.e,i.label),t.removeNode(e),i.label.points=[{x:r+2*s/3,y:o-a},{x:r+5*s/6,y:o-a},{x:r+s,y:o},{x:r+5*s/6,y:o+a},{x:r+2*s/3,y:o+a}],i.label.x=i.x,i.label.y=i.y}})}function b(t,e){return x.mapValues(x.pick(t,e),Number)}function I(t){var e={};return x.each(t,function(t,i){e[i.toLowerCase()]=t}),e}var x=t("./lodash"),C=t("./acyclic"),w=t("./normalize"),A=t("./rank"),M=t("./util").normalizeRanks,N=t("./parent-dummy-chains"),k=t("./util").removeEmptyRanks,S=t("./nesting-graph"),T=t("./add-border-segments"),D=t("./coordinate-system"),j=t("./order"),z=t("./position"),E=t("./util"),L=t("./graphlib").Graph;e.exports=n;var B=["nodesep","edgesep","ranksep","marginx","marginy"],P={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},G=["acyclicer","ranker","rankdir","align"],O=["width","height"],Z={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],R={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},W=["labelpos"]},{"./acyclic":3,"./add-border-segments":4,"./coordinate-system":5,"./graphlib":8,"./lodash":11,"./nesting-graph":12,"./normalize":13,"./order":18,"./parent-dummy-chains":23,"./position":25,"./rank":27,"./util":30}],11:[function(t,e,i){var n;if("function"==typeof t)try{n=t("lodash")}catch(t){}n||(n=window._),e.exports=n},{lodash:"lodash"}],12:[function(t,e,i){function n(t){var e=c.addDummyNode(t,"root",{},"_root"),i=o(t),n=l.max(i)-1,a=2*n+1;t.graph().nestingRoot=e,l.each(t.edges(),function(e){t.edge(e).minlen*=a});var h=s(t)+1;l.each(t.children(),function(o){r(t,e,a,h,n,i,o)}),t.graph().nodeRankFactor=a}function r(t,e,i,n,o,s,a){var h=t.children(a);if(!h.length)return void(a!==e&&t.setEdge(e,a,{weight:0,minlen:i}));var u=c.addBorderNode(t,"_bt"),d=c.addBorderNode(t,"_bb"),p=t.node(a);t.setParent(u,a),p.borderTop=u,t.setParent(d,a),p.borderBottom=d,l.each(h,function(l){r(t,e,i,n,o,s,l);var c=t.node(l),h=c.borderTop?c.borderTop:l,p=c.borderBottom?c.borderBottom:l,f=c.borderTop?n:2*n,g=h!==p?1:o-s[a]+1;t.setEdge(u,h,{weight:f,minlen:g,nestingEdge:!0}),t.setEdge(p,d,{weight:f,minlen:g,nestingEdge:!0})}),t.parent(a)||t.setEdge(e,u,{weight:0,minlen:o+s[a]})}function o(t){function e(n,r){var o=t.children(n);o&&o.length&&l.each(o,function(t){e(t,r+1)}),i[n]=r}var i={};return l.each(t.children(),function(t){e(t,1)}),i}function s(t){return l.reduce(t.edges(),function(e,i){return e+t.edge(i).weight},0)}function a(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,l.each(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}var l=t("./lodash"),c=t("./util");e.exports={run:n,cleanup:a}},{"./lodash":11,"./util":30}],13:[function(t,e,i){"use strict";function n(t){t.graph().dummyChains=[],s.each(t.edges(),function(e){r(t,e)})}function r(t,e){var i=e.v,n=t.node(i).rank,r=e.w,o=t.node(r).rank,s=e.name,l=t.edge(e),c=l.labelRank;if(o!==n+1){t.removeEdge(e);var h,u,d;for(d=0,++n;n<o;++d,++n)l.points=[],u={width:0,height:0,edgeLabel:l,edgeObj:e,rank:n},h=a.addDummyNode(t,"edge",u,"_d"),n===c&&(u.width=l.width,u.height=l.height,u.dummy="edge-label",u.labelpos=l.labelpos),t.setEdge(i,h,{weight:l.weight},s),0===d&&t.graph().dummyChains.push(h),i=h;t.setEdge(i,r,{weight:l.weight},s)}}function o(t){s.each(t.graph().dummyChains,function(e){var i,n=t.node(e),r=n.edgeLabel;for(t.setEdge(n.edgeObj,r);n.dummy;)i=t.successors(e)[0],t.removeNode(e),r.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),e=i,n=t.node(e)})}var s=t("./lodash"),a=t("./util");e.exports={run:n,undo:o}},{"./lodash":11,"./util":30}],14:[function(t,e,i){function n(t,e,i){var n,o={};r.each(i,function(i){for(var r,s,a=t.parent(i);a;){if(r=t.parent(a),r?(s=o[r],o[r]=a):(s=n,n=a),s&&s!==a)return void e.setEdge(s,a);a=r}})}var r=t("../lodash");e.exports=n},{"../lodash":11}],15:[function(t,e,i){function n(t,e){return r.map(e,function(e){var i=t.inEdges(e);if(i.length){var n=r.reduce(i,function(e,i){var n=t.edge(i),r=t.node(i.v);return{sum:e.sum+n.weight*r.order,weight:e.weight+n.weight}},{sum:0,weight:0});return{v:e,barycenter:n.sum/n.weight,weight:n.weight}}return{v:e}})}var r=t("../lodash");e.exports=n},{"../lodash":11}],16:[function(t,e,i){function n(t,e,i){var n=r(t),a=new s({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(e){return t.node(e)});return o.each(t.nodes(),function(r){var s=t.node(r),l=t.parent(r);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(r),a.setParent(r,l||n),o.each(t[i](r),function(e){var i=e.v===r?e.w:e.v,n=a.edge(i,r),s=o.isUndefined(n)?0:n.weight;a.setEdge(i,r,{weight:t.edge(e).weight+s})}),o.has(s,"minRank")&&a.setNode(r,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}function r(t){for(var e;t.hasNode(e=o.uniqueId("_root")););return e}var o=t("../lodash"),s=t("../graphlib").Graph;e.exports=n},{"../graphlib":8,"../lodash":11}],17:[function(t,e,i){"use strict";function n(t,e){for(var i=0,n=1;n<e.length;++n)i+=r(t,e[n-1],e[n]);return i}function r(t,e,i){for(var n=o.zipObject(i,o.map(i,function(t,e){return e})),r=o.flatten(o.map(e,function(e){return o.chain(t.outEdges(e)).map(function(e){return{pos:n[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),s=1;s<i.length;)s<<=1;var a=2*s-1;s-=1;var l=o.map(new Array(a),function(){return 0}),c=0;return o.each(r.forEach(function(t){var e=t.pos+s;l[e]+=t.weight;for(var i=0;e>0;)e%2&&(i+=l[e+1]),e=e-1>>1,l[e]+=t.weight;c+=t.weight*i})),c}var o=t("../lodash");e.exports=n},{"../lodash":11}],18:[function(t,e,i){"use strict";function n(t){var e=f.maxRank(t),i=r(t,a.range(1,e+1),"inEdges"),n=r(t,a.range(e-1,-1,-1),"outEdges"),h=l(t);s(t,h);for(var u,d=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){o(p%2?i:n,p%4>=2),h=f.buildLayerMatrix(t);var m=c(t,h);m<d&&(g=0,u=a.cloneDeep(h),d=m)}s(t,u)}function r(t,e,i){return a.map(e,function(e){return u(t,e,i)})}function o(t,e){var i=new p;a.each(t,function(t){var n=t.graph().root,r=h(t,n,i,e);a.each(r.vs,function(e,i){t.node(e).order=i}),d(t,i,r.vs)})}function s(t,e){a.each(e,function(e){a.each(e,function(e,i){t.node(e).order=i})})}var a=t("../lodash"),l=t("./init-order"),c=t("./cross-count"),h=t("./sort-subgraph"),u=t("./build-layer-graph"),d=t("./add-subgraph-constraints"),p=t("../graphlib").Graph,f=t("../util");e.exports=n},{"../graphlib":8,"../lodash":11,"../util":30,"./add-subgraph-constraints":14,"./build-layer-graph":16,"./cross-count":17,"./init-order":19,"./sort-subgraph":21}],19:[function(t,e,i){"use strict";function n(t){function e(n){if(!r.has(i,n)){i[n]=!0;var o=t.node(n);s[o.rank].push(n),r.each(t.successors(n),e)}}var i={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),o=r.max(r.map(n,function(e){return t.node(e).rank})),s=r.map(r.range(o+1),function(){return[]}),a=r.sortBy(n,function(e){return t.node(e).rank});return r.each(a,e),s}var r=t("../lodash");e.exports=n},{"../lodash":11}],20:[function(t,e,i){"use strict";function n(t,e){var i={};return s.each(t,function(t,e){var n=i[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};s.isUndefined(t.barycenter)||(n.barycenter=t.barycenter,n.weight=t.weight)}),s.each(e.edges(),function(t){var e=i[t.v],n=i[t.w];s.isUndefined(e)||s.isUndefined(n)||(n.indegree++,e.out.push(i[t.w]))}),r(s.filter(i,function(t){return!t.indegree}))}function r(t){for(var e=[];t.length;){var i=t.pop();e.push(i),s.each(i.in.reverse(),function(t){return function(e){e.merged||(s.isUndefined(e.barycenter)||s.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&o(t,e)}}(i)),s.each(i.out,function(e){return function(i){i.in.push(e),0==--i.indegree&&t.push(i)}}(i))}return s.chain(e).filter(function(t){return!t.merged}).map(function(t){return s.pick(t,["vs","i","barycenter","weight"])}).value()}function o(t,e){var i=0,n=0;t.weight&&(i+=t.barycenter*t.weight,n+=t.weight),e.weight&&(i+=e.barycenter*e.weight,n+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=i/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}var s=t("../lodash");e.exports=n},{"../lodash":11}],21:[function(t,e,i){function n(t,e,i,h){var u=t.children(e),d=t.node(e),p=d?d.borderLeft:void 0,f=d?d.borderRight:void 0,g={};p&&(u=s.filter(u,function(t){return t!==p&&t!==f}));var m=a(t,u);s.each(m,function(e){if(t.children(e.v).length){var r=n(t,e.v,i,h);g[e.v]=r,s.has(r,"barycenter")&&o(e,r)}});var v=l(m,i);r(v,g);var y=c(v,h);if(p&&(y.vs=s.flatten([p,y.vs,f],!0),t.predecessors(p).length)){var b=t.node(t.predecessors(p)[0]),I=t.node(t.predecessors(f)[0]);s.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+b.order+I.order)/(y.weight+2),y.weight+=2}return y}function r(t,e){s.each(t,function(t){t.vs=s.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function o(t,e){s.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var s=t("../lodash"),a=t("./barycenter"),l=t("./resolve-conflicts"),c=t("./sort");e.exports=n},{"../lodash":11,"./barycenter":15,"./resolve-conflicts":20,"./sort":22}],22:[function(t,e,i){function n(t,e){var i=a.partition(t,function(t){return s.has(t,"barycenter")}),n=i.lhs,l=s.sortBy(i.rhs,function(t){return-t.i}),c=[],h=0,u=0,d=0;n.sort(o(!!e)),d=r(c,l,d),s.each(n,function(t){d+=t.vs.length,c.push(t.vs),h+=t.barycenter*t.weight,u+=t.weight,d=r(c,l,d)});var p={vs:s.flatten(c,!0)};return u&&(p.barycenter=h/u,p.weight=u),p}function r(t,e,i){for(var n;e.length&&(n=s.last(e)).i<=i;)e.pop(),t.push(n.vs),i++;return i}function o(t){return function(e,i){return e.barycenter<i.barycenter?-1:e.barycenter>i.barycenter?1:t?i.i-e.i:e.i-i.i}}var s=t("../lodash"),a=t("../util");e.exports=n},{"../lodash":11,"../util":30}],23:[function(t,e,i){function n(t){var e=o(t);s.each(t.graph().dummyChains,function(i){for(var n=t.node(i),o=n.edgeObj,s=r(t,e,o.v,o.w),a=s.path,l=s.lca,c=0,h=a[c],u=!0;i!==o.w;){if(n=t.node(i),u){for(;(h=a[c])!==l&&t.node(h).maxRank<n.rank;)c++;h===l&&(u=!1)}if(!u){for(;c<a.length-1&&t.node(h=a[c+1]).minRank<=n.rank;)c++;h=a[c]}t.setParent(i,h),i=t.successors(i)[0]}})}function r(t,e,i,n){var r,o,s=[],a=[],l=Math.min(e[i].low,e[n].low),c=Math.max(e[i].lim,e[n].lim);r=i;do{r=t.parent(r),s.push(r)}while(r&&(e[r].low>l||c>e[r].lim));for(o=r,r=n;(r=t.parent(r))!==o;)a.push(r);return{path:s.concat(a.reverse()),lca:o}}function o(t){function e(r){var o=n;s.each(t.children(r),e),i[r]={low:o,lim:n++}}var i={},n=0;return s.each(t.children(),e),i}var s=t("./lodash");e.exports=n},{"./lodash":11}],24:[function(t,e,i){"use strict";function n(t,e){function i(e,i){var r=0,a=0,l=e.length,c=v.last(i);return v.each(i,function(e,h){var u=o(t,e),d=u?t.node(u).order:l;(u||e===c)&&(v.each(i.slice(a,h+1),function(e){v.each(t.predecessors(e),function(i){var o=t.node(i),a=o.order;!(a<r||d<a)||o.dummy&&t.node(e).dummy||s(n,i,e)})}),a=h+1,r=d)}),i}var n={};return v.reduce(e,i),n}function r(t,e){function i(e,i,n,o,a){var l;v.each(v.range(i,n),function(i){l=e[i],t.node(l).dummy&&v.each(t.predecessors(l),function(e){var i=t.node(e);i.dummy&&(i.order<o||i.order>a)&&s(r,e,l)})})}function n(e,n){var r,o=-1,s=0;return v.each(n,function(a,l){if("border"===t.node(a).dummy){var c=t.predecessors(a);c.length&&(r=t.node(c[0]).order,i(n,s,l,o,r),s=l,o=r)}i(n,s,n.length,r,e.length)}),n}var r={};return v.reduce(e,n),r}function o(t,e){if(t.node(e).dummy)return v.find(t.predecessors(e),function(e){return t.node(e).dummy})}function s(t,e,i){if(e>i){var n=e;e=i,i=n}var r=t[e];r||(t[e]=r={}),r[i]=!0}function a(t,e,i){if(e>i){var n=e;e=i,i=n}return v.has(t[e],i)}function l(t,e,i,n){var r={},o={},s={};return v.each(e,function(t){v.each(t,function(t,e){r[t]=t,o[t]=t,s[t]=e})}),v.each(e,function(t){var e=-1;v.each(t,function(t){var l=n(t);if(l.length){l=v.sortBy(l,function(t){return s[t]});for(var c=(l.length-1)/2,h=Math.floor(c),u=Math.ceil(c);h<=u;++h){var d=l[h];o[t]===t&&e<s[d]&&!a(i,t,d)&&(o[d]=t,o[t]=r[t]=r[d],e=s[d])}}})}),{root:r,align:o}}function c(t,e,i,n,r){function o(t){v.has(c,t)||(c[t]=!0,a[t]=v.reduce(l.inEdges(t),function(t,e){return o(e.v),Math.max(t,a[e.v]+l.edge(e))},0))}function s(e){if(2!==c[e]){c[e]++;var i=t.node(e),n=v.reduce(l.outEdges(e),function(t,e){return s(e.w),Math.min(t,a[e.w]-l.edge(e))},Number.POSITIVE_INFINITY);n!==Number.POSITIVE_INFINITY&&i.borderType!==u&&(a[e]=Math.max(a[e],n))}}var a={},l=h(t,e,i,r),c={};v.each(l.nodes(),o);var u=r?"borderLeft":"borderRight";return v.each(l.nodes(),s),v.each(n,function(t){a[t]=a[i[t]]}),a}function h(t,e,i,n){var r=new y,o=t.graph(),s=g(o.nodesep,o.edgesep,n);return v.each(e,function(e){var n;v.each(e,function(e){var o=i[e];if(r.setNode(o),n){var a=i[n],l=r.edge(a,o);r.setEdge(a,o,Math.max(s(t,e,n),l||0))}n=e})}),r}function u(t,e){return v.min(e,function(e){var i=v.min(e,function(e,i){return e-m(t,i)/2});return v.max(e,function(e,i){return e+m(t,i)/2})-i})}function d(t,e){var i=v.min(e),n=v.max(e);v.each(["u","d"],function(r){v.each(["l","r"],function(o){var s,a=r+o,l=t[a];l!==e&&(s="l"===o?i-v.min(l):n-v.max(l))&&(t[a]=v.mapValues(l,function(t){return t+s}))})})}function p(t,e){return v.mapValues(t.ul,function(i,n){if(e)return t[e.toLowerCase()][n];var r=v.sortBy(v.pluck(t,n));return(r[1]+r[2])/2})}function f(t){var e,i=b.buildLayerMatrix(t),o=v.merge(n(t,i),r(t,i)),s={};v.each(["u","d"],function(n){e="u"===n?i:v.values(i).reverse(),v.each(["l","r"],function(i){"r"===i&&(e=v.map(e,function(t){return v.values(t).reverse()}));var r=v.bind("u"===n?t.predecessors:t.successors,t),a=l(t,e,o,r),h=c(t,e,a.root,a.align,"r"===i);"r"===i&&(h=v.mapValues(h,function(t){return-t})),s[n+i]=h})});var a=u(t,s);return d(s,a),p(s,t.graph().align)}function g(t,e,i){return function(n,r,o){var s,a=n.node(r),l=n.node(o),c=0;if(c+=a.width/2,v.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":s=-a.width/2;break;case"r":s=a.width/2}if(s&&(c+=i?s:-s),s=0,c+=(a.dummy?e:t)/2,c+=(l.dummy?e:t)/2,c+=l.width/2,v.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2}return s&&(c+=i?s:-s),s=0,c}}function m(t,e){return t.node(e).width}var v=t("../lodash"),y=t("../graphlib").Graph,b=t("../util");e.exports={positionX:f,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:a,verticalAlignment:l,horizontalCompaction:c,alignCoordinates:d,findSmallestWidthAlignment:u,balance:p}},{"../graphlib":8,"../lodash":11,"../util":30}],25:[function(t,e,i){"use strict";function n(t){t=s.asNonCompoundGraph(t),r(t),o.each(a(t),function(e,i){t.node(i).x=e})}function r(t){var e=s.buildLayerMatrix(t),i=t.graph().ranksep,n=0;o.each(e,function(e){var r=o.max(o.map(e,function(e){return t.node(e).height}));o.each(e,function(e){t.node(e).y=n+r/2}),n+=r+i})}var o=t("../lodash"),s=t("../util"),a=t("./bk").positionX;e.exports=n},{"../lodash":11,"../util":30,"./bk":24}],26:[function(t,e,i){"use strict";function n(t){var e=new l({directed:!1}),i=t.nodes()[0],n=t.nodeCount();e.setNode(i,{});for(var a,h;r(e,t)<n;)a=o(e,t),h=e.hasNode(a.v)?c(t,a):-c(t,a),s(e,t,h);return e}function r(t,e){function i(n){a.each(e.nodeEdges(n),function(r){var o=r.v,s=n===o?r.w:o;t.hasNode(s)||c(e,r)||(t.setNode(s,{}),t.setEdge(n,s,{}),i(s))})}return a.each(t.nodes(),i),t.nodeCount()}function o(t,e){return a.min(e.edges(),function(i){if(t.hasNode(i.v)!==t.hasNode(i.w))return c(e,i)})}function s(t,e,i){a.each(t.nodes(),function(t){e.node(t).rank+=i})}var a=t("../lodash"),l=t("../graphlib").Graph,c=t("./util").slack;e.exports=n},{"../graphlib":8,"../lodash":11,"./util":29}],27:[function(t,e,i){"use strict";function n(t){switch(t.graph().ranker){case"network-simplex":o(t);break;case"tight-tree":r(t);break;case"longest-path":h(t);break;default:o(t)}}function r(t){a(t),l(t)}function o(t){c(t)}var s=t("./util"),a=s.longestPath,l=t("./feasible-tree"),c=t("./network-simplex");e.exports=n;var h=a},{"./feasible-tree":26,"./network-simplex":28,"./util":29}],28:[function(t,e,i){"use strict";function n(t){t=x(t),y(t);var e=m(t);a(e),r(e,t);for(var i,n;i=c(e);)n=h(e,t,i),u(e,t,i,n)}function r(t,e){var i=I(t,t.nodes());i=i.slice(0,i.length-1),g.each(i,function(i){o(t,e,i)})}function o(t,e,i){var n=t.node(i),r=n.parent;t.edge(i,r).cutvalue=s(t,e,i)}function s(t,e,i){var n=t.node(i),r=n.parent,o=!0,s=e.edge(i,r),a=0;return s||(o=!1,s=e.edge(r,i)),a=s.weight,g.each(e.nodeEdges(i),function(n){var s=n.v===i,l=s?n.w:n.v;if(l!==r){var c=s===o,h=e.edge(n).weight;if(a+=c?h:-h,p(t,i,l)){var u=t.edge(i,l).cutvalue;a+=c?-u:u}}}),a}function a(t,e){arguments.length<2&&(e=t.nodes()[0]),l(t,{},1,e)}function l(t,e,i,n,r){var o=i,s=t.node(n);return e[n]=!0,g.each(t.neighbors(n),function(r){g.has(e,r)||(i=l(t,e,i,r,n))}),s.low=o,s.lim=i++,r?s.parent=r:delete s.parent,i}function c(t){return g.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function h(t,e,i){var n=i.v,r=i.w;e.hasEdge(n,r)||(n=i.w,r=i.v);var o=t.node(n),s=t.node(r),a=o,l=!1;o.lim>s.lim&&(a=s,l=!0);var c=g.filter(e.edges(),function(e){return l===f(t,t.node(e.v),a)&&l!==f(t,t.node(e.w),a)});return g.min(c,function(t){return v(e,t)})}function u(t,e,i,n){var o=i.v,s=i.w;t.removeEdge(o,s),t.setEdge(n.v,n.w,{}),a(t),r(t,e),d(t,e)}function d(t,e){var i=g.find(t.nodes(),function(t){return!e.node(t).parent}),n=b(t,i);n=n.slice(1),g.each(n,function(i){var n=t.node(i).parent,r=e.edge(i,n),o=!1;r||(r=e.edge(n,i),o=!0),e.node(i).rank=e.node(n).rank+(o?r.minlen:-r.minlen)})}function p(t,e,i){return t.hasEdge(e,i)}function f(t,e,i){return i.low<=e.lim&&e.lim<=i.lim}var g=t("../lodash"),m=t("./feasible-tree"),v=t("./util").slack,y=t("./util").longestPath,b=t("../graphlib").alg.preorder,I=t("../graphlib").alg.postorder,x=t("../util").simplify;e.exports=n,n.initLowLimValues=a,n.initCutValues=r,n.calcCutValue=s,n.leaveEdge=c,n.enterEdge=h,n.exchangeEdges=u},{"../graphlib":8,"../lodash":11,"../util":30,"./feasible-tree":26,"./util":29}],29:[function(t,e,i){"use strict";function n(t){function e(n){var r=t.node(n);if(o.has(i,n))return r.rank;i[n]=!0;var s=o.min(o.map(t.outEdges(n),function(i){return e(i.w)-t.edge(i).minlen}));return s===Number.POSITIVE_INFINITY&&(s=0),r.rank=s}var i={};o.each(t.sources(),e)}function r(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var o=t("../lodash");e.exports={longestPath:n,slack:r}},{"../lodash":11}],30:[function(t,e,i){"use strict";function n(t,e,i,n){var r;do{r=v.uniqueId(n)}while(t.hasNode(r));return i.dummy=e,t.setNode(r,i),r}function r(t){var e=(new y).setGraph(t.graph());return v.each(t.nodes(),function(i){e.setNode(i,t.node(i))}),v.each(t.edges(),function(i){var n=e.edge(i.v,i.w)||{weight:0,minlen:1},r=t.edge(i);e.setEdge(i.v,i.w,{weight:n.weight+r.weight,minlen:Math.max(n.minlen,r.minlen)})}),e}function o(t){var e=new y({multigraph:t.isMultigraph()}).setGraph(t.graph());return v.each(t.nodes(),function(i){t.children(i).length||e.setNode(i,t.node(i))}),v.each(t.edges(),function(i){e.setEdge(i,t.edge(i))}),e}function s(t){var e=v.map(t.nodes(),function(e){var i={};return v.each(t.outEdges(e),function(e){i[e.w]=(i[e.w]||0)+t.edge(e).weight}),i});return v.zipObject(t.nodes(),e)}function a(t){var e=v.map(t.nodes(),function(e){var i={};return v.each(t.inEdges(e),function(e){i[e.v]=(i[e.v]||0)+t.edge(e).weight}),i});return v.zipObject(t.nodes(),e)}function l(t,e){var i=t.x,n=t.y,r=e.x-i,o=e.y-n,s=t.width/2,a=t.height/2;if(!r&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var l,c;return Math.abs(o)*s>Math.abs(r)*a?(o<0&&(a=-a),l=a*r/o,c=a):(r<0&&(s=-s),l=s,c=s*o/r),{x:i+l,y:n+c}}function c(t){var e=v.map(v.range(p(t)+1),function(){return[]});return v.each(t.nodes(),function(i){var n=t.node(i),r=n.rank;v.isUndefined(r)||(e[r][n.order]=i)}),e}function h(t){var e=v.min(v.map(t.nodes(),function(e){return t.node(e).rank}));v.each(t.nodes(),function(i){var n=t.node(i);v.has(n,"rank")&&(n.rank-=e)})}function u(t){var e=v.min(v.map(t.nodes(),function(e){return t.node(e).rank})),i=[];v.each(t.nodes(),function(n){var r=t.node(n).rank-e;i[r]||(i[r]=[]),i[r].push(n)});var n=0,r=t.graph().nodeRankFactor;v.each(i,function(e,i){v.isUndefined(e)&&i%r!=0?--n:n&&v.each(e,function(e){t.node(e).rank+=n})})}function d(t,e,i,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=i,o.order=r),n(t,"border",o,e)}function p(t){return v.max(v.map(t.nodes(),function(e){var i=t.node(e).rank;if(!v.isUndefined(i))return i}))}function f(t,e){var i={lhs:[],rhs:[]};return v.each(t,function(t){e(t)?i.lhs.push(t):i.rhs.push(t)}),i}function g(t,e){var i=v.now();try{return e()}finally{console.log(t+" time: "+(v.now()-i)+"ms")}}function m(t,e){return e()}var v=t("./lodash"),y=t("./graphlib").Graph;e.exports={addDummyNode:n,simplify:r,asNonCompoundGraph:o,successorWeights:s,predecessorWeights:a,intersectRect:l,buildLayerMatrix:c,normalizeRanks:h,removeEmptyRanks:u,addBorderNode:d,maxRank:p,partition:f,time:g,notime:m}},{"./graphlib":8,"./lodash":11}],31:[function(t,e,i){e.exports="0.7.4"},{}],32:[function(t,e,i){var n=t("./lib");e.exports={Graph:n.Graph,json:t("./lib/json"),alg:t("./lib/alg"),version:n.version}},{"./lib":48,"./lib/alg":39,"./lib/json":49}],33:[function(t,e,i){function n(t){function e(o){r.has(n,o)||(n[o]=!0,i.push(o),r.each(t.successors(o),e),r.each(t.predecessors(o),e))}var i,n={},o=[];return r.each(t.nodes(),function(t){i=[],e(t),i.length&&o.push(i)}),o}var r=t("../lodash");e.exports=n},{"../lodash":50}],34:[function(t,e,i){function n(t,e,i){o.isArray(e)||(e=[e]);var n=[],s={};return o.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);r(t,e,"post"===i,s,n)}),n}function r(t,e,i,n,s){o.has(n,e)||(n[e]=!0,i||s.push(e),o.each(t.neighbors(e),function(e){r(t,e,i,n,s)}),i&&s.push(e))}var o=t("../lodash");e.exports=n},{"../lodash":50}],35:[function(t,e,i){function n(t,e,i){return o.transform(t.nodes(),function(n,o){n[o]=r(t,o,e,i)},{})}var r=t("./dijkstra"),o=t("../lodash");e.exports=n},{"../lodash":50,"./dijkstra":36}],36:[function(t,e,i){function n(t,e,i,n){return r(t,String(e),i||a,n||function(e){return t.outEdges(e)})}function r(t,e,i,n){var r,o,a={},l=new s,c=function(t){var e=t.v!==r?t.v:t.w,n=a[e],s=i(t),c=o.distance+s;if(s<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+s);c<n.distance&&(n.distance=c,n.predecessor=r,l.decrease(e,c))};for(t.nodes().forEach(function(t){var i=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:i},l.add(t,i)});l.size()>0&&(r=l.removeMin(),o=a[r],o.distance!==Number.POSITIVE_INFINITY);)n(r).forEach(c);return a}var o=t("../lodash"),s=t("../data/priority-queue");e.exports=n;var a=o.constant(1)},{"../data/priority-queue":46,"../lodash":50}],37:[function(t,e,i){function n(t){return r.filter(o(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}var r=t("../lodash"),o=t("./tarjan");e.exports=n},{"../lodash":50,"./tarjan":44}],38:[function(t,e,i){function n(t,e,i){return r(t,e||s,i||function(e){return t.outEdges(e)})}function r(t,e,i){var n={},r=t.nodes();return r.forEach(function(t){n[t]={},n[t][t]={distance:0},r.forEach(function(e){t!==e&&(n[t][e]={distance:Number.POSITIVE_INFINITY})}),i(t).forEach(function(i){var r=i.v===t?i.w:i.v,o=e(i);n[t][r]={distance:o,predecessor:t}})}),r.forEach(function(t){var e=n[t];r.forEach(function(i){var o=n[i];r.forEach(function(i){var n=o[t],r=e[i],s=o[i],a=n.distance+r.distance;a<s.distance&&(s.distance=a,s.predecessor=r.predecessor)})})}),n}var o=t("../lodash");e.exports=n;var s=o.constant(1)},{"../lodash":50}],39:[function(t,e,i){e.exports={components:t("./components"),dijkstra:t("./dijkstra"),dijkstraAll:t("./dijkstra-all"),findCycles:t("./find-cycles"),floydWarshall:t("./floyd-warshall"),isAcyclic:t("./is-acyclic"),postorder:t("./postorder"),preorder:t("./preorder"),prim:t("./prim"),tarjan:t("./tarjan"),topsort:t("./topsort")}},{"./components":33,"./dijkstra":36,"./dijkstra-all":35,"./find-cycles":37,"./floyd-warshall":38,"./is-acyclic":40,"./postorder":41,"./preorder":42,"./prim":43,"./tarjan":44,"./topsort":45}],40:[function(t,e,i){function n(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}var r=t("./topsort");e.exports=n},{"./topsort":45}],41:[function(t,e,i){function n(t,e){return r(t,e,"post")}var r=t("./dfs");e.exports=n},{"./dfs":34}],42:[function(t,e,i){function n(t,e){return r(t,e,"pre")}var r=t("./dfs");e.exports=n},{"./dfs":34}],43:[function(t,e,i){function n(t,e){function i(t){var i=t.v===n?t.w:t.v,r=c.priority(i);if(void 0!==r){var o=e(t);o<r&&(l[i]=n,c.decrease(i,o))}}var n,a=new o,l={},c=new s;if(0===t.nodeCount())return a;r.each(t.nodes(),function(t){c.add(t,Number.POSITIVE_INFINITY),a.setNode(t)}),c.decrease(t.nodes()[0],0);for(var h=!1;c.size()>0;){if(n=c.removeMin(),r.has(l,n))a.setEdge(n,l[n]);else{if(h)throw new Error("Input graph is not connected: "+t);h=!0}t.nodeEdges(n).forEach(i)}return a}var r=t("../lodash"),o=t("../graph"),s=t("../data/priority-queue");e.exports=n},{"../data/priority-queue":46,"../graph":47,"../lodash":50}],44:[function(t,e,i){function n(t){function e(a){var l=o[a]={onStack:!0,lowlink:i,index:i++};if(n.push(a),t.successors(a).forEach(function(t){r.has(o,t)?o[t].onStack&&(l.lowlink=Math.min(l.lowlink,o[t].index)):(e(t),l.lowlink=Math.min(l.lowlink,o[t].lowlink))}),l.lowlink===l.index){var c,h=[];do{c=n.pop(),o[c].onStack=!1,h.push(c)}while(a!==c);s.push(h)}}var i=0,n=[],o={},s=[];return t.nodes().forEach(function(t){r.has(o,t)||e(t)}),s}var r=t("../lodash");e.exports=n},{"../lodash":50}],45:[function(t,e,i){function n(t){function e(a){if(o.has(n,a))throw new r;o.has(i,a)||(n[a]=!0,i[a]=!0,o.each(t.predecessors(a),e),delete n[a],s.push(a))}var i={},n={},s=[];if(o.each(t.sinks(),e),o.size(i)!==t.nodeCount())throw new r;return s}function r(){}var o=t("../lodash");e.exports=n,n.CycleException=r},{"../lodash":50}],46:[function(t,e,i){function n(){this._arr=[],this._keyIndices={}}var r=t("../lodash");e.exports=n,n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(t){return t.key})},n.prototype.has=function(t){return r.has(this._keyIndices,t)},n.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},n.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(t,e){var i=this._keyIndices;if(t=String(t),!r.has(i,t)){var n=this._arr,o=n.length;return i[t]=o,n.push({key:t,priority:e}),this._decrease(o),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},n.prototype.decrease=function(t,e){var i=this._keyIndices[t];if(e>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+e);this._arr[i].priority=e,this._decrease(i)},n.prototype._heapify=function(t){var e=this._arr,i=2*t,n=i+1,r=t;i<e.length&&(r=e[i].priority<e[r].priority?i:r,n<e.length&&(r=e[n].priority<e[r].priority?n:r),r!==t&&(this._swap(t,r),this._heapify(r)))},n.prototype._decrease=function(t){for(var e,i=this._arr,n=i[t].priority;0!==t&&(e=t>>1,!(i[e].priority<n));)this._swap(t,e),t=e},n.prototype._swap=function(t,e){var i=this._arr,n=this._keyIndices,r=i[t],o=i[e];i[t]=o,i[e]=r,n[o.key]=t,n[r.key]=e}},{"../lodash":50}],47:[function(t,e,i){"use strict";function n(t){this._isDirected=!c.has(t,"directed")||t.directed,this._isMultigraph=!!c.has(t,"multigraph")&&t.multigraph,this._isCompound=!!c.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[u]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function r(t,e){t[e]?t[e]++:t[e]=1}function o(t,e){--t[e]||delete t[e]}function s(t,e,i,n){var r=""+e,o=""+i;if(!t&&r>o){var s=r;r=o,o=s}return r+d+o+d+(c.isUndefined(n)?h:n)}function a(t,e,i,n){var r=""+e,o=""+i;if(!t&&r>o){var s=r;r=o,o=s}var a={v:r,w:o};return n&&(a.name=n),a}function l(t,e){return s(t,e.v,e.w,e.name)}var c=t("./lodash");e.exports=n;var h="\0",u="\0",d="";n.prototype._nodeCount=0,n.prototype._edgeCount=0,n.prototype.isDirected=function(){return this._isDirected},n.prototype.isMultigraph=function(){return this._isMultigraph},n.prototype.isCompound=function(){return this._isCompound},n.prototype.setGraph=function(t){return this._label=t,this},n.prototype.graph=function(){return this._label},n.prototype.setDefaultNodeLabel=function(t){return c.isFunction(t)||(t=c.constant(t)),this._defaultNodeLabelFn=t,this},n.prototype.nodeCount=function(){return this._nodeCount},n.prototype.nodes=function(){return c.keys(this._nodes)},n.prototype.sources=function(){return c.filter(this.nodes(),function(t){return c.isEmpty(this._in[t])},this)},n.prototype.sinks=function(){return c.filter(this.nodes(),function(t){return c.isEmpty(this._out[t])},this)},n.prototype.setNodes=function(t,e){var i=arguments;return c.each(t,function(t){i.length>1?this.setNode(t,e):this.setNode(t)},this),this},n.prototype.setNode=function(t,e){return c.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=u,this._children[t]={},this._children[u][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},n.prototype.node=function(t){return this._nodes[t]},n.prototype.hasNode=function(t){return c.has(this._nodes,t)},n.prototype.removeNode=function(t){var e=this;if(c.has(this._nodes,t)){var i=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],c.each(this.children(t),function(t){this.setParent(t)},this),delete this._children[t]),c.each(c.keys(this._in[t]),i),delete this._in[t],delete this._preds[t],c.each(c.keys(this._out[t]),i),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},n.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(e))e=u;else{e+="";for(var i=e;!c.isUndefined(i);i=this.parent(i))if(i===t)throw new Error("Setting "+e+" as parent of "+t+" would create create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},n.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},n.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==u)return e}},n.prototype.children=function(t){if(c.isUndefined(t)&&(t=u),this._isCompound){var e=this._children[t];if(e)return c.keys(e)}else{if(t===u)return this.nodes();if(this.hasNode(t))return[]}},n.prototype.predecessors=function(t){var e=this._preds[t];if(e)return c.keys(e)},n.prototype.successors=function(t){var e=this._sucs[t];if(e)return c.keys(e)},n.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return c.union(e,this.successors(t))},
n.prototype.filterNodes=function(t){function e(t){var o=n.parent(t);return void 0===o||i.hasNode(o)?(r[t]=o,o):o in r?r[o]:e(o)}var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});i.setGraph(this.graph()),c.each(this._nodes,function(e,n){t(n)&&i.setNode(n,e)},this),c.each(this._edgeObjs,function(t){i.hasNode(t.v)&&i.hasNode(t.w)&&i.setEdge(t,this.edge(t))},this);var n=this,r={};return this._isCompound&&c.each(i.nodes(),function(t){i.setParent(t,e(t))}),i},n.prototype.setDefaultEdgeLabel=function(t){return c.isFunction(t)||(t=c.constant(t)),this._defaultEdgeLabelFn=t,this},n.prototype.edgeCount=function(){return this._edgeCount},n.prototype.edges=function(){return c.values(this._edgeObjs)},n.prototype.setPath=function(t,e){var i=this,n=arguments;return c.reduce(t,function(t,r){return n.length>1?i.setEdge(t,r,e):i.setEdge(t,r),r}),this},n.prototype.setEdge=function(){var t,e,i,n,o=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(t=l.v,e=l.w,i=l.name,2===arguments.length&&(n=arguments[1],o=!0)):(t=l,e=arguments[1],i=arguments[3],arguments.length>2&&(n=arguments[2],o=!0)),t=""+t,e=""+e,c.isUndefined(i)||(i=""+i);var h=s(this._isDirected,t,e,i);if(c.has(this._edgeLabels,h))return o&&(this._edgeLabels[h]=n),this;if(!c.isUndefined(i)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[h]=o?n:this._defaultEdgeLabelFn(t,e,i);var u=a(this._isDirected,t,e,i);return t=u.v,e=u.w,Object.freeze(u),this._edgeObjs[h]=u,r(this._preds[e],t),r(this._sucs[t],e),this._in[e][h]=u,this._out[t][h]=u,this._edgeCount++,this},n.prototype.edge=function(t,e,i){var n=1===arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,t,e,i);return this._edgeLabels[n]},n.prototype.hasEdge=function(t,e,i){var n=1===arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,t,e,i);return c.has(this._edgeLabels,n)},n.prototype.removeEdge=function(t,e,i){var n=1===arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,t,e,i),r=this._edgeObjs[n];return r&&(t=r.v,e=r.w,delete this._edgeLabels[n],delete this._edgeObjs[n],o(this._preds[e],t),o(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},n.prototype.inEdges=function(t,e){var i=this._in[t];if(i){var n=c.values(i);return e?c.filter(n,function(t){return t.v===e}):n}},n.prototype.outEdges=function(t,e){var i=this._out[t];if(i){var n=c.values(i);return e?c.filter(n,function(t){return t.w===e}):n}},n.prototype.nodeEdges=function(t,e){var i=this.inEdges(t,e);if(i)return i.concat(this.outEdges(t,e))}},{"./lodash":50}],48:[function(t,e,i){e.exports={Graph:t("./graph"),version:t("./version")}},{"./graph":47,"./version":51}],49:[function(t,e,i){function n(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:r(t),edges:o(t)};return a.isUndefined(t.graph())||(e.value=a.clone(t.graph())),e}function r(t){return a.map(t.nodes(),function(e){var i=t.node(e),n=t.parent(e),r={v:e};return a.isUndefined(i)||(r.value=i),a.isUndefined(n)||(r.parent=n),r})}function o(t){return a.map(t.edges(),function(e){var i=t.edge(e),n={v:e.v,w:e.w};return a.isUndefined(e.name)||(n.name=e.name),a.isUndefined(i)||(n.value=i),n})}function s(t){var e=new l(t.options).setGraph(t.value);return a.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),a.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var a=t("./lodash"),l=t("./graph");e.exports={write:n,read:s}},{"./graph":47,"./lodash":50}],50:[function(t,e,i){arguments[4][11][0].apply(i,arguments)},{dup:11,lodash:"lodash"}],51:[function(t,e,i){e.exports="1.0.7"},{}],52:[function(t,e,i){!function(t,i){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t,e,i){e=e||st;var n,r=e.createElement("script");if(r.text=t,i)for(n in It)i[n]&&(r[n]=i[n]);e.head.appendChild(r).parentNode.removeChild(r)}function n(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?dt[pt.call(t)]||"object":typeof t}function r(t){var e=!!t&&"length"in t&&t.length,i=n(t);return!yt(t)&&!bt(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function o(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function s(t,e,i){return yt(e)?xt.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?xt.grep(t,function(t){return t===e!==i}):"string"!=typeof e?xt.grep(t,function(t){return ut.call(e,t)>-1!==i}):xt.filter(e,t,i)}function a(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function l(t){var e={};return xt.each(t.match(zt)||[],function(t,i){e[i]=!0}),e}function c(t){return t}function h(t){throw t}function u(t,e,i,n){var r;try{t&&yt(r=t.promise)?r.call(t).done(e).fail(i):t&&yt(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}function d(){st.removeEventListener("DOMContentLoaded",d),t.removeEventListener("load",d),xt.ready()}function p(t,e){return e.toUpperCase()}function f(t){return t.replace(Pt,"ms-").replace(Gt,p)}function g(){this.expando=xt.expando+g.uid++}function m(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Rt.test(t)?JSON.parse(t):t)}function v(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Wt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=m(i)}catch(t){}_t.set(t,e,i)}else i=void 0;return i}function y(t,e,i,n){var r,o,s=20,a=n?function(){return n.cur()}:function(){return xt.css(t,e,"")},l=a(),c=i&&i[3]||(xt.cssNumber[e]?"":"px"),h=(xt.cssNumber[e]||"px"!==c&&+l)&&Vt.exec(xt.css(t,e));if(h&&h[3]!==c){for(l/=2,c=c||h[3],h=+l||1;s--;)xt.style(t,e,h+c),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),h/=o;h*=2,xt.style(t,e,h+c),i=i||[]}return i&&(h=+h||+l||0,r=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=r)),r}function b(t){var e,i=t.ownerDocument,n=t.nodeName,r=Ft[n];return r||(e=i.body.appendChild(i.createElement(n)),r=xt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Ft[n]=r,r)}function I(t,e){for(var i,n,r=[],o=0,s=t.length;o<s;o++)n=t[o],n.style&&(i=n.style.display,e?("none"===i&&(r[o]=Zt.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&Xt(n)&&(r[o]=b(n))):"none"!==i&&(r[o]="none",Zt.set(n,"display",i)));for(o=0;o<s;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function x(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&o(t,e)?xt.merge([t],i):i}function C(t,e){for(var i=0,n=t.length;i<n;i++)Zt.set(t[i],"globalEval",!e||Zt.get(e[i],"globalEval"))}function w(t,e,i,r,o){for(var s,a,l,c,h,u,d=e.createDocumentFragment(),p=[],f=0,g=t.length;f<g;f++)if((s=t[f])||0===s)if("object"===n(s))xt.merge(p,s.nodeType?[s]:s);else if(qt.test(s)){for(a=a||d.appendChild(e.createElement("div")),l=($t.exec(s)||["",""])[1].toLowerCase(),c=Kt[l]||Kt._default,a.innerHTML=c[1]+xt.htmlPrefilter(s)+c[2],u=c[0];u--;)a=a.lastChild;xt.merge(p,a.childNodes),a=d.firstChild,a.textContent=""}else p.push(e.createTextNode(s));for(d.textContent="",f=0;s=p[f++];)if(r&&xt.inArray(s,r)>-1)o&&o.push(s);else if(h=xt.contains(s.ownerDocument,s),a=x(d.appendChild(s),"script"),h&&C(a),i)for(u=0;s=a[u++];)Qt.test(s.type||"")&&i.push(s);return d}function A(){return!0}function M(){return!1}function N(){try{return st.activeElement}catch(t){}}function k(t,e,i,n,r,o){var s,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(a in e)k(t,a,i,n,e[a],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=M;else if(!r)return t;return 1===o&&(s=r,r=function(t){return xt().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=xt.guid++)),t.each(function(){xt.event.add(this,e,r,n,i)})}function S(t,e){return o(t,"table")&&o(11!==e.nodeType?e:e.firstChild,"tr")?xt(t).children("tbody")[0]||t:t}function T(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function D(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function j(t,e){var i,n,r,o,s,a,l,c;if(1===e.nodeType){if(Zt.hasData(t)&&(o=Zt.access(t),s=Zt.set(e,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(i=0,n=c[r].length;i<n;i++)xt.event.add(e,r,c[r][i])}_t.hasData(t)&&(a=_t.access(t),l=xt.extend({},a),_t.set(e,l))}}function z(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Jt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function E(t,e,n,r){e=ct.apply([],e);var o,s,a,l,c,h,u=0,d=t.length,p=d-1,f=e[0],g=yt(f);if(g||d>1&&"string"==typeof f&&!vt.checkClone&&se.test(f))return t.each(function(i){var o=t.eq(i);g&&(e[0]=f.call(this,i,o.html())),E(o,e,n,r)});if(d&&(o=w(e,t[0].ownerDocument,!1,t,r),s=o.firstChild,1===o.childNodes.length&&(o=s),s||r)){for(a=xt.map(x(o,"script"),T),l=a.length;u<d;u++)c=o,u!==p&&(c=xt.clone(c,!0,!0),l&&xt.merge(a,x(c,"script"))),n.call(t[u],c,u);if(l)for(h=a[a.length-1].ownerDocument,xt.map(a,D),u=0;u<l;u++)c=a[u],Qt.test(c.type||"")&&!Zt.access(c,"globalEval")&&xt.contains(h,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?xt._evalUrl&&xt._evalUrl(c.src):i(c.textContent.replace(ae,""),h,c))}return t}function L(t,e,i){for(var n,r=e?xt.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||xt.cleanData(x(n)),n.parentNode&&(i&&xt.contains(n.ownerDocument,n)&&C(x(n,"script")),n.parentNode.removeChild(n));return t}function B(t,e,i){var n,r,o,s,a=t.style;return i=i||ce(t),i&&(s=i.getPropertyValue(e)||i[e],""!==s||xt.contains(t.ownerDocument,t)||(s=xt.style(t,e)),!vt.pixelBoxStyles()&&le.test(s)&&he.test(e)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function P(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function G(t){if(t in me)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=ge.length;i--;)if((t=ge[i]+e)in me)return t}function O(t){var e=xt.cssProps[t];return e||(e=xt.cssProps[t]=G(t)||t),e}function Z(t,e,i){var n=Vt.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function _(t,e,i,n,r,o){var s="width"===e?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=xt.css(t,i+Ut[s],!0,r)),n?("content"===i&&(l-=xt.css(t,"padding"+Ut[s],!0,r)),"margin"!==i&&(l-=xt.css(t,"border"+Ut[s]+"Width",!0,r))):(l+=xt.css(t,"padding"+Ut[s],!0,r),"padding"!==i?l+=xt.css(t,"border"+Ut[s]+"Width",!0,r):a+=xt.css(t,"border"+Ut[s]+"Width",!0,r));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))),l}function R(t,e,i){var n=ce(t),r=B(t,e,n),o="border-box"===xt.css(t,"boxSizing",!1,n),s=o;if(le.test(r)){if(!i)return r;r="auto"}return s=s&&(vt.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===xt.css(t,"display",!1,n))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(r=parseFloat(r)||0)+_(t,e,i||(o?"border":"content"),s,n,r)+"px"}function W(t,e,i,n,r){return new W.prototype.init(t,e,i,n,r)}function Y(){ye&&(!1===st.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(Y):t.setTimeout(Y,xt.fx.interval),xt.fx.tick())}function V(){return t.setTimeout(function(){ve=void 0}),ve=Date.now()}function U(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)i=Ut[n],r["margin"+i]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function X(t,e,i){for(var n,r=(J.tweeners[e]||[]).concat(J.tweeners["*"]),o=0,s=r.length;o<s;o++)if(n=r[o].call(i,e,t))return n}function H(t,e,i){var n,r,o,s,a,l,c,h,u="width"in e||"height"in e,d=this,p={},f=t.style,g=t.nodeType&&Xt(t),m=Zt.get(t,"fxshow");i.queue||(s=xt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,xt.queue(t,"fx").length||s.empty.fire()})}));for(n in e)if(r=e[n],be.test(r)){if(delete e[n],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;g=!0}p[n]=m&&m[n]||xt.style(t,n)}if((l=!xt.isEmptyObject(e))||!xt.isEmptyObject(p)){u&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],c=m&&m.display,null==c&&(c=Zt.get(t,"display")),h=xt.css(t,"display"),"none"===h&&(c?h=c:(I([t],!0),c=t.style.display||c,h=xt.css(t,"display"),I([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===xt.css(t,"float")&&(l||(d.done(function(){f.display=c}),null==c&&(h=f.display,c="none"===h?"":h)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1;for(n in p)l||(m?"hidden"in m&&(g=m.hidden):m=Zt.access(t,"fxshow",{display:c}),o&&(m.hidden=!g),g&&I([t],!0),d.done(function(){g||I([t]),Zt.remove(t,"fxshow");for(n in p)xt.style(t,n,p[n])})),l=X(g?m[n]:0,n,d),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}}function F(t,e){var i,n,r,o,s;for(i in t)if(n=f(i),r=e[n],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(s=xt.cssHooks[n])&&"expand"in s){o=s.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=r)}else e[n]=r}function J(t,e,i){var n,r,o=0,s=J.prefilters.length,a=xt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ve||V(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,o=1-n,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,i]),o<1&&l?i:(l||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:xt.extend({},e),opts:xt.extend(!0,{specialEasing:{},easing:xt.easing._default},i),originalProperties:e,originalOptions:i,startTime:ve||V(),duration:i.duration,tweens:[],createTween:function(e,i){var n=xt.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),h=c.props;for(F(h,c.opts.specialEasing);o<s;o++)if(n=J.prefilters[o].call(c,t,h,c.opts))return yt(n.stop)&&(xt._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return xt.map(h,X,c),yt(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),xt.fx.timer(xt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}function $(t){return(t.match(zt)||[]).join(" ")}function Q(t){return t.getAttribute&&t.getAttribute("class")||""}function K(t){return Array.isArray(t)?t:"string"==typeof t?t.match(zt)||[]:[]}function q(t,e,i,r){var o;if(Array.isArray(e))xt.each(e,function(e,n){i||je.test(t)?r(t,n):q(t+"["+("object"==typeof n&&null!=n?e:"")+"]",n,i,r)});else if(i||"object"!==n(e))r(t,e);else for(o in e)q(t+"["+o+"]",e[o],i,r)}function tt(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(zt)||[];if(yt(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function et(t,e,i,n){function r(a){var l;return o[a]=!0,xt.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=t===Ye;return r(e.dataTypes[0])||!o["*"]&&r("*")}function it(t,e){var i,n,r=xt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&xt.extend(!0,t,n),t}function nt(t,e,i){for(var n,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}function rt(t,e,i,n){var r,o,s,a,l,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var ot=[],st=t.document,at=Object.getPrototypeOf,lt=ot.slice,ct=ot.concat,ht=ot.push,ut=ot.indexOf,dt={},pt=dt.toString,ft=dt.hasOwnProperty,gt=ft.toString,mt=gt.call(Object),vt={},yt=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},bt=function(t){return null!=t&&t===t.window},It={type:!0,src:!0,noModule:!0},xt=function(t,e){return new xt.fn.init(t,e)},Ct=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;xt.fn=xt.prototype={jquery:"3.3.1",constructor:xt,length:0,toArray:function(){return lt.call(this)},get:function(t){return null==t?lt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=xt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return xt.each(this,t)},map:function(t){return this.pushStack(xt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(lt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ht,sort:ot.sort,splice:ot.splice},xt.extend=xt.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||yt(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],n=t[e],s!==n&&(c&&n&&(xt.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,o=i&&Array.isArray(i)?i:[]):o=i&&xt.isPlainObject(i)?i:{},s[e]=xt.extend(c,o,n)):void 0!==n&&(s[e]=n));return s},xt.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==pt.call(t))&&(!(e=at(t))||"function"==typeof(i=ft.call(e,"constructor")&&e.constructor)&&gt.call(i)===mt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){i(t)},each:function(t,e){var i,n=0;if(r(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(Ct,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(r(Object(t))?xt.merge(i,"string"==typeof t?[t]:t):ht.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:ut.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,s=!i;r<o;r++)!e(t[r],r)!==s&&n.push(t[r]);return n},map:function(t,e,i){var n,o,s=0,a=[];if(r(t))for(n=t.length;s<n;s++)null!=(o=e(t[s],s,i))&&a.push(o);else for(s in t)null!=(o=e(t[s],s,i))&&a.push(o);return ct.apply([],a)},guid:1,support:vt}),"function"==typeof Symbol&&(xt.fn[Symbol.iterator]=ot[Symbol.iterator]),xt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){dt["[object "+e+"]"]=e.toLowerCase()});var wt=function(t){function e(t,e,i,n){var r,o,s,a,l,h,d,p=e&&e.ownerDocument,f=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return i;if(!n&&((e?e.ownerDocument||e:Z)!==j&&D(e),e=e||j,E)){if(11!==f&&(l=gt.exec(t)))if(r=l[1]){if(9===f){if(!(s=e.getElementById(r)))return i;if(s.id===r)return i.push(s),i}else if(p&&(s=p.getElementById(r))&&G(e,s)&&s.id===r)return i.push(s),i}else{if(l[2])return $.apply(i,e.getElementsByTagName(t)),i;if((r=l[3])&&I.getElementsByClassName&&e.getElementsByClassName)return $.apply(i,e.getElementsByClassName(r)),i}if(I.qsa&&!V[t+" "]&&(!L||!L.test(t))){if(1!==f)p=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(bt,It):e.setAttribute("id",a=O),h=A(t),o=h.length;o--;)h[o]="#"+a+" "+u(h[o]);d=h.join(","),p=mt.test(t)&&c(e.parentNode)||e}if(d)try{return $.apply(i,p.querySelectorAll(d)),i}catch(t){}finally{a===O&&e.removeAttribute("id")}}}return N(t.replace(ot,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>x.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[O]=!0,t}function r(t){var e=j.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ct(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function l(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function c(t){return t&&void 0!==t.getElementsByTagName&&t}function h(){}function u(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function d(t,e,i){var n=e.dir,r=e.next,o=r||n,s=i&&"parentNode"===o,a=R++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r);return!1}:function(e,i,l){var c,h,u,d=[_,a];if(l){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(u=e[O]||(e[O]={}),h=u[e.uniqueID]||(u[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=h[o])&&c[0]===_&&c[1]===a)return d[2]=c[2];if(h[o]=d,d[2]=t(e,i,l))return!0}return!1}}function p(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function f(t,i,n){for(var r=0,o=i.length;r<o;r++)e(t,i[r],n);return n}function g(t,e,i,n,r){for(var o,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(o=t[a])&&(i&&!i(o,n,r)||(s.push(o),c&&e.push(a)));return s}function m(t,e,i,r,o,s){return r&&!r[O]&&(r=m(r)),o&&!o[O]&&(o=m(o,s)),n(function(n,s,a,l){var c,h,u,d=[],p=[],m=s.length,v=n||f(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?v:g(v,d,t,a,l),b=i?o||(n?t:m||r)?[]:s:y;if(i&&i(y,b,a,l),r)for(c=g(b,p),r(c,[],a,l),h=c.length;h--;)(u=c[h])&&(b[p[h]]=!(y[p[h]]=u));if(n){if(o||t){if(o){for(c=[],h=b.length;h--;)(u=b[h])&&c.push(y[h]=u);o(null,b=[],c,l)}for(h=b.length;h--;)(u=b[h])&&(c=o?K(n,u):d[h])>-1&&(n[c]=!(s[c]=u))}}else b=g(b===s?b.splice(m,b.length):b),o?o(null,s,b,l):$.apply(s,b)})}function v(t){for(var e,i,n,r=t.length,o=x.relative[t[0].type],s=o||x.relative[" "],a=o?1:0,l=d(function(t){return t===e},s,!0),c=d(function(t){return K(e,t)>-1},s,!0),h=[function(t,i,n){var r=!o&&(n||i!==k)||((e=i).nodeType?l(t,i,n):c(t,i,n));return e=null,r}];a<r;a++)if(i=x.relative[t[a].type])h=[d(p(h),i)];else{if(i=x.filter[t[a].type].apply(null,t[a].matches),i[O]){for(n=++a;n<r&&!x.relative[t[n].type];n++);return m(a>1&&p(h),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ot,"$1"),i,a<n&&v(t.slice(a,n)),n<r&&v(t=t.slice(n)),n<r&&u(t))}h.push(i)}return p(h)}function y(t,i){var r=i.length>0,o=t.length>0,s=function(n,s,a,l,c){var h,u,d,p=0,f="0",m=n&&[],v=[],y=k,b=n||o&&x.find.TAG("*",c),I=_+=null==y?1:Math.random()||.1,C=b.length;for(c&&(k=s===j||s||c);f!==C&&null!=(h=b[f]);f++){if(o&&h){for(u=0,s||h.ownerDocument===j||(D(h),a=!E);d=t[u++];)if(d(h,s||j,a)){l.push(h);break}c&&(_=I)}r&&((h=!d&&h)&&p--,n&&m.push(h))}if(p+=f,r&&f!==p){for(u=0;d=i[u++];)d(m,v,s,a);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=F.call(l));v=g(v)}$.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(_=I,k=y),m};return r?n(s):s}var b,I,x,C,w,A,M,N,k,S,T,D,j,z,E,L,B,P,G,O="sizzle"+1*new Date,Z=t.document,_=0,R=0,W=i(),Y=i(),V=i(),U=function(t,e){return t===e&&(T=!0),0},X={}.hasOwnProperty,H=[],F=H.pop,J=H.push,$=H.push,Q=H.slice,K=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",it="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",nt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",rt=new RegExp(tt+"+","g"),ot=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ct=new RegExp(nt),ht=new RegExp("^"+et+"$"),ut={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+nt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+q+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,pt=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,vt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),yt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},bt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,It=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},xt=function(){D()},Ct=d(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{$.apply(H=Q.call(Z.childNodes),Z.childNodes),H[Z.childNodes.length].nodeType}catch(t){$={apply:H.length?function(t,e){J.apply(t,Q.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}I=e.support={},w=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},D=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:Z;return n!==j&&9===n.nodeType&&n.documentElement?(j=n,z=j.documentElement,E=!w(j),Z!==j&&(i=j.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",xt,!1):i.attachEvent&&i.attachEvent("onunload",xt)),I.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),I.getElementsByTagName=r(function(t){return t.appendChild(j.createComment("")),!t.getElementsByTagName("*").length}),I.getElementsByClassName=ft.test(j.getElementsByClassName),I.getById=r(function(t){return z.appendChild(t).id=O,!j.getElementsByName||!j.getElementsByName(O).length}),I.getById?(x.filter.ID=function(t){var e=t.replace(vt,yt);return function(t){return t.getAttribute("id")===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&E){var i=e.getElementById(t);return i?[i]:[]}}):(x.filter.ID=function(t){var e=t.replace(vt,yt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},x.find.ID=function(t,e){if(void 0!==e.getElementById&&E){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),x.find.TAG=I.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):I.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},x.find.CLASS=I.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&E)return e.getElementsByClassName(t)},B=[],L=[],(I.qsa=ft.test(j.querySelectorAll))&&(r(function(t){z.appendChild(t).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+tt+"*(?:value|"+q+")"),t.querySelectorAll("[id~="+O+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+O+"+*").length||L.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=j.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),z.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(I.matchesSelector=ft.test(P=z.matches||z.webkitMatchesSelector||z.mozMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&r(function(t){I.disconnectedMatch=P.call(t,"*"),P.call(t,"[s!='']:x"),B.push("!=",nt)}),L=L.length&&new RegExp(L.join("|")),B=B.length&&new RegExp(B.join("|")),e=ft.test(z.compareDocumentPosition),G=e||ft.test(z.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return T=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!I.sortDetached&&e.compareDocumentPosition(t)===i?t===j||t.ownerDocument===Z&&G(Z,t)?-1:e===j||e.ownerDocument===Z&&G(Z,e)?1:S?K(S,t)-K(S,e):0:4&i?-1:1)}:function(t,e){if(t===e)return T=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],l=[e];if(!r||!o)return t===j?-1:e===j?1:r?-1:o?1:S?K(S,t)-K(S,e):0;if(r===o)return s(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?s(a[n],l[n]):a[n]===Z?-1:l[n]===Z?1:0},j):j},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==j&&D(t),i=i.replace(lt,"='$1']"),I.matchesSelector&&E&&!V[i+" "]&&(!B||!B.test(i))&&(!L||!L.test(i)))try{var n=P.call(t,i);if(n||I.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,j,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==j&&D(t),G(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==j&&D(t);var i=x.attrHandle[e.toLowerCase()],n=i&&X.call(x.attrHandle,e.toLowerCase())?i(t,e,!E):void 0;return void 0!==n?n:I.attributes||!E?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.escape=function(t){return(t+"").replace(bt,It)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(T=!I.detectDuplicates,S=!I.sortStable&&t.slice(0),t.sort(U),T){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return S=null,t},C=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=C(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=C(e);return i},x=e.selectors={cacheLength:50,createPseudo:n,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{
dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,yt),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,yt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ct.test(i)&&(e=A(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,yt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(rt," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(o){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(d=m,u=d[O]||(d[O]={}),h=u[d.uniqueID]||(u[d.uniqueID]={}),c=h[t]||[],p=c[0]===_&&c[1],b=p&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===e){h[t]=[_,p,b];break}}else if(y&&(d=e,u=d[O]||(d[O]={}),h=u[d.uniqueID]||(u[d.uniqueID]={}),c=h[t]||[],p=c[0]===_&&c[1],b=p),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(u=d[O]||(d[O]={}),h=u[d.uniqueID]||(u[d.uniqueID]={}),h[t]=[_,b]),d!==e)););return(b-=r)===n||b%n==0&&b/n>=0}}},PSEUDO:function(t,i){var r,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[O]?o(i):o.length>1?(r=[t,t,"",i],x.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),s=r.length;s--;)n=K(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=M(t.replace(ot,"$1"));return r[O]?n(function(t,e,i,n){for(var o,s=r(t,null,n,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(vt,yt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:n(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,yt).toLowerCase(),function(e){var i;do{if(i=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===z},focus:function(t){return t===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return pt.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[i<0?i+e:i]}),even:l(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:l(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=function(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}(b);return h.prototype=x.filters=x.pseudos,x.setFilters=new h,A=e.tokenize=function(t,i){var n,r,o,s,a,l,c,h=Y[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],c=x.preFilter;a;){n&&!(r=st.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=at.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(ot," ")}),a=a.slice(n.length));for(s in x.filter)!(r=ut[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):Y(t,l).slice(0)},M=e.compile=function(t,e){var i,n=[],r=[],o=V[t+" "];if(!o){for(e||(e=A(t)),i=e.length;i--;)o=v(e[i]),o[O]?n.push(o):r.push(o);o=V(t,y(r,n)),o.selector=t}return o},N=e.select=function(t,e,i,n){var r,o,s,a,l,h="function"==typeof t&&t,d=!n&&A(t=h.selector||t);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&E&&x.relative[o[1].type]){if(!(e=(x.find.ID(s.matches[0].replace(vt,yt),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=ut.needsContext.test(t)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((l=x.find[a])&&(n=l(s.matches[0].replace(vt,yt),mt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(r,1),!(t=n.length&&u(o)))return $.apply(i,n),i;break}}return(h||M(t,d))(n,e,!E,i,!e||mt.test(t)&&c(e.parentNode)||e),i},I.sortStable=O.split("").sort(U).join("")===O,I.detectDuplicates=!!T,D(),I.sortDetached=r(function(t){return 1&t.compareDocumentPosition(j.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),I.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(q,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);xt.find=wt,xt.expr=wt.selectors,xt.expr[":"]=xt.expr.pseudos,xt.uniqueSort=xt.unique=wt.uniqueSort,xt.text=wt.getText,xt.isXMLDoc=wt.isXML,xt.contains=wt.contains,xt.escapeSelector=wt.escape;var At=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&xt(t).is(i))break;n.push(t)}return n},Mt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},Nt=xt.expr.match.needsContext,kt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;xt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?xt.find.matchesSelector(n,t)?[n]:[]:xt.find.matches(t,xt.grep(e,function(t){return 1===t.nodeType}))},xt.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(xt(t).filter(function(){for(e=0;e<n;e++)if(xt.contains(r[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)xt.find(t,r[e],i);return n>1?xt.uniqueSort(i):i},filter:function(t){return this.pushStack(s(this,t||[],!1))},not:function(t){return this.pushStack(s(this,t||[],!0))},is:function(t){return!!s(this,"string"==typeof t&&Nt.test(t)?xt(t):t||[],!1).length}});var St,Tt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(xt.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||St,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Tt.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof xt?e[0]:e,xt.merge(this,xt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:st,!0)),kt.test(n[1])&&xt.isPlainObject(e))for(n in e)yt(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=st.getElementById(n[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):yt(t)?void 0!==i.ready?i.ready(t):t(xt):xt.makeArray(t,this)}).prototype=xt.fn,St=xt(st);var Dt=/^(?:parents|prev(?:Until|All))/,jt={children:!0,contents:!0,next:!0,prev:!0};xt.fn.extend({has:function(t){var e=xt(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(xt.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,r=this.length,o=[],s="string"!=typeof t&&xt(t);if(!Nt.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&xt.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?xt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?ut.call(xt(t),this[0]):ut.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(xt.uniqueSort(xt.merge(this.get(),xt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),xt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return At(t,"parentNode")},parentsUntil:function(t,e,i){return At(t,"parentNode",i)},next:function(t){return a(t,"nextSibling")},prev:function(t){return a(t,"previousSibling")},nextAll:function(t){return At(t,"nextSibling")},prevAll:function(t){return At(t,"previousSibling")},nextUntil:function(t,e,i){return At(t,"nextSibling",i)},prevUntil:function(t,e,i){return At(t,"previousSibling",i)},siblings:function(t){return Mt((t.parentNode||{}).firstChild,t)},children:function(t){return Mt(t.firstChild)},contents:function(t){return o(t,"iframe")?t.contentDocument:(o(t,"template")&&(t=t.content||t),xt.merge([],t.childNodes))}},function(t,e){xt.fn[t]=function(i,n){var r=xt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=xt.filter(n,r)),this.length>1&&(jt[t]||xt.uniqueSort(r),Dt.test(t)&&r.reverse()),this.pushStack(r)}});var zt=/[^\x20\t\r\n\f]+/g;xt.Callbacks=function(t){t="string"==typeof t?l(t):xt.extend({},t);var e,i,r,o,s=[],a=[],c=-1,h=function(){for(o=o||t.once,r=e=!0;a.length;c=-1)for(i=a.shift();++c<s.length;)!1===s[c].apply(i[0],i[1])&&t.stopOnFalse&&(c=s.length,i=!1);t.memory||(i=!1),e=!1,o&&(s=i?[]:"")},u={add:function(){return s&&(i&&!e&&(c=s.length-1,a.push(i)),function e(i){xt.each(i,function(i,r){yt(r)?t.unique&&u.has(r)||s.push(r):r&&r.length&&"string"!==n(r)&&e(r)})}(arguments),i&&!e&&h()),this},remove:function(){return xt.each(arguments,function(t,e){for(var i;(i=xt.inArray(e,s,i))>-1;)s.splice(i,1),i<=c&&c--}),this},has:function(t){return t?xt.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=a=[],s=i="",this},disabled:function(){return!s},lock:function(){return o=a=[],i||e||(s=i=""),this},locked:function(){return!!o},fireWith:function(t,i){return o||(i=i||[],i=[t,i.slice?i.slice():i],a.push(i),e||h()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},xt.extend({Deferred:function(e){var i=[["notify","progress",xt.Callbacks("memory"),xt.Callbacks("memory"),2],["resolve","done",xt.Callbacks("once memory"),xt.Callbacks("once memory"),0,"resolved"],["reject","fail",xt.Callbacks("once memory"),xt.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return xt.Deferred(function(e){xt.each(i,function(i,n){var r=yt(t[n[4]])&&t[n[4]];o[n[1]](function(){var t=r&&r.apply(this,arguments);t&&yt(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,n,r){function o(e,i,n,r){return function(){var a=this,l=arguments,u=function(){var t,u;if(!(e<s)){if((t=n.apply(a,l))===i.promise())throw new TypeError("Thenable self-resolution");u=t&&("object"==typeof t||"function"==typeof t)&&t.then,yt(u)?r?u.call(t,o(s,i,c,r),o(s,i,h,r)):(s++,u.call(t,o(s,i,c,r),o(s,i,h,r),o(s,i,c,i.notifyWith))):(n!==c&&(a=void 0,l=[t]),(r||i.resolveWith)(a,l))}},d=r?u:function(){try{u()}catch(t){xt.Deferred.exceptionHook&&xt.Deferred.exceptionHook(t,d.stackTrace),e+1>=s&&(n!==h&&(a=void 0,l=[t]),i.rejectWith(a,l))}};e?d():(xt.Deferred.getStackHook&&(d.stackTrace=xt.Deferred.getStackHook()),t.setTimeout(d))}}var s=0;return xt.Deferred(function(t){i[0][3].add(o(0,t,yt(r)?r:c,t.notifyWith)),i[1][3].add(o(0,t,yt(e)?e:c)),i[2][3].add(o(0,t,yt(n)?n:h))}).promise()},promise:function(t){return null!=t?xt.extend(t,r):r}},o={};return xt.each(i,function(t,e){var s=e[2],a=e[5];r[e[1]]=s.add,a&&s.add(function(){n=a},i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),s.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=s.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),r=lt.call(arguments),o=xt.Deferred(),s=function(t){return function(i){n[t]=this,r[t]=arguments.length>1?lt.call(arguments):i,--e||o.resolveWith(n,r)}};if(e<=1&&(u(t,o.done(s(i)).resolve,o.reject,!e),"pending"===o.state()||yt(r[i]&&r[i].then)))return o.then();for(;i--;)u(r[i],s(i),o.reject);return o.promise()}});var Et=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;xt.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&Et.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},xt.readyException=function(e){t.setTimeout(function(){throw e})};var Lt=xt.Deferred();xt.fn.ready=function(t){return Lt.then(t).catch(function(t){xt.readyException(t)}),this},xt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--xt.readyWait:xt.isReady)||(xt.isReady=!0,!0!==t&&--xt.readyWait>0||Lt.resolveWith(st,[xt]))}}),xt.ready.then=Lt.then,"complete"===st.readyState||"loading"!==st.readyState&&!st.documentElement.doScroll?t.setTimeout(xt.ready):(st.addEventListener("DOMContentLoaded",d),t.addEventListener("load",d));var Bt=function(t,e,i,r,o,s,a){var l=0,c=t.length,h=null==i;if("object"===n(i)){o=!0;for(l in i)Bt(t,e,l,i[l],!0,s,a)}else if(void 0!==r&&(o=!0,yt(r)||(a=!0),h&&(a?(e.call(t,r),e=null):(h=e,e=function(t,e,i){return h.call(xt(t),i)})),e))for(;l<c;l++)e(t[l],i,a?r:r.call(t[l],l,e(t[l],i)));return o?t:h?e.call(t):c?e(t[0],i):s},Pt=/^-ms-/,Gt=/-([a-z])/g,Ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};g.uid=1,g.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[f(e)]=i;else for(n in e)r[f(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][f(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){Array.isArray(e)?e=e.map(f):(e=f(e),e=e in n?[e]:e.match(zt)||[]),i=e.length;for(;i--;)delete n[e[i]]}(void 0===e||xt.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!xt.isEmptyObject(e)}};var Zt=new g,_t=new g,Rt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Wt=/[A-Z]/g;xt.extend({hasData:function(t){return _t.hasData(t)||Zt.hasData(t)},data:function(t,e,i){return _t.access(t,e,i)},removeData:function(t,e){_t.remove(t,e)},_data:function(t,e,i){return Zt.access(t,e,i)},_removeData:function(t,e){Zt.remove(t,e)}}),xt.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=_t.get(o),1===o.nodeType&&!Zt.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=f(n.slice(5)),v(o,n,r[n])));Zt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){_t.set(this,t)}):Bt(this,function(e){var i;if(o&&void 0===e){if(void 0!==(i=_t.get(o,t)))return i;if(void 0!==(i=v(o,t)))return i}else this.each(function(){_t.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){_t.remove(this,t)})}}),xt.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Zt.get(t,e),i&&(!n||Array.isArray(i)?n=Zt.access(t,e,xt.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=xt.queue(t,e),n=i.length,r=i.shift(),o=xt._queueHooks(t,e),s=function(){xt.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Zt.get(t,i)||Zt.access(t,i,{empty:xt.Callbacks("once memory").add(function(){Zt.remove(t,[e+"queue",i])})})}}),xt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?xt.queue(this[0],t):void 0===e?this:this.each(function(){var i=xt.queue(this,t,e);xt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&xt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){xt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=xt.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=Zt.get(o[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var Yt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Vt=new RegExp("^(?:([+-])=|)("+Yt+")([a-z%]*)$","i"),Ut=["Top","Right","Bottom","Left"],Xt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&xt.contains(t.ownerDocument,t)&&"none"===xt.css(t,"display")},Ht=function(t,e,i,n){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=i.apply(t,n||[]);for(o in e)t.style[o]=s[o];return r},Ft={};xt.fn.extend({show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Xt(this)?xt(this).show():xt(this).hide()})}});var Jt=/^(?:checkbox|radio)$/i,$t=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Qt=/^$|^module$|\/(?:java|ecma)script/i,Kt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Kt.optgroup=Kt.option,Kt.tbody=Kt.tfoot=Kt.colgroup=Kt.caption=Kt.thead,Kt.th=Kt.td;var qt=/<|&#?\w+;/;!function(){var t=st.createDocumentFragment(),e=t.appendChild(st.createElement("div")),i=st.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),vt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",vt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var te=st.documentElement,ee=/^key/,ie=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ne=/^([^.]*)(?:\.(.+)|)/;xt.event={global:{},add:function(t,e,i,n,r){var o,s,a,l,c,h,u,d,p,f,g,m=Zt.get(t);if(m)for(i.handler&&(o=i,i=o.handler,r=o.selector),r&&xt.find.matchesSelector(te,r),i.guid||(i.guid=xt.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==xt&&xt.event.triggered!==e.type?xt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(zt)||[""],c=e.length;c--;)a=ne.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(u=xt.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=xt.event.special[p]||{},h=xt.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&xt.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=l[p])||(d=l[p]=[],d.delegateCount=0,u.setup&&!1!==u.setup.call(t,n,f,s)||t.addEventListener&&t.addEventListener(p,s)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),xt.event.global[p]=!0)},remove:function(t,e,i,n,r){var o,s,a,l,c,h,u,d,p,f,g,m=Zt.hasData(t)&&Zt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(zt)||[""],c=e.length;c--;)if(a=ne.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(u=xt.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)h=d[o],!r&&g!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(o,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,m.handle)||xt.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)xt.event.remove(t,p+e[c],i,n,!0);xt.isEmptyObject(l)&&Zt.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,s,a=xt.event.fix(t),l=new Array(arguments.length),c=(Zt.get(this,"events")||{})[a.type]||[],h=xt.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(s=xt.event.handlers.call(this,a,c),e=0;(r=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(n=((xt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,n,r,o,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},i=0;i<l;i++)n=e[i],r=n.selector+" ",void 0===s[r]&&(s[r]=n.needsContext?xt(r,this).index(c)>-1:xt.find(r,this,null,[c]).length),s[r]&&o.push(n);o.length&&a.push({elem:c,handlers:o})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(xt.Event.prototype,t,{enumerable:!0,configurable:!0,get:yt(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[xt.expando]?t:new xt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==N()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===N()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&o(this,"input"))return this.click(),!1},_default:function(t){return o(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},xt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},xt.Event=function(t,e){if(!(this instanceof xt.Event))return new xt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?A:M,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&xt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[xt.expando]=!0},xt.Event.prototype={constructor:xt.Event,isDefaultPrevented:M,isPropagationStopped:M,isImmediatePropagationStopped:M,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=A,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=A,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=A,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},xt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&ee.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&ie.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},xt.event.addProp),xt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){xt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===n||xt.contains(n,r))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),xt.fn.extend({on:function(t,e,i,n){return k(this,t,e,i,n)},one:function(t,e,i,n){return k(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,xt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=M),this.each(function(){xt.event.remove(this,t,i,e)})}});var re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,oe=/<script|<style|<link/i,se=/checked\s*(?:[^=]|=\s*.checked.)/i,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;xt.extend({htmlPrefilter:function(t){return t.replace(re,"<$1></$2>")},clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(!0),l=xt.contains(t.ownerDocument,t);if(!(vt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||xt.isXMLDoc(t)))for(s=x(a),o=x(t),n=0,r=o.length;n<r;n++)z(o[n],s[n]);if(e)if(i)for(o=o||x(t),s=s||x(a),n=0,r=o.length;n<r;n++)j(o[n],s[n]);else j(t,a);return s=x(a,"script"),s.length>0&&C(s,!l&&x(t,"script")),a},cleanData:function(t){for(var e,i,n,r=xt.event.special,o=0;void 0!==(i=t[o]);o++)if(Ot(i)){if(e=i[Zt.expando]){if(e.events)for(n in e.events)r[n]?xt.event.remove(i,n):xt.removeEvent(i,n,e.handle);i[Zt.expando]=void 0}i[_t.expando]&&(i[_t.expando]=void 0)}}}),xt.fn.extend({detach:function(t){return L(this,t,!0)},remove:function(t){return L(this,t)},text:function(t){return Bt(this,function(t){return void 0===t?xt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return E(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){S(this,t).appendChild(t)}})},prepend:function(){return E(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=S(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return E(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return E(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(xt.cleanData(x(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return xt.clone(this,t,e)})},html:function(t){return Bt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!oe.test(t)&&!Kt[($t.exec(t)||["",""])[1].toLowerCase()]){t=xt.htmlPrefilter(t);try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(xt.cleanData(x(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return E(this,arguments,function(e){var i=this.parentNode;xt.inArray(this,t)<0&&(xt.cleanData(x(this)),i&&i.replaceChild(e,this))},t)}}),xt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){xt.fn[t]=function(t){for(var i,n=[],r=xt(t),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),xt(r[s])[e](i),ht.apply(n,i.get());return this.pushStack(n)}});var le=new RegExp("^("+Yt+")(?!px)[a-z%]+$","i"),ce=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},he=new RegExp(Ut.join("|"),"i");!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",te.appendChild(l).appendChild(c);var e=t.getComputedStyle(c);n="1%"!==e.top,a=12===i(e.marginLeft),c.style.right="60%",s=36===i(e.right),r=36===i(e.width),c.style.position="absolute",o=36===c.offsetWidth||"absolute",te.removeChild(l),c=null}}function i(t){return Math.round(parseFloat(t))}var n,r,o,s,a,l=st.createElement("div"),c=st.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",vt.clearCloneStyle="content-box"===c.style.backgroundClip,xt.extend(vt,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),o}}))}();var ue=/^(none|table(?!-c[ea]).+)/,de=/^--/,pe={position:"absolute",visibility:"hidden",display:"block"},fe={letterSpacing:"0",fontWeight:"400"},ge=["Webkit","Moz","ms"],me=st.createElement("div").style;xt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=B(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=f(e),l=de.test(e),c=t.style;if(l||(e=O(a)),s=xt.cssHooks[e]||xt.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:c[e];o=typeof i,"string"===o&&(r=Vt.exec(i))&&r[1]&&(i=y(t,e,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(xt.cssNumber[a]?"":"px")),vt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var r,o,s,a=f(e);return de.test(e)||(e=O(a)),s=xt.cssHooks[e]||xt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=B(t,e,n)),"normal"===r&&e in fe&&(r=fe[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),xt.each(["height","width"],function(t,e){xt.cssHooks[e]={get:function(t,i,n){if(i)return!ue.test(xt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?R(t,e,n):Ht(t,pe,function(){return R(t,e,n)})},set:function(t,i,n){var r,o=ce(t),s="border-box"===xt.css(t,"boxSizing",!1,o),a=n&&_(t,e,n,s,o);return s&&vt.scrollboxSize()===o.position&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-_(t,e,"border",!1,o)-.5)),a&&(r=Vt.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=xt.css(t,e)),Z(t,i,a)}}
}),xt.cssHooks.marginLeft=P(vt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(B(t,"marginLeft"))||t.getBoundingClientRect().left-Ht(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),xt.each({margin:"",padding:"",border:"Width"},function(t,e){xt.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+Ut[n]+e]=o[n]||o[n-2]||o[0];return r}},"margin"!==t&&(xt.cssHooks[t+e].set=Z)}),xt.fn.extend({css:function(t,e){return Bt(this,function(t,e,i){var n,r,o={},s=0;if(Array.isArray(e)){for(n=ce(t),r=e.length;s<r;s++)o[e[s]]=xt.css(t,e[s],!1,n);return o}return void 0!==i?xt.style(t,e,i):xt.css(t,e)},t,e,arguments.length>1)}}),xt.Tween=W,W.prototype={constructor:W,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||xt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(xt.cssNumber[i]?"":"px")},cur:function(){var t=W.propHooks[this.prop];return t&&t.get?t.get(this):W.propHooks._default.get(this)},run:function(t){var e,i=W.propHooks[this.prop];return this.options.duration?this.pos=e=xt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=xt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){xt.fx.step[t.prop]?xt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[xt.cssProps[t.prop]]&&!xt.cssHooks[t.prop]?t.elem[t.prop]=t.now:xt.style(t.elem,t.prop,t.now+t.unit)}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},xt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},xt.fx=W.prototype.init,xt.fx.step={};var ve,ye,be=/^(?:toggle|show|hide)$/,Ie=/queueHooks$/;xt.Animation=xt.extend(J,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return y(i.elem,t,Vt.exec(e),i),i}]},tweener:function(t,e){yt(t)?(e=t,t=["*"]):t=t.match(zt);for(var i,n=0,r=t.length;n<r;n++)i=t[n],J.tweeners[i]=J.tweeners[i]||[],J.tweeners[i].unshift(e)},prefilters:[H],prefilter:function(t,e){e?J.prefilters.unshift(t):J.prefilters.push(t)}}),xt.speed=function(t,e,i){var n=t&&"object"==typeof t?xt.extend({},t):{complete:i||!i&&e||yt(t)&&t,duration:t,easing:i&&e||e&&!yt(e)&&e};return xt.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in xt.fx.speeds?n.duration=xt.fx.speeds[n.duration]:n.duration=xt.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){yt(n.old)&&n.old.call(this),n.queue&&xt.dequeue(this,n.queue)},n},xt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Xt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=xt.isEmptyObject(t),o=xt.speed(e,i,n),s=function(){var e=J(this,xt.extend({},t),o);(r||Zt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=xt.timers,s=Zt.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&Ie.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||xt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=Zt.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=xt.timers,s=n?n.length:0;for(i.finish=!0,xt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),xt.each(["toggle","show","hide"],function(t,e){var i=xt.fn[e];xt.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(U(e,!0),t,n,r)}}),xt.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){xt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),xt.timers=[],xt.fx.tick=function(){var t,e=0,i=xt.timers;for(ve=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||xt.fx.stop(),ve=void 0},xt.fx.timer=function(t){xt.timers.push(t),xt.fx.start()},xt.fx.interval=13,xt.fx.start=function(){ye||(ye=!0,Y())},xt.fx.stop=function(){ye=null},xt.fx.speeds={slow:600,fast:200,_default:400},xt.fn.delay=function(e,i){return e=xt.fx?xt.fx.speeds[e]||e:e,i=i||"fx",this.queue(i,function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}})},function(){var t=st.createElement("input"),e=st.createElement("select"),i=e.appendChild(st.createElement("option"));t.type="checkbox",vt.checkOn=""!==t.value,vt.optSelected=i.selected,t=st.createElement("input"),t.value="t",t.type="radio",vt.radioValue="t"===t.value}();var xe,Ce=xt.expr.attrHandle;xt.fn.extend({attr:function(t,e){return Bt(this,xt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){xt.removeAttr(this,t)})}}),xt.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?xt.prop(t,e,i):(1===o&&xt.isXMLDoc(t)||(r=xt.attrHooks[e.toLowerCase()]||(xt.expr.match.bool.test(e)?xe:void 0)),void 0!==i?null===i?void xt.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:(n=xt.find.attr(t,e),null==n?void 0:n))},attrHooks:{type:{set:function(t,e){if(!vt.radioValue&&"radio"===e&&o(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(zt);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),xe={set:function(t,e,i){return!1===e?xt.removeAttr(t,i):t.setAttribute(i,i),i}},xt.each(xt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Ce[e]||xt.find.attr;Ce[e]=function(t,e,n){var r,o,s=e.toLowerCase();return n||(o=Ce[s],Ce[s]=r,r=null!=i(t,e,n)?s:null,Ce[s]=o),r}});var we=/^(?:input|select|textarea|button)$/i,Ae=/^(?:a|area)$/i;xt.fn.extend({prop:function(t,e){return Bt(this,xt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[xt.propFix[t]||t]})}}),xt.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&xt.isXMLDoc(t)||(e=xt.propFix[e]||e,r=xt.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=xt.find.attr(t,"tabindex");return e?parseInt(e,10):we.test(t.nodeName)||Ae.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),vt.optSelected||(xt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),xt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){xt.propFix[this.toLowerCase()]=this}),xt.fn.extend({addClass:function(t){var e,i,n,r,o,s,a,l=0;if(yt(t))return this.each(function(e){xt(this).addClass(t.call(this,e,Q(this)))});if(e=K(t),e.length)for(;i=this[l++];)if(r=Q(i),n=1===i.nodeType&&" "+$(r)+" "){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=$(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,o,s,a,l=0;if(yt(t))return this.each(function(e){xt(this).removeClass(t.call(this,e,Q(this)))});if(!arguments.length)return this.attr("class","");if(e=K(t),e.length)for(;i=this[l++];)if(r=Q(i),n=1===i.nodeType&&" "+$(r)+" "){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=$(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):yt(t)?this.each(function(i){xt(this).toggleClass(t.call(this,i,Q(this),e),e)}):this.each(function(){var e,r,o,s;if(n)for(r=0,o=xt(this),s=K(t);e=s[r++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==i||(e=Q(this),e&&Zt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Zt.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+$(Q(i))+" ").indexOf(e)>-1)return!0;return!1}});var Me=/\r/g;xt.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=yt(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,xt(this).val()):t,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=xt.map(r,function(t){return null==t?"":t+""})),(e=xt.valHooks[this.type]||xt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return(e=xt.valHooks[r.type]||xt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(Me,""):null==i?"":i)}}}),xt.extend({valHooks:{option:{get:function(t){var e=xt.find.attr(t,"value");return null!=e?e:$(xt.text(t))}},select:{get:function(t){var e,i,n,r=t.options,s=t.selectedIndex,a="select-one"===t.type,l=a?null:[],c=a?s+1:r.length;for(n=s<0?c:a?s:0;n<c;n++)if(i=r[n],(i.selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!o(i.parentNode,"optgroup"))){if(e=xt(i).val(),a)return e;l.push(e)}return l},set:function(t,e){for(var i,n,r=t.options,o=xt.makeArray(e),s=r.length;s--;)n=r[s],(n.selected=xt.inArray(xt.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),xt.each(["radio","checkbox"],function(){xt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=xt.inArray(xt(t).val(),e)>-1}},vt.checkOn||(xt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),vt.focusin="onfocusin"in t;var Ne=/^(?:focusinfocus|focusoutblur)$/,ke=function(t){t.stopPropagation()};xt.extend(xt.event,{trigger:function(e,i,n,r){var o,s,a,l,c,h,u,d,p=[n||st],f=ft.call(e,"type")?e.type:e,g=ft.call(e,"namespace")?e.namespace.split("."):[];if(s=d=a=n=n||st,3!==n.nodeType&&8!==n.nodeType&&!Ne.test(f+xt.event.triggered)&&(f.indexOf(".")>-1&&(g=f.split("."),f=g.shift(),g.sort()),c=f.indexOf(":")<0&&"on"+f,e=e[xt.expando]?e:new xt.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:xt.makeArray(i,[e]),u=xt.event.special[f]||{},r||!u.trigger||!1!==u.trigger.apply(n,i))){if(!r&&!u.noBubble&&!bt(n)){for(l=u.delegateType||f,Ne.test(l+f)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||st)&&p.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)d=s,e.type=o>1?l:u.bindType||f,h=(Zt.get(s,"events")||{})[e.type]&&Zt.get(s,"handle"),h&&h.apply(s,i),(h=c&&s[c])&&h.apply&&Ot(s)&&(e.result=h.apply(s,i),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(p.pop(),i)||!Ot(n)||c&&yt(n[f])&&!bt(n)&&(a=n[c],a&&(n[c]=null),xt.event.triggered=f,e.isPropagationStopped()&&d.addEventListener(f,ke),n[f](),e.isPropagationStopped()&&d.removeEventListener(f,ke),xt.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(t,e,i){var n=xt.extend(new xt.Event,i,{type:t,isSimulated:!0});xt.event.trigger(n,null,e)}}),xt.fn.extend({trigger:function(t,e){return this.each(function(){xt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return xt.event.trigger(t,e,i,!0)}}),vt.focusin||xt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){xt.event.simulate(e,t.target,xt.event.fix(t))};xt.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=Zt.access(n,e);r||n.addEventListener(t,i,!0),Zt.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Zt.access(n,e)-1;r?Zt.access(n,e,r):(n.removeEventListener(t,i,!0),Zt.remove(n,e))}}});var Se=t.location,Te=Date.now(),De=/\?/;xt.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||xt.error("Invalid XML: "+e),i};var je=/\[\]$/,ze=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Le=/^(?:input|select|textarea|keygen)/i;xt.param=function(t,e){var i,n=[],r=function(t,e){var i=yt(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!xt.isPlainObject(t))xt.each(t,function(){r(this.name,this.value)});else for(i in t)q(i,t[i],e,r);return n.join("&")},xt.fn.extend({serialize:function(){return xt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=xt.prop(this,"elements");return t?xt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!xt(this).is(":disabled")&&Le.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!Jt.test(t))}).map(function(t,e){var i=xt(this).val();return null==i?null:Array.isArray(i)?xt.map(i,function(t){return{name:e.name,value:t.replace(ze,"\r\n")}}):{name:e.name,value:i.replace(ze,"\r\n")}}).get()}});var Be=/%20/g,Pe=/#.*$/,Ge=/([?&])_=[^&]*/,Oe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ze=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_e=/^(?:GET|HEAD)$/,Re=/^\/\//,We={},Ye={},Ve="*/".concat("*"),Ue=st.createElement("a");Ue.href=Se.href,xt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:Ze.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":xt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?it(it(t,xt.ajaxSettings),e):it(xt.ajaxSettings,t)},ajaxPrefilter:tt(We),ajaxTransport:tt(Ye),ajax:function(e,i){function n(e,i,n,a){var c,d,p,I,x,C=i;h||(h=!0,l&&t.clearTimeout(l),r=void 0,s=a||"",w.readyState=e>0?4:0,c=e>=200&&e<300||304===e,n&&(I=nt(f,w,n)),I=rt(f,I,w,c),c?(f.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(xt.lastModified[o]=x),(x=w.getResponseHeader("etag"))&&(xt.etag[o]=x)),204===e||"HEAD"===f.type?C="nocontent":304===e?C="notmodified":(C=I.state,d=I.data,p=I.error,c=!p)):(p=C,!e&&C||(C="error",e<0&&(e=0))),w.status=e,w.statusText=(i||C)+"",c?v.resolveWith(g,[d,C,w]):v.rejectWith(g,[w,C,p]),w.statusCode(b),b=void 0,u&&m.trigger(c?"ajaxSuccess":"ajaxError",[w,f,c?d:p]),y.fireWith(g,[w,C]),u&&(m.trigger("ajaxComplete",[w,f]),--xt.active||xt.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=void 0),i=i||{};var r,o,s,a,l,c,h,u,d,p,f=xt.ajaxSetup({},i),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?xt(g):xt.event,v=xt.Deferred(),y=xt.Callbacks("once memory"),b=f.statusCode||{},I={},x={},C="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(h){if(!a)for(a={};e=Oe.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return h?s:null},setRequestHeader:function(t,e){return null==h&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,I[t]=e),this},overrideMimeType:function(t){return null==h&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(h)w.always(t[w.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||C;return r&&r.abort(e),n(0,e),this}};if(v.promise(w),f.url=((e||f.url||Se.href)+"").replace(Re,Se.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(zt)||[""],null==f.crossDomain){c=st.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ue.protocol+"//"+Ue.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=xt.param(f.data,f.traditional)),et(We,f,i,w),h)return w;u=xt.event&&f.global,u&&0==xt.active++&&xt.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!_e.test(f.type),o=f.url.replace(Pe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Be,"+")):(p=f.url.slice(o.length),f.data&&(f.processData||"string"==typeof f.data)&&(o+=(De.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Ge,"$1"),p=(De.test(o)?"&":"?")+"_="+Te+++p),f.url=o+p),f.ifModified&&(xt.lastModified[o]&&w.setRequestHeader("If-Modified-Since",xt.lastModified[o]),xt.etag[o]&&w.setRequestHeader("If-None-Match",xt.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ve+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)w.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(g,w,f)||h))return w.abort();if(C="abort",y.add(f.complete),w.done(f.success),w.fail(f.error),r=et(Ye,f,i,w)){if(w.readyState=1,u&&m.trigger("ajaxSend",[w,f]),h)return w;f.async&&f.timeout>0&&(l=t.setTimeout(function(){w.abort("timeout")},f.timeout));try{h=!1,r.send(I,n)}catch(t){if(h)throw t;n(-1,t)}}else n(-1,"No Transport");return w},getJSON:function(t,e,i){return xt.get(t,e,i,"json")},getScript:function(t,e){return xt.get(t,void 0,e,"script")}}),xt.each(["get","post"],function(t,e){xt[e]=function(t,i,n,r){return yt(i)&&(r=r||n,n=i,i=void 0),xt.ajax(xt.extend({url:t,type:e,dataType:r,data:i,success:n},xt.isPlainObject(t)&&t))}}),xt._evalUrl=function(t){return xt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},xt.fn.extend({wrapAll:function(t){var e;return this[0]&&(yt(t)&&(t=t.call(this[0])),e=xt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return yt(t)?this.each(function(e){xt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=xt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=yt(t);return this.each(function(i){xt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){xt(this).replaceWith(this.childNodes)}),this}}),xt.expr.pseudos.hidden=function(t){return!xt.expr.pseudos.visible(t)},xt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},xt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Xe={0:200,1223:204},He=xt.ajaxSettings.xhr();vt.cors=!!He&&"withCredentials"in He,vt.ajax=He=!!He,xt.ajaxTransport(function(e){var i,n;if(vt.cors||He&&!e.crossDomain)return{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Xe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}}),xt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),xt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return xt.globalEval(t),t}}}),xt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),xt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,r){e=xt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),st.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Fe=[],Je=/(=)\?(?=&|$)|\?\?/;xt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Fe.pop()||xt.expando+"_"+Te++;return this[t]=!0,t}}),xt.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=!1!==e.jsonp&&(Je.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=yt(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Je,"$1"+r):!1!==e.jsonp&&(e.url+=(De.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||xt.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},n.always(function(){void 0===o?xt(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,Fe.push(r)),s&&yt(o)&&o(s[0]),s=o=void 0}),"script"}),vt.createHTMLDocument=function(){var t=st.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),xt.parseHTML=function(t,e,i){if("string"!=typeof t)return[];"boolean"==typeof e&&(i=e,e=!1);var n,r,o;return e||(vt.createHTMLDocument?(e=st.implementation.createHTMLDocument(""),n=e.createElement("base"),n.href=st.location.href,e.head.appendChild(n)):e=st),r=kt.exec(t),o=!i&&[],r?[e.createElement(r[1])]:(r=w([t],e,o),o&&o.length&&xt(o).remove(),xt.merge([],r.childNodes))},xt.fn.load=function(t,e,i){var n,r,o,s=this,a=t.indexOf(" ");return a>-1&&(n=$(t.slice(a)),t=t.slice(0,a)),yt(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&xt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(n?xt("<div>").append(xt.parseHTML(t)).find(n):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},xt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){xt.fn[e]=function(t){return this.on(e,t)}}),xt.expr.pseudos.animated=function(t){return xt.grep(xt.timers,function(e){return t===e.elem}).length},xt.offset={setOffset:function(t,e,i){var n,r,o,s,a,l,c,h=xt.css(t,"position"),u=xt(t),d={};"static"===h&&(t.style.position="relative"),a=u.offset(),o=xt.css(t,"top"),l=xt.css(t,"left"),c=("absolute"===h||"fixed"===h)&&(o+l).indexOf("auto")>-1,c?(n=u.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),yt(e)&&(e=e.call(t,i,xt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):u.css(d)}},xt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){xt.offset.setOffset(this,t,e)});var e,i,n=this[0];if(n)return n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===xt.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===xt.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&(r=xt(t).offset(),r.top+=xt.css(t,"borderTopWidth",!0),r.left+=xt.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-xt.css(n,"marginTop",!0),left:e.left-r.left-xt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===xt.css(t,"position");)t=t.offsetParent;return t||te})}}),xt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;xt.fn[t]=function(n){return Bt(this,function(t,n,r){var o;if(bt(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r},t,n,arguments.length)}}),xt.each(["top","left"],function(t,e){xt.cssHooks[e]=P(vt.pixelPosition,function(t,i){if(i)return i=B(t,e),le.test(i)?xt(t).position()[e]+"px":i})}),xt.each({Height:"height",Width:"width"},function(t,e){xt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){xt.fn[n]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(!0===r||!0===o?"margin":"border");return Bt(this,function(e,i,r){var o;return bt(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?xt.css(e,i,a):xt.style(e,i,r,a)},e,s?r:void 0,s)}})}),xt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){xt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),xt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),xt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),xt.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),yt(t))return n=lt.call(arguments,2),r=function(){return t.apply(e||this,n.concat(lt.call(arguments)))},r.guid=t.guid=t.guid||xt.guid++,r},xt.holdReady=function(t){t?xt.readyWait++:xt.ready(!0)},xt.isArray=Array.isArray,xt.parseJSON=JSON.parse,xt.nodeName=o,xt.isFunction=yt,xt.isWindow=bt,xt.camelCase=f,xt.type=n,xt.now=Date.now,xt.isNumeric=function(t){var e=xt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return xt});var $e=t.jQuery,Qe=t.$;return xt.noConflict=function(e){return t.$===xt&&(t.$=Qe),e&&t.jQuery===xt&&(t.jQuery=$e),xt},e||(t.jQuery=t.$=xt),xt})},{}],53:[function(t,e,i){(function(t){!function(n){function r(t){throw new RangeError(E[t])}function o(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function s(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(z,"."),n+o(t.split("."),e).join(".")}function a(t){for(var e,i,n=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function l(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=P(t>>>10&1023|55296),t=56320|1023&t),e+=P(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:C}function h(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function u(t,e,i){var n=0;for(t=i?B(t/N):t>>1,t+=B(t/e);t>L*A>>1;n+=C)t=B(t/L);return B(n+(L+1)*t/(t+M))}function d(t){var e,i,n,o,s,a,h,d,p,f,g=[],m=t.length,v=0,y=S,b=k;for(i=t.lastIndexOf(T),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&r("not-basic"),g.push(t.charCodeAt(n));for(o=i>0?i+1:0;o<m;){for(s=v,a=1,h=C;o>=m&&r("invalid-input"),d=c(t.charCodeAt(o++)),(d>=C||d>B((x-v)/a))&&r("overflow"),v+=d*a,p=h<=b?w:h>=b+A?A:h-b,!(d<p);h+=C)f=C-p,a>B(x/f)&&r("overflow"),a*=f;e=g.length+1,b=u(v-s,e,0==s),B(v/e)>x-y&&r("overflow"),y+=B(v/e),v%=e,g.splice(v++,0,y)}return l(g)}function p(t){var e,i,n,o,s,l,c,d,p,f,g,m,v,y,b,I=[];for(t=a(t),m=t.length,e=S,i=0,s=k,l=0;l<m;++l)(g=t[l])<128&&I.push(P(g));for(n=o=I.length,o&&I.push(T);n<m;){for(c=x,l=0;l<m;++l)(g=t[l])>=e&&g<c&&(c=g);for(v=n+1,c-e>B((x-i)/v)&&r("overflow"),i+=(c-e)*v,e=c,l=0;l<m;++l)if(g=t[l],g<e&&++i>x&&r("overflow"),g==e){for(d=i,p=C;f=p<=s?w:p>=s+A?A:p-s,!(d<f);p+=C)b=d-f,y=C-f,I.push(P(h(f+b%y,0))),d=B(b/y);I.push(P(h(d,0))),s=u(i,v,n==o),i=0,++n}++i,++e}return I.join("")}function f(t){return s(t,function(t){return D.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return s(t,function(t){return j.test(t)?"xn--"+p(t):t})}var m="object"==typeof i&&i&&!i.nodeType&&i,v="object"==typeof e&&e&&!e.nodeType&&e,y="object"==typeof t&&t;y.global!==y&&y.window!==y&&y.self!==y||(n=y);var b,I,x=2147483647,C=36,w=1,A=26,M=38,N=700,k=72,S=128,T="-",D=/^xn--/,j=/[^\x20-\x7E]/,z=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=C-w,B=Math.floor,P=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:a,encode:l},decode:d,encode:p,toASCII:g,toUnicode:f},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(m&&v)if(e.exports==m)v.exports=b;else for(I in b)b.hasOwnProperty(I)&&(m[I]=b[I]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],54:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var h=0;h<c;++h){var u,d,p,f,g=t[h].replace(a,"%20"),m=g.indexOf(i);m>=0?(u=g.substr(0,m),d=g.substr(m+1)):(u=g,d=""),p=decodeURIComponent(u),f=decodeURIComponent(d),n(s,p)?r(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],55:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(s(t),function(s){var a=encodeURIComponent(r(s))+i;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],56:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":54,"./encode":55}],57:[function(t,e,n){!function(i,r){if("function"==typeof define&&define.amd)define(["backbone","lodash","jquery"],function(t,e,n){return t.$=n,r(i,t,e,n)});else if(void 0!==n){var o=t("backbone"),s=t("lodash"),a=o.$=t("jquery");e.exports=r(i,o,s,a)}else{var o=i.Backbone,s=i._,a=o.$=i.jQuery||i.$;i.joint=r(i,o,s,a),i.g=i.joint.g,i.V=i.Vectorizer=i.joint.V}}(this,function(e,r,o,s){function a(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",
aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in e)t==i&&(t=e[i]);for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,s=n[r].process,l=o.exec(t);l&&(channels=s(l),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},this.getHelpXML=function(){for(var t=new Array,i=0;i<n.length;i++)for(var r=n[i].example,o=0;o<r.length;o++)t[t.length]=r[o];for(var s in e)t[t.length]=s;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(var i=0;i<t.length;i++)try{var c=document.createElement("li"),h=new a(t[i]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+h.toHex()+"; color:"+h.toHex(),u.appendChild(document.createTextNode("test"));var d=document.createTextNode(" "+t[i]+" -> "+h.toRGB()+" -> "+h.toHex());c.appendChild(u),c.appendChild(d),l.appendChild(c)}catch(t){}return l}}function l(t,e,i,n,r,o){if(!(isNaN(o)||o<1)){o|=0;var s,a=document.getElementById(t),l=a.getContext("2d");try{try{s=l.getImageData(e,i,n,r)}catch(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),s=l.getImageData(e,i,n,r)}catch(t){throw alert("Cannot access local image"),new Error("unable to access local image data: "+t)}}}catch(t){throw alert("Cannot access image"),new Error("unable to access image data: "+t)}var h,u,d,p,f,v,y,b,I,x,C,w,A,M,N,k,S,T,D,j,z,E,L,B,P=s.data,G=o+o+1,O=n-1,Z=r-1,_=o+1,R=_*(_+1)/2,W=new c,Y=W;for(d=1;d<G;d++)if(Y=Y.next=new c,d==_)var V=Y;Y.next=W;var U=null,X=null;y=v=0;var H=g[o],F=m[o];for(u=0;u<r;u++){for(k=S=T=D=b=I=x=C=0,w=_*(j=P[v]),A=_*(z=P[v+1]),M=_*(E=P[v+2]),N=_*(L=P[v+3]),b+=R*j,I+=R*z,x+=R*E,C+=R*L,Y=W,d=0;d<_;d++)Y.r=j,Y.g=z,Y.b=E,Y.a=L,Y=Y.next;for(d=1;d<_;d++)p=v+((O<d?O:d)<<2),b+=(Y.r=j=P[p])*(B=_-d),I+=(Y.g=z=P[p+1])*B,x+=(Y.b=E=P[p+2])*B,C+=(Y.a=L=P[p+3])*B,k+=j,S+=z,T+=E,D+=L,Y=Y.next;for(U=W,X=V,h=0;h<n;h++)P[v+3]=L=C*H>>F,0!=L?(L=255/L,P[v]=(b*H>>F)*L,P[v+1]=(I*H>>F)*L,P[v+2]=(x*H>>F)*L):P[v]=P[v+1]=P[v+2]=0,b-=w,I-=A,x-=M,C-=N,w-=U.r,A-=U.g,M-=U.b,N-=U.a,p=y+((p=h+o+1)<O?p:O)<<2,k+=U.r=P[p],S+=U.g=P[p+1],T+=U.b=P[p+2],D+=U.a=P[p+3],b+=k,I+=S,x+=T,C+=D,U=U.next,w+=j=X.r,A+=z=X.g,M+=E=X.b,N+=L=X.a,k-=j,S-=z,T-=E,D-=L,X=X.next,v+=4;y+=n}for(h=0;h<n;h++){for(S=T=D=k=I=x=C=b=0,v=h<<2,w=_*(j=P[v]),A=_*(z=P[v+1]),M=_*(E=P[v+2]),N=_*(L=P[v+3]),b+=R*j,I+=R*z,x+=R*E,C+=R*L,Y=W,d=0;d<_;d++)Y.r=j,Y.g=z,Y.b=E,Y.a=L,Y=Y.next;for(f=n,d=1;d<=o;d++)v=f+h<<2,b+=(Y.r=j=P[v])*(B=_-d),I+=(Y.g=z=P[v+1])*B,x+=(Y.b=E=P[v+2])*B,C+=(Y.a=L=P[v+3])*B,k+=j,S+=z,T+=E,D+=L,Y=Y.next,d<Z&&(f+=n);for(v=h,U=W,X=V,u=0;u<r;u++)p=v<<2,P[p+3]=L=C*H>>F,L>0?(L=255/L,P[p]=(b*H>>F)*L,P[p+1]=(I*H>>F)*L,P[p+2]=(x*H>>F)*L):P[p]=P[p+1]=P[p+2]=0,b-=w,I-=A,x-=M,C-=N,w-=U.r,A-=U.g,M-=U.b,N-=U.a,p=h+((p=u+_)<Z?p:Z)*n<<2,b+=k+=U.r=P[p],I+=S+=U.g=P[p+1],x+=T+=U.b=P[p+2],C+=D+=U.a=P[p+3],U=U.next,w+=j=X.r,A+=z=X.g,M+=E=X.b,N+=L=X.a,k-=j,S-=z,T-=E,D-=L,X=X.next,v+=n}l.putImageData(s,e,i)}}function c(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var h,u=function(){function t(e,i){if(!(this instanceof t))return new t(e,i);if("string"==typeof e){var n=e.split(-1===e.indexOf("@")?" ":"@");e=parseInt(n[0],10),i=parseInt(n[1],10)}else Object(e)===e&&(i=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===i?0:i}function e(i,n){if(!(this instanceof e))return new e(i,n);this.start=t(i),this.end=t(n)}function i(t,e,n,r){if(!(this instanceof i))return new i(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===r?0:r}function n(e,i,r){return this instanceof n?e instanceof n?new n(t(e),e.a,e.b):(e=t(e),this.x=e.x,this.y=e.y,this.a=i,void(this.b=r)):new n(e,i,r)}var r=Math,o=r.abs,s=r.cos,a=r.sin,l=r.sqrt,c=r.min,h=r.max,d=(r.atan,r.atan2),p=(r.acos,r.round),f=r.floor,g=r.PI,m=r.random,v=function(t){return 180*t/g%360},y=function(t,e){return e=e||!1,(t=e?t:t%360)*g/180},b=function(t,e){return e*Math.round(t/e)},I=function(t){return t%360+(t<0?360:0)};return t.prototype={toString:function(){return this.x+"@"+this.y},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=c(h(this.x,t.x),t.x+t.width),this.y=c(h(this.y,t.y),t.y+t.height),this)},theta:function(e){e=t(e);var i=-(e.y-this.y),n=e.x-this.x,r=0==i.toFixed(10)&&0==n.toFixed(10)?0:d(i,n);return r<0&&(r=2*g+r),180*r/g},distance:function(t){return e(this,t).length()},manhattanDistance:function(t){return o(t.x-this.x)+o(t.y-this.y)},offset:function(t,e){return this.x+=t||0,this.y+=e||0,this},magnitude:function(){return l(this.x*this.x+this.y*this.y)||.01},update:function(t,e){return this.x=t||0,this.y=e||0,this},round:function(t){return this.x=t?this.x.toFixed(t):p(this.x),this.y=t?this.y.toFixed(t):p(this.y),this},normalize:function(t){var e=(t||1)/this.magnitude();return this.x=e*this.x,this.y=e*this.y,this},difference:function(e){return t(this.x-e.x,this.y-e.y)},bearing:function(t){return e(this,t).bearing()},toPolar:function(e){e=e&&t(e)||t(0,0);var i=this.x,n=this.y;return this.x=l((i-e.x)*(i-e.x)+(n-e.y)*(n-e.y)),this.y=y(e.theta(t(i,n))),this},rotate:function(e,i){i=(i+360)%360,this.toPolar(e),this.y+=y(i);var n=t.fromPolar(this.x,this.y,e);return this.x=n.x,this.y=n.y,this},move:function(e,i){var n=y(t(e).theta(this));return this.offset(s(n)*i,-a(n)*i)},scale:function(e,i,n){return n=n&&t(n)||t(0,0),this.x=n.x+e*(this.x-n.x),this.y=n.y+i*(this.y-n.y),this},changeInAngle:function(e,i,n){return t(this).offset(-e,-i).theta(n)-this.theta(n)},equals:function(t){return this.x===t.x&&this.y===t.y},snapToGrid:function(t,e){return this.x=b(this.x,t),this.y=b(this.y,e||t),this},reflection:function(e){return t(e).move(this,this.distance(e))},clone:function(){return t(this)},toJSON:function(){return{x:this.x,y:this.y}}},t.fromPolar=function(e,i,n){n=n&&t(n)||t(0,0);var r=o(e*s(i)),l=o(e*a(i)),c=I(v(i));return c<90?l=-l:c<180?(r=-r,l=-l):c<270&&(r=-r),t(n.x+r,n.y+l)},t.random=function(e,i,n,r){return t(f(m()*(i-e+1)+e),f(m()*(r-n+1)+n))},e.prototype={toString:function(){return this.start.toString()+" "+this.end.toString()},length:function(){return l(this.squaredLength())},squaredLength:function(){var t=this.start.x,e=this.start.y,i=this.end.x,n=this.end.y;return(t-=i)*t+(e-=n)*e},midpoint:function(){return t((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},intersection:function(e){var i=t(this.end.x-this.start.x,this.end.y-this.start.y),n=t(e.end.x-e.start.x,e.end.y-e.start.y),r=i.x*n.y-i.y*n.x,o=t(e.start.x-this.start.x,e.start.y-this.start.y),s=o.x*n.y-o.y*n.x,a=o.x*i.y-o.y*i.x;if(0===r||s*r<0||a*r<0)return null;if(r>0){if(s>r||a>r)return null}else if(s<r||a<r)return null;return t(this.start.x+s*i.x/r,this.start.y+s*i.y/r)},bearing:function(){var t=y(this.start.y),e=y(this.end.y),i=this.start.x,n=this.end.x,r=y(n-i),o=a(r)*s(e),l=s(t)*a(e)-a(t)*s(e)*s(r),c=v(d(o,l)),h=["NE","E","SE","S","SW","W","NW","N"],u=c-22.5;return u<0&&(u+=360),u=parseInt(u/45),h[u]},pointAt:function(e){return t((1-e)*this.start.x+e*this.end.x,(1-e)*this.start.y+e*this.end.y)},pointOffset:function(t){return((this.end.x-this.start.x)*(t.y-this.start.y)-(this.end.y-this.start.y)*(t.x-this.start.x))/2},clone:function(){return e(this)}},i.fromEllipse=function(t){return t=n(t),i(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},i.prototype={toString:function(){return this.origin().toString()+" "+this.corner().toString()},equals:function(t){var e=u.rect(this).normalize(),i=u.rect(t).normalize();return e.x===i.x&&e.y===i.y&&e.width===i.width&&e.height===i.height},origin:function(){return t(this.x,this.y)},corner:function(){return t(this.x+this.width,this.y+this.height)},topRight:function(){return t(this.x+this.width,this.y)},bottomLeft:function(){return t(this.x,this.y+this.height)},center:function(){return t(this.x+this.width/2,this.y+this.height/2)},topMiddle:function(){return t(this.x+this.width/2,this.y)},bottomMiddle:function(){return t(this.x+this.width/2,this.y+this.height)},leftMiddle:function(){return t(this.x,this.y+this.height/2)},rightMiddle:function(){return t(this.x+this.width,this.y+this.height/2)},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),o=t.corner();if(o.x<=e.x||o.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var s=Math.max(e.x,r.x),a=Math.max(e.y,r.y);return i(s,a,Math.min(n.x,o.x)-s,Math.min(n.y,o.y)-a)},union:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),o=t.corner(),s=Math.min(e.x,r.x),a=Math.min(e.y,r.y);return i(s,a,Math.max(n.x,o.x)-s,Math.max(n.y,o.y)-a)},sideNearestToPoint:function(e){e=t(e);var i=e.x-this.x,n=this.x+this.width-e.x,r=e.y-this.y,o=this.y+this.height-e.y,s=i,a="left";return n<s&&(s=n,a="right"),r<s&&(s=r,a="top"),o<s&&(s=o,a="bottom"),a},containsPoint:function(e){return e=t(e),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(t){var e=i(this).normalize(),n=i(t).normalize(),r=e.width,o=e.height,s=n.width,a=n.height;if(!(r&&o&&s&&a))return!1;var l=e.x,c=e.y,h=n.x,u=n.y;return s+=h,r+=l,a+=u,o+=c,l<=h&&s<=r&&c<=u&&a<=o},pointNearestToPoint:function(e){if(e=t(e),this.containsPoint(e)){switch(this.sideNearestToPoint(e)){case"right":return t(this.x+this.width,e.y);case"left":return t(this.x,e.y);case"bottom":return t(e.x,this.y+this.height);case"top":return t(e.x,this.y)}}return e.adhereToRect(this)},intersectionWithLineFromCenterToPoint:function(i,n){i=t(i);var r,o=t(this.x+this.width/2,this.y+this.height/2);n&&i.rotate(o,n);for(var s=[e(this.origin(),this.topRight()),e(this.topRight(),this.corner()),e(this.corner(),this.bottomLeft()),e(this.bottomLeft(),this.origin())],a=e(o,i),l=s.length-1;l>=0;--l){var c=s[l].intersection(a);if(null!==c){r=c;break}}return r&&n&&r.rotate(o,-n),r},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},round:function(t){return this.x=t?this.x.toFixed(t):p(this.x),this.y=t?this.y.toFixed(t):p(this.y),this.width=t?this.width.toFixed(t):p(this.width),this.height=t?this.height.toFixed(t):p(this.height),this},normalize:function(){var t=this.x,e=this.y,i=this.width,n=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,n=-this.height),this.x=t,this.y=e,this.width=i,this.height=n,this},bbox:function(t){var e=y(t||0),n=o(a(e)),r=o(s(e)),l=this.width*r+this.height*n,c=this.width*n+this.height*r;return i(this.x+(this.width-l)/2,this.y+(this.height-c)/2,l,c)},scale:function(t,e,i){var n=this.origin().scale(t,e,i);return this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},snapToGrid:function(t,e){var i=this.origin().snapToGrid(t,e),n=this.corner().snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=n.x-i.x,this.height=n.y-i.y,this},clone:function(){return i(this)},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},n.fromRect=function(t){return t=i(t),n(t.center(),t.width/2,t.height/2)},n.prototype={toString:function(){return t(this.x,this.y).toString()+" "+this.a+" "+this.b},bbox:function(){return i(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},equals:function(t){return t=n(t),t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},intersectionWithLineFromCenterToPoint:function(e,i){e=t(e),i&&e.rotate(t(this.x,this.y),i);var n,r=e.x-this.x,o=e.y-this.y;if(0===r)return n=this.bbox().pointNearestToPoint(e),i?n.rotate(t(this.x,this.y),-i):n;var s=o/r,a=s*s,c=this.a*this.a,h=this.b*this.b,u=l(1/(1/c+a/h));u=r<0?-u:u;var d=s*u;return n=t(this.x+u,this.y+d),i?n.rotate(t(this.x,this.y),-i):n},clone:function(){return n(this)}},{toDeg:v,toRad:y,snapToGrid:b,normalizeAngle:I,point:t,line:e,rect:i,ellipse:n,bezier:{curveThroughPoints:function(t){for(var e=this.getCurveControlPoints(t),i=["M",t[0].x,t[0].y],n=0;n<e[0].length;n++)i.push("C",e[0][n].x,e[0][n].y,e[1][n].x,e[1][n].y,t[n+1].x,t[n+1].y);return i},getCurveControlPoints:function(e){var i,n=[],r=[],o=e.length-1;if(1==o)return n[0]=t((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=t(2*n[0].x-e[0].x,2*n[0].y-e[0].y),[n,r];var s=[];for(i=1;i<o-1;i++)s[i]=4*e[i].x+2*e[i+1].x;s[0]=e[0].x+2*e[1].x,s[o-1]=(8*e[o-1].x+e[o].x)/2;var a=this.getFirstControlPoints(s);for(i=1;i<o-1;++i)s[i]=4*e[i].y+2*e[i+1].y;s[0]=e[0].y+2*e[1].y,s[o-1]=(8*e[o-1].y+e[o].y)/2;var l=this.getFirstControlPoints(s);for(i=0;i<o;i++)n.push(t(a[i],l[i])),i<o-1?r.push(t(2*e[i+1].x-a[i+1],2*e[i+1].y-l[i+1])):r.push(t((e[o].x+a[o-1])/2,(e[o].y+l[o-1])/2));return[n,r]},getFirstControlPoints:function(t){var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var o=1;o<e;o++)n[o]=1/r,r=(o<e-1?4:3.5)-n[o],i[o]=(t[o]-i[o-1])/r;for(o=1;o<e;o++)i[e-o-1]-=n[e-o]*i[e-o];return i},getInversionSolver:function(t,e,i,n){function r(t,e){var i=o[t],n=o[e];return function(r){return(t%3?3:1)*(e%3?3:1)*(r.x*(i.y-n.y)+r.y*(n.x-i.x)+i.x*n.y-i.y*n.x)}}var o=arguments;return function(i){var n=3*r(2,3)(e),o=r(1,3)(t)/n,s=-r(2,3)(t)/n,a=o*r(3,1)(i)+s*(r(3,0)(i)+r(2,1)(i))+r(2,0)(i),l=o*r(3,0)(i)+s*r(2,0)(i)+r(1,0)(i);return l/(l-a)}},getCurveDivider:function(t,i,n,r){return function(o){var s=e(t,i).pointAt(o),a=e(i,n).pointAt(o),l=e(n,r).pointAt(o),c=e(s,a).pointAt(o),h=e(a,l).pointAt(o),u=e(c,h).pointAt(o);return[{p0:t,p1:s,p2:c,p3:u},{p0:u,p1:h,p2:l,p3:r}]}}},scale:{linear:function(t,e,i){var n=t[1]-t[0],r=e[1]-e[0];return(i-t[0])/n*r+e[0]||0}}}}();h=function(){"use strict";if("object"!=typeof window||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var t={xmlns:"http://www.w3.org/2000/svg",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink"},e=function(i,n,r){if(!(this instanceof e))return e.apply(Object.create(e.prototype),arguments);if(i){if(e.isV(i)&&(i=i.node),n=n||{},e.isString(i))if("svg"===i.toLowerCase())i=e.createSvgDocument();else if("<"===i[0]){var o=e.createSvgDocument(i);if(o.childNodes.length>1){var s,a,l=[];for(s=0,a=o.childNodes.length;s<a;s++){var c=o.childNodes[s];l.push(new e(document.importNode(c,!0)))}return l}i=document.importNode(o.firstChild,!0)}else i=document.createElementNS(t.xmlns,i);return this.node=i,this.node.id||(this.node.id=e.uniqueId()),this.setAttributes(n),r&&this.append(r),this}};e.prototype.getTransformToElement=function(t){return t.getScreenCTM().inverse().multiply(this.node.getScreenCTM())},e.prototype.transform=function(t){if(e.isUndefined(t))return this.node.parentNode?this.getTransformToElement(this.node.parentNode):this.node.getScreenCTM();var i=e.createSVGTransform(t);return this.node.transform.baseVal.appendItem(i),this},e.prototype.translate=function(t,i,n){n=n||{},i=i||0;var r=this.attr("transform")||"",o=e.parseTransformString(r);if(e.isUndefined(t))return o.translate;r=r.replace(/translate\([^\)]*\)/g,"").trim();var s=n.absolute?t:o.translate.tx+t,a=n.absolute?i:o.translate.ty+i,l="translate("+s+","+a+")";return this.attr("transform",(l+" "+r).trim()),this},e.prototype.rotate=function(t,i,n,r){r=r||{};var o=this.attr("transform")||"",s=e.parseTransformString(o);if(e.isUndefined(t))return s.rotate;o=o.replace(/rotate\([^\)]*\)/g,"").trim(),t%=360;var a=r.absolute?t:s.rotate.angle+t,l=void 0!==i&&void 0!==n?","+i+","+n:"",c="rotate("+a+l+")";return this.attr("transform",(o+" "+c).trim()),this},e.prototype.scale=function(t,i){i=e.isUndefined(i)?t:i;var n=this.attr("transform")||"",r=e.parseTransformString(n);if(e.isUndefined(t))return r.scale;n=n.replace(/scale\([^\)]*\)/g,"").trim();var o="scale("+t+","+i+")";return this.attr("transform",(n+" "+o).trim()),this},e.prototype.bbox=function(t,i){if(!this.node.ownerSVGElement)return{x:0,y:0,width:0,height:0};var n;try{n=this.node.getBBox(),n={x:n.x,y:n.y,width:n.width,height:n.height}}catch(t){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}if(t)return n;var r=this.getTransformToElement(i||this.node.ownerSVGElement);return e.transformRect(n,r)},e.prototype.text=function(t,i){t=e.sanitizeText(t),i=i||{};var n,r=t.split("\n");this.attr("y")||this.attr("y","0.8em"),this.attr("display",t?null:"none"),this.attr("xml:space","preserve"),this.node.textContent="";var o=this.node;if(i.textPath){var s=this.find("defs");0===s.length&&(s=e("defs"),this.append(s));var a=Object(i.textPath)===i.textPath?i.textPath.d:i.textPath;if(a){var l=e("path",{d:a});s.append(l)}var c=e("textPath");!i.textPath["xlink:href"]&&l&&c.attr("xlink:href","#"+l.node.id),Object(i.textPath)===i.textPath&&c.attr(i.textPath),this.append(c),o=c.node}for(var h=0,u=0;u<r.length;u++){var d=r[u],p=i.lineHeight||"1em";"auto"===i.lineHeight&&(p="1.5em");var f=e("tspan",{dy:0==u?"0em":p,x:this.attr("x")||0});if(f.addClass("v-line"),d)if(i.annotations){for(var g=0,m=e.annotateString(r[u],e.isArray(i.annotations)?i.annotations:[i.annotations],{offset:-h,includeAnnotationIndices:i.includeAnnotationIndices}),v=0;v<m.length;v++){var y=m[v];if(e.isObject(y)){var b=parseInt(y.attrs["font-size"],10);b&&b>g&&(g=b),n=e("tspan",y.attrs),i.includeAnnotationIndices&&n.attr("annotations",y.annotations),y.attrs.class&&n.addClass(y.attrs.class),n.node.textContent=y.t}else n=document.createTextNode(y||" ");f.append(n)}"auto"===i.lineHeight&&g&&0!==u&&f.attr("dy",1.2*g+"px")}else f.node.textContent=d;else f.addClass("v-empty-line"),f.node.style.opacity=0,f.node.textContent="-";e(o).append(f),h+=d.length+1}return this},e.prototype.removeAttr=function(t){var i=e.qualifyAttr(t),n=this.node;return i.ns?n.hasAttributeNS(i.ns,i.local)&&n.removeAttributeNS(i.ns,i.local):n.hasAttribute(t)&&n.removeAttribute(t),this},e.prototype.attr=function(t,i){if(e.isUndefined(t)){for(var n=this.node.attributes,r={},o=0;o<n.length;o++)r[n[o].nodeName]=n[o].nodeValue;return r}if(e.isString(t)&&e.isUndefined(i))return this.node.getAttribute(t);if("object"==typeof t)for(var s in t)t.hasOwnProperty(s)&&this.setAttribute(s,t[s]);else this.setAttribute(t,i);return this},e.prototype.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},e.prototype.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},e.prototype.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},e.prototype.append=function(t){e.isArray(t)||(t=[t]);for(var i=0,n=t.length;i<n;i++)this.node.appendChild(e.toNode(t[i]));return this},e.prototype.prepend=function(t){return this.node.insertBefore(e.isV(t)?t.node:t,this.node.firstChild),this},e.prototype.prepend=function(t){var i=this.node.firstChild;return i?e(i).before(t):this.append(t)},e.prototype.before=function(t){var i=this.node,n=i.parentNode;if(n){e.isArray(t)||(t=[t]);for(var r=0,o=t.length;r<o;r++)n.insertBefore(e.toNode(t[r]),i)}return this},e.prototype.svg=function(){return this.node instanceof window.SVGSVGElement?this:e(this.node.ownerSVGElement)},e.prototype.defs=function(){var t=this.svg().node.getElementsByTagName("defs");return t&&t.length?e(t[0]):void 0},e.prototype.clone=function(){var t=e(this.node.cloneNode(!0));return t.node.id=e.uniqueId(),t},e.prototype.findOne=function(t){var i=this.node.querySelector(t);return i?e(i):void 0},e.prototype.find=function(t){var i=[],n=this.node.querySelectorAll(t);if(n)for(var r=0;r<n.length;r++)i.push(e(n[r]));return i},e.prototype.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},e.prototype.findParentByClass=function(t,i){for(var n=this.node.ownerSVGElement,r=this.node.parentNode;r&&r!==i&&r!==n;){var o=e(r);if(o.hasClass(t))return o;r=r.parentNode}return null},e.prototype.toLocalPoint=function(t,e){var i=this.svg().node,n=i.createSVGPoint();n.x=t,n.y=e;try{var r=n.matrixTransform(i.getScreenCTM().inverse()),o=this.getTransformToElement(i).inverse()}catch(t){return n}return r.matrixTransform(o)},e.prototype.translateCenterToPoint=function(t){var e=this.bbox(),i=u.rect(e).center();this.translate(t.x-i.x,t.y-i.y)},e.prototype.translateAndAutoOrient=function(t,i,n){var r=this.scale();this.attr("transform",""),this.scale(r.sx,r.sy);var o=this.svg().node,s=this.bbox(!1,n),a=o.createSVGTransform();a.setTranslate(-s.x-s.width/2,-s.y-s.height/2);var l=o.createSVGTransform(),c=u.point(t).changeInAngle(t.x-i.x,t.y-i.y,i);l.setRotate(c,0,0);var h=o.createSVGTransform(),d=u.point(t).move(i,s.width/2);h.setTranslate(t.x+(t.x-d.x),t.y+(t.y-d.y));var p=this.getTransformToElement(n),f=o.createSVGTransform();f.setMatrix(h.matrix.multiply(l.matrix.multiply(a.matrix.multiply(p))));var g=e.decomposeMatrix(f.matrix);return this.translate(g.translateX,g.translateY),this.rotate(g.rotation),this},e.prototype.animateAlongPath=function(t,i){var n=e("animateMotion",t),r=e("mpath",{"xlink:href":"#"+e(i).node.id});n.append(r),this.append(n);try{n.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var o=n.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),l=0,c=a.length;l<c;l++){var h=a[l],u=new Animator(o,h,l);animators.push(u),o.animators[l]=u,u.register()}}}},e.prototype.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},e.prototype.addClass=function(t){if(!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},e.prototype.removeClass=function(t){if(this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},e.prototype.toggleClass=function(t,i){return(e.isUndefined(i)?this.hasClass(t):!i)?this.removeClass(t):this.addClass(t),this},e.prototype.sample=function(t){t=t||1;for(var e,i=this.node,n=i.getTotalLength(),r=[],o=0;o<n;)e=i.getPointAtLength(o),r.push({x:e.x,y:e.y,distance:o}),o+=t;return r},e.prototype.convertToPath=function(){var t=e("path");t.attr(this.attr());var i=this.convertToPathData();return i&&t.attr("d",i),t},e.prototype.convertToPathData=function(){var t=this.node.tagName.toUpperCase();switch(t){case"PATH":return this.attr("d");case"LINE":return e.convertLineToPathData(this.node);case"POLYGON":return e.convertPolygonToPathData(this.node);case"POLYLINE":return e.convertPolylineToPathData(this.node);case"ELLIPSE":return e.convertEllipseToPathData(this.node);case"CIRCLE":return e.convertCircleToPathData(this.node);case"RECT":return e.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},e.prototype.findIntersection=function(t,i){var n=this.svg().node;i=i||n;var r=u.rect(this.bbox(!1,i)),o=r.center();if(r.intersectionWithLineFromCenterToPoint(t)){var s,a=this.node.localName.toUpperCase();if("RECT"===a){var l=u.rect(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),c=this.getTransformToElement(i),h=e.decomposeMatrix(c),d=n.createSVGTransform();d.setRotate(-h.rotation,o.x,o.y);var p=e.transformRect(l,d.matrix.multiply(c));s=u.rect(p).intersectionWithLineFromCenterToPoint(t,h.rotation)}else if("PATH"===a||"POLYGON"===a||"POLYLINE"===a||"CIRCLE"===a||"ELLIPSE"===a){var f,g,m,v,y,b,I="PATH"===a?this:this.convertToPath(),x=I.sample(),C=1/0,w=[];for(f=0;f<x.length;f++)g=x[f],m=e.createSVGPoint(g.x,g.y),m=m.matrixTransform(this.getTransformToElement(i)),g=u.point(m),v=g.distance(o),y=1.1*g.distance(t),b=v+y,b<C?(C=b,w=[{sample:g,refDistance:y}]):b<C+1&&w.push({sample:g,refDistance:y});w.sort(function(t,e){return t.refDistance-e.refDistance}),w[0]&&(s=w[0].sample)}return s}},e.prototype.setAttribute=function(t,i){var n=this.node;if(null===i)return this.removeAttr(t),this;var r=e.qualifyAttr(t);return r.ns?n.setAttributeNS(r.ns,t,i):"id"===t?n.id=i:n.setAttribute(t,i),this},e.createSvgDocument=function(i){var n='<svg xmlns="'+t.xmlns+'" xmlns:xlink="'+t.xlink+'" version="1.1">'+(i||"")+"</svg>";return e.parseXML(n,{async:!1}).documentElement},e.idCounter=0,e.uniqueId=function(){return"v-"+ ++e.idCounter},e.sanitizeText=function(t){return(t||"").replace(/ /g,"")},e.isUndefined=function(t){return void 0===t},e.isString=function(t){return"string"==typeof t},e.isObject=function(t){return t&&"object"==typeof t},e.isArray=Array.isArray,e.parseXML=function(t,i){i=i||{};var n;try{var r=new DOMParser;e.isUndefined(i.async)||(r.async=i.async),n=r.parseFromString(t,"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n},e.qualifyAttr=function(e){if(-1!==e.indexOf(":")){var i=e.split(":");return{ns:t[i[0]],local:i[1]}}return{ns:null,local:e}},e.parseTransformString=function(t){var e,i,n;if(t){var r=/[ ,]+/,o=t.match(/translate\((.*)\)/);o&&(e=o[1].split(r));var s=t.match(/rotate\((.*)\)/);s&&(i=s[1].split(r));var a=t.match(/scale\((.*)\)/);a&&(n=a[1].split(r))}var l=n&&n[0]?parseFloat(n[0]):1;return{translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:i&&i[0]?parseInt(i[0],10):0,cx:i&&i[1]?parseInt(i[1],10):void 0,cy:i&&i[2]?parseInt(i[2],10):void 0},scale:{sx:l,sy:n&&n[1]?parseFloat(n[1]):l}}},e.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},e.decomposeMatrix=function(t){var i=e.deltaTransformPoint(t,{x:0,y:1}),n=e.deltaTransformPoint(t,{x:1,y:0}),r=180/Math.PI*Math.atan2(i.y,i.x)-90,o=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:r,skewY:o,rotation:r}},e.isV=function(t){return t instanceof e},e.isVElement=e.isV;var i=e("svg").node;return e.createSVGMatrix=function(t){var e=i.createSVGMatrix();for(var n in t)e[n]=t[n];return e},e.createSVGTransform=function(t){return e.isUndefined(t)?i.createSVGTransform():(t instanceof SVGMatrix||(t=e.createSVGMatrix(t)),i.createSVGTransformFromMatrix(t))},e.createSVGPoint=function(t,e){var n=i.createSVGPoint();return n.x=t,n.y=e,n},e.transformRect=function(t,e){var n=i.createSVGPoint();n.x=t.x,n.y=t.y;var r=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var o=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var s=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var a=n.matrixTransform(e),l=Math.min(r.x,o.x,s.x,a.x),c=Math.max(r.x,o.x,s.x,a.x),h=Math.min(r.y,o.y,s.y,a.y);return{x:l,y:h,width:c-l,height:Math.max(r.y,o.y,s.y,a.y)-h}},e.transformPoint=function(t,i){return e.createSVGPoint(t.x,t.y).matrixTransform(i)},e.styleToObject=function(t){for(var e={},i=t.split(";"),n=0;n<i.length;n++){var r=i[n],o=r.split("=");e[o[0].trim()]=o[1].trim()}return e},e.createSlicePathData=function(t,e,i,n){var r=2*Math.PI-1e-6,o=t,s=e,a=i,l=n,c=(l<a&&(c=a,a=l,l=c),l-a),h=c<Math.PI?"0":"1",u=Math.cos(a),d=Math.sin(a),p=Math.cos(l),f=Math.sin(l);return c>=r?o?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+o+"A"+o+","+o+" 0 1,0 0,"+-o+"A"+o+","+o+" 0 1,0 0,"+o+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":o?"M"+s*u+","+s*d+"A"+s+","+s+" 0 "+h+",1 "+s*p+","+s*f+"L"+o*p+","+o*f+"A"+o+","+o+" 0 "+h+",0 "+o*u+","+o*d+"Z":"M"+s*u+","+s*d+"A"+s+","+s+" 0 "+h+",1 "+s*p+","+s*f+"L0,0Z"},e.mergeAttrs=function(t,i){for(var n in i)"class"===n?t[n]=t[n]?t[n]+" "+i[n]:i[n]:"style"===n?e.isObject(t[n])&&e.isObject(i[n])?t[n]=e.mergeAttrs(t[n],i[n]):e.isObject(t[n])?t[n]=e.mergeAttrs(t[n],e.styleToObject(i[n])):e.isObject(i[n])?t[n]=e.mergeAttrs(e.styleToObject(t[n]),i[n]):t[n]=e.mergeAttrs(e.styleToObject(t[n]),e.styleToObject(i[n])):t[n]=i[n];return t},e.annotateString=function(t,i,n){i=i||[],n=n||{};for(var r,o,s,a=n.offset||0,l=[],c=[],h=0;h<t.length;h++){o=c[h]=t[h];for(var u=0;u<i.length;u++){var d=i[u],p=d.start+a,f=d.end+a;h>=p&&h<f&&(e.isObject(o)?o.attrs=e.mergeAttrs(e.mergeAttrs({},o.attrs),d.attrs):o=c[h]={t:t[h],attrs:d.attrs},n.includeAnnotationIndices&&(o.annotations||(o.annotations=[])).push(u))}s=c[h-1],s?e.isObject(o)&&e.isObject(s)?JSON.stringify(o.attrs)===JSON.stringify(s.attrs)?r.t+=o.t:(l.push(r),r=o):e.isObject(o)?(l.push(r),r=o):e.isObject(s)?(l.push(r),r=o):r=(r||"")+o:r=o}return r&&l.push(r),l},e.findAnnotationsAtIndex=function(t,e){var i=[];return t&&t.forEach(function(t){t.start<e&&e<=t.end&&i.push(t)}),i},e.findAnnotationsBetweenIndexes=function(t,e,i){var n=[];return t&&t.forEach(function(t){(e>=t.start&&e<t.end||i>t.start&&i<=t.end||t.start>=e&&t.end<i)&&n.push(t)}),n},e.shiftAnnotations=function(t,e,i){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=i:t.start>=e&&(t.start+=i,t.end+=i)}),t},e.convertLineToPathData=function(t){return t=e(t),
["M",t.attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},e.convertPolygonToPathData=function(t){t=e(t);var i=e.getPointsFromSvgNode(t.node);return i.length>0?e.svgPointsToPath(i):null},e.convertPolylineToPathData=function(t){var i=e.getPointsFromSvgNode(t.node);return i.length>0?e.svgPointsToPath(i):null},e.svgPointsToPath=function(t){var e;for(e=0;e<t.length;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")+" Z"},e.getPointsFromSvgNode=function(t){var e,i=[];for(e=0;e<t.points.numberOfItems;e++)i.push(t.points.getItem(e));return i},e.KAPPA=.5522847498307935,e.convertCircleToPathData=function(t){t=e(t);var i=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("r")),o=r*e.KAPPA;return["M",i,n-r,"C",i+o,n-r,i+r,n-o,i+r,n,"C",i+r,n+o,i+o,n+r,i,n+r,"C",i-o,n+r,i-r,n+o,i-r,n,"C",i-r,n-o,i-o,n-r,i,n-r,"Z"].join(" ")},e.convertEllipseToPathData=function(t){t=e(t);var i=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("rx")),o=parseFloat(t.attr("ry"))||r,s=r*e.KAPPA,a=o*e.KAPPA;return["M",i,n-o,"C",i+s,n-o,i+r,n-a,i+r,n,"C",i+r,n+a,i+s,n+o,i,n+o,"C",i-s,n+o,i-r,n+a,i-r,n,"C",i-r,n-a,i-s,n-o,i,n-o,"Z"].join(" ")},e.convertRectToPathData=function(t){t=e(t);var i,n=parseFloat(t.attr("x"))||0,r=parseFloat(t.attr("y"))||0,o=parseFloat(t.attr("width"))||0,s=parseFloat(t.attr("height"))||0,a=parseFloat(t.attr("rx"))||0,l=parseFloat(t.attr("ry"))||0,c=u.rect(n,r,o,s);if(a||l){var h=n+o,d=r+s;i=["M",n+a,r,"L",h-a,r,"Q",h,r,h,r+l,"L",h,r+s-l,"Q",h,d,h-a,d,"L",n+a,d,"Q",n,d,n,d-a,"L",n,r+l,"Q",n,r,n+a,r,"Z"].join(" ")}else i=["M",c.origin().x,c.origin().y,"H",c.corner().x,"V",c.corner().y,"H",c.origin().x,"V",c.origin().y,"Z"].join(" ");return i},e.rectToPath=function(t){var e=t.rx||t["top-rx"]||0,i=t.rx||t["bottom-rx"]||0,n=t.ry||t["top-ry"]||0,r=t.ry||t["bottom-ry"]||0;return["M",t.x,t.y+n,"v",t.height-n-r,"a",i,r,0,0,0,i,r,"h",t.width-2*i,"a",i,r,0,0,0,i,-r,"v",-(t.height-r-n),"a",e,n,0,0,0,-e,-n,"h",-(t.width-2*e),"a",e,n,0,0,0,-e,n].join(" ")},e.toNode=function(t){return e.isV(t)?t.node:t.nodeName&&t||t[0]},e}();var d={version:"0.9.7",dia:{},ui:{},layout:{},shapes:{},format:{},connectors:{},highlighters:{},routers:{},mvc:{views:{}},setTheme:function(t,e){e=e||{},o.invoke(d.mvc.views,"setTheme",t,e),d.mvc.View.prototype.defaultTheme=t},env:{_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return d.env._tests[t]=e},test:function(t){var e=d.env._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var i=d.env._results[t];if(void 0!==i)return i;try{i=e()}catch(t){i=!1}return d.env._results[t]=i,i}},util:{hashCode:function(t){var e=0;if(0==t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return e},getByPath:function(t,e,i){i=i||"/";for(var n,r=e.split(i);r.length;){if(n=r.shift(),!(Object(t)===t&&n in t))return;t=t[n]}return t},setByPath:function(t,e,i,n){n=n||"/";var r=e.split(n),o=t,s=0;if(e.indexOf(n)>-1){for(var a=r.length;s<a-1;s++)o=o[r[s]]||(o[r[s]]={});o[r[a-1]]=i}else t[e]=i;return t},unsetByPath:function(t,e,i){i=i||"/";var n=e.lastIndexOf(i);if(n>-1){var r=d.util.getByPath(t,e.substr(0,n),i);r&&delete r[e.slice(n+1)]}else delete t[e];return t},flattenObject:function(t,e,i){e=e||"/";var n={};for(var r in t)if(t.hasOwnProperty(r)){var o="object"==typeof t[r];if(o&&i&&i(t[r])&&(o=!1),o){var s=this.flattenObject(t[r],e,i);for(var a in s)s.hasOwnProperty(a)&&(n[r+e+a]=s[a])}else n[r]=t[r]}return n},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},guid:function(t){return this.guid.id=this.guid.id||1,t.id=void 0===t.id?"j_"+this.guid.id++:t.id,t.id},mixin:function(){for(var t=arguments[0],e=1,i=arguments.length;e<i;e++){var n=arguments[e];(Object(n)===n||o.isFunction(n)||null!==n&&void 0!==n)&&o.each(n,function(e,i){if(this.mixin.deep&&Object(e)===e)return t[i]||(t[i]=o.isArray(e)?[]:{}),void this.mixin(t[i],e);t[i]!==e&&(this.mixin.supplement&&t.hasOwnProperty(i)||(t[i]=e))},this)}return t},supplement:function(){this.mixin.supplement=!0;var t=this.mixin.apply(this,arguments);return this.mixin.supplement=!1,t},deepMixin:function(){this.mixin.deep=!0;var t=this.mixin.apply(this,arguments);return this.mixin.deep=!1,t},deepSupplement:function(){this.mixin.deep=this.mixin.supplement=!0;var t=this.mixin.apply(this,arguments);return this.mixin.deep=this.mixin.supplement=!1,t},normalizeEvent:function(t){var e=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(e){for(var i in t)void 0===e[i]&&(e[i]=t[i]);return e}return t},nextFrame:function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),r=setTimeout(function(){t(i+n)},n);return e=i+n,r}}return function(e,i){return t(i?o.bind(e,i):e)}}(),cancelFrame:function(){var t,e="undefined"!=typeof window;return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?o.bind(t,window):t}(),shapePerimeterConnectionPoint:function(t,e,i,n){var r,o;if(!i){var s=e.$(".scalable")[0],a=e.$(".rotatable")[0];s&&s.firstChild?i=s.firstChild:a&&a.firstChild&&(i=a.firstChild)}return i?(o=h(i).findIntersection(n,t.paper.viewport))||(r=u.rect(h(i).bbox(!1,t.paper.viewport))):(r=e.model.getBBox(),o=r.intersectionWithLineFromCenterToPoint(n)),o||r.center()},breakText:function(t,e,i,n){n=n||{};var r=e.width,o=e.height,s=n.svgDocument||h("svg").node,a=h("<text><tspan></tspan></text>").attr(i||{}).node,l=a.firstChild,c=document.createTextNode("");a.style.opacity=0,a.style.display="block",l.style.display="block",l.appendChild(c),s.appendChild(a),n.svgDocument||document.body.appendChild(s);for(var u,d=t.split(" "),p=[],f=[],g=0,m=0,v=d.length;g<v;g++){var y=d[g];if(c.data=f[m]?f[m]+" "+y:y,l.getComputedTextLength()<=r)f[m]=c.data,u&&(p[m++]=!0,u=0);else{if(!f[m]||u){var b=!!u;if(u=y.length-1,b||!u){if(!u){if(!f[m]){f=[];break}d.splice(g,2,y+d[g+1]),v--,p[m++]=!0,g--;continue}d[g]=y.substring(0,u),d[g+1]=y.substring(u)+d[g+1]}else d.splice(g,1,y.substring(0,u),y.substring(u)),v++,m&&!p[m-1]&&m--;g--;continue}m++,g--}if(void 0!==o){var I=I||1.25*a.getBBox().height;if(I*f.length>o){f.splice(Math.floor(o/I));break}}}return n.svgDocument?s.removeChild(a):document.body.removeChild(s),f.join("\n")},imageToDataUri:function(t,e){if(!t||"data:"===t.substr(0,"data:".length))return setTimeout(function(){e(null,t)},0);var i=document.createElement("canvas"),n=document.createElement("img");n.onload=function(){var r=i.getContext("2d");i.width=n.width,i.height=n.height,r.drawImage(n,0,0);try{var o=(t.split(".").pop(),i.toDataURL("jpeg"))}catch(i){if(/\.svg$/.test(t)){var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");s.open("GET",t,!1),s.send(null);var a=s.responseText;return e(null,"data:image/svg+xml,"+encodeURIComponent(a))}console.error(n.src,"fails to convert",i)}e(null,o)},n.ononerror=function(){e(new Error("Failed to load image."))},n.src=t},getElementBBox:function(t){var e,i=s(t),n=i.offset();if(t.ownerSVGElement){e=h(t).bbox();var r=t.getBoundingClientRect(),o=(r.width-e.width)/2,a=(r.height-e.height)/2;e.x=n.left+o,e.y=n.top+a}else e={x:n.left,y:n.top,width:i.outerWidth(),height:i.outerHeight()};return e},sortElements:function(t,e){var i=s(t),n=i.map(function(){var t=this,e=t.parentNode,i=e.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,i),e.removeChild(i)}});return Array.prototype.sort.call(i,e).each(function(t){n[t].call(this)})},setAttributesBySelector:function(t,e){var i=s(t);o.each(e,function(t,e){var n=i.find(e).addBack().filter(e);o.has(t,"class")&&(n.addClass(t.class),t=o.omit(t,"class")),n.attr(t)})},normalizeSides:function(t){return Object(t)!==t?(t=t||0,{top:t,bottom:t,left:t,right:t}):{top:t.top||0,bottom:t.bottom||0,left:t.left||0,right:t.right||0}},timing:{linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,i=1;1;e+=i,i/=2)if(t>=(7-4*e)/11){var n=(11-6*e-11*t)/4;return-n*n+i*i}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,i){return e=e||0,i=i||1,function(n){var r=t(n);return r<e?e:r>i?i:r}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},interpolate:{number:function(t,e){var i=e-t;return function(e){return t+i*e}},object:function(t,e){var i=o.keys(t);return function(n){var r,o,s={};for(r=i.length-1;-1!=r;r--)o=i[r],s[o]=t[o]+(e[o]-t[o])*n;return s}},hexColor:function(t,e){var i=parseInt(t.slice(1),16),n=parseInt(e.slice(1),16),r=255&i,o=(255&n)-r,s=65280&i,a=(65280&n)-s,l=16711680&i,c=(16711680&n)-l;return function(t){return"#"+(1<<24|r+o*t&255|s+a*t&65280|l+c*t&16711680).toString(16).slice(1)}},unit:function(t,e){var i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,n=i.exec(t),r=i.exec(e),o=r[1].indexOf("."),s=o>0?r[1].length-o-1:0;t=+n[1];var a=+r[1]-t,l=n[2];return function(e){return(t+a*e).toFixed(s)+l}}},filter:{outline:function(t){var e=o.isFinite(t.margin)?t.margin:2,i=o.isFinite(t.width)?t.width:1;return d.util.template('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:o.isFinite(t.opacity)?t.opacity:1,outerRadius:e+i,innerRadius:e})},highlight:function(t){return d.util.template('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:o.isFinite(t.width)?t.width:1,blur:o.isFinite(t.blur)?t.blur:0,opacity:o.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=o.isFinite(t.x)?t.x:2;return d.util.template('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:o.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return d.util.template(e)({dx:t.dx||0,dy:t.dy||0,opacity:o.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:o.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=o.isFinite(t.amount)?t.amount:1;return d.util.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=o.isFinite(t.amount)?t.amount:1;return d.util.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=o.isFinite(t.amount)?t.amount:1;return d.util.template('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return d.util.template('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=o.isFinite(t.amount)?t.amount:1;return d.util.template('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return d.util.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:o.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=o.isFinite(t.amount)?t.amount:1;return d.util.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},format:{number:function(t,e,i){function n(t){for(var e=t.length,n=[],r=0,o=i.grouping[0];e>0&&o>0;)n.push(t.substring(e-=o,e+o)),o=i.grouping[r=(r+1)%i.grouping.length];return n.reverse().join(i.thousands)}i=i||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var r=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,o=r.exec(t),s=o[1]||" ",a=o[2]||">",l=o[3]||"",c=o[4]||"",h=o[5],u=+o[6],d=o[7],p=o[8],f=o[9],g=1,m="",v="",y=!1;switch(p&&(p=+p.substring(1)),(h||"0"===s&&"="===a)&&(h=s="0",a="=",d&&(u-=Math.floor((u-1)/4))),f){case"n":d=!0,f="g";break;case"%":g=100,v="%",f="f";break;case"p":g=100,v="%",f="r";break;case"b":case"o":case"x":case"X":"#"===c&&(m="0"+f.toLowerCase());case"c":case"d":y=!0,p=0;break;case"s":g=-1,f="r"}"$"===c&&(m=i.currency[0],v=i.currency[1]),"r"!=f||p||(f="g"),null!=p&&("g"==f?p=Math.max(1,Math.min(21,p)):"e"!=f&&"f"!=f||(p=Math.max(0,Math.min(20,p))));var b=h&&d;if(y&&e%1)return"";var I=e<0||0===e&&1/e<0?(e=-e,"-"):l,x=v;if(g<0){var C=this.prefix(e,p);e=C.scale(e),x=C.symbol+v}else e*=g;e=this.convert(f,e,p);var w=e.lastIndexOf("."),A=w<0?e:e.substring(0,w),M=w<0?"":i.decimal+e.substring(w+1);!h&&d&&i.grouping&&(A=n(A));var N=m.length+A.length+M.length+(b?0:I.length),k=N<u?new Array(N=u-N+1).join(s):"";return b&&(A=n(k+A)),I+=m,e=A+M,("<"===a?I+e+k:">"===a?k+I+e:"^"===a?k.substring(0,N>>=1)+I+e+k.substring(N):I+(b?e:k+e))+x},string:function(t,e){for(var i,n="{",r=!1,o=[];-1!==(i=t.indexOf(n));){var s,a,l;if(s=t.slice(0,i),r){a=s.split(":"),l=a.shift().split("."),s=e;for(var c=0;c<l.length;c++)s=s[l[c]];a.length&&(s=this.number(a,s))}o.push(s),t=t.slice(i+1),n=(r=!r)?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,i){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(i);case"e":return e.toExponential(i);case"f":return e.toFixed(i);case"r":return(e=this.round(e,this.precision(e,i))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),i))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var i=o.map(["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],function(t,e){var i=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/i}:function(t){return t*i},symbol:t}}),n=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n<=0?n+1:n-1)/3)))),i[8+n/3]}},template:function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^\{\} ]+) ?\}|\{\{([^\{\} ]+)\}\}/g;return function(i){return t.replace(e,function(t){for(var e=Array.prototype.slice.call(arguments),n=o.find(e.slice(1,4),function(t){return!!t}),r=n.split("."),s=i[r.shift()];!o.isUndefined(s)&&r.length;)s=s[r.shift()];return o.isUndefined(s)?"":s})}},toggleFullScreen:function(t){function e(t,e){for(var i=["webkit","moz","ms","o",""],n=0;n<i.length;n++){var r=i[n],s=r?r+e:e.substr(0,1).toLowerCase()+e.substr(1);if(!o.isUndefined(t[s]))return o.isFunction(t[s])?t[s]():t[s]}}t=t||document.body,e(document,"FullScreen")||e(document,"IsFullScreen")?e(document,"CancelFullScreen"):e(t,"RequestFullScreen")},wrapWith:function(t,e,i){if(o.isString(i)){if(!d.util.wrappers[i])throw new Error('Unknown wrapper: "'+i+'"');i=d.util.wrappers[i]}if(!o.isFunction(i))throw new Error("Wrapper must be a function.");o.each(e,function(e){t[e]=i(t[e])})},wrappers:{cells:function(t){return function(){var e=Array.prototype.slice.call(arguments),i=e.length>0&&o.first(e)||[],n=e.length>1&&o.last(e)||{};return o.isArray(i)||(n instanceof d.dia.Cell?(i=e,n={}):i=o.initial(e)),t.call(this,i,n)}}}}};if(d.mvc.View=r.View.extend({options:{},theme:null,themeClassNamePrefix:"joint-theme-",requireSetThemeOverride:!1,defaultTheme:"default",constructor:function(t){r.View.call(this,t)},initialize:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=o.extend({},this.options,t),o.bindAll(this,"setTheme","onSetTheme","remove","onRemove"),d.mvc.views[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this._ensureElClassName(),this.init()},_ensureElClassName:function(){var t=o.result(this,"className");this.$el.addClass(t)},init:function(){},onRender:function(){},setTheme:function(t,e){if(e=e||{},!this.theme||!this.requireSetThemeOverride||e.override)return this.theme&&this.$el.removeClass(this.themeClassNamePrefix+this.theme),this.$el.addClass(this.themeClassNamePrefix+t),this.onSetTheme(this.theme,t),this.theme=t,this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),d.mvc.views[this.cid]=null,r.View.prototype.remove.apply(this,arguments),this},onRemove:function(){}}),function(){d.mvc.View._extend=d.mvc.View.extend,d.mvc.View.extend=function(t,e){t=t||{};var i=t.render||this.prototype.render||null;return t.render=function(){return i&&i.apply(this,arguments),this.onRender(),this},d.mvc.View._extend.call(this,t,e)}}(),d.dia.GraphCells=r.Collection.extend({cellNamespace:d.shapes,initialize:function(t,e){e.cellNamespace&&(this.cellNamespace=e.cellNamespace),this.graph=e.graph},model:function(t,e){var i=e.collection,n=i.cellNamespace,r="link"===t.type?d.dia.Link:d.util.getByPath(n,t.type,".")||d.dia.Element,o=new r(t,e);return o.graph=i.graph,o},comparator:function(t){return t.get("z")||0}}),d.dia.Graph=r.Model.extend({_batches:{},initialize:function(t,e){e=e||{};var i=new d.dia.GraphCells([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});r.Model.prototype.set.call(this,"cells",i),i.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this.on("batch:stop",this._onBatchStop,this),this._out={},this._in={},this._nodes={},this._edges={},i.on("add",this._restructureOnAdd,this),i.on("remove",this._restructureOnRemove,this),i.on("reset",this._restructureOnReset,this),i.on("change:source",this._restructureOnChangeSource,this),i.on("change:target",this._restructureOnChangeTarget,this),i.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.hasActiveBatch("to-front")||this.hasActiveBatch("to-back")||this.get("cells").sort()},_onBatchStop:function(t){var e=t&&t.batchName;"to-front"!==e&&"to-back"!==e||this.hasActiveBatch(e)||this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.get("source"),i=t.get("target");e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.get("source"),i=t.get("target");e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],i.id&&this._in[i.id]&&this._in[i.id][t.id]&&delete this._in[i.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},o.each(t,this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var i=t.get("source");i.id&&((this._out[i.id]||(this._out[i.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var i=t.get("target");i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=r.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,i){var n;return"object"==typeof t?(n=t,i=e):(n={})[t]=e,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,i),n=o.omit(n,"cells")),r.Model.prototype.set.call(this,n,i)},clear:function(t){t=o.extend({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var i=e.sortBy(function(t){return t.isLink()?1:2});do{i.shift().remove(t)}while(i.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t){var e;if(t instanceof r.Model?(e=t.attributes,t.graph=this):e=t,!o.isString(e.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},maxZIndex:function(){var t=this.get("cells").last();return t?t.get("z")||0:0},addCell:function(t,e){return o.isArray(t)?this.addCells(t,e):(t instanceof r.Model?t.has("z")||t.set("z",this.maxZIndex()+1):o.isUndefined(t.z)&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t),e||{}),this)},addCells:function(t,e){return t.length&&(e.position=t.length,this.startBatch("add"),o.each(t,function(t){e.position--,this.addCell(t,e)},this),this.stopBatch("add")),this},resetCells:function(t,e){return this.get("cells").reset(o.map(t,this._prepareCell,this),e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),o.invoke(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,i){i=i||{},i.clear||(i.disconnectLinks?this.disconnectLinks(t,i):this.removeLinks(t,i)),this.get("cells").remove(t,{silent:!0}),delete t.graph},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return o.map(this._nodes,function(t,e){return this.getCell(e)},this)},getLinks:function(){return o.map(this._edges,function(t,e){return this.getCell(e)},this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var i=e.inbound,n=e.outbound;o.isUndefined(i)&&o.isUndefined(n)&&(i=n=!0);var r=[],s={};if(n&&o.each(this.getOutboundEdges(t.id),function(t,e){s[e]||(r.push(this.getCell(e)),s[e]=!0)},this),i&&o.each(this.getInboundEdges(t.id),function(t,e){s[e]||(r.push(this.getCell(e)),s[e]=!0)},this),e.deep){var a=t.getEmbeddedCells({deep:!0}),l={};o.each(a,function(t){t.isLink()&&(l[t.id]=!0)}),o.each(a,function(t){t.isLink()||(n&&o.each(this.getOutboundEdges(t.id),function(t,e){s[e]||l[e]||(r.push(this.getCell(e)),s[e]=!0)},this),i&&o.each(this.getInboundEdges(t.id),function(t,e){s[e]||l[e]||(r.push(this.getCell(e)),s[e]=!0)},this))},this)}return r},getNeighbors:function(t,e){e=e||{};var i=e.inbound,n=e.outbound;o.isUndefined(i)&&o.isUndefined(n)&&(i=n=!0);var r=o.transform(this.getConnectedLinks(t,e),function(r,s){var a=s.get("source"),l=s.get("target"),c=s.hasLoop(e);if(i&&o.has(a,"id")&&!r[a.id]){var h=this.getCell(a.id);!c&&(!h||h===t||e.deep&&h.isEmbeddedIn(t))||(r[a.id]=h)}if(n&&o.has(l,"id")&&!r[l.id]){var u=this.getCell(l.id);!c&&(!u||u===t||e.deep&&u.isEmbeddedIn(t))||(r[l.id]=u)}},{},this);return o.values(r)},getCommonAncestor:function(){var t=o.map(arguments,function(t){for(var e=[],i=t.get("parent");i;)e.push(i),i=this.getCell(i).get("parent");return e},this);t=o.sortBy(t,"length");var e=o.find(t.shift(),function(e){return o.every(t,function(t){return o.contains(t,e)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var i=[];return this.search(t,function(e){e!==t&&i.push(e)},o.extend({},e,{outbound:!0})),i},cloneCells:function(t){t=o.unique(t);var e=o.transform(t,function(t,e){t[e.id]=e.clone()},{});return o.each(t,function(t){var i=e[t.id];if(i.isLink()){var n=i.get("source"),r=i.get("target");n.id&&e[n.id]&&i.prop("source/id",e[n.id].id),r.id&&e[r.id]&&i.prop("target/id",e[r.id].id)}var s=t.get("parent");s&&e[s]&&i.set("parent",e[s].id);var a=o.reduce(t.get("embeds"),function(t,i){return e[i]&&t.push(e[i].id),t},[]);o.isEmpty(a)||i.set("embeds",a)}),e},cloneSubgraph:function(t,e){var i=this.getSubgraph(t,e);return this.cloneCells(i)},getSubgraph:function(t,e){e=e||{};var i=[],n={},r=[],s=[];return o.each(t,function(t){if(n[t.id]||(i.push(t),n[t.id]=t,t.isLink()?s.push(t):r.push(t)),e.deep){var a=t.getEmbeddedCells({deep:!0});o.each(a,function(t){n[t.id]||(i.push(t),n[t.id]=t,t.isLink()?s.push(t):r.push(t))})}}),o.each(s,function(t){var e=t.get("source"),o=t.get("target");if(e.id&&!n[e.id]){var s=this.getCell(e.id);i.push(s),n[s.id]=s,r.push(s)}if(o.id&&!n[o.id]){var a=this.getCell(o.id);i.push(this.getCell(o.id)),n[a.id]=a,r.push(a)}},this),o.each(r,function(t){var r=this.getConnectedLinks(t,e);o.each(r,function(t){var e=t.get("source"),r=t.get("target");!n[t.id]&&e.id&&n[e.id]&&r.id&&n[r.id]&&(i.push(t),n[t.id]=t)})},this),i},getPredecessors:function(t,e){e=e||{};var i=[];return this.search(t,function(e){e!==t&&i.push(e)},o.extend({},e,{inbound:!0})),i},search:function(t,e,i){i=i||{},i.breadthFirst?this.bfs(t,e,i):this.dfs(t,e,i)},bfs:function(t,e,i){i=i||{};var n={},r={},s=[];for(s.push(t),r[t.id]=0;s.length>0;){var a=s.shift();if(!n[a.id]){if(n[a.id]=!0,!1===e(a,r[a.id]))return;o.each(this.getNeighbors(a,i),function(t){r[t.id]=r[a.id]+1,s.push(t)})}}},dfs:function(t,e,i,n,r){i=i||{};var s=n||{},a=r||0;!1!==e(t,a)&&(s[t.id]=!0,o.each(this.getNeighbors(t,i),function(t){s[t.id]||this.dfs(t,e,i,s,a+1)},this))},getSources:function(){var t=[];return o.each(this._nodes,function(e,i){this._in[i]&&!o.isEmpty(this._in[i])||t.push(this.getCell(i))},this),t},getSinks:function(){var t=[];return o.each(this._nodes,function(e,i){this._out[i]&&!o.isEmpty(this._out[i])||t.push(this.getCell(i))},this),t},isSource:function(t){return!this._in[t.id]||o.isEmpty(this._in[t.id])},isSink:function(t){return!this._out[t.id]||o.isEmpty(this._out[t.id])},isSuccessor:function(t,e){var i=!1;return this.search(t,function(n){if(n===e&&n!==t)return i=!0,!1},{outbound:!0}),i},isPredecessor:function(t,e){var i=!1;return this.search(t,function(n){if(n===e&&n!==t)return i=!0,!1},{inbound:!0}),i},isNeighbor:function(t,e,i){i=i||{};var n=i.inbound,r=i.outbound;o.isUndefined(n)&&o.isUndefined(r)&&(n=r=!0);var s=!1;return o.each(this.getConnectedLinks(t,i),function(t){var a=t.get("source"),l=t.get("target");t.hasLoop(i);return n&&o.has(a,"id")&&a.id===e.id?(s=!0,!1):r&&o.has(l,"id")&&l.id===e.id?(s=!0,!1):void 0}),s},disconnectLinks:function(t,e){o.each(this.getConnectedLinks(t),function(i){i.set(i.get("source").id===t.id?"source":"target",u.point(0,0),e)})},removeLinks:function(t,e){o.invoke(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return o.filter(this.getElements(),function(e){return e.getBBox().containsPoint(t)})},findModelsInArea:function(t,e){t=u.rect(t),e=o.defaults(e||{},{strict:!1});var i=e.strict?"containsRect":"intersect";return o.filter(this.getElements(),function(e){return t[i](e.getBBox())})},findModelsUnderElement:function(t,e){e=o.defaults(e||{},{searchBy:"bbox"});var i=t.getBBox(),n="bbox"==e.searchBy?this.findModelsInArea(i):this.findModelsFromPoint(i[e.searchBy]());return o.reject(n,function(e){return t.id==e.id||e.isEmbeddedIn(t)})},getBBox:function(t,e){return this.getCellsBBox(t||this.getElements(),e)},getCellsBBox:function(t,e){return o.reduce(t,function(t,i){return i.isLink()?t:t?t.union(i.getBBox(e)):i.getBBox(e)},null)},translate:function(t,e,i){var n=o.reject(this.getCells(),function(t){return t.isEmbedded()});o.invoke(n,"translate",t,e,i)},resize:function(t,e,i){return this.resizeCells(t,e,this.getCells(),i)},resizeCells:function(t,e,i,n){var r=this.getCellsBBox(i);if(r){var s=Math.max(t/r.width,0),a=Math.max(e/r.height,0);o.invoke(i,"scale",s,a,r.origin(),n)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",o.extend({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",o.extend({},e,{batchName:t}))},hasActiveBatch:function(t){return t?this._batches[t]:o.any(this._batches,function(t){return t>0})}}),d.util.wrapWith(d.dia.Graph.prototype,["resetCells","addCells","removeCells"],"cells"),d.dia.Cell=r.Model.extend({constructor:function(t,e){var i,n=t||{};this.cid=o.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(n=this.parse(n,e)||{}),(i=o.result(this,"defaults"))&&(n=o.merge({},i,n)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,i){throw new Error("Must define a translate() method.")},toJSON:function(){var t=this.constructor.prototype.defaults.attrs||{},e=this.attributes.attrs,i={};o.each(e,function(e,n){var r=t[n];o.each(e,function(t,e){o.isObject(t)&&!o.isArray(t)?o.each(t,function(t,s){r&&r[e]&&o.isEqual(r[e][s],t)||(i[n]=i[n]||{},(i[n][e]||(i[n][e]={}))[s]=t)}):r&&o.isEqual(r[e],t)||(i[n]=i[n]||{},i[n][e]=t)})});var n=o.cloneDeep(o.omit(this.attributes,"attrs"));return n.attrs=i,n},initialize:function(t){t&&t.id||this.set("id",d.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},processPorts:function(){var t=this.ports,e={};o.each(this.get("attrs"),function(t,i){t&&t.port&&(o.isUndefined(t.port.id)?e[t.port]={id:t.port}:e[t.port.id]=t.port)});var i={};if(o.each(t,function(t,n){e[n]||(i[n]=!0)}),this.graph&&!o.isEmpty(i)){var n=this.graph.getConnectedLinks(this,{inbound:!0});o.each(n,function(t){i[t.get("target").port]&&t.remove()});var r=this.graph.getConnectedLinks(this,{outbound:!0});o.each(r,function(t){i[t.get("source").port]&&t.remove()})}this.ports=e},remove:function(t){t=t||{};var e=this.graph;e&&e.startBatch("remove");var i=this.get("parent");if(i){(e&&e.getCell(i)).unembed(this)}return o.invoke(this.getEmbeddedCells(),"remove",t),
this.trigger("remove",this,this.collection,t),e&&e.stopBatch("remove"),this},toFront:function(t){if(this.graph){t=t||{};var e=(this.graph.getLastCell().get("z")||0)+1;if(this.startBatch("to-front").set("z",e,t),t.deep){var i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});o.each(i,function(i){i.set("z",++e,t)})}this.stopBatch("to-front")}return this},toBack:function(t){if(this.graph){t=t||{};var e=(this.graph.getFirstCell().get("z")||0)-1;if(this.startBatch("to-back"),t.deep){var i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});o.eachRight(i,function(i){i.set("z",e--,t)})}this.set("z",e,t).stopBatch("to-back")}return this},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.startBatch("embed");var i=o.clone(this.get("embeds")||[]);return i[t.isLink()?"unshift":"push"](t.id),t.set("parent",this.id,e),this.set("embeds",o.uniq(i),e),this.stopBatch("embed"),this},unembed:function(t,e){return this.startBatch("unembed"),t.unset("parent",e),this.set("embeds",o.without(this.get("embeds"),t.id),e),this.stopBatch("unembed"),this},getAncestors:function(){var t=[],e=this.get("parent");if(!this.graph)return t;for(;void 0!==e;){var i=this.graph.getCell(e);if(void 0===i)break;t.push(i),e=i.get("parent")}return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var i=this.getEmbeddedCells();i.length>0;){var n=i.shift();e.push(n),i.push.apply(i,n.getEmbeddedCells())}}else e=this.getEmbeddedCells(),o.each(e,function(i){e.push.apply(e,i.getEmbeddedCells(t))});else e=o.map(this.get("embeds"),this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var i=o.isString(t)?t:t.id,n=this.get("parent");if(e=o.defaults({deep:!0},e),this.graph&&e.deep){for(;n;){if(n===i)return!0;n=this.graph.getCell(n).get("parent")}return!1}return n===i},isEmbedded:function(){return!!this.get("parent")},clone:function(t){if(t=t||{},t.deep)return o.values(d.dia.Graph.prototype.cloneCells.call(null,[this].concat(this.getEmbeddedCells({deep:!0}))));var e=r.Model.prototype.clone.apply(this,arguments);return e.set("id",d.util.uuid()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,i){if(o.isString(t)){if(arguments.length>1){var n=t,r=n.split("/"),s=r[0];if(r.shift(),i=i||{},i.propertyPath=n,i.propertyValue=e,0===r.length)return this.set(s,e,i);var a={},l=a,c=s;o.each(r,function(t){l=l[c]=o.isFinite(Number(t))?[]:{},c=t}),a=d.util.setByPath(a,n,e,"/");var h=o.merge({},this.attributes);i.rewrite&&d.util.unsetByPath(h,n,"/");var u=o.merge(h,a);return this.set(s,u[s],i)}return d.util.getByPath(this.attributes,t,"/")}return this.set(o.merge({},this.attributes,t),e)},removeProp:function(t,e){e=e||{},e.dirty=!0;var i=t.split("/");if(1===i.length)return this.unset(t,e);var n=i[0],r=i.slice(1).join("/"),s=o.merge({},this.get(n));return d.util.unsetByPath(s,r,"/"),this.set(n,s,e)},attr:function(t,e,i){var n=Array.prototype.slice.call(arguments);return o.isString(t)?n[0]="attrs/"+t:n[0]={attrs:t},this.prop.apply(this,n)},removeAttr:function(t,e){return o.isArray(t)?(o.each(t,function(t){this.removeAttr(t,e)},this),this):this.removeProp("attrs/"+t,e)},transition:function(t,e,i,n){n=n||"/";var r={duration:100,delay:10,timingFunction:d.util.timing.linear,valueFunction:d.util.interpolate.number};i=o.extend(r,i);var s,a=0,l=o.bind(function(e){var n,r,o;a=a||e,e-=a,r=e/i.duration,r<1?this._transitionIds[t]=n=d.util.nextFrame(l):(r=1,delete this._transitionIds[t]),o=s(i.timingFunction(r)),i.transitionId=n,this.prop(t,o,i),n||this.trigger("transition:end",this,t)},this),c=o.bind(function(r){this.stopTransitions(t),s=i.valueFunction(d.util.getByPath(this.attributes,t,n),e),this._transitionIds[t]=d.util.nextFrame(r),this.trigger("transition:start",this,t)},this);return o.delay(c,i.delay,l)},getTransitions:function(){return o.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var i=t&&t.split(e);return o(this._transitionIds).keys().filter(i&&function(t){return o.isEqual(i,t.split(e).slice(0,i.length))}).each(function(t){d.util.cancelFrame(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,o.extend({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,o.extend({},e,{cell:this})),this}}),d.dia.CellView=d.mvc.View.extend({tagName:"g",attributes:function(){return{"model-id":this.model.id}},constructor:function(t){t.id=t.id||d.util.guid(this),d.mvc.View.call(this,t)},init:function(){o.bindAll(this,"remove","update"),this.$el.data("view",this),this.listenTo(this.model,"change:attrs",this.onChangeAttrs)},onChangeAttrs:function(t,e,i){return i.dirty?this.render():this.update(t,e,i)},can:function(t){var e=o.isFunction(this.options.interactive)?this.options.interactive(this):this.options.interactive;return o.isObject(e)&&!1!==e[t]||o.isBoolean(e)&&!1!==e},_ensureElement:function(){var t;if(this.el)t=o.result(this,"el");else{var e=o.extend({id:this.id},o.result(this,"attributes"));this.className&&(e.class=o.result(this,"className")),t=h(o.result(this,"tagName"),e).node}this.setElement(t,!1)},_setElement:function(t){this.$el=t instanceof r.$?t:r.$(t),this.el=this.$el[0],this.vel=h(this.el)},findBySelector:function(t){return"."===t?this.$el:this.$el.find(t)},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getStrokeBBox:function(t){var e=!!t;t=t||this.el;var i,n=h(t).bbox(!1,this.paper.viewport);return i=e?h(t).attr("stroke-width"):this.model.attr("rect/stroke-width")||this.model.attr("circle/stroke-width")||this.model.attr("ellipse/stroke-width")||this.model.attr("path/stroke-width"),i=parseFloat(i)||0,u.rect(n).moveAndExpand({x:-i/2,y:-i/2,width:i,height:i})},getBBox:function(){return u.rect(this.vel.bbox())},highlight:function(t,e){return t=t?this.$(t)[0]||this.el:this.el,e=e||{},e.partial=t!=this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t?this.$(t)[0]||this.el:this.el,e=e||{},e.partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t);if(0===e.length||e[0]===this.el){var i=this.model.get("attrs")||{};if(i["."]&&!1===i["."].magnet)return;return this.el}return e.attr("magnet")?e[0]:this.findMagnet(e.parent())},applyFilter:function(t,e){var i=o.isString(t)?this.findBySelector(t):s(t),n=e.name+this.paper.svg.id+d.util.hashCode(JSON.stringify(e));if(!this.paper.svg.getElementById(n)){var r=d.util.filter[e.name]&&d.util.filter[e.name](e.args||{});if(!r)throw new Error("Non-existing filter "+e.name);var a=h(r);a.attr({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3}),e.attrs&&a.attr(e.attrs),a.node.id=n,h(this.paper.svg).defs().append(a)}i.each(function(){h(this).attr("filter","url(#"+n+")")})},applyGradient:function(t,e,i){var n=o.isString(t)?this.findBySelector(t):s(t),r=i.type+this.paper.svg.id+d.util.hashCode(JSON.stringify(i));if(!this.paper.svg.getElementById(r)){var a=["<"+i.type+">",o.map(i.stops,function(t){return'<stop offset="'+t.offset+'" stop-color="'+t.color+'" stop-opacity="'+(o.isFinite(t.opacity)?t.opacity:1)+'" />'}).join(""),"</"+i.type+">"].join(""),l=h(a);i.attrs&&l.attr(i.attrs),l.node.id=r,h(this.paper.svg).defs().append(l)}n.each(function(){h(this).attr(e,"url(#"+r+")")})},getSelector:function(t,e){if(t===this.el)return e;var i=h(t).index()+1,n=t.tagName+":nth-child("+i+")";return e&&(n+=" > "+e),this.getSelector(t.parentNode,n)},pointerdblclick:function(t,e,i){this.notify("cell:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){this.notify("cell:pointerclick",t,e,i)},pointerdown:function(t,e,i){this.model.graph&&(this.model.startBatch("pointer"),this._graph=this.model.graph),this.notify("cell:pointerdown",t,e,i)},pointermove:function(t,e,i){this.notify("cell:pointermove",t,e,i)},pointerup:function(t,e,i){this.notify("cell:pointerup",t,e,i),this._graph&&(this._graph.stopBatch("pointer",{cell:this.model}),delete this._graph)},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mousewheel:function(t,e,i,n){this.notify("cell:mousewheel",t,e,i,n)},contextmenu:function(t,e,i){this.notify("cell:contextmenu",t,e,i)},onSetTheme:function(t,e){t&&this.vel.removeClass(this.themeClassNamePrefix+t),this.vel.addClass(this.themeClassNamePrefix+e)},setInteractivity:function(t){this.options.interactive=t}}),d.dia.Element=d.dia.Cell.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},isElement:function(){return!0},position:function(t,e,i){var n=o.isNumber(e);if(i=(n?i:t)||{},i.parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var r=this.graph.getCell(this.get("parent")),s=r&&!r.isLink()?r.get("position"):{x:0,y:0}}if(n)return i.parentRelative&&(t+=s.x,e+=s.y),this.set("position",{x:t,y:e},i);var a=u.point(this.get("position"));return i.parentRelative?a.difference(s):a},translate:function(t,e,i){if(t=t||0,e=e||0,0===t&&0===e)return this;i=i||{},i.translateBy=i.translateBy||this.id;var n=this.get("position")||{x:0,y:0};if(i.restrictedArea&&i.translateBy===this.id){var r=this.getBBox({deep:!0}),s=i.restrictedArea,a=n.x-r.x,l=n.y-r.y,c=Math.max(s.x+a,Math.min(s.x+s.width+a-r.width,n.x+t)),h=Math.max(s.y+l,Math.min(s.y+s.height+l-r.height,n.y+e));t=c-n.x,e=h-n.y}var u={x:n.x+t,y:n.y+e};return i.tx=t,i.ty=e,i.transition?(o.isObject(i.transition)||(i.transition={}),this.transition("position",u,o.extend({},i.transition,{valueFunction:d.util.interpolate.object}))):(this.set("position",u,i),o.invoke(this.getEmbeddedCells(),"translate",t,e,i)),this},resize:function(t,e,i){if(i=i||{},this.startBatch("resize",i),i.direction){var n=this.get("size");switch(i.direction){case"left":case"right":e=n.height;break;case"top":case"bottom":t=n.width}var r=u.normalizeAngle(this.get("angle")||0),o={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[i.direction];i.absolute&&(o+=Math.floor((r+45)/90),o%=4);var s=this.getBBox(),a=s[["bottomLeft","corner","topRight","origin"][o]](),l=u.point(a).rotate(s.center(),-r),c=Math.sqrt(t*t+e*e)/2,h=o*Math.PI/2;h+=Math.atan(o%2==0?e/t:t/e),h-=u.toRad(r);var d=u.point.fromPolar(c,h,l),p=u.point(d).offset(t/-2,e/-2);this.set("size",{width:t,height:e},i),this.position(p.x,p.y,i)}else this.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this},scale:function(t,e,i,n){var r=this.getBBox().scale(t,e,i);return this.startBatch("scale",n),this.position(r.x,r.y,n),this.resize(r.width,r.height,n),this.stopBatch("scale"),this},fitEmbeds:function(t){if(t=t||{},!this.graph)throw new Error("Element must be part of a graph.");var e=this.getEmbeddedCells();if(e.length>0){this.startBatch("fit-embeds",t),t.deep&&o.invoke(e,"fitEmbeds",t);var i=this.graph.getCellsBBox(e),n=d.util.normalizeSides(t.padding);i.moveAndExpand({x:-n.left,y:-n.top,width:n.right+n.left,height:n.bottom+n.top}),this.set({position:{x:i.x,y:i.y},size:{width:i.width,height:i.height}},t),this.stopBatch("fit-embeds")}return this},rotate:function(t,e,i){if(i){var n=this.getBBox().center(),r=this.get("size"),o=this.get("position");n.rotate(i,this.get("angle")-t);var s=n.x-r.width/2-o.x,a=n.y-r.height/2-o.y;this.startBatch("rotate",{angle:t,absolute:e,origin:i}),this.translate(s,a),this.rotate(t,e),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360);return this},getBBox:function(t){if(t=t||{},t.deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getCellsBBox(e)}var i=this.get("position"),n=this.get("size");return u.rect(i.x,i.y,n.width,n.height)}}),d.dia.ElementView=d.dia.CellView.extend({SPECIAL_ATTRIBUTES:["style","text","html","ref-x","ref-y","ref-dx","ref-dy","ref-width","ref-height","ref","x-alignment","y-alignment","port"],className:function(){return"element "+this.model.get("type").replace(/\./g," ")},initialize:function(){o.bindAll(this,"translate","resize","rotate"),d.dia.CellView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:position",this.translate),this.listenTo(this.model,"change:size",this.resize),this.listenTo(this.model,"change:angle",this.rotate)},update:function(t,e){var i=this.model.get("attrs"),n=this.rotatableNode;if(n){var r=n.attr("transform");n.attr("transform","")}var a=[],l={};o.each(e||i,function(t,e){var i=this.findBySelector(e);if(0!==i.length){l[e]=i;var n=this.SPECIAL_ATTRIBUTES.slice();o.isObject(t.filter)&&(n.push("filter"),this.applyFilter(i,t.filter)),o.isObject(t.fill)&&(n.push("fill"),this.applyGradient(i,"fill",t.fill)),o.isObject(t.stroke)&&(n.push("stroke"),this.applyGradient(i,"stroke",t.stroke)),o.isUndefined(t.text)||(i.each(function(){h(this).text(t.text+"",{lineHeight:t.lineHeight,textPath:t.textPath,annotations:t.annotations})}),n.push("lineHeight","textPath","annotations"));var r=o.omit(t,n);i.each(function(){h(this).attr(r)}),t.port&&i.attr("port",o.isUndefined(t.port.id)?t.port:t.port.id),t.style&&i.css(t.style),o.isUndefined(t.html)||i.each(function(){s(this).html(t.html+"")}),o.isUndefined(t["ref-x"])&&o.isUndefined(t["ref-y"])&&o.isUndefined(t["ref-dx"])&&o.isUndefined(t["ref-dy"])&&o.isUndefined(t["x-alignment"])&&o.isUndefined(t["y-alignment"])&&o.isUndefined(t["ref-width"])&&o.isUndefined(t["ref-height"])||o.each(i,function(t,e,i){var n=s(t);n.selector=i.selector,a.push(n)})}},this);var c=this.model.get("size"),u={x:0,y:0,width:c.width,height:c.height};e=e||{},o.each(a,function(t){var n=e[t.selector],r=n?o.merge({},i[t.selector],n):i[t.selector];this.positionRelative(h(t[0]),u,r,l)},this),n&&n.attr("transform",r||"")},positionRelative:function(t,e,i,n){var r=i.ref,s=parseFloat(i["ref-dx"]),a=parseFloat(i["ref-dy"]),l=i["y-alignment"],c=i["x-alignment"],u=i["ref-y"],d=o.isString(u)&&"%"===u.slice(-1);u=parseFloat(u),d&&(u/=100);var p=i["ref-x"],f=o.isString(p)&&"%"===p.slice(-1);p=parseFloat(p),f&&(p/=100);var g=i["ref-width"],m=o.isString(g)&&"%"===g.slice(-1);g=parseFloat(g),m&&(g/=100);var v=i["ref-height"],y=o.isString(v)&&"%"===v.slice(-1);v=parseFloat(v),y&&(v/=100);var b=t.findParentByClass("scalable",this.el);if(r){var I;if(!(I=n&&n[r]?h(n[r][0]):"."===r?this.vel:this.vel.findOne(r)))throw new Error("dia.ElementView: reference does not exists.");e=I.bbox(!1,this.el)}t.attr("transform")&&t.attr("transform",t.attr("transform").replace(/translate\([^)]*\)/g,"").trim()||""),isFinite(g)&&(m||g>=0&&g<=1?t.attr("width",g*e.width):t.attr("width",Math.max(g+e.width,0))),isFinite(v)&&(y||v>=0&&v<=1?t.attr("height",v*e.height):t.attr("height",Math.max(v+e.height,0)));var x,C=0,w=0;if(isFinite(s)&&(b?(x=x||b.scale(),C=e.x+e.width+s/x.sx):C=e.x+e.width+s),isFinite(a)&&(b?(x=x||b.scale(),w=e.y+e.height+a/x.sy):w=e.y+e.height+a),isFinite(p)&&(f||p>0&&p<1?C=e.x+e.width*p:b?(x=x||b.scale(),C=e.x+p/x.sx):C=e.x+p),isFinite(u)&&(d||u>0&&u<1?w=e.y+e.height*u:b?(x=x||b.scale(),w=e.y+u/x.sy):w=e.y+u),!o.isUndefined(l)||!o.isUndefined(c)){var A=t.bbox(!1,this.paper.viewport);"middle"===l?w-=A.height/2:"bottom"===l?w-=A.height:isFinite(l)&&(w+=l>-1&&l<1?A.height*l:l),"middle"===c?C-=A.width/2:"right"===c?C-=A.width:isFinite(c)&&(C+=c>-1&&c<1?A.width*c:c)}t.translate(C,w)},renderMarkup:function(){var t=this.model.get("markup")||this.model.markup;if(!t)throw new Error("properties.markup is missing while the default render() implementation is used.");var e=h(t);this.vel.append(e)},render:function(){return this.$el.empty(),this.renderMarkup(),this.rotatableNode=this.vel.findOne(".rotatable"),this.scalableNode=this.vel.findOne(".scalable"),this.update(),this.resize(),this.rotate(),this.translate(),this},scale:function(t,e){this.vel.scale(t,e)},resize:function(){var t=this.model.get("size")||{width:1,height:1},e=this.model.get("angle")||0,i=this.scalableNode;if(i){var n=i.bbox(!0);i.attr("transform","scale("+t.width/(n.width||1)+","+t.height/(n.height||1)+")");var r=this.rotatableNode,o=r&&r.attr("transform");if(o&&"null"!==o){r.attr("transform",o+" rotate("+-e+","+t.width/2+","+t.height/2+")");var s=i.bbox(!1,this.paper.viewport);this.model.set("position",{x:s.x,y:s.y}),this.rotate()}this.update()}},translate:function(t,e,i){var n=this.model.get("position")||{x:0,y:0};this.vel.attr("transform","translate("+n.x+","+n.y+")")},rotate:function(){var t=this.rotatableNode;if(t){var e=this.model.get("angle")||0,i=this.model.get("size")||{width:1,height:1},n=i.width/2,r=i.height/2;t.attr("transform","rotate("+e+","+n+","+r+")")}},getBBox:function(t){if(t&&t.useModelGeometry){var e=this.model.getBBox().bbox(this.model.get("angle")),i=this.paper.viewport.getCTM();return u.rect(h.transformRect(e,i))}return d.dia.CellView.prototype.getBBox.apply(this,arguments)},prepareEmbedding:function(t){t=t||{};var e=t.model||this.model,i=t.paper||this.paper;e.startBatch("to-front",t),e.toFront({deep:!0,ui:!0}),o.invoke(i.model.getConnectedLinks(e,{deep:!0}),"toFront",{ui:!0}),e.stopBatch("to-front");var n=e.get("parent");n&&i.model.getCell(n).unembed(e,{ui:!0})},processEmbedding:function(t){t=t||{};var e=t.model||this.model,i=t.paper||this.paper,n=i.options,r=i.model.findModelsUnderElement(e,{searchBy:n.findParentBy});n.frontParentOnly&&(r=r.slice(-1));for(var o=null,s=this._candidateEmbedView,a=r.length-1;a>=0;a--){var l=r[a];if(s&&s.model.id==l.id){o=s;break}var c=l.findView(i);if(n.validateEmbedding.call(i,this,c)){o=c;break}}o&&o!=s&&(s&&s.unhighlight(null,{embedding:!0}),this._candidateEmbedView=o.highlight(null,{embedding:!0})),!o&&s&&(s.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView)},finalizeEmbedding:function(t){t=t||{};var e=this._candidateEmbedView,i=t.model||this.model,n=t.paper||this.paper;e&&(e.model.embed(i,{ui:!0}),e.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView),o.invoke(n.model.getConnectedLinks(i,{deep:!0}),"reparent",{ui:!0})},pointerdown:function(t,e,i){var n=this.paper;if(t.target.getAttribute("magnet")&&this.can("addLinkFromMagnet")&&n.options.validateMagnet.call(n,this,t.target)){this.model.startBatch("add-link");var r=n.getDefaultLink(this,t.target);r.set({source:{id:this.model.id,selector:this.getSelector(t.target),port:t.target.getAttribute("port")},target:{x:e,y:i}}),n.model.addCell(r);var o=this._linkView=n.findViewByModel(r);o.pointerdown(t,e,i),o.startArrowheadMove("target",{whenNotAllowed:"remove"})}else this._dx=e,this._dy=i,this.restrictedArea=n.getRestrictedArea(this),d.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("element:pointerdown",t,e,i)},pointermove:function(t,e,i){if(this._linkView)this._linkView.pointermove(t,e,i);else{var n=this.paper.options.gridSize;if(this.can("elementMove")){var r=this.model.get("position"),o=u.snapToGrid(r.x,n)-r.x+u.snapToGrid(e-this._dx,n),s=u.snapToGrid(r.y,n)-r.y+u.snapToGrid(i-this._dy,n);this.model.translate(o,s,{restrictedArea:this.restrictedArea,ui:!0}),this.paper.options.embeddingMode&&(this._inProcessOfEmbedding||(this.prepareEmbedding(),this._inProcessOfEmbedding=!0),this.processEmbedding())}this._dx=u.snapToGrid(e,n),this._dy=u.snapToGrid(i,n),d.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("element:pointermove",t,e,i)}},pointerup:function(t,e,i){this._linkView?(this._linkView.pointerup(t,e,i),this._linkView=null,this.model.stopBatch("add-link")):(this._inProcessOfEmbedding&&(this.finalizeEmbedding(),this._inProcessOfEmbedding=!1),this.notify("element:pointerup",t,e,i),d.dia.CellView.prototype.pointerup.apply(this,arguments))}}),d.dia.Link=d.dia.Cell.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),labelMarkup:['<g class="label">',"<rect />","<text />","</g>"].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(){return this.set({source:u.point(0,0),target:u.point(0,0)})},label:function(t,e){t=t||0;var i=this.get("labels")||[];if(0===arguments.length||1===arguments.length)return i[t];var n=o.merge({},i[t],e),r=i.slice();return r[t]=n,this.set({labels:r})},translate:function(t,e,i){return i=i||{},i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.applyToPoints(function(i){return{x:(i.x||0)+t,y:(i.y||0)+e}},i)},scale:function(t,e,i,n){return this.applyToPoints(function(n){return u.point(n).scale(t,e,i).toJSON()},n)},applyToPoints:function(t,e){if(!o.isFunction(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var i={},n=this.get("source");n.id||(i.source=t(n));var r=this.get("target");r.id||(i.target=t(r));var s=this.get("vertices");return s&&s.length>0&&(i.vertices=o.map(s,t)),this.set(i,e)},reparent:function(t){var e;if(this.graph){var i=this.graph.getCell(this.get("source").id),n=this.graph.getCell(this.get("target").id),r=this.graph.getCell(this.get("parent"));i&&n&&(e=this.graph.getCommonAncestor(i,n)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.get("source").id,i=this.get("target").id;if(!e||!i)return!1;var n=e===i;if(!n&&t.deep&&this.graph){var r=this.graph.getCell(e),o=this.graph.getCell(i);n=r.isEmbeddedIn(o)||o.isEmbeddedIn(r)}return n},getSourceElement:function(){var t=this.get("source");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getTargetElement:function(){var t=this.get("target");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getRelationshipAncestor:function(){var t;if(this.graph){var e=o.compact([this,this.getSourceElement(),this.getTargetElement()]);t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=o.isString(t)?t:t.id,i=this.getRelationshipAncestor();return!!i&&(i.id===e||i.isEmbeddedIn(e))}},{endsEqual:function(t,e){var i=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&i}}),d.dia.LinkView=d.dia.CellView.extend({className:function(){return o.unique(this.model.get("type").split(".").concat("link")).join(" ")},options:{shortLinkLength:100,doubleLinkTools:!1,longLinkLength:160,linkToolsOffset:40,doubleLinkToolsOffset:60,sampleInterval:50},_z:null,initialize:function(t){d.dia.CellView.prototype.initialize.apply(this,arguments),"function"!=typeof this.constructor.prototype.watchSource&&(this.constructor.prototype.watchSource=this.createWatcher("source"),this.constructor.prototype.watchTarget=this.createWatcher("target")),this._labelCache={},this._markerCache={},this.startListening()},startListening:function(){var t=this.model;this.listenTo(t,"change:markup",this.render),this.listenTo(t,"change:smooth change:manhattan change:router change:connector",this.update),this.listenTo(t,"change:toolMarkup",this.onToolsChange),this.listenTo(t,"change:labels change:labelMarkup",this.onLabelsChange),this.listenTo(t,"change:vertices change:vertexMarkup",this.onVerticesChange),this.listenTo(t,"change:source",this.onSourceChange),this.listenTo(t,"change:target",this.onTargetChange)},onSourceChange:function(t,e,i){this.watchSource(t,e),i.translateBy&&this.model.get("target").id||(i.updateConnectionOnly=!0,this.update(this.model,null,i))},onTargetChange:function(t,e,i){this.watchTarget(t,e),i.translateBy||(i.updateConnectionOnly=!0,this.update(this.model,null,i))},onVerticesChange:function(t,e,i){this.renderVertexMarkers(),i.translateBy&&i.translateBy!==this.model.id||(i.updateConnectionOnly=!0,this.update(t,null,i))},onToolsChange:function(){this.renderTools().updateToolsPosition()},onLabelsChange:function(){this.renderLabels().updateLabelPositions()},render:function(){this.$el.empty();var t=this.model,e=h(t.get("markup")||t.markup);if(o.isArray(e)||(e=[e]),this._V={},o.each(e,function(t){var e=t.attr("class");e&&(this._V[s.camelCase(e)]=t)},this),!this._V.connection)throw new Error("link: no connection path in the markup");return this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e),this.renderLabels(),this.watchSource(t,t.get("source")).watchTarget(t,t.get("target")).update(),this},renderLabels:function(){if(!this._V.labels)return this;this._labelCache={};var t=s(this._V.labels.node).empty(),e=this.model.get("labels")||[];if(!e.length)return this;var i=d.util.template(this.model.get("labelMarkup")||this.model.labelMarkup),n=h(i()),r=this.can("labelMove");return o.each(e,function(e,i){var a=n.clone().node;h(a).attr("label-idx",i),r&&h(a).attr("cursor","move"),this._labelCache[i]=h(a);var l=s(a).find("text"),c=s(a).find("rect"),u=o.extend({"text-anchor":"middle","font-size":14},d.util.getByPath(e,"attrs/text","/"));l.attr(o.omit(u,"text")),o.isUndefined(u.text)||h(l[0]).text(u.text+"",{annotations:u.annotations}),t.append(a);var p=h(l[0]).bbox(!0,t[0]);h(l[0]).translate(0,-p.height/2);var f=o.extend({fill:"white",rx:3,ry:3},d.util.getByPath(e,"attrs/rect","/"));c.attr(o.extend(f,{x:p.x,y:p.y-p.height/2,width:p.width,height:p.height}))},this),this},renderTools:function(){if(!this._V.linkTools)return this;var t=s(this._V.linkTools.node).empty(),e=d.util.template(this.model.get("toolMarkup")||this.model.toolMarkup),i=h(e());if(t.append(i.node),this._toolCache=i,this.options.doubleLinkTools){var n;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=d.util.template(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=h(e())):n=i.clone(),t.append(n.node),this._tool2Cache=n}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=s(this._V.markerVertices.node).empty(),e=d.util.template(this.model.get("vertexMarkup")||this.model.vertexMarkup);return o.each(this.model.get("vertices"),function(i,n){t.append(h(e(o.extend({idx:n},i))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=s(this._V.markerArrowheads.node);t.empty();var e=d.util.template(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=h(e({end:"source"})),this._V.targetArrowhead=h(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,i){return i=i||{},i.updateConnectionOnly||this.updateAttributes(),this.updateConnection(i),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null,this.updatePostponed=!1,this},updateConnection:function(t){t=t||{};var e,i=this.model;if(t.translateBy&&i.isRelationshipEmbeddedIn(t.translateBy)){var n=t.tx||0,r=t.ty||0;e=this.route=o.map(this.route,function(t){return u.point(t).offset(n,r)}),this._translateConnectionPoints(n,r)}else e=this.route=this.findRoute(i.get("vertices")||[],t),this._findConnectionPoints(e);var s=this.getPathData(e);this._V.connection.attr("d",s),this._V.connectionWrap&&this._V.connectionWrap.attr("d",s),this._translateAndAutoOrientArrows(this._V.markerSource,this._V.markerTarget)},updateAttributes:function(){o.each(this.model.get("attrs"),function(t,e){var i=[];o.isObject(t.fill)&&(this.applyGradient(e,"fill",t.fill),i.push("fill")),o.isObject(t.stroke)&&(this.applyGradient(e,"stroke",t.stroke),i.push("stroke")),o.isObject(t.filter)&&(this.applyFilter(e,t.filter),i.push("filter")),i.length>0&&(i.unshift(t),t=o.omit.apply(o,i)),this.findBySelector(e).attr(t)},this)},_findConnectionPoints:function(t){var e,i,n,r,s=o.first(t);e=this.getConnectionPoint("source",this.model.get("source"),s||this.model.get("target")).round();var a=o.last(t);i=this.getConnectionPoint("target",this.model.get("target"),a||e).round();var l=this._markerCache;this._V.markerSource&&(l.sourceBBox=l.sourceBBox||this._V.markerSource.bbox(!0),n=u.point(e).move(s||i,l.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(l.targetBBox=l.targetBBox||this._V.markerTarget.bbox(!0),r=u.point(i).move(a||e,l.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),l.sourcePoint=n||e,l.targetPoint=r||i,this.sourcePoint=e,this.targetPoint=i},_translateConnectionPoints:function(t,e){var i=this._markerCache;i.sourcePoint.offset(t,e),i.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.model.get("labels")||[];if(!t.length)return this;var e=this._V.connection.node,i=e.getTotalLength();if(!o.isNaN(i)){var n;o.each(t,function(t,r){var s=t.position,a=o.isObject(s)?s.distance:s,l=o.isObject(s)?s.offset:{x:0,y:0};o.isNaN(a)?a=i/2:(a=a>i?i:a,a=a<0?i+a:a,a=a>1?a:i*a);var c=e.getPointAtLength(a);if(o.isObject(l))c=u.point(c).offset(l.x,l.y);else if(o.isNumber(l)){n||(n=this._samples||this._V.connection.sample(this.options.sampleInterval));for(var h,d,p,f=1/0,g=0,m=n.length;g<m;g++)d=n[g],(p=u.line(d,c).squaredLength())<f&&(f=p,d,h=g);var v=n[h-1],y=n[h+1],b=0;y?b=u.point(c).theta(y):v&&(b=u.point(v).theta(c)),c=u.point(c).offset(l).rotate(c,b-90)}this._labelCache[r].attr("transform","translate("+c.x+", "+c.y+")")
},this)}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,i=this.getConnectionLength();if(!o.isNaN(i)){i<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var n=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+t),this.options.doubleLinkTools&&i>=this.options.longLinkLength){var r=this.options.doubleLinkToolsOffset||e;n=this.getPointAtLength(i-r),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===s.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},createWatcher:function(t){function e(e,n){n=n||{};var r=null,o=e.previous(t)||{};return o.id&&this.stopListening(this.paper.getModelById(o.id),"change",i),n.id&&(r=this.paper.getModelById(n.id),this.listenTo(r,"change",i)),i.call(this,r,{cacheOnly:!0}),this}var i=o.partial(this.onEndModelChange,t);return e},onEndModelChange:function(t,e,i){var n=!i.cacheOnly,r=this.model,s=r.get(t)||{};if(e){var a=this.constructor.makeSelector(s),l="source"==t?"target":"source",c=r.get(l)||{},h=c.id&&this.constructor.makeSelector(c);if(i.handleBy===this.cid&&a==h)this[t+"BBox"]=this[l+"BBox"],this[t+"View"]=this[l+"View"],this[t+"Magnet"]=this[l+"Magnet"];else if(i.translateBy){var d=this[t+"BBox"];d.x+=i.tx,d.y+=i.ty}else{var p=this.paper.findViewByModel(s.id),f=p.el.querySelector(a);this[t+"BBox"]=p.getStrokeBBox(f),this[t+"View"]=p,this[t+"Magnet"]=f}if(i.handleBy===this.cid&&i.translateBy&&r.isEmbeddedIn(e)&&!o.isEmpty(r.get("vertices"))&&(n=!1),!this.updatePostponed&&c.id){var g=this.paper.getModelById(c.id);s.id===c.id&&(i.handleBy=this.cid),(i.handleBy===this.cid||i.translateBy&&g.isEmbeddedIn(i.translateBy))&&(this.updatePostponed=!0,n=!1)}}else this[t+"BBox"]=u.rect(s.x||0,s.y||0,1,1),this[t+"View"]=this[t+"Magnet"]=null;n&&(i.updateConnectionOnly=!0,this.update(r,null,i))},_translateAndAutoOrientArrows:function(t,e){t&&t.translateAndAutoOrient(this.sourcePoint,o.first(this.route)||this.targetPoint,this.paper.viewport),e&&e.translateAndAutoOrient(this.targetPoint,o.last(this.route)||this.sourcePoint,this.paper.viewport)},removeVertex:function(t){var e=o.clone(this.model.get("vertices"));return e&&e.length&&(e.splice(t,1),this.model.set("vertices",e,{ui:!0})),this},addVertex:function(t){for(var e=(this.model.get("vertices")||[]).slice(),i=e.slice(),n=this._V.connection.node.cloneNode(!1),r=n.getTotalLength(),o=e.length+1;o--&&(e.splice(o,0,t),h(n).attr("d",this.getPathData(this.findRoute(e))),n.getTotalLength()-r>20);)e=i.slice();return-1===o&&(o=0,e.splice(o,0,t)),this.model.set("vertices",e,{ui:!0}),o},sendToken:function(t,e,i){e=e||1e3,h(this.paper.viewport).append(t),h(t).animateAlongPath({dur:e+"ms",repeatCount:1},this._V.connection.node),o.delay(function(){h(t).remove(),i&&i()},e)},findRoute:function(t){var e=d.routers,i=this.model.get("router"),n=this.paper.options.defaultRouter;if(!i)if(this.model.get("manhattan"))i={name:"orthogonal"};else{if(!n)return t;i=n}var r=i.args||{},s=o.isFunction(i)?i:e[i.name];if(!o.isFunction(s))throw new Error('unknown router: "'+i.name+'"');return s.call(this,t||[],r,this)},getPathData:function(t){var e=d.connectors,i=this.model.get("connector"),n=this.paper.options.defaultConnector;i||(i=this.model.get("smooth")?{name:"smooth"}:n||{});var r=o.isFunction(i)?i:e[i.name],s=i.args||{};if(!o.isFunction(r))throw new Error('unknown connector: "'+i.name+'"');return r.call(this,this._markerCache.sourcePoint,this._markerCache.targetPoint,t||this.model.get("vertices")||{},s,this)},getConnectionPoint:function(t,e,i){var n;if(o.isEmpty(e)&&(e={x:0,y:0}),o.isEmpty(i)&&(i={x:0,y:0}),e.id){var r,s="source"===t?this.sourceBBox:this.targetBBox;if(i.id){var a="source"===t?this.targetBBox:this.sourceBBox;r=u.rect(a).intersectionWithLineFromCenterToPoint(u.rect(s).center()),r=r||u.rect(a).center()}else r=u.point(i);if(this.paper.options.perpendicularLinks||this.options.perpendicular){var l=u.rect(0,r.y,this.paper.options.width,1),c=u.rect(r.x,0,1,this.paper.options.height);if(l.intersect(u.rect(s)))switch(u.rect(s).sideNearestToPoint(r)){case"left":n=u.point(s.x,r.y);break;case"right":n=u.point(s.x+s.width,r.y);break;default:n=u.rect(s).center()}else if(c.intersect(u.rect(s)))switch(u.rect(s).sideNearestToPoint(r)){case"top":n=u.point(r.x,s.y);break;case"bottom":n=u.point(r.x,s.y+s.height);break;default:n=u.rect(s).center()}else n=u.rect(s).intersectionWithLineFromCenterToPoint(r),n=n||u.rect(s).center()}else if(this.paper.options.linkConnectionPoint){var h="target"===t?this.targetView:this.sourceView,d="target"===t?this.targetMagnet:this.sourceMagnet;n=this.paper.options.linkConnectionPoint(this,h,d,r)}else n=u.rect(s).intersectionWithLineFromCenterToPoint(r),n=n||u.rect(s).center()}else n=u.point(e);return n},getConnectionLength:function(){return this._V.connection.node.getTotalLength()},getPointAtLength:function(t){return this._V.connection.node.getPointAtLength(t)},_beforeArrowheadMove:function(){this._z=this.model.get("z"),this.model.toFront(),this.el.style.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets()},_afterArrowheadMove:function(){o.isNull(this._z)||(this.model.set("z",this._z,{ui:!0}),this._z=null),this.el.style.pointerEvents="visiblePainted",this.paper.options.markAvailable&&this._unmarkAvailableMagnets()},_createValidateConnectionArgs:function(t){function e(t,e){return i[o]=t,i[o+1]=t.el===e?void 0:e,i}var i=[];i[4]=t,i[5]=this;var n,r=0,o=0;"source"===t?(r=2,n="target"):(o=2,n="source");var s=this.model.get(n);return s.id&&(i[r]=this.paper.findViewByModel(s.id),i[r+1]=s.selector&&i[r].el.querySelector(s.selector)),e},_markAvailableMagnets:function(){function t(t,e){var i=t.paper;return i.options.validateConnection.apply(i,this._validateConnectionArgs(t,e))}var e=this.paper,i=e.model.getElements();this._marked={},o.chain(i).map(e.findViewByModel,e).each(function(e){var i=Array.prototype.slice.call(e.el.querySelectorAll("[magnet]"));"false"!==e.el.getAttribute("magnet")&&i.push(e.el);var n=o.filter(i,o.partial(t,e),this);n.length>0&&(o.each(n,o.partial(e.highlight,o,{magnetAvailability:!0}),e),e.highlight(null,{elementAvailability:!0}),this._marked[e.model.id]=n)},this).value()},_unmarkAvailableMagnets:function(){o.each(this._marked,function(t,e){var i=this.paper.findViewByModel(e);i&&(o.each(t,o.partial(i.unhighlight,o,{magnetAvailability:!0}),i),i.unhighlight(null,{elementAvailability:!0}))},this),this._marked=null},startArrowheadMove:function(t,e){e=o.defaults(e||{},{whenNotAllowed:"revert"}),this._action="arrowhead-move",this._whenNotAllowed=e.whenNotAllowed,this._arrowhead=t,this._initialMagnet=this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),this._initialEnd=o.clone(this.model.get(t))||{x:0,y:0},this._validateConnectionArgs=this._createValidateConnectionArgs(this._arrowhead),this._beforeArrowheadMove()},pointerdown:function(t,e,i){if(d.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("link:pointerdown",t,e,i),this._dx=e,this._dy=i,null==t.target.getAttribute("magnet")){var n,r=t.target.getAttribute("class"),o=t.target.parentNode.getAttribute("class");switch("label"===o?(r=o,n=t.target.parentNode):n=t.target,r){case"marker-vertex":this.can("vertexMove")&&(this._action="vertex-move",this._vertexIdx=t.target.getAttribute("idx"));break;case"marker-vertex-remove":case"marker-vertex-remove-area":this.can("vertexRemove")&&this.removeVertex(t.target.getAttribute("idx"));break;case"marker-arrowhead":this.can("arrowheadMove")&&this.startArrowheadMove(t.target.getAttribute("end"));break;case"label":this.can("labelMove")&&(this._action="label-move",this._labelIdx=parseInt(h(n).attr("label-idx"),10),this._samples=this._V.connection.sample(1),this._linkLength=this._V.connection.node.getTotalLength());break;default:var s=t.target.parentNode.getAttribute("event");s?this.can("useLinkTools")&&("remove"===s?this.model.remove():this.notify(s,t,e,i)):this.can("vertexAdd")&&(this._vertexIdx=this.addVertex({x:e,y:i}),this._action="vertex-move")}}},pointermove:function(t,e,i){switch(this._action){case"vertex-move":var n=o.clone(this.model.get("vertices"));n[this._vertexIdx]={x:e,y:i},this.model.set("vertices",n,{ui:!0});break;case"label-move":for(var r,s,a,l,c={x:e,y:i},p=(this.model.get("labels")[this._labelIdx],this._samples),f=1/0,g=0,m=p.length;g<m;g++)a=p[g],(l=u.line(a,c).squaredLength())<f&&(f=l,r=a,s=g);var v=p[s-1],y=p[s+1],b=(u.point(r).distance(c),0);v&&y?b=u.line(v,y).pointOffset(c):v?b=u.line(v,r).pointOffset(c):y&&(b=u.line(r,y).pointOffset(c)),this.model.label(this._labelIdx,{position:{distance:r.distance/this._linkLength,offset:b}});break;case"arrowhead-move":if(this.paper.options.snapLinks){var I=this.paper.options.snapLinks.radius||50,x=this.paper.findViewsInArea({x:e-I,y:i-I,width:2*I,height:2*I});this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;var C,w=Number.MAX_VALUE,A=u.point(e,i);o.each(x,function(t){"false"!==t.el.getAttribute("magnet")&&(C=t.model.getBBox().center().distance(A))<I&&C<w&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,null))&&(w=C,this._closestView=t,this._closestEnd={id:t.model.id}),t.$("[magnet]").each(o.bind(function(e,i){var n=h(i).bbox(!1,this.paper.viewport);(C=A.distance({x:n.x+n.width/2,y:n.y+n.height/2}))<I&&C<w&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,i))&&(w=C,this._closestView=t,this._closestEnd={id:t.model.id,selector:t.getSelector(i),port:i.getAttribute("port")})},this))},this),this._closestView&&this._closestView.highlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this.model.set(this._arrowhead,this._closestEnd||{x:e,y:i},{ui:!0})}else{var M="mousemove"===t.type?t.target:document.elementFromPoint(t.clientX,t.clientY);this._targetEvent!==M&&(this._magnetUnderPointer&&this._viewUnderPointer.unhighlight(this._magnetUnderPointer,{connecting:!0}),this._viewUnderPointer=this.paper.findView(M),this._viewUnderPointer?(this._magnetUnderPointer=this._viewUnderPointer.findMagnet(M),this._magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(this._viewUnderPointer,this._magnetUnderPointer))?this._magnetUnderPointer&&this._viewUnderPointer.highlight(this._magnetUnderPointer,{connecting:!0}):this._magnetUnderPointer=null):this._magnetUnderPointer=null),this._targetEvent=M,this.model.set(this._arrowhead,{x:e,y:i},{ui:!0})}}this._dx=e,this._dy=i,d.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("link:pointermove",t,e,i)},pointerup:function(t,e,i){if("label-move"===this._action)this._samples=null;else if("arrowhead-move"===this._action){var n,r=this.paper,o=r.options,s=this._arrowhead,a=this._initialEnd;if(o.snapLinks)this._closestView&&(this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),n=this._closestView.findMagnet(this._closestEnd.selector)),this._closestView=this._closestEnd=null;else{var l=this._viewUnderPointer;if(n=this._magnetUnderPointer,this._viewUnderPointer=null,this._magnetUnderPointer=null,n){l.unhighlight(n,{connecting:!0});var c=l.getSelector(n),h=n.getAttribute("port"),u={id:l.model.id};null!=c&&(u.port=h),null!=h&&(u.selector=c),this.model.set(s,u,{ui:!0})}}if(!r.linkAllowed(this))switch(this._whenNotAllowed){case"remove":this.model.remove();break;case"revert":default:this.model.set(s,a,{ui:!0})}o.embeddingMode&&this.model.reparent()&&(this._z=null);var p=this.model.prop(s)||{},f=!d.dia.Link.endsEqual(a,p);f&&(a.id&&this.notify("link:disconnect",t,r.findViewByModel(a.id),this._initialMagnet,s),p.id&&this.notify("link:connect",t,r.findViewByModel(p.id),n,s)),this._afterArrowheadMove()}this._action=null,this._whenNotAllowed=null,this._initialMagnet=null,this._initialEnd=null,this._validateConnectionArgs=null,this.notify("link:pointerup",t,e,i),d.dia.CellView.prototype.pointerup.apply(this,arguments)}},{makeSelector:function(t){var e='[model-id="'+t.id+'"]';return t.port?e+=' [port="'+t.port+'"]':t.selector&&(e+=" "+t.selector),e}}),d.dia.Paper=d.mvc.View.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,perpendicularLinks:!1,elementView:d.dia.ElementView,linkView:d.dia.LinkView,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:{default:{name:"stroke",options:{padding:3}},magnetAvailability:{name:"addClass",options:{className:"available-magnet"}},elementAvailability:{name:"addClass",options:{className:"available-cell"}}},preventContextMenu:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new d.dia.Link,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},validateMagnet:function(t,e){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,i,n,r,o){return("target"===r?i:t)instanceof d.dia.ElementView},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,clickThreshold:0,cellViewNamespace:d.shapes,highlighterNamespace:d.highlighters},events:{mousedown:"pointerdown",dblclick:"mousedblclick",click:"mouseclick",touchstart:"pointerdown",touchend:"mouseclick",touchmove:"pointermove",mousemove:"pointermove","mouseover .element":"cellMouseover","mouseover .link":"cellMouseover","mouseout .element":"cellMouseout","mouseout .link":"cellMouseout",contextmenu:"contextmenu",mousewheel:"mousewheel",DOMMouseScroll:"mousewheel"},_highlights:[],init:function(){o.bindAll(this,"pointerup"),this.model=this.options.model||new d.dia.Graph,this.options.origin=o.clone(this.options.origin),this.options.defaultConnector=o.clone(this.options.defaultConnector),o.defaults(this.options.highlighting,this.constructor.prototype.options.highlighting),this.options.highlighting=o.cloneDeep(this.options.highlighting),this.svg=h("svg").node,this.viewport=h("g").addClass("viewport").node,this.defs=h("defs").node,h(this.svg).append([this.viewport,this.defs]),this.$el.append(this.svg),this.listenTo(this.model,"add",this.onCellAdded),this.listenTo(this.model,"remove",this.removeView),this.listenTo(this.model,"reset",this.resetViews),this.listenTo(this.model,"sort",this._onSort),this.listenTo(this.model,"batch:stop",this._onBatchStop),this.setOrigin(),this.setDimensions(),s(document).on("mouseup touchend",this.pointerup),this._mousemoved=0,this._views={},this.on("cell:highlight",this.onCellHighlight,this),this.on("cell:unhighlight",this.onCellUnhighlight,this)},_onSort:function(){this.model.hasActiveBatch("add")||this.sortViews()},_onBatchStop:function(t){"add"!==(t&&t.batchName)||this.model.hasActiveBatch("add")||this.sortViews()},onRemove:function(){this.removeViews(),s(document).off("mouseup touchend",this.pointerup)},setDimensions:function(t,e){t=this.options.width=t||this.options.width,e=this.options.height=e||this.options.height,h(this.svg).attr({width:t,height:e}),this.trigger("resize",t,e)},setOrigin:function(t,e){this.options.origin.x=t||0,this.options.origin.y=e||0,h(this.viewport).translate(t,e,{absolute:!0}),this.trigger("translate",t,e),this.options.drawGrid&&this.drawGrid()},fitToContent:function(t,e,i,n){o.isObject(t)?(n=t,t=n.gridWidth||1,e=n.gridHeight||1,i=n.padding||0):(n=n||{},t=t||1,e=e||1,i=i||0),i=d.util.normalizeSides(i);var r=h(this.viewport).bbox(!0,this.svg),s=h(this.viewport).scale();r.x*=s.sx,r.y*=s.sy,r.width*=s.sx,r.height*=s.sy;var a=Math.max(Math.ceil((r.width+r.x)/t),1)*t,l=Math.max(Math.ceil((r.height+r.y)/e),1)*e,c=0,u=0;("negative"==n.allowNewOrigin&&r.x<0||"positive"==n.allowNewOrigin&&r.x>=0||"any"==n.allowNewOrigin)&&(c=Math.ceil(-r.x/t)*t,c+=i.left,a+=c),("negative"==n.allowNewOrigin&&r.y<0||"positive"==n.allowNewOrigin&&r.y>=0||"any"==n.allowNewOrigin)&&(u=Math.ceil(-r.y/e)*e,u+=i.top,l+=u),a+=i.right,l+=i.bottom,a=Math.max(a,n.minWidth||0),l=Math.max(l,n.minHeight||0),a=Math.min(a,n.maxWidth||Number.MAX_VALUE),l=Math.min(l,n.maxHeight||Number.MAX_VALUE);var p=a!=this.options.width||l!=this.options.height;(c!=this.options.origin.x||u!=this.options.origin.y)&&this.setOrigin(c,u),p&&this.setDimensions(a,l)},scaleContentToFit:function(t){var e=this.getContentBBox();if(e.width&&e.height){t=t||{},o.defaults(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var i=t.padding,n=t.minScaleX||t.minScale,r=t.maxScaleX||t.maxScale,s=t.minScaleY||t.minScale,a=t.maxScaleY||t.maxScale,l=t.fittingBBox||{x:this.options.origin.x,y:this.options.origin.y,width:this.options.width,height:this.options.height};l=u.rect(l).moveAndExpand({x:i,y:i,width:-2*i,height:-2*i});var c=h(this.viewport).scale(),d=l.width/e.width*c.sx,p=l.height/e.height*c.sy;if(t.preserveAspectRatio&&(d=p=Math.min(d,p)),t.scaleGrid){var f=t.scaleGrid;d=f*Math.floor(d/f),p=f*Math.floor(p/f)}d=Math.min(r,Math.max(n,d)),p=Math.min(a,Math.max(s,p)),this.scale(d,p);var g=this.getContentBBox(),m=l.x-g.x,v=l.y-g.y;this.setOrigin(m,v)}},getContentBBox:function(){var t=this.viewport.getBoundingClientRect(),e=this.viewport.getScreenCTM(),i=this.viewport.getCTM();return u.rect({x:t.left-e.e+i.e,y:t.top-e.f+i.f,width:t.width,height:t.height})},getArea:function(){var t=this.viewport.getCTM().inverse(),e={x:0,y:0,width:this.options.width,height:this.options.height};return u.rect(h.transformRect(e,t))},getRestrictedArea:function(){return o.isFunction(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):!0===this.options.restrictTranslate?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var e,i,n=this.options.cellViewNamespace,o=t.get("type")+"View",s=d.util.getByPath(n,o,".");return t.isLink()?(e=this.options.linkView,i=d.dia.LinkView):(e=this.options.elementView,i=d.dia.ElementView),new(e.prototype instanceof r.View?s||e:e.call(this,t)||s||i)({model:t,interactive:this.options.interactive})},onCellAdded:function(t,e,i){if(this.options.async&&!1!==i.async&&o.isNumber(i.position)){if(this._asyncCells=this._asyncCells||[],this._asyncCells.push(t),0==i.position){if(this._frameId)throw new Error("another asynchronous rendering in progress");this.asyncRenderViews(this._asyncCells,i),delete this._asyncCells}}else this.renderView(t)},removeView:function(t){var e=this._views[t.id];return e&&(e.remove(),delete this._views[t.id]),e},renderView:function(t){var e=this._views[t.id]=this.createViewForModel(t);return h(this.viewport).append(e.el),e.paper=this,e.render(),s(e.el).find("image").on("dragstart",function(){return!1}),e},beforeRenderViews:function(t){return t.sort(function(t){return t instanceof d.dia.Link?1:-1}),t},afterRenderViews:function(){this.sortViews()},resetViews:function(t,e){this.removeViews();var i=t.models.slice();i=this.beforeRenderViews(i,e)||i,this._frameId&&(d.util.cancelFrame(this._frameId),delete this._frameId),this.options.async?this.asyncRenderViews(i,e):(o.each(i,this.renderView,this),this.sortViews())},removeViews:function(){o.invoke(this._views,"remove"),this._views={}},asyncBatchAdded:o.noop,asyncRenderViews:function(t,e){if(this._frameId){var i=this.options.async&&this.options.async.batchSize||50,n=t.splice(0,i),r=this.model.get("cells");o.each(n,function(t){t.collection===r&&this.renderView(t)},this),this.asyncBatchAdded()}t.length?this._frameId=d.util.nextFrame(function(){this.asyncRenderViews(t,e)},this):(delete this._frameId,this.afterRenderViews(e),this.trigger("render:done",e))},sortViews:function(){var t=s(this.viewport).children("[model-id]"),e=this.model.get("cells");d.util.sortElements(t,function(t,i){var n=e.get(s(t).attr("model-id")),r=e.get(s(i).attr("model-id"));return(n.get("z")||0)>(r.get("z")||0)?1:-1})},scale:function(t,e,i,n){e=e||t,o.isUndefined(i)&&(i=0,n=0),h(this.viewport).attr("transform","");var r=this.options.origin.x,s=this.options.origin.y;if(i||n||r||s){var a=r-i*(t-1),l=s-n*(e-1);this.setOrigin(a,l)}return h(this.viewport).scale(t,e),this.trigger("scale",t,e,i,n),this.options.drawGrid&&this.drawGrid(),this},rotate:function(t,e,i){if(o.isUndefined(e)){var n=this.viewport.getBBox();e=n.width/2,i=n.height/2}h(this.viewport).rotate(t,e,i)},findView:function(t){for(var e=o.isString(t)?this.viewport.querySelector(t):t instanceof s?t[0]:t;e&&e!==this.el&&e!==document;){var i=e.getAttribute("model-id");if(i)return this._views[i];e=e.parentNode}},findViewByModel:function(t){var e=o.isString(t)?t:t.id;return this._views[e]},findViewsFromPoint:function(t){t=u.point(t);var e=o.map(this.model.getElements(),this.findViewByModel,this);return o.filter(e,function(e){return e&&u.rect(e.vel.bbox(!1,this.viewport)).containsPoint(t)},this)},findViewsInArea:function(t,e){e=o.defaults(e||{},{strict:!1}),t=u.rect(t);var i=o.map(this.model.getElements(),this.findViewByModel,this),n=e.strict?"containsRect":"intersect";return o.filter(i,function(e){return e&&t[n](u.rect(e.vel.bbox(!1,this.viewport)))},this)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t){var e=h(this.viewport).toLocalPoint(t.x,t.y);return{x:u.snapToGrid(e.x,this.options.gridSize),y:u.snapToGrid(e.y,this.options.gridSize)}},clientToLocalPoint:function(t){t=u.point(t);var e=h("rect",{width:this.options.width,height:this.options.height,x:0,y:0,opacity:0});h(this.svg).prepend(e);var i=s(this.svg).offset();e.remove();var n=document.body.scrollTop||document.documentElement.scrollTop,r=document.body.scrollLeft||document.documentElement.scrollLeft;return t.offset(r-i.left,n-i.top),h.transformPoint(t,this.viewport.getCTM().inverse())},linkAllowed:function(t){var e;if(t instanceof d.dia.Link)e=t;else{if(!(t instanceof d.dia.LinkView))throw new Error("Must provide link model or view.");e=t.model}if(!this.options.multiLinks){var i=e.get("source"),n=e.get("target");if(i.id&&n.id){var r=e.getSourceElement();if(r){var s=this.model.getConnectedLinks(r,{outbound:!0,inbound:!1});if(o.filter(s,function(t){var e=t.get("source"),r=t.get("target");return e&&e.id===i.id&&(!e.port||e.port===i.port)&&r&&r.id===n.id&&(!r.port||r.port===n.port)}).length>1)return!1}}}return!!(this.options.linkPinning||o.has(e.get("source"),"id")&&o.has(e.get("target"),"id"))},getDefaultLink:function(t,e){return o.isFunction(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t){t=t||{};var e=t.highlighter,i=this.options;if(o.isUndefined(e)){var n=o.chain(t).pick("embedding","connecting","magnetAvailability","elementAvailability").keys().first().value();e=n&&i.highlighting[n]||i.highlighting.default}if(!e)return!1;var r=e.name,s=i.highlighterNamespace[r];if(!s)throw new Error('Unknown highlighter ("'+r+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+r+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+r+'") is missing required unhighlight() method');return{highlighter:s,options:e.options,name:r}},onCellHighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){var n=i.name+e.id+JSON.stringify(i.options);if(!this._highlights[n]){var r=i.highlighter;r.highlight(t,e,o.clone(i.options)),this._highlights[n]={cellView:t,magnetEl:e,opt:i.options,highlighter:r}}}},onCellUnhighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){var n=i.name+e.id+JSON.stringify(i.options),r=this._highlights[n];r&&(r.highlighter.unhighlight(r.cellView,r.magnetEl,r.opt),this._highlights[n]=null)}},mousedblclick:function(t){t.preventDefault(),t=d.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerdblclick(t,i.x,i.y):this.trigger("blank:pointerdblclick",t,i.x,i.y)}},mouseclick:function(t){if(this._mousemoved<=this.options.clickThreshold){t=d.util.normalizeEvent(t);var e=this.findView(t.target);if(this.guard(t,e))return;var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerclick(t,i.x,i.y):this.trigger("blank:pointerclick",t,i.x,i.y)}},guard:function(t,e){return!(!this.options.guard||!this.options.guard(t,e))||!(e&&e.model&&e.model instanceof d.dia.Cell)&&(this.svg!==t.target&&this.el!==t.target&&!s.contains(this.svg,t.target))},contextmenu:function(t){t=d.util.normalizeEvent(t),this.options.preventContextMenu&&t.preventDefault();var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.contextmenu(t,i.x,i.y):this.trigger("blank:contextmenu",t,i.x,i.y)}},pointerdown:function(t){t=d.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){t.preventDefault(),this._mousemoved=0;var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?(this.sourceView=e,e.pointerdown(t,i.x,i.y)):this.trigger("blank:pointerdown",t,i.x,i.y)}},pointermove:function(t){if(this.sourceView){t.preventDefault(),t=d.util.normalizeEvent(t),this._mousemoved++;var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView.pointermove(t,e.x,e.y)}},pointerup:function(t){t=d.util.normalizeEvent(t);var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView?(this.sourceView.pointerup(t,e.x,e.y),this.sourceView=null):this.trigger("blank:pointerup",t,e.x,e.y)},mousewheel:function(t){t=d.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=t.originalEvent,n=this.snapToGrid({x:i.clientX,y:i.clientY}),r=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));e?e.mousewheel(t,n.x,n.y,r):this.trigger("blank:mousewheel",t,n.x,n.y,r)}},cellMouseover:function(t){t=d.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseover(t)}},cellMouseout:function(t){t=d.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseout(t)}},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.el.style.backgroundImage="none",this},drawGrid:function(t){t=o.defaults(t||{},this.options.drawGrid,{color:"#aaa",thickness:1});var e=this.options.gridSize;if(e<=1)return this.clearGrid();var i=h(this.viewport).scale(),n=i.sx,r=i.sy,s=this.options.origin.x,a=this.options.origin.y,l=e*n,c=e*r,u=document.createElement("canvas");u.width=l,u.height=c,l=s>=0?s%l:l+s%l,c=a>=0?a%c:c+a%c;var d=u.getContext("2d");d.beginPath(),d.rect(l,c,t.thickness*n,t.thickness*r),d.fillStyle=t.color,d.fill();var p=u.toDataURL("image/png");return this.el.style.backgroundImage='url("'+p+'")',this},setInteractivity:function(t){this.options.interactive=t,o.invoke(this._views,"setInteractivity",t)}}),d.shapes.basic={},d.shapes.basic.Generic=d.dia.Element.extend({defaults:d.util.deepSupplement({type:"basic.Generic",attrs:{".":{fill:"#ffffff",stroke:"none"}}},d.dia.Element.prototype.defaults)}),d.shapes.basic.Rect=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>',defaults:d.util.deepSupplement({type:"basic.Rect",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.basic.TextView=d.dia.ElementView.extend({initialize:function(){d.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:attrs",this.resize)}}),d.shapes.basic.Text=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><text/></g></g>',defaults:d.util.deepSupplement({type:"basic.Text",attrs:{text:{"font-size":18,fill:"#000000"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.basic.Circle=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>',defaults:d.util.deepSupplement({type:"basic.Circle",size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.basic.Ellipse=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>',defaults:d.util.deepSupplement({type:"basic.Ellipse",size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.basic.Polygon=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:d.util.deepSupplement({type:"basic.Polygon",size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.basic.Polyline=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>',defaults:d.util.deepSupplement({type:"basic.Polyline",size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.basic.Image=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>',defaults:d.util.deepSupplement({type:"basic.Image",attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.basic.Path=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>',defaults:d.util.deepSupplement({type:"basic.Path",size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.basic.Rhombus=d.shapes.basic.Path.extend({defaults:d.util.deepSupplement({type:"basic.Rhombus",attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"y-alignment":"middle"}}},d.shapes.basic.Path.prototype.defaults)}),d.shapes.basic.PortsModelInterface={initialize:function(){this.updatePortsAttrs(),this.on("change:inPorts change:outPorts",this.updatePortsAttrs,this),this.constructor.__super__.constructor.__super__.initialize.apply(this,arguments)},updatePortsAttrs:function(t){if(this._portSelectors){var e=o.omit(this.get("attrs"),this._portSelectors);this.set("attrs",e,{silent:!0})}this._portSelectors=[];var i={};o.each(this.get("inPorts"),function(t,e,n){var r=this.getPortAttrs(t,e,n.length,".inPorts","in");this._portSelectors=this._portSelectors.concat(o.keys(r)),o.extend(i,r)},this),o.each(this.get("outPorts"),function(t,e,n){var r=this.getPortAttrs(t,e,n.length,".outPorts","out");this._portSelectors=this._portSelectors.concat(o.keys(r)),o.extend(i,r)},this),this.attr(i,{silent:!0}),this.processPorts(),this.trigger("process:ports")},getPortSelector:function(t){var e=".inPorts",i=this.get("inPorts").indexOf(t);if(i<0&&(e=".outPorts",
(i=this.get("outPorts").indexOf(t))<0))throw new Error("getPortSelector(): Port doesn't exist.");return e+">g:nth-child("+(i+1)+")>.port-body"}},d.shapes.basic.PortsViewInterface={initialize:function(){this.listenTo(this.model,"process:ports",this.update),d.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){this.renderPorts(),d.dia.ElementView.prototype.update.apply(this,arguments)},renderPorts:function(){var t=this.$(".inPorts").empty(),e=this.$(".outPorts").empty(),i=d.util.template(this.model.portMarkup);o.each(o.filter(this.model.ports,function(t){return"in"===t.type}),function(e,n){t.append(h(i({id:n,port:e})).node)}),o.each(o.filter(this.model.ports,function(t){return"out"===t.type}),function(t,n){e.append(h(i({id:n,port:t})).node)})}},d.shapes.basic.TextBlock=d.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',d.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),defaults:d.util.deepSupplement({type:"basic.TextBlock",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"",ref:"rect","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},d.shapes.basic.Generic.prototype.defaults),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),d.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":o.clone(e),div:{style:o.clone(e)}})},updateContent:function(t,e){d.env.test("svgforeignobject")?this.attr({".content":{html:e}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),d.shapes.basic.TextBlockView=d.dia.ElementView.extend({initialize:function(){d.dia.ElementView.prototype.initialize.apply(this,arguments),this.noSVGForeignObjectElement=!d.env.test("svgforeignobject"),d.env.test("svgforeignobject")||this.listenTo(this.model,"change:content",function(t){this.updateContent(t)})},update:function(t,e){if(d.env.test("svgforeignobject")){var i=this.model,n=o.omit(e||i.get("attrs"),".content");d.dia.ElementView.prototype.update.call(this,i,n),e&&!o.has(e,".content")||this.updateContent(i,e)}else d.dia.ElementView.prototype.update.call(this,i,e)},updateContent:function(t,e){var i=o.merge({},(e||t.get("attrs"))[".content"]);i=o.omit(i,"text");var n=d.util.breakText(t.get("content"),t.get("size"),i,{svgDocument:this.paper.svg}),r=d.util.setByPath({},".content",i,"/");r[".content"].text=n,d.dia.ElementView.prototype.update.call(this,t,r)}}),d.routers.manhattan=function(t,e,i){"use strict";function n(t){this.map={},this.options=t,this.mapGridSize=100}function r(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function o(e){return t.point(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function s(e,i,n,r){for(var s,a=[],l=o(r.difference(i)),c=i;s=e[c];){var h=o(c.difference(s));h.equals(l)||(a.unshift(c),l=h),c=s}return o(t.point(c).difference(n)).equals(l)||a.unshift(c),a}function a(t,i,n){var r=n.step,o=t.center();return e.chain(n.directionMap).pick(i).map(function(e){var i=e.x*t.width/2,n=e.y*t.height/2,s=o.clone().offset(i,n);return t.containsPoint(s)&&s.offset(e.x*r,e.y*r),s.snapToGrid(r)}).value()}function l(e,i,n){var r=360/n;return Math.floor(t.normalizeAngle(e.theta(i)+r/2)/r)*r}function c(t,e){var i=Math.abs(t-e);return i>180?360-i:i}function h(t,e){for(var i=1/0,n=0,r=e.length;n<r;n++){var o=t.manhattanDistance(e[n]);o<i&&(i=o)}return i}function u(i,n,o,u){var d,p,f,g,m=u.step;if(i instanceof t.rect?(d=a(i,u.startDirections,u),f=i.center().snapToGrid(m)):(f=i.clone().snapToGrid(m),d=[f]),n instanceof t.rect?(p=a(n,u.endDirections,u),g=n.center().snapToGrid(m)):(g=n.clone().snapToGrid(m),p=[g]),d=e.filter(d,o.isPointAccessible,o),p=e.filter(p,o.isPointAccessible,o),d.length>0&&p.length>0){var v=new r,y={},b={};e.each(d,function(t){var e=t.toString();v.add(e,h(t,p)),b[e]=0});for(var I,x,C=u.directions,w=C.length,A=u.maximumLoops,M=e.invoke(p,"toString");!v.isEmpty()&&A>0;){var N=v.pop(),k=t.point(N),S=b[N],T=D,D=y[N]?l(y[N],k,w):null!=u.previousDirAngle?u.previousDirAngle:l(f,k,w);if(M.indexOf(N)>=0&&(x=c(D,l(k,g,w)),k.equals(g)||x<180))return u.previousDirAngle=D,s(y,k,f,g);for(var j=0;j<w;j++)if(I=C[j],x=c(D,I.angle),!(T&&x>u.maxAllowedDirectionChange)){var z=k.clone().offset(I.offsetX,I.offsetY),E=z.toString();if(!v.isClose(E)&&o.isPointAccessible(z)){var L=S+I.cost+u.penalties[x];(!v.isOpen(E)||L<b[E])&&(y[E]=k,b[E]=L,v.add(E,L+h(z,p)))}}A--}}return u.fallbackRoute(f,g,u)}function d(i){i.directions=e.result(i,"directions"),i.penalties=e.result(i,"penalties"),i.paddingBox=e.result(i,"paddingBox"),e.each(i.directions,function(e){var i=t.point(0,0),n=t.point(e.offsetX,e.offsetY);e.angle=t.normalizeAngle(i.theta(n))})}function p(r,o){d(o),this.options.perpendicular=!!o.perpendicular;for(var s=t.rect(this.sourceBBox).moveAndExpand(o.paddingBox),a=t.rect(this.targetBBox).moveAndExpand(o.paddingBox),l=new n(o).build(this.paper.model,this.model),c=e.map(r,t.point),h=[],p=s.center().snapToGrid(o.step),f=0,g=c.length;f<=g;f++){var m=null,v=y||s,y=c[f];if(!y){y=a;if((!this.model.get("source").id||!this.model.get("target").id)&&e.isFunction(o.draggingRoute)){var b=v instanceof t.rect?v.center():v;m=o.draggingRoute(b,y.origin(),o)}}if(null===(m=m||u(v,y,l,o))){if(!e.isFunction(i.routers.orthogonal))throw new Error("Manhattan requires the orthogonal router.");return i.routers.orthogonal(r,o,this)}var I=e.first(m);I&&I.equals(p)&&m.shift(),p=e.last(m)||p,Array.prototype.push.apply(h,m)}return h}var f={step:10,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],maximumLoops:2e3,startDirections:["left","right","top","bottom"],endDirections:["left","right","top","bottom"],directionMap:{right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0},top:{x:0,y:-1}},maxAllowedDirectionChange:90,paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},directions:function(){var t=this.step;return[{offsetX:t,offsetY:0,cost:t},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:0,cost:t},{offsetX:0,offsetY:-t,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},fallbackRoute:e.constant(null),draggingRoute:null};return n.prototype.build=function(t,i){var n=this.options,r=e.chain(n.excludeEnds).map(i.get,i).pluck("id").map(t.getCell,t).value(),o=[],s=t.getCell(i.get("source").id);s&&(o=e.union(o,e.map(s.getAncestors(),"id")));var a=t.getCell(i.get("target").id);a&&(o=e.union(o,e.map(a.getAncestors(),"id")));var l=this.mapGridSize;return e.chain(t.getElements()).difference(r).reject(function(t){return e.contains(n.excludeTypes,t.get("type"))||e.contains(o,t.id)}).invoke("getBBox").invoke("moveAndExpand",n.paddingBox).foldl(function(t,e){for(var i=e.origin().snapToGrid(l),n=e.corner().snapToGrid(l),r=i.x;r<=n.x;r+=l)for(var o=i.y;o<=n.y;o+=l){var s=r+"@"+o;t[s]=t[s]||[],t[s].push(e)}return t},this.map).value(),this},n.prototype.isPointAccessible=function(t){var i=t.clone().snapToGrid(this.mapGridSize).toString();return e.every(this.map[i],function(e){return!e.containsPoint(t)})},r.prototype.add=function(t,i){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=i;var n=e.sortedIndex(this.items,t,function(t){return this.values[t]},this);this.items.splice(n,0,t)},r.prototype.remove=function(t){this.hash[t]=this.CLOSE},r.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},r.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},r.prototype.isEmpty=function(){return 0===this.items.length},r.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t},function(t,i,n){return p.call(n,t,e.extend({},f,i))}}(u,o,d),d.routers.metro=function(){if(!o.isFunction(d.routers.manhattan))throw new Error("Metro requires the manhattan router.");var t={diagonalCost:null,directions:function(){var t=this.step,e=this.diagonalCost||Math.ceil(Math.sqrt(t*t<<1));return[{offsetX:t,offsetY:0,cost:t},{offsetX:t,offsetY:t,cost:e},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:t},{offsetX:-t,offsetY:-t,cost:e},{offsetX:0,offsetY:-t,cost:t},{offsetX:t,offsetY:-t,cost:e}]},maxAllowedDirectionChange:45,fallbackRoute:function(t,e,i){var n=t.theta(e),r={x:e.x,y:t.y},o={x:t.x,y:e.y};if(n%180>90){var s=r;r=o,o=s}var a=n%90<45?r:o,l=u.line(t,a),c=90*Math.ceil(n/90),h=u.point.fromPolar(l.squaredLength(),u.toRad(c+135),a),d=u.line(e,h),p=l.intersection(d);return p?[p.round(),e]:[e]}};return function(e,i,n){return d.routers.manhattan(e,o.extend({},t,i),n)}}(),d.routers.normal=function(t,e,i){return t},d.routers.oneSide=function(t,e,i){var n,r,o,s=e.side||"bottom",a=e.padding||40,l=i.sourceBBox,c=i.targetBBox,h=l.center(),u=c.center();switch(s){case"bottom":o=1,n="y",r="height";break;case"top":o=-1,n="y",r="height";break;case"left":o=-1,n="x",r="width";break;case"right":o=1,n="x",r="width";break;default:throw new Error("Router: invalid side")}return h[n]+=o*(l[r]/2+a),u[n]+=o*(c[r]/2+a),o*(h[n]-u[n])>0?u[n]=h[n]:h[n]=u[n],[h].concat(t,u)},d.routers.orthogonal=function(){function t(t,e){return t.x==e.x?t.y>e.y?"N":"S":t.y==e.y?t.x>e.x?"W":"E":null}function e(t,e){return t["W"==e||"E"==e?"width":"height"]}function i(t,e){return u.rect(t).moveAndExpand({x:-e,y:-e,width:2*e,height:2*e})}function n(t){return u.rect(t.x,t.y,0,0)}function r(t,e){var i=Math.min(t.x,e.x),n=Math.min(t.y,e.y),r=Math.max(t.x+t.width,e.x+e.width),o=Math.max(t.y+t.height,e.y+e.height);return u.rect(i,n,r-i,o-n)}function s(t,e,i){var n=u.point(t.x,e.y);return i.containsPoint(n)&&(n=u.point(e.x,t.y)),n}function a(e,i,n){var r=u.point(e.x,i.y),o=u.point(i.x,e.y),s=t(e,r),a=t(e,o),l=f[n],c=s==n||s!=l&&(a==l||a!=n)?r:o;return{points:[c],direction:t(c,i)}}function l(e,i,n){var r=s(e,i,n);return{points:[r],direction:t(r,i)}}function c(i,n,r,a){var l,c={},h=[u.point(i.x,n.y),u.point(n.x,i.y)],d=o.filter(h,function(t){return!r.containsPoint(t)}),p=o.filter(d,function(e){return t(e,i)!=a});if(p.length>0)l=o.filter(p,function(e){return t(i,e)==a}).pop(),l=l||p[0],c.points=[l],c.direction=t(l,n);else{l=o.difference(h,d)[0];var f=u.point(n).move(l,-e(r,a)/2),g=s(f,i,r);c.points=[g,f],c.direction=t(f,n)}return c}function h(i,n,r,o){var s=l(n,i,o),c=s.points[0];if(r.containsPoint(c)){s=l(i,n,r);var h=s.points[0];if(o.containsPoint(h)){var d=u.point(i).move(h,-e(r,t(i,h))/2),p=u.point(n).move(c,-e(o,t(n,c))/2),f=u.line(d,p).midpoint(),g=l(i,f,r),m=a(f,n,g.direction);s.points=[g.points[0],m.points[0]],s.direction=m.direction}}return s}function d(e,n,o,a,l){var c,h,d,p={},f=i(r(o,a),1),m=f.center().distance(n)>f.center().distance(e),v=m?n:e,y=m?e:n;return l?(c=u.point.fromPolar(f.width+f.height,g[l],v),c=f.pointNearestToPoint(c).move(c,-1)):c=f.pointNearestToPoint(v).move(v,1),h=s(c,y,f),c.round().equals(h.round())?(h=u.point.fromPolar(f.width+f.height,u.toRad(c.theta(v))+Math.PI/2,y),h=f.pointNearestToPoint(h).move(y,1).round(),d=s(c,h,f),p.points=m?[h,d,c]:[c,d,h]):p.points=m?[h,c]:[c,h],p.direction=m?t(c,n):t(h,n),p}function p(e,r,s){var p=r.elementPadding||20,f=[],g=i(s.sourceBBox,p),m=i(s.targetBBox,p);e=o.map(e,u.point),e.unshift(g.center()),e.push(m.center());for(var v,y=0,b=e.length-1;y<b;y++){var I=null,x=e[y],C=e[y+1],w=!!t(x,C);if(0==y)y+1==b?g.intersect(i(m,1))?I=d(x,C,g,m):w||(I=h(x,C,g,m)):g.containsPoint(C)?I=d(x,C,g,i(n(C),p)):w||(I=l(x,C,g));else if(y+1==b){var A=w&&t(C,x)==v;m.containsPoint(x)||A?I=d(x,C,i(n(x),p),m,v):w||(I=c(x,C,m,v))}else w||(I=a(x,C,v));I?(Array.prototype.push.apply(f,I.points),v=I.direction):v=t(x,C),y+1<b&&f.push(C)}return f}var f={N:"S",S:"N",E:"W",W:"E"},g={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};return p}(),d.connectors.normal=function(t,e,i){var n=["M",t.x,t.y];return o.each(i,function(t){n.push(t.x,t.y)}),n.push(e.x,e.y),n.join(" ")},d.connectors.rounded=function(t,e,i,n){n=n||{};var r,s,a,l,c,h,d=n.radius||10,p=["M",t.x,t.y];return o.each(i,function(n,o){c=i[o-1]||t,h=i[o+1]||e,a=l||u.point(n).distance(c)/2,l=u.point(n).distance(h)/2,r=u.point(n).move(c,-Math.min(d,a)).round(),s=u.point(n).move(h,-Math.min(d,l)).round(),p.push(r.x,r.y,"S",n.x,n.y,s.x,s.y,"L")}),p.push(e.x,e.y),p.join(" ")},d.connectors.smooth=function(t,e,i){var n;if(i.length)n=u.bezier.curveThroughPoints([t].concat(i).concat([e]));else{var r=(t.x+e.x)/2;n=["M",t.x,t.y,"C",r,t.y,r,e.y,e.x,e.y]}return n.join(" ")},d.connectors.jumpover=function(t,e){function i(t,i,n){var r=[].concat(t,n,i);return r.reduce(function(t,i,n){var o=r[n+1];return null!=o&&(t[n]=e.line(i,o)),t},[])}function n(t){var e=t.paper._jumpOverUpdateList;null==e&&(e=t.paper._jumpOverUpdateList=[],t.paper.on("cell:pointerup",r),t.paper.model.on("reset",function(){e=[]})),e.indexOf(t)<0&&(e.push(t),t.listenToOnce(t.model,"change:connector remove",function(){e.splice(e.indexOf(t),1)}))}function r(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function o(e,i){return t(i).map(function(t){return e.intersection(t)}).compact().value()}function s(t,i){return e.line(t,i).squaredLength()}function a(t,i,n){return i.reduce(function(r,o,s){if(!0===o.skip)return r;var a=r.pop()||t,l=e.point(o).move(a.start,-n),c=e.point(o).move(a.start,+n),u=i[s+1];if(null!=u){var d=c.distance(u);d<=n&&(c=u.move(a.start,d),u.skip=!0)}else{if(l.distance(a.end)<2*n+h)return r.push(a),r}if(c.distance(a.start)<2*n+h)return r.push(a),r;var p=e.line(l,c);return p.isJump=!0,r.push(e.line(a.start,l),p,e.line(c,a.end)),r},[])}function l(i,n,r){return[].concat(["M",i[0].start.x,i[0].start.y],t(i).map(function(t){if(t.isJump){var i;if("arc"===r){i=t.start.difference(t.end);var o=Number(i.x<0&&i.y<0);return["A",n,n,0,0,o,t.end.x,t.end.y]}if("gap"===r)return["M",t.end.x,t.end.y];if("cubic"===r){i=t.start.difference(t.end);var s=t.start.theta(t.end),a=.6*n,l=1.35*n;i.x<0&&i.y<0&&(l*=-1);var c=e.point(t.start.x+a,t.start.y+l).rotate(t.start,s),h=e.point(t.end.x-a,t.end.y+l).rotate(t.end,s);return["C",c.x,c.y,h.x,h.y,t.end.x,t.end.y]}}return["L",t.end.x,t.end.y]}).flatten().value()).join(" ")}var c=["arc","gap","cubic"],h=1,u=["smooth"];return function(e,r,h,d){n(this);var p=d.size||5,f=d.jump&&(""+d.jump).toLowerCase(),g=d.ignoreConnectors||u;-1===c.indexOf(f)&&(f=c[0]);var m=this.paper,v=m.model,y=v.getLinks();if(1===y.length)return l(i(e,r,h),p,f);var b=this.model,I=y.indexOf(b),x=m.options.defaultConnector||{},C=y.filter(function(e,i){var n=e.get("connector")||x;return!t.contains(g,n.name)&&(!(i>I)||"jumpover"!==n.name)}),w=C.map(function(t){return m.findViewByModel(t)}),A=i(e,r,h),M=w.map(function(t){return null==t?[]:t===this?A:i(t.sourcePoint,t.targetPoint,t.route)},this);return l(A.reduce(function(e,i){var n=t(C).map(function(t,e){return t===b?null:o(i,M[e])}).flatten().compact().sortBy(t.partial(s,i.start)).value();return n.length>0?e.push.apply(e,a(i,n,p)):e.push(i),e},[]),p,f)}}(o,u),d.highlighters.addClass={className:"highlighted",highlight:function(t,e,i){var n=i.className||this.className;h(e).addClass(n)},unhighlight:function(t,e,i){var n=i.className||this.className;h(e).removeClass(n)}},d.highlighters.opacity={highlight:function(t,e,i){h(e).addClass("joint-highlight-opacity")},unhighlight:function(t,e,i){h(e).removeClass("joint-highlight-opacity")}},d.highlighters.stroke={defaultOptions:{padding:3,rx:0,ry:0},_views:{},highlight:function(t,e,i){if(!this._views[e.id]){i=o.defaults(i||{},this.defaultOptions);var n=h(e),r=n.bbox(!0);try{var s=n.convertToPathData()}catch(t){s=h.rectToPath(o.extend({},i,r))}var a=h("path").attr({d:s,class:"joint-highlight-stroke","pointer-events":"none"});a.transform(t.el.getCTM().inverse()),a.transform(e.getCTM());var l=i.padding;if(l){var c=r.x+r.width/2,u=r.y+r.height/2,p=(r.width+l)/r.width,f=(r.height+l)/r.height;a.transform({a:p,b:0,c:0,d:f,e:c-p*c,f:u-f*u})}var g=this._views[e.id]=new d.mvc.View({el:a.node,$el:a});g.listenTo(t.model,"remove",g.remove),t.vel.append(a)}},unhighlight:function(t,e,i){i=o.defaults(i||{},this.defaultOptions),this._views[e.id]&&(this._views[e.id].remove(),this._views[e.id]=null)}},d.shapes.erd={},d.shapes.erd.Entity=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:d.util.deepSupplement({type:"erd.Entity",size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,ref:".outer","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},d.dia.Element.prototype.defaults)}),d.shapes.erd.WeakEntity=d.shapes.erd.Entity.extend({defaults:d.util.deepSupplement({type:"erd.WeakEntity",attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}},d.shapes.erd.Entity.prototype.defaults)}),d.shapes.erd.Relationship=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:d.util.deepSupplement({type:"erd.Relationship",size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,ref:".","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},d.dia.Element.prototype.defaults)}),d.shapes.erd.IdentifyingRelationship=d.shapes.erd.Relationship.extend({defaults:d.util.deepSupplement({type:"erd.IdentifyingRelationship",attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}},d.shapes.erd.Relationship.prototype.defaults)}),d.shapes.erd.Attribute=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>',defaults:d.util.deepSupplement({type:"erd.Attribute",size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,ref:".","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},d.dia.Element.prototype.defaults)}),d.shapes.erd.Multivalued=d.shapes.erd.Attribute.extend({defaults:d.util.deepSupplement({type:"erd.Multivalued",attrs:{".inner":{display:"block"},text:{text:"multivalued"}}},d.shapes.erd.Attribute.prototype.defaults)}),d.shapes.erd.Derived=d.shapes.erd.Attribute.extend({defaults:d.util.deepSupplement({type:"erd.Derived",attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}},d.shapes.erd.Attribute.prototype.defaults)}),d.shapes.erd.Key=d.shapes.erd.Attribute.extend({defaults:d.util.deepSupplement({type:"erd.Key",attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}},d.shapes.erd.Attribute.prototype.defaults)}),d.shapes.erd.Normal=d.shapes.erd.Attribute.extend({defaults:d.util.deepSupplement({type:"erd.Normal",attrs:{text:{text:"Normal"}}},d.shapes.erd.Attribute.prototype.defaults)}),d.shapes.erd.ISA=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:d.util.deepSupplement({type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,ref:"polygon","ref-x":.5,"ref-y":.3,"x-alignment":"middle","y-alignment":"middle"}}},d.dia.Element.prototype.defaults)}),d.shapes.erd.Line=d.dia.Link.extend({defaults:{type:"erd.Line"},cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}}),d.shapes.fsa={},d.shapes.fsa.State=d.shapes.basic.Circle.extend({defaults:d.util.deepSupplement({type:"fsa.State",attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}},d.shapes.basic.Circle.prototype.defaults)}),d.shapes.fsa.StartState=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>',defaults:d.util.deepSupplement({type:"fsa.StartState",size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},d.dia.Element.prototype.defaults)}),d.shapes.fsa.EndState=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:d.util.deepSupplement({type:"fsa.EndState",size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},d.dia.Element.prototype.defaults)}),d.shapes.fsa.Arrow=d.dia.Link.extend({defaults:d.util.deepSupplement({type:"fsa.Arrow",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0},d.dia.Link.prototype.defaults)}),d.shapes.org={},d.shapes.org.Member=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>',defaults:d.util.deepSupplement({type:"org.Member",size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},d.dia.Element.prototype.defaults)}),d.shapes.org.Arrow=d.dia.Link.extend({defaults:{type:"org.Arrow",source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}}),d.shapes.chess={},d.shapes.chess.KingWhite=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.KingWhite",size:{width:42,height:38}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.KingBlack=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.KingBlack",size:{width:42,height:38}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.QueenWhite=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.QueenWhite",size:{width:42,height:38}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.QueenBlack=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.QueenBlack",size:{width:42,height:38}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.RookWhite=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.RookWhite",size:{width:32,height:34}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.RookBlack=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.RookBlack",size:{width:32,height:34}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.BishopWhite=d.shapes.basic.Generic.extend({
markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.BishopWhite",size:{width:38,height:38}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.BishopBlack=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.BishopBlack",size:{width:38,height:38}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.KnightWhite=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.KnightWhite",size:{width:38,height:37}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.KnightBlack=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>',defaults:d.util.deepSupplement({type:"chess.KnightBlack",size:{width:38,height:37}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.PawnWhite=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:d.util.deepSupplement({type:"chess.PawnWhite",size:{width:28,height:33}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chess.PawnBlack=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:d.util.deepSupplement({type:"chess.PawnBlack",size:{width:28,height:33}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.pn={},d.shapes.pn.Place=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>',defaults:d.util.deepSupplement({type:"pn.Place",size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.pn.PlaceView=d.dia.ElementView.extend({initialize:function(){d.dia.ElementView.prototype.initialize.apply(this,arguments),this.model.on("change:tokens",function(){this.renderTokens(),this.update()},this)},render:function(){d.dia.ElementView.prototype.render.apply(this,arguments),this.renderTokens(),this.update()},renderTokens:function(){var t=this.$(".tokens").empty();t[0].className.baseVal="tokens";var e=this.model.get("tokens");if(e)switch(e){case 1:t[0].className.baseVal+=" one",t.append(h("<circle/>").node);break;case 2:t[0].className.baseVal+=" two",t.append(h("<circle/>").node,h("<circle/>").node);break;case 3:t[0].className.baseVal+=" three",t.append(h("<circle/>").node,h("<circle/>").node,h("<circle/>").node);break;default:t[0].className.baseVal+=" alot",t.append(h("<text/>").text(e+"").node)}}}),d.shapes.pn.Transition=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>',defaults:d.util.deepSupplement({type:"pn.Transition",size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.pn.Link=d.dia.Link.extend({defaults:d.util.deepSupplement({type:"pn.Link",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}},d.dia.Link.prototype.defaults)}),d.shapes.devs={},d.shapes.devs.Model=d.shapes.basic.Generic.extend(o.extend({},d.shapes.basic.PortsModelInterface,{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><text class="label"/><g class="inPorts"/><g class="outPorts"/></g>',portMarkup:'<g class="port port<%= id %>"><circle class="port-body"/><text class="port-label"/></g>',defaults:d.util.deepSupplement({type:"devs.Model",size:{width:1,height:1},inPorts:[],outPorts:[],attrs:{".":{magnet:!1},".body":{width:150,height:250,stroke:"#000000"},".port-body":{r:10,magnet:!0,stroke:"#000000"},text:{"pointer-events":"none"},".label":{text:"Model","ref-x":.5,"ref-y":10,ref:".body","text-anchor":"middle",fill:"#000000"},".inPorts .port-label":{x:-15,dy:4,"text-anchor":"end",fill:"#000000"},".outPorts .port-label":{x:15,dy:4,fill:"#000000"}}},d.shapes.basic.Generic.prototype.defaults),getPortAttrs:function(t,e,i,n,r){var s={},a="port"+e,l=n+">."+a,c=l+">.port-label",h=l+">.port-body";return s[c]={text:t},s[h]={port:{id:t||o.uniqueId(r),type:r}},s[l]={ref:".body","ref-y":(e+.5)*(1/i)},".outPorts"===n&&(s[l]["ref-dx"]=0),s}})),d.shapes.devs.Atomic=d.shapes.devs.Model.extend({defaults:d.util.deepSupplement({type:"devs.Atomic",size:{width:80,height:80},attrs:{".body":{fill:"salmon"},".label":{text:"Atomic"},".inPorts .port-body":{fill:"PaleGreen"},".outPorts .port-body":{fill:"Tomato"}}},d.shapes.devs.Model.prototype.defaults)}),d.shapes.devs.Coupled=d.shapes.devs.Model.extend({defaults:d.util.deepSupplement({type:"devs.Coupled",size:{width:200,height:300},attrs:{".body":{fill:"seaGreen"},".label":{text:"Coupled"},".inPorts .port-body":{fill:"PaleGreen"},".outPorts .port-body":{fill:"Tomato"}}},d.shapes.devs.Model.prototype.defaults)}),d.shapes.devs.Link=d.dia.Link.extend({defaults:{type:"devs.Link",attrs:{".connection":{"stroke-width":2}}}}),d.shapes.devs.ModelView=d.dia.ElementView.extend(d.shapes.basic.PortsViewInterface),d.shapes.devs.AtomicView=d.shapes.devs.ModelView,d.shapes.devs.CoupledView=d.shapes.devs.ModelView,d.shapes.uml={},d.shapes.uml.Class=d.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),defaults:d.util.deepSupplement({type:"uml.Class",attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},d.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),d.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],i=0;o.each(e,function(e){var n=o.isArray(e.text)?e.text:[e.text],r=20*n.length+20;t[".uml-class-"+e.type+"-text"].text=n.join("\n"),t[".uml-class-"+e.type+"-rect"].height=r,t[".uml-class-"+e.type+"-rect"].transform="translate(0,"+i+")",i+=r})}}),d.shapes.uml.ClassView=d.dia.ElementView.extend({initialize:function(){d.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),d.shapes.uml.Abstract=d.shapes.uml.Class.extend({defaults:d.util.deepSupplement({type:"uml.Abstract",attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},d.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Abstract>>",this.get("name")]}}),d.shapes.uml.AbstractView=d.shapes.uml.ClassView,d.shapes.uml.Interface=d.shapes.uml.Class.extend({defaults:d.util.deepSupplement({type:"uml.Interface",attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},d.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Interface>>",this.get("name")]}}),d.shapes.uml.InterfaceView=d.shapes.uml.ClassView,d.shapes.uml.Generalization=d.dia.Link.extend({defaults:{type:"uml.Generalization",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}}),d.shapes.uml.Implementation=d.dia.Link.extend({defaults:{type:"uml.Implementation",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}}),d.shapes.uml.Aggregation=d.dia.Link.extend({defaults:{type:"uml.Aggregation",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}}),d.shapes.uml.Composition=d.dia.Link.extend({defaults:{type:"uml.Composition",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}}),d.shapes.uml.Association=d.dia.Link.extend({defaults:{type:"uml.Association"}}),d.shapes.uml.State=d.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),defaults:d.util.deepSupplement({type:"uml.State",attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},d.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),d.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),d.shapes.uml.StartState=d.shapes.basic.Circle.extend({defaults:d.util.deepSupplement({type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}},d.shapes.basic.Circle.prototype.defaults)}),d.shapes.uml.EndState=d.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:d.util.deepSupplement({type:"uml.EndState",size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.uml.Transition=d.dia.Link.extend({defaults:{type:"uml.Transition",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}}),d.shapes.logic={},d.shapes.logic.Gate=d.shapes.basic.Generic.extend({defaults:d.util.deepSupplement({type:"logic.Gate",size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},d.shapes.basic.Generic.prototype.defaults),operation:function(){return!0}}),d.shapes.logic.IO=d.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>',defaults:d.util.deepSupplement({type:"logic.IO",size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},d.shapes.logic.Gate.prototype.defaults)}),d.shapes.logic.Input=d.shapes.logic.IO.extend({defaults:d.util.deepSupplement({type:"logic.Input",attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}},d.shapes.logic.IO.prototype.defaults)}),d.shapes.logic.Output=d.shapes.logic.IO.extend({defaults:d.util.deepSupplement({type:"logic.Output",attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}},d.shapes.logic.IO.prototype.defaults)}),d.shapes.logic.Gate11=d.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>',defaults:d.util.deepSupplement({type:"logic.Gate11",attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},d.shapes.logic.Gate.prototype.defaults)}),d.shapes.logic.Gate21=d.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>',defaults:d.util.deepSupplement({type:"logic.Gate21",attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},d.shapes.logic.Gate.prototype.defaults)}),d.shapes.logic.Repeater=d.shapes.logic.Gate11.extend({defaults:d.util.deepSupplement({type:"logic.Repeater",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},d.shapes.logic.Gate11.prototype.defaults),operation:function(t){return t}}),d.shapes.logic.Not=d.shapes.logic.Gate11.extend({defaults:d.util.deepSupplement({type:"logic.Not",attrs:{image:{
"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},d.shapes.logic.Gate11.prototype.defaults),operation:function(t){return!t}}),d.shapes.logic.Or=d.shapes.logic.Gate21.extend({defaults:d.util.deepSupplement({type:"logic.Or",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},d.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t||e}}),d.shapes.logic.And=d.shapes.logic.Gate21.extend({defaults:d.util.deepSupplement({type:"logic.And",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},d.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t&&e}}),d.shapes.logic.Nor=d.shapes.logic.Gate21.extend({defaults:d.util.deepSupplement({type:"logic.Nor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},d.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t||e)}}),d.shapes.logic.Nand=d.shapes.logic.Gate21.extend({defaults:d.util.deepSupplement({type:"logic.Nand",attrs:{image:{
"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},d.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t&&e)}}),d.shapes.logic.Xor=d.shapes.logic.Gate21.extend({defaults:d.util.deepSupplement({type:"logic.Xor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},d.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||e)&&(t||!e)}}),d.shapes.logic.Xnor=d.shapes.logic.Gate21.extend({defaults:d.util.deepSupplement({type:"logic.Xnor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},d.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||!e)&&(t||e)}}),d.shapes.logic.Wire=d.dia.Link.extend({arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join(""),defaults:d.util.deepSupplement({type:"logic.Wire",attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},d.dia.Link.prototype.defaults)}),"object"==typeof n)var p=t("graphlib"),f=t("dagre");p=p||"undefined"!=typeof window&&window.graphlib,f=f||"undefined"!=typeof window&&window.dagre,d.layout.DirectedGraph={layout:function(t,e){var i;i=t instanceof d.dia.Graph?t:(new d.dia.Graph).resetCells(t),t=null,e=o.defaults(e||{},{resizeClusters:!0,clusterPadding:10});var n=i.toGraphLib({directed:!0,multigraph:!0,compound:!0,setNodeLabel:function(t){return{width:t.get("size").width,height:t.get("size").height,rank:t.get("rank")}},setEdgeLabel:function(t){return{minLen:t.get("minLen")||1}},setEdgeName:function(t){return t.id}}),r={};return e.rankDir&&(r.rankdir=e.rankDir),e.align&&(r.align=e.align),e.nodeSep&&(r.nodesep=e.nodeSep),e.edgeSep&&(r.edgesep=e.edgeSep),e.rankSep&&(r.ranksep=e.rankSep),e.marginX&&(r.marginx=e.marginX),e.marginY&&(r.marginy=e.marginY),n.setGraph(r),f.layout(n,{debugTiming:!!e.debugTiming}),i.startBatch("layout"),i.fromGraphLib(n,{importNode:function(t,i){var n=this.getCell(t),r=i.node(t);e.setPosition?e.setPosition(n,r):n.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importEdge:function(t,i){var n=this.getCell(t.name),r=i.edge(t),o=r.points||[];e.setLinkVertices&&(e.setVertices?e.setVertices(n,o):n.set("vertices",o.slice(1,o.length-1)))}}),e.resizeClusters&&o.chain(n.nodes()).filter(function(t){return n.children(t).length>0}).map(i.getCell,i).sortBy(function(t){return-t.getAncestors().length}).invoke("fitEmbeds",{padding:e.clusterPadding}).value(),i.stopBatch("layout"),n.graph()},fromGraphLib:function(t,e){e=e||{};var i=e.importNode||o.noop,n=e.importEdge||o.noop,r=this instanceof d.dia.Graph?this:new d.dia.Graph;return t.nodes().forEach(function(n){i.call(r,n,t,r,e)}),t.edges().forEach(function(i){n.call(r,i,t,r,e)}),r},toGraphLib:function(t,e){e=e||{};var i=o.pick(e,"directed","compound","multigraph"),n=new p.Graph(i),r=e.setNodeLabel||o.noop,s=e.setEdgeLabel||o.noop,a=e.setEdgeName||o.noop;return t.get("cells").each(function(t){if(t.isLink()){var e=t.get("source"),i=t.get("target");if(!e.id||!i.id)return;n.setEdge(e.id,i.id,s(t),a(t))}else n.setNode(t.id,r(t)),n.isCompound()&&t.has("parent")&&n.setParent(t.id,t.get("parent"))}),n}},d.dia.Graph.prototype.toGraphLib=function(t){return d.layout.DirectedGraph.toGraphLib(this,t)},d.dia.Graph.prototype.fromGraphLib=function(t,e){return d.layout.DirectedGraph.fromGraphLib.call(this,t,e)},d.shapes.chart={},d.shapes.chart.Plot=d.shapes.basic.Generic.extend({markup:['<clipPath class="clip"><rect/></clipPath>','<g class="rotatable">','<g class="scalable"></g>','<g class="background"><rect/><text/></g>','<g class="axis">','<g class="y-axis"><path/><g class="ticks"></g></g>','<g class="x-axis"><path/><g class="ticks"></g></g>','<g class="markings"></g>',"</g>",'<g class="data"><g class="series"></g></g>','<g class="foreground">','<rect/><text class="caption"/><text class="subcaption"/>','<g class="legend"><g class="legend-items"></g></g>','<line class="guideline x-guideline" /><line class="guideline y-guideline" />',"</g>","</g>"].join(""),tickMarkup:'<g class="tick"><line/><text/></g>',pointMarkup:'<g class="point"><circle/><text/></g>',barMarkup:'<path class="bar"/>',markingMarkup:'<g class="marking"><rect/><text/></g>',serieMarkup:'<g><clipPath class="serie-clip"><rect/></clipPath><path/><g class="bars"></g><g class="points"></g></g>',legendItemMarkup:'<g class="legend-item"><circle/><text/></g>',defaults:d.util.deepSupplement({type:"chart.Plot",attrs:{".data path":{fill:"none",stroke:"black"},".data .bars rect":{fill:"none",stroke:"black"},".background rect":{fill:"white",stroke:"#e5e5e5",opacity:1},".background text":{fill:"black",text:"No data available.",ref:".","ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle",display:"none"},".foreground > rect":{fill:"white",stroke:"#e5e5e5",opacity:0,"pointer-events":"none"},".foreground .caption":{fill:"black",text:"",ref:".foreground > rect","ref-x":.5,"ref-y":10,"text-anchor":"middle","y-alignment":"middle","font-size":14},".foreground .subcaption":{fill:"black",text:"",ref:".foreground > rect","ref-x":.5,"ref-y":23,"text-anchor":"middle","y-alignment":"middle","font-size":10},".point":{display:"inline-block"},".point circle":{r:2,stroke:"black",fill:"black",opacity:.3},".point text":{fill:"black","font-size":8,"text-anchor":"middle",display:"none"},".axis path":{fill:"none",stroke:"black"},".axis .tick":{fill:"none",stroke:"black"},".y-axis .tick line":{fill:"none",stroke:"black",x2:2,y2:0,opacity:1},".x-axis .tick line":{fill:"none",stroke:"black",x2:0,y2:-3,opacity:1},".y-axis .tick text":{fill:"black",stroke:"none","font-size":10,"text-anchor":"end"},".x-axis .tick text":{fill:"black",stroke:"none","font-size":10,"text-anchor":"middle"},".y-axis .tick text > tspan":{dy:"-.5em",x:-5},".x-axis .tick text > tspan":{dy:".5em",x:0},".axis .markings":{fill:"black",stroke:"none","fill-opacity":1},".axis .markings text":{fill:"black","text-anchor":"end","font-size":10,dy:-5,dx:-5},".guideline":{"pointer-events":"none",display:"none"},".x-guideline":{stroke:"black",visibility:"hidden"},".y-guideline":{stroke:"black",visibility:"hidden"},".legend":{ref:".background","ref-x":10,"ref-y":10},".legend-item text":{fill:"black",transform:"translate(14, 0)","font-size":11},".legend-item circle":{r:5,transform:"translate(5,5)"},".legend-item":{cursor:"pointer"},".legend-item.disabled circle":{fill:"gray"},".legend-item.disabled text":{opacity:.5}}
},d.shapes.basic.Generic.prototype.defaults),legendPosition:function(t,e){e=e||{},this.trigger("batch:start"),this.removeAttr([".legend/ref-x",".legend/ref-y",".legend/ref-dx",".legend/ref-dy",".legend/x-alignment",".legend/y-alignment"],{silent:!0});var i=e.padding||10,n={n:{".legend":{"ref-x":.5,"x-alignment":-.5,"ref-y":i}},ne:{".legend":{"ref-dx":-i,"x-alignment":-.999,"ref-y":i}},e:{".legend":{"ref-dx":-i,"x-alignment":-.999,"ref-y":.5,"y-alignment":-.5}},se:{".legend":{"ref-dx":-i,"ref-dy":-i,"x-alignment":-.999,"y-alignment":-.999}},s:{".legend":{"ref-x":.5,"ref-dy":-i,"x-alignment":-.5,"y-alignment":-.999}},sw:{".legend":{"ref-x":i,"ref-dy":-i,"y-alignment":-.999}},w:{".legend":{"ref-x":i,"ref-y":.5,"y-alignment":-.5}},nw:{".legend":{"ref-x":i,"ref-y":i}},nnw:{".legend":{"ref-x":i,"ref-y":-i,"y-alignment":-.999}},nn:{".legend":{"ref-x":.5,"ref-y":-i,"x-alignment":-.5,"y-alignment":-.999}},nne:{".legend":{"ref-dx":-i,"ref-y":-i,"x-alignment":-.999,"y-alignment":-.999}},nnee:{".legend":{"ref-dx":i,"ref-y":-i,"y-alignment":-.999}},nee:{".legend":{"ref-y":i,"ref-dx":i}},ee:{".legend":{"ref-dx":i,"ref-y":.5,"y-alignment":-.5}},see:{".legend":{"ref-dx":i,"ref-dy":-i,"y-alignment":-.999}},ssee:{".legend":{"ref-dx":i,"ref-dy":i}},sse:{".legend":{"ref-dx":-i,"ref-dy":i,"x-alignment":-.999}},ss:{".legend":{"ref-x":.5,"ref-dy":i,"x-alignment":-.5}},ssw:{".legend":{"ref-x":i,"ref-dy":i}},ssww:{".legend":{"ref-x":-i,"ref-dy":i,"x-alignment":-.999}},sww:{".legend":{"ref-x":-i,"ref-dy":-i,"x-alignment":-.999,"y-alignment":-.999}},ww:{".legend":{"ref-x":-i,"ref-y":.5,"x-alignment":-.999,"y-alignment":-.5}},nww:{".legend":{"ref-x":-i,"ref-y":i,"x-alignment":-.999}},nnww:{".legend":{"ref-x":-i,"ref-y":-i,"x-alignment":-.999,"y-alignment":-.999}}};n[t]&&this.attr(n[t]),this.trigger("batch:stop")},addPoint:function(t,e,i){i=i||{};var n=this.get("series"),r=o.findIndex(n,{name:e});if(-1===r)throw new Error("Serie "+e+" was not found.");var s=o.cloneDeep(n[r]);s.data.push(t),o.isFinite(i.maxLen)&&s.data.length>i.maxLen&&s.data.shift(),n=n.slice(),n[r]=s,this.set("series",n,i)},lastPoint:function(t){return o.last(o.findWhere(this.get("series"),{name:t}).data)},firstPoint:function(t){return o.first(o.findWhere(this.get("series"),{name:t}).data)}}),d.shapes.chart.PlotView=d.dia.ElementView.extend({events:{mousemove:"onMouseMove",mouseout:"onMouseOut"},initialize:function(){d.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:series change:interpolate change:padding change:canvas change:markings change:axis",o.bind(function(){this.update()},this)),this.on("cell:pointerdown",this.onPointerDown,this),this._disabledSeries=[]},renderMarkup:function(){d.dia.ElementView.prototype.renderMarkup.apply(this,arguments),this.elDataClipPath=this.$(".clip")[0],this.elDataClipPathRect=this.elDataClipPath.firstChild,this.elBackgroundRect=this.$(".background rect")[0],this.elBackgroundText=this.$(".background text")[0],this.elForeground=this.$(".foreground")[0],this.elForegroundRect=this.$(".foreground rect")[0],this.elDataSeries=this.$(".data .series")[0],this.elYAxisPath=this.$(".y-axis path")[0],this.elYAxisTicks=this.$(".y-axis .ticks")[0],this.elXAxisPath=this.$(".x-axis path")[0],this.elXAxisTicks=this.$(".x-axis .ticks")[0],this.elMarkings=this.$(".axis .markings")[0],this.elXGuideline=this.$(".x-guideline")[0],this.elYGuideline=this.$(".y-guideline")[0],this.elLegend=this.$(".legend")[0],this.elLegendItems=this.$(".legend-items")[0],this.elTick=h(this.model.tickMarkup),this.elMarking=h(this.model.markingMarkup),this.elLegendItem=h(this.model.legendItemMarkup),this.elPoint=h(this.model.pointMarkup),this.elBar=h(this.model.barMarkup),this.elSerie=h(this.model.serieMarkup),this.elDataClipPath.id="clip_"+this.cid,h(this.$(".data")[0]).attr("clip-path","url(#"+this.elDataClipPath.id+")"),h(this.elMarkings).attr("clip-path","url(#"+this.elDataClipPath.id+")")},update:function(){var t=this.filterSeries();this.calculateStats(t);var e=this.model.get("size"),i=e.width,n=e.height;this.canvas=o.extend({x:0,y:0,width:i,height:n},this.model.get("canvas"));var r,a={top:0,right:0,bottom:0,left:0},l=this.model.get("padding");r=o.isObject(l)?o.extend({},a,l):o.isUndefined(l)?a:{top:l,right:2*l,bottom:2*l,left:l},this.canvas=u.rect(this.canvas).moveAndExpand(u.rect(r.left,r.top,-r.right,-r.bottom));var c={x:0,y:0,width:i,height:n};h(this.elDataClipPathRect).attr(c),h(this.elBackgroundRect).attr(c),h(this.elForegroundRect).attr(c),this.updateAxis(),this.updateMarkings(),this.isEmpty()?s(this.elBackgroundText).show():s(this.elBackgroundText).hide(),this.updateSeries(t),this.updateLegend(),d.dia.ElementView.prototype.update.apply(this,arguments)},calculateStats:function(t){t=t||this.model.get("series");var e=[],i=[],n={},r={},s={};o.each(t,function(t,a){var l=s[t.name||a]||(s[t.name||a]={});l.decreasingX=!0,l.decreasingY=!0,l.nonDecreasingX=!0,l.nonDecreasingY=!0;var c;o.each(t.data,function(s){l.minX=o.isUndefined(l.minX)?s.x:Math.min(l.minX,s.x),l.maxX=o.isUndefined(l.maxX)?s.x:Math.max(l.maxX,s.x),l.minY=o.isUndefined(l.minY)?s.y:Math.min(l.minY,s.y),l.maxY=o.isUndefined(l.maxY)?s.y:Math.max(l.maxY,s.y),c&&(l.decreasingX=l.decreasingX&&s.x<c.x,l.decreasingY=l.decreasingY&&s.y<c.y,l.nonDecreasingX=l.nonDecreasingX&&s.x>=c.x,l.nonDecreasingY=l.nonDecreasingY&&s.y>=c.y),o.contains(e,s.x)||e.push(s.x),o.contains(i,s.y)||i.push(s.y),(n[s.x]||(n[s.x]=[])).push({serie:t,x:s.x,y:s.y}),(r[s.y]||(r[s.y]=[])).push({serie:t,x:s.x,y:s.y}),c=s})});var a=this.model.get("axis")||{},l=a["x-axis"]||{},c=a["y-axis"]||{};this.stats={minX:o.isUndefined(l.min)?o.min(e):l.min,maxX:o.isUndefined(l.max)?o.max(e):l.max,minY:o.isUndefined(c.min)?o.min(i):c.min,maxY:o.isUndefined(c.max)?o.max(i):c.max,bySerie:s,xValues:e,yValues:i,xMap:n,yMap:r}},isEmpty:function(){return!this.stats.xValues.length},updateSeries:function(t){if(t=t||this.model.get("series"),this.elDataSeries.textContent="",!this.isEmpty()){var e=[this.stats.minX,this.stats.maxX],i=[this.stats.minY,this.stats.maxY],n=[this.canvas.x,this.canvas.x+this.canvas.width],r=[this.canvas.y+this.canvas.height,this.canvas.y],s=this.model.get("attrs");o.each(t,function(t,a){var l=t.data,c=[],d=this.elSerie.clone().attr("class",t.name||"serie-"+a);h(this.elDataSeries).append(d),o.each(l,function(o){var a=u.scale.linear(e,n,o.x),l=u.scale.linear(i,r,o.y);c.push({x:a,y:l}),s[".point"]&&"none"!==s[".point"].display&&this.renderPoint(o,t),t.bars&&this.renderBar(o,t)},this);var p=d.findOne(".serie-clip"),f=this.model.get("size"),g=this.stats.bySerie[t.name||a],m=u.scale.linear(e,n,g.minX),v=u.scale.linear(e,n,g.maxX);(p.findOne("rect").attr(u.rect(m,0,v-m,f.height)),t.bars)||d.findOne("path").attr({d:this.seriePathData(c,t,a),"clip-path":"url(#"+p.node.id+")"})},this)}},seriePathClipData:function(t,e){var i=this.model.get("size"),n=o.first(t);o.last(t);return["M",n.x,n.y,"V",i.height+10].join(" ")},renderBar:function(t,e){var i=[this.stats.minX,this.stats.maxX],n=[this.stats.minY,this.stats.maxY],r=[this.canvas.x,this.canvas.x+this.canvas.width],o=[this.canvas.y+this.canvas.height,this.canvas.y],s=u.scale.linear(i,r,t.x),a=u.scale.linear(n,o,t.y),l=e.bars.barWidth||.8,c=l>1?l:this.canvas.width/(this.stats.maxX-this.stats.minX)*l,d=u.scale.linear(n,o,0)-a,p=t["top-rx"]||e.bars["top-rx"],f=t["top-ry"]||e.bars["top-ry"],g=t["bottom-rx"]||e.bars["bottom-rx"],m=t["bottom-ry"]||e.bars["bottom-ry"],v={left:s,middle:s-c/2,right:s-c}[e.bars.align||"middle"],y=this.elBar.clone();y.attr({"data-serie":e.name,"data-x":t.x,"data-y":t.y,d:h.rectToPath({x:v,y:a,width:c,height:d,"top-rx":p,"top-ry":f,"bottom-rx":g,"bottom-ry":m})});var b=e.name||"serie-"+this.model.get("series").indexOf(e);return h(this.elDataSeries).findOne("."+b+" .bars").append(y),y.node},renderPoint:function(t,e){var i=[this.stats.minX,this.stats.maxX],n=[this.stats.minY,this.stats.maxY],r=[this.canvas.x,this.canvas.x+this.canvas.width],o=[this.canvas.y+this.canvas.height,this.canvas.y],s=u.scale.linear(i,r,t.x),a=u.scale.linear(n,o,t.y),l=this.elPoint.clone();l.attr({"data-serie":e.name,"data-x":t.x,"data-y":t.y}),l.findOne("circle").attr({cx:s,cy:a}),l.findOne("text").attr({x:s,dy:a}).text(this.pointLabel(t,e));var c=e.name||"serie-"+this.model.get("series").indexOf(e);return h(this.elDataSeries).findOne("."+c+" .points").append(l),l.node},seriePathData:function(t,e,i){var n,r,s,a=o.isUndefined(e.interpolate)?this.model.get("interpolate"):e.interpolate,l=t.length;switch(a){case"bezier":n=u.bezier.curveThroughPoints(t);break;case"step":for(s=t[0],n=["M",s.x,s.y],r=1;r<l;r++)n.push("H",(s.x+t[r].x)/2,"V",t[r].y),s=t[r];break;case"stepBefore":for(n=["M",t[0].x,t[0].y],r=1;r<l;r++)n.push("V",t[r].y,"H",t[r].x);break;case"stepAfter":for(n=["M",t[0].x,t[0].y],r=1;r<l;r++)n.push("H",t[r].x,"V",t[r].y);break;default:for(n=["M"],r=0;r<l;r++)n.push(t[r].x,t[r].y)}return n=this.fixPathForFill(n,t,e,i),n.join(" ")},fixPathForFill:function(t,e,i,n){if(0===e.length)return t;if(!this.stats.bySerie[i.name||n].nonDecreasingX)return t;var r=this.model.get("size"),s=o.first(e),a=o.last(e),l=["M",a.x,r.height+10,"H",s.x-10,"V",s.y];return t[0]="L",l.concat(t)},updateAxis:function(){var t=this.model.get("size"),e=t.width,i=t.height,n=this.model.get("axis"),r=this.canvas.height/i;this.canvas.width;if(h(this.elYAxisPath).attr("d",["M",0,0,"L",0,i].join(" ")),h(this.elXAxisPath).attr("d",["M",0,i,"L",e,i].join(" ")),this.elXAxisTicks.textContent="",this.elYAxisTicks.textContent="",!this.isEmpty()){var s=[this.stats.minX,this.stats.maxX],a=[this.stats.minY,this.stats.maxY],l=[this.canvas.x,this.canvas.x+this.canvas.width],c=[0,this.canvas.height],d=a[1]-a[0],p=n&&n["y-axis"]||{},f=n&&n["x-axis"]||{},g=d>0?p.ticks-1||10:0,m=d/g/r,v=a[0];o.each(o.range(g+1),function(t){var e=u.scale.linear(a,c,v),i=this.elTick.clone();i.translate(0,e),h(this.elYAxisTicks).append(i);var n=a[1]-(v-a[0]);n+=u.scale.linear(c,a,this.canvas.y)-a[0],i.findOne("text").text(this.tickLabel(n,p)),v+=m},this),o.each(this.stats.xValues,function(t,n){if(n%(f.tickStep||1)==0){var r=u.scale.linear(s,l,t);if(!(r>e)){var o=this.elTick.clone();o.translate(r,i),h(this.elXAxisTicks).append(o),o.findOne("text").text(this.tickLabel(t,f))}}},this)}},tickLabel:function(t,e){if(o.isFunction(e.tickFormat))return e.tickFormat(t);var i=e.tickFormat||".1f";return d.util.format.number(i,t)+(o.isFunction(e.tickSuffix)?e.tickSuffix(t):e.tickSuffix||"")},pointLabel:function(t,e){if(o.isFunction(e.pointFormat))return e.pointFormat(t);var i=e.pointFormat||".1f";return d.util.format.number(i,t.y)+(e.pointSuffix||"")},updateMarkings:function(){function t(t,e){return o.isUndefined(t)?e:t}this.elMarkings.textContent="";var e=this.model.get("markings");if(e&&0!==e.length){var i=this.model.get("size"),n=i.width,r=i.height,s=[this.stats.minX,this.stats.maxX],a=[this.stats.minY,this.stats.maxY],l=[this.canvas.x,this.canvas.x+this.canvas.width],c=[this.canvas.y,this.canvas.y+this.canvas.height];o.each(e,function(e,i){var d=e.start||e.end,p=e.end||e.start,f=Math.min(t(d.x,this.stats.minX),t(p.x,this.stats.minX)),g=Math.max(t(d.x,this.stats.maxX),t(p.x,this.stats.maxX)),m=Math.min(t(d.y,this.stats.minY),t(p.y,this.stats.minY)),v=Math.max(t(d.y,this.stats.maxY),t(p.y,this.stats.maxY)),y=o.isUndefined(d.x)||o.isUndefined(p.x),b=o.isUndefined(d.y)||o.isUndefined(p.y);y&&(l=[0,n]),b&&(c=[0,r]);var I=u.scale.linear(s,l,f),x=u.scale.linear(s,l,g),C=u.scale.linear(a,c,m),w=u.scale.linear(a,c,v),A=I,M=c[1]-w+c[0],N=x-I,k=w-C;N=Math.max(N,1),k=Math.max(k,1);var S=this.elMarking.clone();S.findOne("rect").attr({x:A,y:M,width:N,height:k}),S.findOne("text").text(e.label||"").attr({x:A+N,y:M});var T=S.attr("class")+" "+(e.name||"marking-"+i);S.attr(o.extend({class:T},e.attrs)),h(this.elMarkings).append(S)},this)}},updateLegend:function(){var t=this.model.get("series");this.elLegendItems.textContent="",o.each(t,function(t,e){if((!o.isFunction(t.showLegend)||t.showLegend(t,this.stats.bySerie[t.name||e]))&&!1!==t.showLegend){var i=this.elLegendItem.clone();o.contains(this._disabledSeries,t.name)&&i.addClass("disabled"),i.attr("data-serie",t.name),i.findOne("circle").attr({fill:this.getSerieColor(t.name)}),i.findOne("text").text(t.label||t.name),i.translate(0,e*(t.legendLabelLineHeight||16)),h(this.elLegendItems).append(i)}},this)},getSerieColor:function(t){var e=this.model.get("attrs"),i=o.find(e,function(e,i){if(o.contains(i,t))return!0});return i?i.stroke||i.fill:"black"},hideSerie:function(t){o.contains(this._disabledSeries,t)||this._disabledSeries.push(t);var e=this.filterSeries();this.update(e)},showSerie:function(t){this._disabledSeries=o.without(this._disabledSeries,t);var e=this.filterSeries();this.update(e)},filterSeries:function(t){return t=t||this.model.get("series"),t=o.reject(t,function(t){return o.contains(this._disabledSeries,t.name)},this)},onPointerDown:function(t,e,i){var n=s(t.target).closest(".legend-item")[0];n&&(h(n).toggleClass("disabled"),h(n).hasClass("disabled")?this.hideSerie(h(n).attr("data-serie")):this.showSerie(h(n).attr("data-serie")))},onMouseMove:function(t){this.showGuidelines(t.clientX,t.clientY,t)},onMouseOut:function(t){this.hideGuidelines(),this.trigger("mouseout",t)},showGuidelines:function(t,e,i){var n=this.model.get("angle"),r=this.model.getBBox(),o=(this.model.get("series"),u.point(h(this.paper.viewport).toLocalPoint(t,e)).rotate(r.center(),n));if(u.rect(r).containsPoint(o)){var s=this.model.get("size"),a=o.x-r.x,l=o.y-r.y;h(this.elXGuideline).attr({x1:a,y1:0,x2:a,y2:s.height,visibility:"visible"}),h(this.elYGuideline).attr({x1:0,y1:l,x2:s.width,y2:l,visibility:"visible"});var c=u.scale.linear([this.canvas.x,this.canvas.x+this.canvas.width],[this.stats.minX,this.stats.maxX],a),d=u.scale.linear([this.canvas.y,this.canvas.y+this.canvas.height],[this.stats.minY,this.stats.maxY],l),p={x:c,y:this.stats.minY+this.stats.maxY-d},f={x:t,y:e},g=this.closestPoints(c);this.trigger("mouseover",p,f,g,i)}},closestPoints:function(t){var e=o.sortedIndex(this.stats.xValues,t),i=this.stats.xValues[e],n=this.stats.xValues[e-1],r=o.isUndefined(n)?i:Math.abs(t-i)<Math.abs(t-n)?i:n;return this.stats.xMap[r]},hideGuidelines:function(){h(this.elXGuideline).attr("visibility","hidden"),h(this.elYGuideline).attr("visibility","hidden")}}),d.shapes.chart.Pie=d.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable"></g>','<g class="background"><rect/><text/></g>','<g class="data"></g>','<g class="foreground">','<rect/><text class="caption"/><text class="subcaption"/>','<g class="legend"><g class="legend-items"></g></g>',"</g>","</g>"].join(""),sliceMarkup:'<g class="slice"/>',sliceFillMarkup:'<path class="slice-fill"/>',sliceBorderMarkup:'<path class="slice-border"/>',sliceInnerLabelMarkup:'<text class="slice-inner-label"/>',legendSerieMarkup:'<g class="legend-serie"><text/></g>',legendSliceMarkup:'<g class="legend-slice"><circle/><text/></g>',defaults:d.util.deepSupplement({type:"chart.Pie",size:{width:200,height:200},pieHole:0,serieDefaults:{startAngle:0,degree:360,label:null,showLegend:!0,labelLineHeight:6},sliceDefaults:{innerLabel:"{percentage:.0f}%",innerLabelMargin:6,legendLabel:"{label}: {value}",legendLabelLineHeight:6,legendLabelMargin:14,offset:0,onClickEffect:{type:"offset",offset:20},onHoverEffect:null},series:[],attrs:{".background > rect":{opacity:0},".background > text":{fill:"black",text:"No data available.",ref:".background > rect","ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle",display:"none"},".foreground > rect":{fill:"white",stroke:"#e5e5e5",opacity:0,"pointer-events":"none"},".foreground .caption":{fill:"black",text:"",ref:".foreground > rect","ref-x":2,"ref-y":6,"text-anchor":"start","y-alignment":"middle","font-size":14},".foreground .subcaption":{fill:"black",text:"",ref:".foreground > rect","ref-x":2,"ref-y":18,"text-anchor":"start","y-alignment":"middle","font-size":10},".data":{ref:".background","ref-x":.5,"ref-y":.5},".slice":{cursor:"pointer"},".slice > .slice-fill":{stroke:"#ffffff","stroke-width":1,"fill-opacity":1},".slice.hover > .slice-fill":{"fill-opacity":.8},".slice > .slice-border":{"stroke-width":6,"stroke-opacity":.4,"fill-opacity":1,fill:"none",display:"none"},".slice.hover > .slice-border":{display:"block"},".slice > .slice-inner-label":{"text-anchor":"middle","font-size":"12",stroke:"none","stroke-width":"0",fill:"#ffffff"},".slice > .slice-inner-label > tspan":{dy:"-.5em"},".legend":{ref:".background","ref-dx":20,"ref-y":5},".legend-serie text":{fill:"grey",transform:"translate(2, 0)","font-size":13},".legend-slice":{cursor:"pointer"},".legend-slice text":{"font-weight":"normal",fill:"black","font-size":11},".legend-slice.hover text":{"font-weight":"bold"},".legend-slice circle":{r:5,transform:"translate(5,5)"}}},d.shapes.basic.Generic.prototype.defaults),addSlice:function(t,e,i){i=i||{},e=e||0;var n=this.get("series");o.isUndefined(n[e])&&(n[e]={data:[]});var r=o.cloneDeep(n[e]);r.data.push(t),n=n.slice(),n[e]=r,i=r.data.length>1?o.extend(i,{changedSerieIndex:e}):i,this.set("series",n,i)},editSlice:function(t,e,i,n){n=n||{},i=i||0;var r=this.get("series");if(o.isUndefined(r[i])||o.isUndefined(r[i].data[e]))throw new Error("Slice "+e+" on serie "+i+" was not found.");var s=o.cloneDeep(r[i]);s.data[e]=o.extend(s.data[e],t),r=r.slice(),r[i]=s,this.set("series",r,o.extend(n,{changedSerieIndex:i}))}}),d.shapes.chart.PieView=d.dia.ElementView.extend({events:{"mouseover .slice":"onMouseOverSlice","mouseout .slice":"onMouseOverSlice","mousemove .slice":"onMouseMoveSlice","mouseover .legend-slice":"onEventLegendItem","mouseout .legend-slice":"onEventLegendItem"},initialize:function(){d.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:series change:serieDefaults change:sliceDefaults change:pieHole",function(t,e,i){this.update(null,null,i.changedSerieIndex)}),this.on("cell:pointerclick",this.onClickSlice,this),this.on("cell:pointerclick",this.onEventLegendItem,this)},renderMarkup:function(){d.dia.ElementView.prototype.renderMarkup.apply(this,arguments),this.elBackgroundRect=this.$(".background rect")[0],this.elBackgroundText=this.$(".background text")[0],this.elForegroundRect=this.$(".foreground rect")[0],this.elLegendItems=this.$(".legend-items")[0],this.elPie=this.$(".data")[0],this.elSlice=h(this.model.sliceMarkup),this.elSliceFill=h(this.model.sliceFillMarkup),this.elSliceBorder=h(this.model.sliceBorderMarkup),this.elSliceInnerLabel=h(this.model.sliceInnerLabelMarkup),this.elLegendSerie=h(this.model.legendSerieMarkup),this.elLegendSlice=h(this.model.legendSliceMarkup)},update:function(t,e,i){var n=this.calculateSeries(i);i in n?s(this.elPie).find(".serie-"+i).remove():s(this.elPie).empty();var r=this.model.get("size");h(this.elBackgroundRect).attr(r),h(this.elForegroundRect).attr(r),n.length?s(this.elBackgroundText).hide():s(this.elBackgroundText).show(),o.each(n,function(t,e){(o.isUndefined(i)||i===e)&&o.each(t.data,function(t){this.updateSlice(t)},this)},this),this.updateLegend(),d.dia.ElementView.prototype.update.apply(this,arguments)},calculateSeries:function(t){var e=o.cloneDeep(this.model.get("series")),i=this.model.get("serieDefaults"),n=this.model.get("sliceDefaults"),r=this.model.get("size"),s=o.min([r.width,r.height])/2,a=this.model.get("pieHole");a=a>1?a:s*a;var l=s,c=(s-a)/e.length;return this._series=o.map(e,function(e,r){if(!o.isUndefined(t)&&t!==r)return e;e=o.defaults(e,i);var s=e.startAngle,a=o.reduce(e.data,function(t,e){return t+e.value},0),h=e.degree/a||0,d=100/a;return e.data=o.map(e.data,function(t,e){t=o.defaults(t,o.omit(n,"offset","onClickEffect","onHoverEffect")),t.outerRadius=l,t.innerRadius=l-c,r||(t=o.defaults(t,o.pick(n,"offset","onClickEffect","onHoverEffect")),t.outer=!0,t.offset=t.offset>1?t.offset:t.offset*t.outerRadius,t.onClickEffect.offset=t.onClickEffect.offset>1?t.onClickEffect.offset:t.onClickEffect.offset*t.outerRadius),t.serieIndex=r,t.sliceIndex=e,t.innerLabelMargin=t.innerLabelMargin<-1||t.innerLabelMargin>1?t.innerLabelMargin:t.innerLabelMargin*t.outerRadius,t.percentage=t.value*d;var i=t.value*h;return t.degree={angle:i,start:s,end:i+s},t.rad={angle:u.toRad(t.degree.angle,!0),start:u.toRad(t.degree.start,!0),end:u.toRad(t.degree.end,!0)},t.middleangle=(t.rad.start+t.rad.end)/2,s=t.degree.end,t}),l-=c,e}),this._series},updateLegend:function(){var t=this._series;this.elLegendItems.textContent="";var e=0,i=parseInt(this.model.attr(".legend-serie text/font-size"),10),n=parseInt(this.model.attr(".legend-slice text/font-size"),10);o.each(t,function(t,r){if(t.showLegend){if(t.label){var s=this.elLegendSerie.clone();t.name&&s.addClass(t.name),s.attr({"data-serie":r}),s.findOne("text").text(t.label),s.translate(0,e),h(this.elLegendItems).append(s),e+=i+t.labelLineHeight}o.each(t.data,function(t,i){var s=this.elLegendSlice.clone(),a=this.getSliceFillColor(i,r);t.name&&s.addClass(t.name),s.attr({"data-serie":r,"data-slice":i}),s.findOne("circle").attr({fill:a}),s.findOne("text").text(d.util.format.string(t.legendLabel,t)),s.findOne("text").translate(t.legendLabelMargin),s.translate(0,e),e+=n+t.legendLabelLineHeight,h(this.elLegendItems).append(s),o.isObject(a)&&this.applyGradient("#"+s.findOne("circle").attr("id"),"fill",a)},this)}},this)},updateSlice:function(t){var e=this.elSlice.clone();h(this.elPie).append(e);var i=this.elSliceFill.clone(),n=this.getSliceFillColor(t.sliceIndex,t.serieIndex);i.attr({fill:n,d:h.createSlicePathData(t.innerRadius,t.outerRadius,t.rad.start,t.rad.end)}),e.append(i),o.isObject(n)&&this.applyGradient("#"+i.attr("id"),"fill",n);var r=this.elSliceBorder.clone(),s=parseInt(this.model.attr(".slice > .slice-border/stroke-width"),10),a=u.point.fromPolar(t.outerRadius+s/2,-t.rad.start,u.point(0,0)),l=u.point.fromPolar(t.outerRadius+s/2,-t.rad.end,u.point(0,0));r.attr({stroke:n,d:this.drawArc(a,l,t.outerRadius+s/2,t.rad.start,t.rad.end)}),e.append(r),o.isObject(n)&&this.applyGradient("#"+r.attr("id"),"stroke",n);var c=this.elSliceInnerLabel.clone();c.text(d.util.format.string(t.innerLabel,t)),e.append(c);var p=c.bbox(),f=t.outerRadius-p.width/2-t.innerLabelMargin;c.translate(f*Math.cos(-t.middleangle),-f*Math.sin(-t.middleangle)),e.attr({"data-serie":t.serieIndex,"data-slice":t.sliceIndex,"data-value":t.value});var g=this._series[t.serieIndex].name;return g&&e.addClass(g),t.name&&e.addClass(t.name),e.addClass("serie-"+t.serieIndex+" slice-"+t.sliceIndex),t.outer&&(e.addClass("outer"),t.offset&&(e.addClass("clicked"),this.effectOnSlice(e,t,{type:"offset",offset:t.offset}))),e},getSliceFillColor:function(t,e){e=e||0;var i=this.model.get("attrs"),n=o.find(i,function(i,n){return n.indexOf(".serie-"+e+".slice-"+t+" > .slice-fill")>-1});return n?n.fill:this._series[e].data[t].fill},onMouseMoveSlice:function(t){var e=h(t.currentTarget),i=e.attr("data-serie"),n=e.attr("data-slice"),r=this._series[i].data[n];this.trigger(t.type,r,t)},mouseOverSlice:function(t,e){e=e||0;var i=h(this.$('.slice[data-serie="'+e+'"][data-slice="'+t+'"]')[0]),n=this._series[e].data[t];i.toggleClass("hover"),n.outer&&!o.isEmpty(n.onHoverEffect)&&this.effectOnSlice(i,n,n.onHoverEffect,!i.hasClass("hover"));var r=h(this.$('.legend-slice[data-serie="'+e+'"][data-slice="'+t+'"]')[0]);r&&r.toggleClass("hover");var s=o.filter(o.keys(this.model.get("attrs")),function(t){return t.indexOf(".slice")>-1||t.indexOf(".legend-slice")>-1});d.dia.ElementView.prototype.update.call(this,this.model,o.pick(this.model.get("attrs"),s))},onMouseOverSlice:function(t){var e=h(t.currentTarget),i=e.attr("data-serie"),n=e.attr("data-slice");this.mouseOverSlice(n,i);var r=this._series[i].data[n];this.trigger(t.type,r,t)},clickSlice:function(t,e){e=e||0;var i=h(this.$('.slice[data-serie="'+e+'"][data-slice="'+t+'"]')[0]),n=this._series[e].data[t];n.outer&&(i.hasClass("clicked")?(i.removeClass("clicked"),this.model.get("series")[e].data[t].offset=0,this.effectOnSlice(i,n,n.onClickEffect,!0)):(i.addClass("clicked"),this.model.get("series")[e].data[t].offset=n.onClickEffect.offset,this.effectOnSlice(i,n,n.onClickEffect)))},onClickSlice:function(t){var e=h(s(t.target).closest(".slice.outer")[0]);if(e){var i=e.attr("data-serie"),n=e.attr("data-slice");this.clickSlice(n,i);var r=this._series[i].data[n];this.trigger(t.type,r,t)}},onEventLegendItem:function(t){var e=h(s(t.target).closest(".legend-slice")[0]);if(e){var i=e.attr("data-serie"),n=e.attr("data-slice");switch(t.type){case"click":this.clickSlice(n,i);break;case"mouseover":case"mouseout":this.mouseOverSlice(n,i)}}},effectOnSlice:function(t,e,i,n){switch(n=n||!1,i.type){case"enlarge":n?t.scale(1):t.scale(i.scale||1.05);break;case"offset":n?t.translate(0,0,{absolute:!0}):t.translate(i.offset*Math.cos(-e.middleangle),-i.offset*Math.sin(-e.middleangle))}},svgArcMax:2*Math.PI-1e-6,drawArc:function(t,e,i,n,r){var o=0,s=1,a=r-n;return a>Math.PI&&(o=1,a>=this.svgArcMax&&(o=0,s=0)),"M"+t.x+","+t.y+" A"+i+","+i+" 0 "+o+","+s+" "+e.x+","+e.y}}),d.shapes.chart.Knob=d.shapes.chart.Pie.extend({defaults:d.util.deepSupplement({type:"chart.Knob",sliceDefaults:{legendLabel:"{value:.0f}",outer:{offsetOnClick:0}},pieHole:.7,value:0,attrs:{".legend":{"ref-x":.5,"ref-y":.5,"x-alignment":-.9,"y-alignment":-.4},".legend-slice text":{"font-size":30},".legend-slice circle":{display:"none"},".slice-inner-label":{display:"none"},".slice-fill":{stroke:"none"}}},d.shapes.chart.Pie.prototype.defaults),initialize:function(){this.set("series",this.getKnobSeries(),{silent:!0}),d.shapes.chart.Pie.prototype.initialize.apply(this,arguments),this.on("change:value change:min change:max change:fill",this.updateKnob,this)},getKnobSeries:function(){var t=o.isArray(this.get("value"))?this.get("value"):[this.get("value")],e=o.isArray(this.get("fill"))?this.get("fill"):[this.get("fill")],i=o.isArray(this.get("min"))?this.get("min"):[this.get("min")],n=o.isArray(this.get("max"))?this.get("max"):[this.get("max")];return o.map(t,function(t,r){var s=o.isUndefined(i[r])?i[0]:i[r],a=o.isUndefined(n[r])?n[0]:n[r],l=o.isUndefined(e[r])?e[0]:e[r];return{degree:u.scale.linear([s,a],[0,360],t),data:[{value:t,fill:l}],showLegend:!(r>0)}})},updateKnob:function(){this.set("series",this.getKnobSeries())}}),d.shapes.chart.KnobView=d.shapes.chart.PieView,d.shapes.chart.Matrix=d.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<g class="background"><rect/></g>','<g class="cells"/>','<g class="foreground"/>',"</g>",'<g class="labels">','<g class="rows"/>','<g class="columns"/>',"</g>","</g>"].join(""),cellMarkup:'<rect class="cell"/>',labelMarkup:'<text class="label"/>',gridLineMarkup:'<path class="grid-line"/>',defaults:d.util.deepSupplement({type:"chart.Matrix",attrs:{".background rect":{fill:"#eeeeee"},".grid-line":{stroke:"white","stroke-width":2},".label":{fill:"black","alignment-baseline":"middle"},".labels .rows .label":{"text-anchor":"end"},".labels .columns .label":{"text-anchor":"start"}}},d.shapes.basic.Generic.prototype.defaults)}),d.shapes.chart.MatrixView=d.dia.ElementView.extend({initialize:function(){d.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:size",function(){this.renderLabels(),this.update()}),this.listenTo(this.model,"change:cells",function(){this.renderMarkup(),this.update()})},renderMarkup:function(){d.dia.ElementView.prototype.renderMarkup.apply(this,arguments),this.elCells=this.$(".cells")[0],this.elRowLabels=this.$(".labels .rows")[0],this.elColumnLabels=this.$(".labels .columns")[0],this.elForeground=this.$(".foreground")[0],this.elCell=h(this.model.cellMarkup),this.elGridLine=h(this.model.gridLineMarkup);var t=this.model.get("cells")||[],e=this.model.get("size");this.elBackgroundRect=this.$(".background rect")[0],h(this.elBackgroundRect).attr(e);var i=e.height/t.length,n=e.width/t.length,r=document.createDocumentFragment();this.elCells.textContent="",this.elForeground.textContent="";for(var s=document.createDocumentFragment(),a=0;a<t.length;a++){var l=this.elGridLine.clone();l.addClass("horizontal"),l.attr("d","M 0 "+a*i+" "+e.width+" "+a*i),s.appendChild(l.node);for(var c=t[a],u=0;u<c.length;u++){if(0===a){var l=this.elGridLine.clone();l.addClass("vertical"),l.attr("d","M "+u*n+" 0 "+u*n+" "+e.height),s.appendChild(l.node)}var p=c[u];if(p){var f=this.elCell.clone();f.attr(o.extend({x:u*n,y:a*i,width:n,height:i},p)),r.appendChild(f.node)}}}this.elForeground.appendChild(s),this.elCells.appendChild(r),this.renderLabels()},renderLabels:function(){this.elLabel=h(this.model.labelMarkup);var t=this.model.get("cells")||[],e=this.model.get("labels")||{},i=e.rows||[],n=e.columns||[],r=this.model.get("size"),s=r.height/t.length,a=r.width/t.length;this.elRowLabels.textContent="",this.elColumnLabels.textContent="";for(var l=document.createDocumentFragment(),c=0;c<i.length;c++){var u=e.rows[c],d=this.elLabel.clone();d.text(u.text),d.attr(o.extend({x:-(e.padding||5),y:c*s+s/2,"text-anchor":"end","alignment-baseline":"middle","font-size":s,"data-row":c},o.omit(u,"text"))),l.appendChild(d.node)}this.elRowLabels.appendChild(l);for(var p=document.createDocumentFragment(),f=0;f<n.length;f++){var u=e.columns[f],d=this.elLabel.clone();d.text(u.text);var g=f*a+a/2,m=-(e.padding||5);d.attr(o.extend({x:g,y:m,"text-anchor":"start","alignment-baseline":"middle","font-size":a,"data-column":f},o.omit(u,"text"))),d.rotate(-90,g,m),p.appendChild(d.node)}this.elColumnLabels.appendChild(p)}}),d.shapes.bpmn={},d.shapes.bpmn.icons={none:"",message:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUxMiA1MTIiIGhlaWdodD0iNTEycHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB3aWR0aD0iNTEycHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik00NzkuOTk4LDY0SDMyQzE0LjMyOSw2NCwwLDc4LjMxMiwwLDk2djMyMGMwLDE3LjY4OCwxNC4zMjksMzIsMzIsMzJoNDQ3Ljk5OEM0OTcuNjcxLDQ0OCw1MTIsNDMzLjY4OCw1MTIsNDE2Vjk2ICBDNTEyLDc4LjMxMiw0OTcuNjcxLDY0LDQ3OS45OTgsNjR6IE00MTYsMTI4TDI1NiwyNTZMOTYsMTI4SDQxNnogTTQ0OCwzODRINjRWMTYwbDE5MiwxNjBsMTkyLTE2MFYzODR6Ii8+PC9zdmc+",plus:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLjUsMTRIMTR2OC41YzAsMC4yNzYtMC4yMjQsMC41LTAuNSwwLjVoLTRDOS4yMjQsMjMsOSwyMi43NzYsOSwyMi41VjE0SDAuNSAgQzAuMjI0LDE0LDAsMTMuNzc2LDAsMTMuNXYtNEMwLDkuMjI0LDAuMjI0LDksMC41LDlIOVYwLjVDOSwwLjIyNCw5LjIyNCwwLDkuNSwwaDRDMTMuNzc2LDAsMTQsMC4yMjQsMTQsMC41VjloOC41ICBDMjIuNzc2LDksMjMsOS4yMjQsMjMsOS41djRDMjMsMTMuNzc2LDIyLjc3NiwxNCwyMi41LDE0eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",
cross:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik0yMi4yNDUsNC4wMTVjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjEzOWwtNi4yNzYsNi4yN2MtMC4zMTMsMC4zMTItMC4zMTMsMC44MjYsMCwxLjE0bDYuMjczLDYuMjcyICBjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjE0bC0yLjI4NSwyLjI3N2MtMC4zMTQsMC4zMTItMC44MjgsMC4zMTItMS4xNDIsMGwtNi4yNzEtNi4yNzFjLTAuMzEzLTAuMzEzLTAuODI4LTAuMzEzLTEuMTQxLDAgIGwtNi4yNzYsNi4yNjdjLTAuMzEzLDAuMzEzLTAuODI4LDAuMzEzLTEuMTQxLDBsLTIuMjgyLTIuMjhjLTAuMzEzLTAuMzEzLTAuMzEzLTAuODI2LDAtMS4xNGw2LjI3OC02LjI2OSAgYzAuMzEzLTAuMzEyLDAuMzEzLTAuODI2LDAtMS4xNEwxLjcwOSw1LjE0N2MtMC4zMTQtMC4zMTMtMC4zMTQtMC44MjcsMC0xLjE0bDIuMjg0LTIuMjc4QzQuMzA4LDEuNDE3LDQuODIxLDEuNDE3LDUuMTM1LDEuNzMgIEwxMS40MDUsOGMwLjMxNCwwLjMxNCwwLjgyOCwwLjMxNCwxLjE0MSwwLjAwMWw2LjI3Ni02LjI2N2MwLjMxMi0wLjMxMiwwLjgyNi0wLjMxMiwxLjE0MSwwTDIyLjI0NSw0LjAxNXoiLz48L3N2Zz4=",user:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLDIwLjk5OGgtMWMwLDAtMSwwLTEtMVYxNy41YzAtMC4yNzctMC4yMjQtMC41LTAuNS0wLjVTMTksMTcuMjIzLDE5LDE3LjUgIGwtMC4wMDgsNC4yOTVjMCwwLjYwOS0yLjAxLDIuMjA1LTYuNDkyLDIuMjA1cy02LjQ5Mi0xLjU5Ni02LjQ5Mi0yLjIwNUw2LDE3LjVDNiwxNy4yMjMsNS43NzYsMTcsNS41LDE3UzUsMTcuMjIzLDUsMTcuNXYyLjQ5OCAgYzAsMS0xLDEtMSwxSDNjMCwwLTEsMC0xLTFWMTUuNzVjMC0yLjkyMiwyLjg5Mi01LjQwMSw2LjkzLTYuMzQxYzAsMCwxLjIzNCwxLjEwNywzLjU3LDEuMTA3czMuNTctMS4xMDcsMy41Ny0xLjEwNyAgYzQuMDM4LDAuOTQsNi45MywzLjQxOSw2LjkzLDYuMzQxdjQuMjQ4QzIzLDIwLjk5OCwyMiwyMC45OTgsMjIsMjAuOTk4eiBNMTIuNDc3LDljLTIuNDg1LDAtNC41LTIuMDE1LTQuNS00LjVTOS45OTEsMCwxMi40NzcsMCAgczQuNSwyLjAxNSw0LjUsNC41UzE0Ljk2Miw5LDEyLjQ3Nyw5eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",circle:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gULEBE3DEP64QAAAwlJREFUaN7dmktrU0EUx38ZmmBbfEIL2hSjkYKC1EW6EDFudC+404/gE6WKSvGxERQfIH4AX1T9EOKrCrYurVrbgsZWoaBVixDbpC6ci+Fyz9ybZG478cBs7syc+Z+5c86c+c8ksCPrgW1ADtgEbARafG1+AW+AYWAIGADGWUTZAJwHxoD5GssocA7ILiTwLcADoFQHcH8pAfeB7jiBtwO3gLJF4P5S1mO02wa/C5iMEbi/TAI7bYE/Y3m5VLOs+sLAJULqrgKHIxhZBp4DT4FX2jkLGoinq1M7fg7YDmwFVATd14CjFboiy5UIs/QBOAmka/izaeCU1hE2zuVqlZ8IUfgVOAA0WViiTcBBrdM0Zm9UhTuAOYOiRzXOeJh0Ak8M484B+TAlK4BPBiU3gWSMoTqpw6g0fgFYblJww9D5dojT25IEcMeA47rUsdsQLp9FmPmURSNSOqpJS2lzUKd+ocN3IBNx5mz+oXXADwHTXX/jjMFxjy1iwtgrYJoF1lY27BMafozZaaMspYKA7XRlw7f1xt4Y5biA7bXXIGv4TW0OGNCmsQRhzCidlwTJADDlgAFTwAuhLq+AHqHyMe6IhKVHAV1C5ZBDBkhYupThPPreIQNGJTJBGXKLLw4Z8NmQu/Fb8PCkQwakBIxFRWPLvAJmhMpWh4AuFb7PKGBaqFzjkAGrhe/TSjNrQZJ1yAAJy5gCRoTKnEMGSFhGFDBoOBu7IhKWQe8wLRFLHQ6A7zCcFNNK59vvAjoqYK8DBuwTCLBhTUD8Hweahj9S2jjU297VqzrU26BVmi2yEjXRKg1PbHnpqYla7AeWxAi+GbhHHdSit2mYyN2XQQ5kQTJ6Y6qL3PUkCr2+H7v0+jcs0eueRLngGNeKa9mxY73g8JzpEtHusorAQ/7e+e7WUWIl//jSVTrK7QEu6KgW9d7tYr3B44iBWPJfkZZ8pZ4r2VngkC0HywMTLNwN5YSBcKtZWoGzernEBbyox2iJc6Np2KcGfnHisYet1CDouc2yCjbhp07MrD+3+QNxi4JkAscRswAAAABJRU5ErkJggg==",service:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB1RJREFUeNrMWltMVFcUHZAIRSAkSFACITRAVbQ/DVhHiRZC2y9jotFgqgmxKqShKdFCggZbEpP2h1Q/oLUg8GH0xy/LKwpDEEFsjKCM8kYkgAhTpggDMzCc7kX2mGF677w80J5khbnnntc+Zz/W2ReNxvsSQLhPWCBYGPhdTdjg7aBCCI/gVSfu+CHBfPz48ba7d+82AocOHfqT6mYIEV6Oua4CfE6YHxsbeyS49Pf3P6C6RYJ2vQTwVTtKHx+fXYRzhM0qTbYR/g4JCQmyVYSFhQXTHyMhUWXMzTzmTo3MorATHxH0eEXAriYrtCmNiop6tby8bLCdgNVqfR0ZGTlC735RaJ/EY+HhGSFhTVSIyg7CIO3mRHNzs44WOYydJuQQ/AjxhJ9hsFqt9qlwKElJSRB8nvAjIYYN+hucDMbCmMHBwZP03E/YLlUAKh8TnoSHh49NT0+vLG5paWk0JyfnPu9cJ8EUGho6cfTo0fbBwcFWRwH6+vpaYcy0yCk26Hb0zc7ObsFYaIOxaY5xqn9M2ClTgGw8wqM4LuzevXu6xMTEnitXrjTOz8/3Chfl7du3Ly5fvtyUkJDQrzRedXV1I2/KWZkCwCDrsMMWi+WV46Sk42+EhwV24VhnNpuHaY43NFct5pRtA7tw9BkZGQ/peVHIL+bDhw8/YrtKXJM4QOVrVNfV1TXKXr2d6mTK8EI+tk4KPrszNjY2mIJTiK+vb5iK+zX29vbqW1paLNRe7N271590PpF+hyq1hzpt3bpVTE5ODlDfFIU5FdfiTRxAkDKVlpY2QI2VVNvOHUIVXjJmUEcC6Rz7keGLffv2CdoMK5/AogzupCZA8aZNmwxkbEMKi18sKSmxqcF1QjohmgF6UYl3LPw7GxoYGBAbN24U+fn5puLi4qWqqqoBGdwJxZ+J2ZeEXF6U9dixYw+VdLi1tbWJF3/aycBn0aa9vb3J1q++vl4EBARAfYRM7oTSwpFzjjAeExMznJ6e/mRkZORfAoA20Mn8Re3KFAaD9zpH2MzP13GK1GcafSl+iIiICGEymd6Nh4BG7SbVNgNj8Zg7nQmwdPLkybahoaG22dnZbntu41i6u7sh7CzhM1fciZCKTUEf9M3KyhLJycnYBCGTO6FYmpqa3HKX5eXlDWysUW5wp0K0LSoqasvLyxP+/v7ixIkTQjZ3WhFAR8UbAdzgTmY/Pz9rfHy8KCgoEKOjo0I2d1pxzxhAr9e3GI3GZ87ogp0KpbriTrdv3+6ghS9XVlYaFxYWxFpxJ5QaltxMeAOOf+DAgQ4VI55mIy53hzuRx7GuNXfSsM5FwJURzhBK3HSjZ/8P3MmrQIYgxUJUcvDKx/OtW7c61ps7ObtSziHiqlEJ0AU+VqgfPI8lOjraajAYVNUGKgg7Kisra4RDwG9bnFAqZMTjcBBI3ziLA0ovQPL0cXFxg6STU84W1NPT8+DSpUtt8DY3btwwqqm2p9zJ1q+wsBAqC7uL9EQA3H+Fu+41NzdXkPELMmQhizvZeSc9bQ5OucAtATiKLsAPK+0KXCKIWW1trSBSJjIzM8EwxYULF4RM7mRf0tLSnrCX/JXwLW9CLPO4VVfKcHAj4kMvldwZ6ojzr5CywMBAsWXLFrFnz54VmjAxMSE84U4KQqziTvYFapqSktIJnkbtXjNvW+DU5ioB8vDIOrlq7Xfu3GmgINNHl47lixcvIiO3QszsuY273ElFgFXcSSVGTBFfew7eBv4GHucoAHz6Y+I1r23UgFRmED6e1QD8XZBOW7zlTk4EgE28rKioaHBnbNgnPJ+vw8UGrO8rcoVzdJ2MqKmp0ZEbC7l58yaSWacJn0LqoKCgcc1/XOg0nHqhBDt6XI+TsXvnNXdycQJpUCHouzOagTkxN9/mrKqZAE7QgloEOtR7zZ1cCFABRqpkxNgIMuKnmIsvQGaOJ9UepzLelzupjJnlzI2mpqZ28KKvcspHy2vY4I0AMrhTDOMLQhXeXbt2zftAJikd7yl3AmZAxXFK3lIJH08lUUo++aBSo+ki7vQBGaHTRBjdwJ7TghGENFqtNoAuPTvUEmFkDxN0Z7ZSkBymvlqltUj5DOQpd/Kk4HbG6pct5fuYp9xJQlk8depUK1/8P5EqgDvcydPV4g6gVMcutNmWd5IlgEvuhA8ixJl63LjU64uKinS4g+AW5niauE+wKn0vUwB3uNMcvM+RI0faQcKU0ioHDx60pVWMtmQWvj9jLFtaBXNwWmWXbBvYThiAO8TO8UIMHHAQaOIIPyEQ7d+/v9NRgN27d3exfv/AhG4D9zVgLIzJ7heJrW3SjdgVd7Jr8zsybfZUATyKU4tXVXKt9Txml2pqUdbXdDXuZPf+OySPkX+1CQBixtzmjEqfQL6tJaqtxU/ix3I9n4JaeUEInZmZGSHasVIxNTU1wx9TulTGNNGf35zN67eOFL6X4Hv+/Hkr3aN14PNEPYL5atgvjde4+1HBy3/PaXb49xwwzD/eZyP/EWAAQ3AUnjpOYHIAAAAASUVORK5CYII="},d.shapes.bpmn.IconInterface={initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:icon",this._onIconChange),this._onIconChange(this,this.get("icon")||"none")},_onIconChange:function(t,e){var i=d.shapes.bpmn.icons;if(!o.has(i,e))throw"BPMN: Unknown icon: "+e;t.attr("image/xlink:href",i[e])}},d.shapes.bpmn.SubProcessInterface={initialize:function(){this._parent=(this._parent||this).constructor.__super__,this._parent.initialize.apply(this,arguments),this.listenTo(this,"change:subProcess",this._onSubProcessChange),this._onSubProcessChange(this,this.get("subProcess")||null)},_onSubProcessChange:function(t,e){t.attr({".sub-process":{visibility:e?"visible":"hidden","data-sub-process":e||""}})}},d.shapes.bpmn.ActivityView=d.shapes.basic.TextBlockView,d.shapes.bpmn.Activity=d.shapes.basic.TextBlock.extend({markup:['<g class="rotatable">','<g class="scalable"><rect class="body outer"/><rect class="body inner"/></g>',d.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>','<path class="sub-process"/><image class="icon"/></g>'].join(""),defaults:d.util.deepSupplement({size:{width:100,height:100},type:"bpmn.Activity",attrs:{rect:{rx:8,ry:8,width:100,height:100},".body":{fill:"#ffffff",stroke:"#000000"},".inner":{transform:"scale(0.9,0.9) translate(5,5)"},path:{d:"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15",ref:".inner","ref-x":.5,"ref-dy":-30,"x-alignment":"middle",stroke:"#000000",fill:"transparent"},image:{ref:".inner","ref-x":5,width:20,height:20}},activityType:"task",subProcess:null},d.shapes.basic.TextBlock.prototype.defaults),initialize:function(){d.shapes.basic.TextBlock.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:activityType",this.onActivityTypeChange),this.listenTo(this,"change:subProcess",this.onSubProcessChange),this.onSubProcessChange(this,this.get("subProcess")),this.onActivityTypeChange(this,this.get("activityType"))},onActivityTypeChange:function(t,e){switch(e){case"task":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":1,"stroke-dasharray":"none"},path:{ref:".outer"},image:{ref:".outer"}});break;case"transaction":t.attr({".inner":{visibility:"visible"},".outer":{"stroke-width":1,"stroke-dasharray":"none"},path:{ref:".inner"},image:{ref:".inner"}});break;case"event-sub-process":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":1,"stroke-dasharray":"1,2"},path:{ref:".outer"},image:{ref:".outer"}});break;case"call-activity":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":5,"stroke-dasharray":"none"},path:{ref:".outer"},image:{ref:".outer"}});break;default:throw"BPMN: Unknown Activity Type: "+e}},onSubProcessChange:function(t,e){e?t.attr({".fobj div":{style:{verticalAlign:"baseline",paddingTop:10}},image:{"ref-dy":-25,"ref-y":""},text:{"ref-y":25}}):t.attr({".fobj div":{style:{verticalAlign:"middle",paddingTop:0}},image:{"ref-dy":"","ref-y":5},text:{"ref-y":.5}})}}).extend(d.shapes.bpmn.IconInterface).extend(d.shapes.bpmn.SubProcessInterface),d.shapes.bpmn.AnnotationView=d.shapes.basic.TextBlockView,d.shapes.bpmn.Annotation=d.shapes.basic.TextBlock.extend({markup:['<g class="rotatable">','<g class="scalable"><rect class="body"/></g>',d.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>','<path class="stroke"/></g>'].join(""),defaults:d.util.deepSupplement({size:{width:100,height:100},type:"bpmn.Annotation",attrs:{rect:{width:100,height:100},".body":{"fill-opacity":.1,fill:"#ffffff",stroke:"none"},".fobj div":{style:{textAlign:"left",paddingLeft:10}},".stroke":{stroke:"#000000",fill:"none","stroke-width":3}},wingLength:20},d.shapes.basic.TextBlock.prototype.defaults),initialize:function(){d.shapes.basic.TextBlock.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:size",this.onSizeChange),this.onSizeChange(this,this.get("size"))},onSizeChange:function(t,e){t.attr(".stroke",{d:t.getStrokePathData(e.width,e.height,t.get("wingLength"))})},getStrokePathData:function(t,e,i){return i=Math.min(i,t),["M",i,"0 L 0 0 0",e,i,e].join(" ")}}),d.shapes.bpmn.Gateway=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="body"/><image/></g></g><text class="label"/>',defaults:d.util.deepSupplement({type:"bpmn.Gateway",size:{width:80,height:80},attrs:{".body":{points:"40,0 80,40 40,80 0,40",fill:"#ffffff",stroke:"#000000"},".label":{text:"",ref:".body","ref-x":.5,"ref-dy":20,"y-alignment":"middle","x-alignment":"middle","font-size":14,"font-family":"Arial, helvetica, sans-serif",fill:"#000000"},image:{width:40,height:40,"xlink:href":"",transform:"translate(20,20)"}}},d.dia.Element.prototype.defaults)}).extend(d.shapes.bpmn.IconInterface),d.shapes.bpmn.Event=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="body outer"/><circle class="body inner"/><image/></g><text class="label"/></g>',defaults:d.util.deepSupplement({type:"bpmn.Event",size:{width:60,height:60},attrs:{".body":{fill:"#ffffff",stroke:"#000000"},".outer":{"stroke-width":1,r:30,transform:"translate(30,30)"},".inner":{"stroke-width":1,r:26,transform:"translate(30,30)"},image:{width:40,height:40,"xlink:href":"",transform:"translate(10,10)"},".label":{text:"",fill:"#000000","font-family":"Arial","font-size":14,ref:".outer","ref-x":.5,"ref-dy":20,"x-alignment":"middle","y-alignment":"middle"}},eventType:"start"},d.dia.Element.prototype.defaults),initialize:function(){d.dia.Element.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:eventType",this.onEventTypeChange),this.onEventTypeChange(this,this.get("eventType"))},onEventTypeChange:function(t,e){switch(e){case"start":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":1}});break;case"end":t.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":5}});break;case"intermediate":t.attr({".inner":{visibility:"visible"},".outer":{"stroke-width":1}});break;default:throw"BPMN: Unknown Event Type: "+e}}}).extend(d.shapes.bpmn.IconInterface),d.shapes.bpmn.Pool=d.dia.Element.extend({markup:['<g class="rotatable">','<g class="scalable"><rect class="body"/></g>','<svg overflow="hidden" class="blackbox-wrap"><text class="blackbox-label"/></svg>','<rect class="header"/><text class="label"/>','<g class="lanes"/>',"</g>"].join(""),laneMarkup:'<g class="lane"><rect class="lane-body"/><rect class="lane-header"/><text class="lane-label"/></g>',defaults:d.util.deepSupplement({type:"bpmn.Pool",size:{width:600,height:300},attrs:{".body":{fill:"#ffffff",stroke:"#000000",width:500,height:200,"pointer-events":"stroke"},".header":{fill:"#ffffff",stroke:"#000000",width:20,ref:".body","ref-height":1,"pointer-events":"visiblePainted"},".label":{fill:"#000000",transform:"rotate(-90)",ref:".header","ref-x":10,"ref-y":.5,"font-family":"Arial","font-size":14,"x-alignment":"middle","text-anchor":"middle"},".lane-body":{fill:"#ffffff",stroke:"#000000","pointer-events":"stroke"},".lane-header":{fill:"#ffffff",stroke:"#000000","pointer-events":"visiblePainted"},".lane-label":{fill:"#000000",transform:"rotate(-90)","text-anchor":"middle","font-family":"Arial","font-size":13},".blackbox-wrap":{ref:".body","ref-width":1,"ref-height":1},".blackbox-label":{text:"Black Box","text-anchor":"middle",transform:"translate(0,-7)"},".blackbox-label > tspan":{dx:"50%",dy:"50%"}}},d.dia.Element.prototype.defaults)}),d.shapes.bpmn.PoolView=d.dia.ElementView.extend({options:{headerWidth:20},initialize:function(){this.listenTo(this.model,"change:lanes",function(t,e){this.renderLanes(e)}),d.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){return o.isUndefined(this.lanesAttrs)?this.renderLanes(this.model.get("lanes")):d.dia.ElementView.prototype.update.call(this,this.model,o.merge({},this.model.get("attrs"),this.lanesAttrs||{}))},renderMarkup:function(){d.dia.ElementView.prototype.renderMarkup.apply(this,arguments),this.$lanes=this.$(".lanes"),this.laneMarkup=h(this.model.laneMarkup)},renderLanes:function(t){t=t||{},this.index=0,this.lanesAttrs={".header":{width:this.options.headerWidth},".label":{text:t.label||""}},this.$lanes.empty(),t.sublanes&&this.renderSublanes(t.sublanes,0,0,1),this.update(this.model,o.merge({},this.model.get("attrs"),this.lanesAttrs))},renderSublanes:function(t,e,i,n){var r=this.options.headerWidth,s=1/t.length*n;o.each(t,function(t,n){var o="lane"+this.index,a="."+o+" .lane-body",l="."+o+" .lane-header",c="."+o+" .lane-label";t.name&&(o+=" "+t.name),this.$lanes.append(this.laneMarkup.clone().addClass(o).node);var h=e+r,u=i+s*n;this.lanesAttrs[a]={ref:".body","ref-height":s,"ref-width":-h,"ref-x":h,"ref-y":u},this.lanesAttrs[l]={width:r,ref:".body","ref-height":s,"ref-x":h,"ref-y":u},this.lanesAttrs[c]={text:t.label,ref:l,"ref-x":10,"ref-y":.5,"x-alignment":"middle"},this.index++,t.sublanes&&this.renderSublanes(t.sublanes,h,u,s)},this)}}),d.shapes.bpmn.Group=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><rect class="label-rect"/><g class="label-group"><svg overflow="hidden" class="label-wrap"><text class="label"/></svg></g></g>',defaults:d.util.deepSupplement({type:"bpmn.Group",size:{width:200,height:200},attrs:{".body":{width:200,height:200,stroke:"#000000","stroke-dasharray":"6,6","stroke-width":2,fill:"transparent",rx:15,ry:15,"pointer-events":"stroke"},".label-rect":{ref:".body","ref-width":.6,"ref-x":.4,"ref-y":-30,height:25,fill:"#ffffff",stroke:"#000000"},".label-group":{ref:".label-rect","ref-x":0,"ref-y":0},".label-wrap":{ref:".label-rect","ref-width":1,"ref-height":1},".label":{text:"",x:"50%",y:"1.3em","text-anchor":"middle","font-family":"Arial","font-size":14,fill:"#000000"}}},d.dia.Element.prototype.defaults)}),d.shapes.bpmn.DataObject=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="body"/></g><text class="label"/></g>',defaults:d.util.deepSupplement({type:"bpmn.DataObject",size:{width:60,height:80},attrs:{".body":{points:"20,0 60,0 60,80 0,80 0,20 20,0 20,20 0,20",stroke:"#000000",fill:"#ffffff"},".label":{ref:".body","ref-x":.5,"ref-dy":5,text:"","text-anchor":"middle"}}},d.dia.Element.prototype.defaults)}),d.shapes.bpmn.Conversation=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="body"/></g><text class="label"/><path class="sub-process"/></g>',defaults:d.util.deepSupplement({type:"bpmn.Conversation",size:{width:100,height:100},attrs:{".body":{points:"25,0 75,0 100,50 75,100 25,100 0,50",stroke:"#000000",fill:"#ffffff"},".label":{text:"",ref:".body","ref-x":.5,"ref-dy":5,"text-anchor":"middle"},path:{d:"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15",ref:".body","ref-x":.5,"ref-dy":-30,"x-alignment":"middle",fill:"#ffffff",stroke:"#000000","fill-opacity":0}},conversationType:"conversation"},d.dia.Element.prototype.defaults),initialize:function(){d.dia.Element.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:conversationType",this.onConversationTypeChange),this.onConversationTypeChange(this,this.get("conversationType"))},onConversationTypeChange:function(t,e){switch(e){case"conversation":t.attr("polygon/stroke-width",1);break;case"call-conversation":t.attr("polygon/stroke-width",4);break;default:throw"BPMN: Unknown Conversation Type: "+e}}}).extend(d.shapes.bpmn.SubProcessInterface),d.shapes.bpmn.Choreography=d.shapes.basic.TextBlock.extend({markup:['<g class="rotatable">','<g class="scalable"><rect class="body"/></g>',d.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>','<text class="label"/><path class="sub-process"/><g class="participants"/>',"</g>"].join(""),participantMarkup:'<g class="participant"><rect class="participant-rect"/><text class="participant-label"/></g>',defaults:d.util.deepSupplement({type:"bpmn.Choreography",size:{width:60,height:80},attrs:{rect:{},".body":{width:60,height:80,stroke:"#000000",fill:"#ffffff"},".label":{ref:".body","ref-x":.5,"ref-dy":5,text:"","text-anchor":"middle"},".participant-rect":{stroke:"#000000",fill:"#aaaaaa",ref:".body","ref-width":1},".participant-label":{"text-anchor":"middle",ref:".participant_0 .participant-rect","ref-x":.5,"ref-y":.5,"y-alignment":"middle"},".sub-process":{d:"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15",ref:".body","ref-x":.5,"ref-dy":-30,"x-alignment":"middle",fill:"transparent",stroke:"#000000"}},participants:[],initiatingParticipant:0},d.shapes.basic.TextBlock.prototype.defaults)}).extend(d.shapes.bpmn.SubProcessInterface),d.shapes.bpmn.ChoreographyView=d.shapes.basic.TextBlockView.extend({options:{participantHeight:20},initialize:function(){this.listenTo(this.model,"change:participants",function(t,e){this.renderParticipants(e)}),this.listenTo(this.model,"change:initiatingParticipant",this.layoutAndUpdate),d.shapes.basic.TextBlockView.prototype.initialize.apply(this,arguments),d.env.test("svgforeignobject")||this.stopListening(this.model,"change:content").listenTo(this.model,"change:content",function(t){this.updateContent(t,this.participantsAttrs)})},update:function(){return o.isUndefined(this.participantsAttrs)?this.renderParticipants(this.model.get("participants")):(this.layoutAndUpdate(),this)},renderMarkup:function(){d.dia.ElementView.prototype.renderMarkup.apply(this,arguments),this.$participants=this.$(".participants"),this.participantMarkup=h(this.model.participantMarkup)},renderParticipants:function(t){this.$participants.empty(),this.participantsAttrs={},o.each(t,function(t,e){var i="participant_"+e,n="."+i;this.participantsAttrs[n+" .participant-rect"]={height:this.options.participantHeight},this.participantsAttrs[n+" .participant-label"]={text:t},this.$participants.append(this.participantMarkup.clone().addClass(i).node)},this),this.layoutAndUpdate()},layoutAndUpdate:function(){var t=this.model.get("participants")||[],e=t.length,i=this.options.participantHeight,n=this.model.get("size").height,r=Math.max(0,n-i*e),s=0,a=this.model.get("initiatingParticipant"),l=Math.max(o.isNumber(a)?Math.abs(a):t.indexOf(a),0),c=Math.min(l,e-2);o.each(t,function(t,e){var n=".participant_"+e;this.participantsAttrs[n]={transform:"translate(0,"+s+")"},this.participantsAttrs[n+" .participant-rect"].fill=l==e?this.model.attr(".body/fill"):this.model.attr(".participant-rect/fill"),this.participantsAttrs[n+" .participant-rect"].stroke=l==e?this.model.attr(".body/stroke"):this.model.attr(".participant-rect/stroke"),s+=i+(c==e?r:0)},this);var h=e<2?0:c-e+1;this.participantsAttrs[".sub-process"]={"ref-dy":Math.max(-n,h*i-30)};var u=e<2?0:c+1;this.participantsAttrs[".fobj div"]={style:{height:r,paddingTop:i*u}},this.participantsAttrs[".content"]={"ref-y":i*u+r/2};var p=o.merge({},this.model.get("attrs"),this.participantsAttrs||{});d.shapes.basic.TextBlockView.prototype.update.call(this,this.model,p)}}),d.shapes.bpmn.Message=d.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="body"/></g><text class="label"/></g>',defaults:d.util.deepSupplement({type:"bpmn.Message",size:{width:60,height:40},attrs:{".body":{points:"0,0 60,0 60,40 0,40 0,0 60,0 30,20 0,0",stroke:"#000000",fill:"#ffffff"},".label":{ref:".body","ref-x":.5,"ref-dy":5,text:"","text-anchor":"middle"}}},d.dia.Element.prototype.defaults)}),d.shapes.bpmn.Flow=d.dia.Link.extend({defaults:{type:"bpmn.Flow",attrs:{".marker-source":{d:"M 0 0"},".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#000000"},".connection":{"stroke-dasharray":" ","stroke-width":1},".connection-wrap":{style:"",onMouseOver:"",onMouseOut:""}},flowType:"normal"},initialize:function(){d.dia.Link.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:flowType",this.onFlowTypeChange),this.onFlowTypeChange(this,this.get("flowType"))},onFlowTypeChange:function(t,e){var i;switch(e){case"default":i={".marker-source":{d:"M 0 5 L 20 5 M 20 0 L 10 10",fill:"none"}};break;case"conditional":i={".marker-source":{d:"M 20 8 L 10 0 L 0 8 L 10 16 z",fill:"#FFF"}};break;case"normal":i={};break;case"message":i={".marker-target":{fill:"#FFF"},".connection":{"stroke-dasharray":"4,4"}};break;case"association":i={".marker-target":{d:"M 0 0"},".connection":{"stroke-dasharray":"4,4"}};break;case"conversation":i={".marker-target":{d:"M 0 0"},".connection":{"stroke-width":"7px"},".connection-wrap":{style:"stroke: #fff; stroke-width: 5px; opacity: 1;",onMouseOver:"var s=this.style;s.stroke='#000';s.strokeWidth=15;s.opacity=.4",onMouseOut:"var s=this.style;s.stroke='#fff';s.strokeWidth=5;s.opacity=1"}};break;default:throw"BPMN: Unknown Flow Type: "+e}t.attr(o.merge({},this.defaults.attrs,i))}}),d.dia.CommandManager=r.Model.extend({defaults:{cmdBeforeAdd:null,cmdNameRegex:/^(?:add|remove|change:\w+)$/},PREFIX_LENGTH:7,initialize:function(t){o.bindAll(this,"initBatchCommand","storeBatchCommand"),this.graph=t.graph,this.reset(),this.listen()},listen:function(){this.listenTo(this.graph,"all",this.addCommand,this),this.listenTo(this.graph,"batch:start",this.initBatchCommand,this),this.listenTo(this.graph,"batch:stop",this.storeBatchCommand,this)},createCommand:function(t){return{action:void 0,data:{id:void 0,type:void 0,previous:{},next:{}},batch:t&&t.batch}},push:function(t){this.redoStack=[],t.batch?(this.lastCmdIndex=Math.max(this.lastCmdIndex,0),this.trigger("batch",t)):(this.undoStack.push(t),this.trigger("add",t))},addCommand:function(t,e,i,n){if((!n||!n.dry)&&this.get("cmdNameRegex").test(t)&&("function"!=typeof this.get("cmdBeforeAdd")||this.get("cmdBeforeAdd").apply(this,arguments))){var r=void 0;if(this.batchCommand){if(r=this.batchCommand[Math.max(this.lastCmdIndex,0)],this.lastCmdIndex>=0&&(r.data.id!==e.id||r.action!==t)){var s=o.findIndex(this.batchCommand,function(i,n){return i.data.id===e.id&&i.action===t},this);s<0||"add"===t||"remove"===t?r=this.createCommand({batch:!0}):(r=this.batchCommand[s],this.batchCommand.splice(s,1)),this.lastCmdIndex=this.batchCommand.push(r)-1}}else r=this.createCommand({batch:!1});if("add"===t||"remove"===t)return r.action=t,r.data.id=e.id,r.data.type=e.attributes.type,r.data.attributes=o.merge({},e.toJSON()),r.options=n||{},void this.push(r);var a=t.substr(this.PREFIX_LENGTH);r.batch&&r.action||(r.action=t,r.data.id=e.id,r.data.type=e.attributes.type,r.data.previous[a]=o.clone(e.previous(a)),r.options=n||{}),r.data.next[a]=o.clone(e.get(a)),this.push(r)}},initBatchCommand:function(){this.batchCommand?this.batchLevel++:(this.batchCommand=[this.createCommand({batch:!0})],this.lastCmdIndex=-1,this.batchLevel=0)},storeBatchCommand:function(){if(this.batchCommand&&this.batchLevel<=0){var t=this.filterBatchCommand(this.batchCommand);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.trigger("add",t)),this.batchCommand=null,this.lastCmdIndex=null,this.batchLevel=null}else this.batchCommand&&this.batchLevel>0&&this.batchLevel--},filterBatchCommand:function(t){for(var e=t.slice(),i=[];e.length>0;){var n=e.shift(),r=n.data.id;if(null!=n.action&&null!=r){if("add"===n.action){var s=o.findIndex(e,{action:"remove",data:{id:r}});if(s>=0){e=o.reject(e,function(t,e){return e<=s&&t.data.id===r});continue}}else if("remove"===n.action){var a=o.findIndex(e,{action:"add",data:{id:r}});if(a>=0){e.splice(a,1);continue}}else if(0===n.action.indexOf("change")&&o.isEqual(n.data.previous,n.data.next))continue;i.push(n)}}return i},revertCommand:function(t){this.stopListening();var e,i={commandManager:this.id||this.cid};e=o.isArray(t)?t:[t];for(var n=e.length-1;n>=0;n--){var r=e[n],s=this.graph.getCell(r.data.id);switch(r.action){case"add":s.remove(i);break;case"remove":this.graph.addCell(r.data.attributes,i);break;default:var a=r.action.substr(this.PREFIX_LENGTH);s.set(a,r.data.previous[a],i)}}this.listen()},applyCommand:function(t){this.stopListening();var e,i={commandManager:this.id||this.cid};e=o.isArray(t)?t:[t];for(var n=0;n<e.length;n++){var r=e[n],s=this.graph.getCell(r.data.id);switch(r.action){case"add":this.graph.addCell(r.data.attributes,i);break;case"remove":s.remove(i);break;default:var a=r.action.substr(this.PREFIX_LENGTH);s.set(a,r.data.next[a],i)}}this.listen()},undo:function(){var t=this.undoStack.pop();t&&(this.revertCommand(t),this.redoStack.push(t))},redo:function(){var t=this.redoStack.pop();t&&(this.applyCommand(t),this.undoStack.push(t))},cancel:function(){this.hasUndo()&&(this.revertCommand(this.undoStack.pop()),this.redoStack=[])},reset:function(){this.undoStack=[],this.redoStack=[]},hasUndo:function(){return this.undoStack.length>0},hasRedo:function(){return this.redoStack.length>0}}),d.dia.Validator=r.Model.extend({initialize:function(t){this._map={},this._commandManager=t.commandManager,this.listenTo(this._commandManager,"add",this._onCommand)},defaults:{cancelInvalid:!0},_onCommand:function(t){return o.isArray(t)?o.find(t,function(t){return!this._validateCommand(t)},this):this._validateCommand(t)},_validateCommand:function(t){if(t.options&&!1===t.options.validation)return!0;var e;return o.each(this._map[t.action],function(i){function n(o){var s=i[r++];try{if(!s)return void(e=o);s(o,t,n)}catch(o){n(o)}}var r=0;n(e)}),!e||(this.get("cancelInvalid")&&this._commandManager.cancel(),this.trigger("invalid",e),!1)},validate:function(t){var e=Array.prototype.slice.call(arguments,1);return o.each(e,function(e){if(!o.isFunction(e))throw new Error(t+" requires callback functions.")}),o.each(t.split(" "),function(t){(this._map[t]=this._map[t]||[]).push(e)},this),this}}),d.dia.Graph.prototype.constructTree=function(t,e,i,n){n=n||[];var r=o.isFunction(e.children)?e.children(t):t[e.children||"children"];return i||(i=e.makeElement(t),n.push(i)),o.each(r,function(t){var r=e.makeElement(t),o=e.makeLink(i,r);n.push(r,o),this.constructTree(t,e,r,n)},this),n},d.dia.Graph.prototype.shortestPath=function(t,e,i){i=i||{};var n={};o.each(this.getLinks(),function(t){var e=t.get("source").id,r=t.get("target").id;n[e]||(n[e]=[]),n[r]||(n[r]=[]),n[e].push(r),i.directed||n[r].push(e)});var r=d.alg.Dijkstra(n,t.id||t,i.weight),s=[],a=e.id||e;for(r[a]&&s.push(a);a=r[a];)s.unshift(a);return s},d.ui.PaperScroller=d.mvc.View.extend({className:"paper-scroller",events:{mousedown:"pointerdown",mousemove:"pointermove",touchmove:"pointermove"},options:{paper:void 0,padding:function(){var t=Math.max(this.options.minVisiblePaperSize,1)||1,e={};return e.left=e.right=Math.max(this.el.clientWidth-t,0),e.top=e.bottom=Math.max(this.el.clientHeight-t,0),e},minVisiblePaperSize:50,autoResizePaper:!1,baseWidth:void 0,baseHeight:void 0,contentOptions:void 0},_padding:{paddingLeft:0,paddingTop:0},init:function(){o.bindAll(this,"startPanning","stopPanning","pan");var t=this.options.paper,e=h(t.viewport).scale();this._sx=e.sx,this._sy=e.sy,o.isUndefined(this.options.baseWidth)&&(this.options.baseWidth=t.options.width),o.isUndefined(this.options.baseHeight)&&(this.options.baseHeight=t.options.height),this.$el.append(t.el),this.listenTo(t,"scale",this.onScale),this.listenTo(t,"resize",this.onResize),this.listenTo(t,"beforeprint",this.onBeforePrint),this.listenTo(t,"afterprint",this.onAfterPrint),this.options.autoResizePaper&&this.listenTo(t.model,"change add remove reset",this.adjustPaper)},onResize:function(){this._center&&this.center(this._center.x,this._center.y)},onScale:function(t,e,i,n){this.adjustScale(t,e),this._sx=t,this._sy=e,(i||n)&&this.center(i,n)},onBeforePrint:function(){this._scrollLeftBeforePrint=this.el.scrollLeft,this._scrollTopBeforePrint=this.el.scrollTop},onAfterPrint:function(){this.el.scrollLeft=this._scrollLeftBeforePrint,this.el.scrollTop=this._scrollTopBeforePrint,this._scrollLeftBeforePrint=null,this._scrollTopBeforePrint=null},beforePaperManipulation:function(){this.$el.css("visibility","hidden")},afterPaperManipulation:function(){this.$el.css("visibility","visible")},toLocalPoint:function(t,e){var i=this.options.paper.viewport.getCTM();return t+=this.el.scrollLeft-this._padding.paddingLeft-i.e,t/=i.a,e+=this.el.scrollTop-this._padding.paddingTop-i.f,e/=i.d,u.point(t,e)},adjustPaper:function(){this._center=this.toLocalPoint(this.el.clientWidth/2,this.el.clientHeight/2);var t=o.extend({gridWidth:this.options.baseWidth,gridHeight:this.options.baseHeight,allowNewOrigin:"negative"},this.options.contentOptions);return this.options.paper.fitToContent(this.transformContentOptions(t)),this},adjustScale:function(t,e){var i=this.options.paper.options,n=t/this._sx,r=e/this._sy;this.options.paper.setOrigin(i.origin.x*n,i.origin.y*r),this.options.paper.setDimensions(i.width*n,i.height*r)},transformContentOptions:function(t){var e=this._sx,i=this._sy;return t.gridWidth&&(t.gridWidth*=e),t.gridHeight&&(t.gridHeight*=i),t.minWidth&&(t.minWidth*=e),t.minHeight&&(t.minHeight*=i),o.isObject(t.padding)?t.padding={left:(t.padding.left||0)*e,right:(t.padding.right||0)*e,top:(t.padding.top||0)*i,bottom:(t.padding.bottom||0)*i}:o.isNumber(t.padding)&&(t.padding=t.padding*e),t},center:function(t,e,i){var n=this.options.paper.viewport.getCTM(),r=-n.e,s=-n.f,a=r+this.options.paper.options.width,l=s+this.options.paper.options.height;o.isUndefined(t)||o.isUndefined(e)?(t=(r+a)/2,e=(s+l)/2):(t*=n.a,e*=n.d);var c=this.getPadding(),h=this.el.clientWidth/2,u=this.el.clientHeight/2,d=h-c.left-t+r,p=h-c.right+t-a,f=u-c.top-e+s,g=u-c.bottom+e-l;return this.addPadding(Math.max(d,0),Math.max(p,0),Math.max(f,0),Math.max(g,0)),
this.scroll(t,e,o.isUndefined(i)?t||null:i),this},centerContent:function(t){var e=h(this.options.paper.viewport).bbox(!0,this.options.paper.svg);return this.center(e.x+e.width/2,e.y+e.height/2,t),this},centerElement:function(t){this.checkElement(t,"centerElement");var e=t.getBBox().center();return this.center(e.x,e.y)},scroll:function(t,e,i){var n=this.options.paper.viewport.getCTM(),r={};if(o.isNumber(t)){var s=this.el.clientWidth/2;r.scrollLeft=t-s+n.e+this._padding.paddingLeft}if(o.isNumber(e)){var a=this.el.clientHeight/2;r.scrollTop=e-a+n.f+this._padding.paddingTop}i&&i.animation?this.$el.animate(r,i.animation):this.$el.prop(r)},scrollToElement:function(t,e){this.checkElement(t,"scrollToElement");var i=t.getBBox().center(),n=this._sx,r=this._sy;return i.x*=n,i.y*=r,this.scroll(i.x,i.y,e)},addPadding:function(t,e,i,n){var r=this.getPadding(),o=this._padding={paddingLeft:Math.round(r.left+(t||0)),paddingTop:Math.round(r.top+(i||0))},s={marginBottom:Math.round(r.bottom+(n||0)),marginRight:Math.round(r.right+(e||0))};return o.paddingLeft=Math.min(o.paddingLeft,this.el.clientWidth-1),o.paddingTop=Math.min(o.paddingTop,this.el.clientHeight-1),s.marginRight=Math.min(s.marginRight,this.el.clientWidth-1),s.marginBottom=Math.min(s.marginBottom,this.el.clientHeight-1),this.$el.css(o),this.options.paper.$el.css(s),this},zoom:function(t,e){e=e||{};var i,n,r=this.toLocalPoint(this.el.clientWidth/2,this.el.clientHeight/2),s=t,a=t;if(e.absolute||(s+=this._sx,a+=this._sy),e.grid&&(s=Math.round(s/e.grid)*e.grid,a=Math.round(a/e.grid)*e.grid),e.max&&(s=Math.min(e.max,s),a=Math.min(e.max,a)),e.min&&(s=Math.max(e.min,s),a=Math.max(e.min,a)),o.isUndefined(e.ox)||o.isUndefined(e.oy))i=r.x,n=r.y;else{var l=s/this._sx,c=a/this._sy;i=e.ox-(e.ox-r.x)/l,n=e.oy-(e.oy-r.y)/c}return this.beforePaperManipulation(),this.options.paper.scale(s,a),this.center(i,n),this.afterPaperManipulation(),this},zoomToFit:function(t){t=t||{};var e=this.options.paper,i=o.clone(e.options.origin);return t.fittingBBox=t.fittingBBox||o.extend({},u.point(i),{width:this.$el.width()+this._padding.paddingLeft,height:this.$el.height()+this._padding.paddingTop}),this.beforePaperManipulation(),e.scaleContentToFit(t),e.setOrigin(i.x,i.y),this.adjustPaper().centerContent(),this.afterPaperManipulation(),this},startPanning:function(t){t=d.util.normalizeEvent(t),this._clientX=t.clientX,this._clientY=t.clientY,this.trigger("pan:start",t),s(document.body).on({"mousemove.panning touchmove.panning":this.pan,"mouseup.panning touchend.panning":this.stopPanning}),s(window).on("mouseup.panning",this.stopPanning)},pan:function(t){t=d.util.normalizeEvent(t);var e=t.clientX-this._clientX,i=t.clientY-this._clientY;this.el.scrollTop-=i,this.el.scrollLeft-=e,this._clientX=t.clientX,this._clientY=t.clientY},stopPanning:function(t){s(document.body).off(".panning"),s(window).off(".panning"),this.trigger("pan:stop",t)},pointerdown:function(t){t.target===this.el&&this.options.paper.pointerdown.apply(this.options.paper,arguments)},pointermove:function(t){t.target===this.el&&this.options.paper.pointermove.apply(this.options.paper,arguments)},getPadding:function(){var t=this.options.padding;return o.isFunction(t)&&(t=t.call(this)),d.util.normalizeSides(t)},getVisibleArea:function(){var t=this.options.paper.viewport.getCTM(),e={x:this.el.scrollLeft||0,y:this.el.scrollTop||0,width:this.el.clientWidth,height:this.el.clientHeight},i=u.rect(h.transformRect(e,t.inverse()));return i.x-=(this._padding.paddingLeft||0)/this._sx,i.y-=(this._padding.paddingTop||0)/this._sy,i},isElementVisible:function(t){return this.checkElement(t,"isElementVisible"),this.getVisibleArea().containsRect(t.getBBox())},isPointVisible:function(t){return this.getVisibleArea().containsPoint(t)},checkElement:function(t,e){if(!(t&&t instanceof d.dia.Element))throw new TypeError("ui.PaperScroller."+e+"() accepts instance of joint.dia.Element only")},onRemove:function(){this.stopPanning()}}),d.ui.Selection=d.mvc.View.extend({options:{paper:void 0,graph:void 0,boxContent:function(t){return d.util.template("<%= length %> elements selected.")({length:this.model.length})},handles:[{name:"remove",position:"nw",events:{pointerdown:"removeElements"}},{name:"rotate",position:"sw",events:{pointerdown:"startRotating",pointermove:"doRotate",pointerup:"stopBatch"}},{name:"resize",position:"se",events:{pointerdown:"startResizing",pointermove:"doResize",pointerup:"stopBatch"}}],useModelGeometry:!1,strictSelection:!1,rotateAngleGrid:15,allowTranslate:!0},className:"selection",events:{"mousedown .selection-box":"onSelectionBoxPointerDown","touchstart .selection-box":"onSelectionBoxPointerDown","mousedown .handle":"onHandlePointerDown","touchstart .handle":"onHandlePointerDown"},init:function(){if(this.options.model&&(this.options.collection=this.options.model),this.collection=this.options.collection||this.collection||new r.Collection,this.model=this.collection,!this.options.paper)throw new Error("Selection: paper required");o.defaults(this.options,{graph:this.options.paper.model}),o.bindAll(this,"startSelecting","stopSelecting","adjustSelection","pointerup"),s(document.body).on("mousemove.selection touchmove.selection",this.adjustSelection),s(document).on("mouseup.selection touchend.selection",this.pointerup),this.listenTo(this.options.graph,"reset",this.cancelSelection),this.listenTo(this.options.paper,"scale translate",this.updateSelectionBoxes),this.listenTo(this.options.graph,"remove change",function(t,e){e.selection!==this.cid&&this.updateSelectionBoxes()}),this.listenTo(this.model,"remove",this.onRemoveElement),this.listenTo(this.model,"reset",this.onResetElements),this.listenTo(this.model,"add",this.onAddElement),this.options.paper.$el.append(this.$el),this._boxCount=0,this.$selectionWrapper=this.createSelectionWrapper(),this.handles=[],o.each(this.options.handles,this.addHandle,this)},cancelSelection:function(){this.model.reset([],{ui:!0})},addHandle:function(t){this.handles.push(t);var e=s("<div/>",{class:"handle "+(t.position||"")+" "+(t.name||""),"data-action":t.name});return t.icon&&e.css("background-image","url("+t.icon+")"),e.html(t.content||""),this.$selectionWrapper.append(e),o.each(t.events,function(e,i){o.isString(e)?this.on("action:"+t.name+":"+i,this[e],this):this.on("action:"+t.name+":"+i,e)},this),this},stopSelecting:function(t){switch(this._action){case"selecting":var e=this.$el.offset(),i=this.$el.width(),n=this.$el.height(),r=this.options.paper,s=h(r.viewport).toLocalPoint(e.left,e.top);s.x-=window.pageXOffset,s.y-=window.pageYOffset;var a=h(r.viewport).scale();i/=a.sx,n/=a.sy;var l=u.rect(s.x,s.y,i,n),c=this.getElementsInSelectedArea(l),d=this.options.filter;o.isArray(d)?c=o.reject(c,function(t){return o.contains(d,t.model)||o.contains(d,t.model.get("type"))}):o.isFunction(d)&&(c=o.reject(c,function(t){return d(t.model)})),this.model.reset(o.pluck(c,"model"),{ui:!0});break;case"translating":this.options.graph.stopBatch("selection-translate"),this.notify("selection-box:pointerup",t);break;default:this._action||this.cancelSelection()}this._action=null},removeHandle:function(t){var e=o.findIndex(this.handles,{name:t}),i=this.handles[e];return i&&(o.each(i.events,function(e,i){this.off("action:"+t+":"+i)},this),this.$(".handle."+t).remove(),this.handles.splice(e,1)),this},startSelecting:function(t){t=d.util.normalizeEvent(t),this.cancelSelection(),this._action="selecting",this._clientX=t.clientX,this._clientY=t.clientY;var e=t.target.parentElement||t.target.parentNode,i=s(e).offset(),n=e.scrollLeft,r=e.scrollTop;this._offsetX=null==t.offsetX?t.clientX-i.left+window.pageXOffset+n:t.offsetX,this._offsetY=null==t.offsetY?t.clientY-i.top+window.pageYOffset+r:t.offsetY,this.$el.css({width:1,height:1,left:this._offsetX,top:this._offsetY}),this.showLasso()},changeHandle:function(t,e){var i=o.findWhere(this.handles,{name:t});return i&&(this.removeHandle(t),this.addHandle(o.merge({name:t},i,e))),this},onSelectionBoxPointerDown:function(t){t.stopPropagation(),t=d.util.normalizeEvent(t),this.options.allowTranslate&&this.startTranslatingSelection(t),this._activeElementView=this.getCellView(t.target),this.notify("selection-box:pointerdown",t)},startTranslatingSelection:function(t){this._action="translating",this.options.graph.startBatch("selection-translate");var e=this.options.paper.snapToGrid({x:t.clientX,y:t.clientY});this._snappedClientX=e.x,this._snappedClientY=e.y},adjustSelection:function(t){t=d.util.normalizeEvent(t);var e,i;switch(this._action){case"selecting":e=t.clientX-this._clientX,i=t.clientY-this._clientY;var n=parseInt(this.$el.css("left"),10),r=parseInt(this.$el.css("top"),10);this.$el.css({left:e<0?this._offsetX+e:n,top:i<0?this._offsetY+i:r,width:Math.abs(e),height:Math.abs(i)});break;case"translating":var s=this.options.paper.snapToGrid({x:t.clientX,y:t.clientY}),a=s.x,l=s.y;if(e=a-this._snappedClientX,i=l-this._snappedClientY,e||i){var c={};if(this.model.each(function(t){if(!c[t.id]){var n={selection:this.cid};t.translate(e,i,n),o.each(t.getEmbeddedCells({deep:!0}),function(t){c[t.id]=!0});var r=this.options.graph.getConnectedLinks(t);o.each(r,function(t){c[t.id]||(t.translate(e,i,n),c[t.id]=!0)})}},this),this.boxesUpdated)this.model.length>1&&this.updateSelectionBoxes();else{var u=h(this.options.paper.viewport).scale();this.$el.children(".selection-box").add(this.$selectionWrapper).css({left:"+="+e*u.sx,top:"+="+i*u.sy})}this._snappedClientX=a,this._snappedClientY=l}this.notify("selection-box:pointermove",t);break;default:this._action&&this.pointermove(t)}this.boxesUpdated=!1},notify:function(t,e){var i=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t,this._activeElementView].concat(i))},getElementsInSelectedArea:function(t){var e=this.options.paper,i={strict:this.options.strictSelection};if(this.options.useModelGeometry){var n=e.model.findModelsInArea(t,i);return o.filter(o.map(n,e.findViewByModel,e))}return e.findViewsInArea(t,i)},pointerup:function(t){this._action&&(this.triggerAction(this._action,"pointerup",t),this.stopSelecting(t),this._activeElementView=null,this._action=null)},destroySelectionBox:function(t){this.$('[data-model="'+t.get("id")+'"]').remove(),0===this.$el.children(".selection-box").length&&this.hide(),this._boxCount=Math.max(0,this._boxCount-1)},hide:function(){this.$el.removeClass("lasso selected")},showSelected:function(){this.$el.addClass("selected")},showLasso:function(){this.$el.addClass("lasso")},destroyAllSelectionBoxes:function(){this.hide(),this.$el.children(".selection-box").remove(),this._boxCount=0},createSelectionBox:function(t){var e=t.findView(this.options.paper);if(e){var i=e.getBBox({useModelGeometry:this.options.useModelGeometry});s("<div/>").addClass("selection-box").attr("data-model",t.get("id")).css({left:i.x,top:i.y,width:i.width,height:i.height}).appendTo(this.el);this.showSelected(),this._boxCount++}},createSelectionWrapper:function(){var t=s("<div/>",{class:"selection-wrapper"}),e=s("<div/>",{class:"box"});return t.append(e),t.attr("data-selection-length",this.model.length),this.$el.prepend(t),t},updateSelectionWrapper:function(){var t={x:1/0,y:1/0},e={x:0,y:0};if(this.model.each(function(i){var n=this.options.paper.findViewByModel(i);if(n){var r=n.getBBox({useModelGeometry:this.options.useModelGeometry});t.x=Math.min(t.x,r.x),t.y=Math.min(t.y,r.y),e.x=Math.max(e.x,r.x+r.width),e.y=Math.max(e.y,r.y+r.height)}},this),this.$selectionWrapper.css({left:t.x,top:t.y,width:e.x-t.x,height:e.y-t.y}).attr("data-selection-length",this.model.length),o.isFunction(this.options.boxContent)){var i=this.$(".box"),n=this.options.boxContent.call(this,i[0]);n&&i.html(n)}},updateSelectionBoxes:function(){this._boxCount&&(this.hide(),o.each(this.$el.children(".selection-box"),function(t){var e=s(t).remove().attr("data-model"),i=this.model.get(e);i&&this.createSelectionBox(i)},this),this.updateSelectionWrapper(),this.boxesUpdated=!0)},onRemove:function(){s(document.body).off(".selection",this.adjustSelection),s(document).off(".selection",this.pointerup)},onHandlePointerDown:function(t){this._action=s(t.target).closest(".handle").attr("data-action"),this._action&&(t.preventDefault(),t.stopPropagation(),t=d.util.normalizeEvent(t),this._clientX=t.clientX,this._clientY=t.clientY,this._startClientX=this._clientX,this._startClientY=this._clientY,this.triggerAction(this._action,"pointerdown",t))},getCellView:function(t){var e=this.model.get(t.getAttribute("data-model"));return e&&e.findView(this.options.paper)},pointermove:function(t){if(this._action){var e=this.options.paper.snapToGrid({x:t.clientX,y:t.clientY}),i=this.options.paper.snapToGrid({x:this._clientX,y:this._clientY}),n=e.x-i.x,r=e.y-i.y;this.triggerAction(this._action,"pointermove",t,n,r,t.clientX-this._startClientX,t.clientY-this._startClientY),this._clientX=t.clientX,this._clientY=t.clientY}},triggerAction:function(t,e,i){var n=Array.prototype.slice.call(arguments,2);n.unshift("action:"+t+":"+e),this.trigger.apply(this,n)},onRemoveElement:function(t){this.destroySelectionBox(t),this.updateSelectionWrapper()},onResetElements:function(t){this.destroyAllSelectionBoxes(),t.each(this.createSelectionBox,this),this.updateSelectionWrapper()},onAddElement:function(t){this.createSelectionBox(t),this.updateSelectionWrapper()},removeElements:function(t){var e=this.collection.toArray();this.cancelSelection(),this.options.graph.removeCells(e,{selection:this.cid})},startRotating:function(t){this.options.graph.trigger("batch:start");var e=this.options.graph.getBBox(this.model.models).center(),i=this.options.paper.snapToGrid({x:t.clientX,y:t.clientY}),n=o.transform(this.model.toArray(),function(t,e){t[e.id]=u.normalizeAngle(e.get("angle")||0)});this._rotation={center:e,clientAngle:u.point(i).theta(e),initialAngles:n}},startResizing:function(t){var e=this.options.paper,i=this.options.graph,n=e.options.gridSize,r=this.model.toArray(),s=i.getBBox(r),a=o.invoke(r,"getBBox"),l=o.min(a,"width").width,c=o.min(a,"height").height;this._resize={cells:i.getSubgraph(r),bbox:s,minWidth:n*s.width/l,minHeight:n*s.height/c},i.trigger("batch:start")},doResize:function(t,e,i){var n=this._resize,r=n.bbox,o=r.width,s=r.height,a=Math.max(o+e,n.minWidth),l=Math.max(s+i,n.minHeight);(Math.abs(o-a)>.001||Math.abs(s-l)>.001)&&(this.options.graph.resizeCells(a,l,n.cells,{selection:this.cid}),r.width=a,r.height=l)},doRotate:function(t){var e=this._rotation,i=this.options.rotateAngleGrid,n=this.options.paper.snapToGrid({x:t.clientX,y:t.clientY}),r=e.clientAngle-u.point(n).theta(e.center);this.model.each(function(t){var n=u.snapToGrid(e.initialAngles[t.id]+r,i);t.rotate(n,!0,e.center)})},stopBatch:function(){this.options.graph.trigger("batch:stop")},getAction:function(){return this._action}}),d.ui.SelectionView=d.ui.Selection,d.ui.Clipboard=r.Collection.extend({LOCAL_STORAGE_KEY:"joint.ui.Clipboard.cells",defaults:{useLocalStorage:!0},copyElements:function(t,e,i){this.options=o.extend({},this.defaults,i),i=this.options;var n=t.toArray(),r=o.sortBy(e.cloneSubgraph(n,i),function(t){return t.isLink()?2:1});return this.reset(r),i.useLocalStorage&&window.localStorage&&localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(this.toJSON())),n},cutElements:function(t,e,i){var n=this.copyElements(t,e,i);return e.trigger("batch:start",{batchName:"cut"}),o.invoke(n,"remove"),e.trigger("batch:stop",{batchName:"cut"}),n},pasteCells:function(t,e){if(e=o.defaults(e||{},this.options),e.useLocalStorage&&this.isEmpty()&&window.localStorage){var i={cells:JSON.parse(localStorage.getItem(this.LOCAL_STORAGE_KEY))},n=(new d.dia.Graph).fromJSON(i,{sort:!1});this.reset(n.getCells())}var r=this.map(function(t){return this.modifyCell(t,e)},this);return t.trigger("batch:start",{batchName:"paste"}),t.addCells(r),t.trigger("batch:stop",{batchName:"paste"}),this.copyElements(this,t),r},clear:function(){this.options={},this.reset([]),window.localStorage&&localStorage.removeItem(this.LOCAL_STORAGE_KEY)},modifyCell:function(t,e){return t.unset("z"),t.isLink()&&e.link&&t.set(e.link),e.translate&&t.translate(e.translate.dx||20,e.translate.dy||20),t.collection=null,t}}),function(t,e){"use strict";var i=function(){this.options={handles:[{name:"remove",position:"nw",events:{pointerdown:"removeElement"},icon:null},{name:"direction",position:"se",events:{pointerdown:"directionSwap"},icon:null}],bbox:function(t){var e=.5*t.getConnectionLength();return t.getPointAtLength(e)},typeCssName:"type-link",tinyThreshold:-1,smallThreshold:-1}};i.prototype.directionSwap=function(){var t=this.options.cellView.model;t.set({source:t.get("target"),target:t.get("source")},{halo:this.cid})};var n=function(){this.options={handles:[{name:"remove",position:"nw",events:{pointerdown:"removeElement"},icon:null},{name:"resize",position:"se",events:{pointerdown:"startResizing",pointermove:"doResize",pointerup:"stopBatch"},icon:null},{name:"clone",position:"n",events:{pointerdown:"startCloning",pointermove:"doClone",pointerup:"stopCloning"},icon:null},{name:"link",position:"e",events:{pointerdown:"startLinking",pointermove:"doLink",pointerup:"stopLinking"},icon:null},{name:"fork",position:"ne",events:{pointerdown:"startForking",pointermove:"doFork",pointerup:"stopForking"},icon:null},{name:"unlink",position:"w",events:{pointerdown:"unlinkElement"},icon:null},{name:"rotate",position:"sw",events:{pointerdown:"startRotating",pointermove:"doRotate",pointerup:"stopBatch"},icon:null}],bbox:function(t,e){return t.getBBox({useModelGeometry:e.options.useModelGeometry})},typeCssName:"type-element",tinyThreshold:40,smallThreshold:80,boxContent:function(e,i){var n=t.util.template("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),r=this.getBBox();return n({x:Math.floor(r.x),y:Math.floor(r.y),width:Math.floor(r.width),height:Math.floor(r.height),angle:Math.floor(e.model.get("angle")||0)})}}};n.prototype.startLinking=function(t,i,n){this.startBatch();var r=this.options.cellView,o=s.data(t.target,"selector"),a=this.options.paper.getDefaultLink(r,o&&r.el.querySelector(o));a.set("source",{id:r.model.id,selector:o}),a.set("target",{x:i,y:n}),a.attr(this.options.linkAttributes),e.isBoolean(this.options.smoothLinks)&&a.set("smooth",this.options.smoothLinks),this.options.graph.addCell(a,{validation:!1,halo:this.cid}),this._linkView=this.options.paper.findViewByModel(a),this._linkView.startArrowheadMove("target",{whenNotAllowed:"remove"})},n.prototype.startForking=function(i,n,r){var o=this.options;this.startBatch();var s=o.clone(o.cellView.model,{fork:!0});if(!(s instanceof t.dia.Cell))throw new Error('ui.Halo: option "clone" has to return a cell.');var a=o.paper.getDefaultLink(o.cellView).set({source:{id:o.cellView.model.id},target:{id:s.id}});a.attr(o.linkAttributes),e.isBoolean(o.smoothLinks)&&a.set("smooth",o.smoothLinks),this.centerElementAtCursor(s,n,r),o.graph.addCells([s,a],{halo:this.cid}),this._cloneView=s.findView(o.paper),this._cloneView.pointerdown(i,n,r)},n.prototype.startResizing=function(t){this.startBatch(),this._flip=[1,0,0,1,1,0,0,1][Math.floor(u.normalizeAngle(this.options.cellView.model.get("angle"))/45)]},n.prototype.startRotating=function(t,e,i){this.startBatch();var n=this.options.cellView.model.getBBox().center(),r=u.normalizeAngle(this.options.cellView.model.get("angle"));this._center=n,this._rotationStartAngle=r||0,this._clientStartAngle=u.point(e,i).theta(n)},n.prototype.doResize=function(t,e,i,n,r){var o=this.options.cellView.model.get("size"),s=Math.max(o.width+(this._flip?n:r),1),a=Math.max(o.height+(this._flip?r:n),1);this.options.cellView.model.resize(s,a,{absolute:!0})},n.prototype.doRotate=function(t,e,i){var n=this._clientStartAngle-u.point(e,i).theta(this._center),r=u.snapToGrid(this._rotationStartAngle+n,this.options.rotateAngleGrid);this.options.cellView.model.rotate(r,!0)},n.prototype.doClone=function(t,e,i){this._cloneView.pointermove(t,e,i)},n.prototype.startCloning=function(e,i,n){var r=this.options;this.startBatch();var o=r.clone(r.cellView.model,{clone:!0});if(!(o instanceof t.dia.Cell))throw new Error('ui.Halo: option "clone" has to return a cell.');this.centerElementAtCursor(o,i,n),o.addTo(r.graph,{halo:this.cid}),this._cloneView=o.findView(r.paper),this._cloneView.pointerdown(e,i,n)},n.prototype.centerElementAtCursor=function(t,e,i){var n=t.getBBox().center(),r=e-n.x,o=i-n.y;t.translate(r,o)},n.prototype.doFork=function(t,e,i){this._cloneView.pointermove(t,e,i)},n.prototype.doLink=function(t,e,i){this._linkView&&this._linkView.pointermove(t,e,i)},n.prototype.stopLinking=function(t){this._linkView&&(this._linkView.pointerup(t),this._linkView.model.hasLoop()&&this.makeLoopLink(this._linkView.model),this.stopBatch(),this.triggerAction("link","add",this._linkView.model),this._linkView=null)},n.prototype.stopForking=function(t,e,i){this._cloneView.pointerup(t,e,i),this.stopBatch()},n.prototype.stopCloning=function(t,e,i){this._cloneView.pointerup(t,e,i),this.stopBatch()},n.prototype.unlinkElement=function(t){this.options.graph.removeLinks(this.options.cellView.model)},n.prototype.makeLoopLink=function(t){var i,n,r=this.options.loopLinkWidth,o=this.options.paper.options,s=u.rect({x:0,y:0,width:o.width,height:o.height}),a=h(this.options.cellView.el).bbox(!1,this.options.paper.viewport),l=e.uniq([this.options.loopLinkPreferredSide,"top","bottom","left","right"]);e.find(l,function(t){var e,o=0,l=0;switch(t){case"top":e=u.point(a.x+a.width/2,a.y-r),o=r/2;break;case"bottom":e=u.point(a.x+a.width/2,a.y+a.height+r),o=r/2;break;case"left":e=u.point(a.x-r,a.y+a.height/2),l=r/2;break;case"right":e=u.point(a.x+a.width+r,a.y+a.height/2),l=r/2}return i=u.point(e).offset(-o,-l),n=u.point(e).offset(o,l),s.containsPoint(i)&&s.containsPoint(n)},this)&&t.set("vertices",[i,n])},t.ui.Halo=t.mvc.View.extend({PIE_INNER_RADIUS:20,PIE_OUTER_RADIUS:50,className:"halo",events:{"mousedown .handle":"onHandlePointerDown","touchstart .handle":"onHandlePointerDown","mousedown .pie-toggle":"onPieTogglePointerDown","touchstart .pie-toggle":"onPieTogglePointerDown"},options:{loopLinkPreferredSide:"top",loopLinkWidth:40,rotateAngleGrid:15,clearAll:!0,useModelGeometry:!1,clone:function(t,e){return t.clone().unset("z")},type:"surrounding",pieSliceAngle:45,pieStartAngleOffset:0,pieIconSize:14,pieToggles:[{name:"default",position:"e"}],boxContent:!1,linkAttributes:{},smoothLinks:void 0},init:function(){var r=this.options.cellView.model,o=r.isLink()?new i:new n;e.assign(this,e.omit(o,"options")),e.defaults(this.options,o.options,{paper:this.options.cellView.paper,graph:this.options.cellView.paper.model}),e.bindAll(this,"pointermove","pointerup","render","update"),this.options.clearAll&&t.ui.Halo.clear(this.options.paper),this.listenTo(this.options.graph,"reset",this.remove),this.listenTo(this.options.graph,"all",this.update),this.listenTo(this.options.paper,"blank:pointerdown halo:create",this.remove),this.listenTo(this.options.paper,"scale translate",this.update),this.listenTo(r,"remove",this.remove),s(document.body).on("mousemove touchmove",this.pointermove),s(document).on("mouseup touchend",this.pointerup),this.handles=[],e.each(this.options.handles,this.addHandle,this)},render:function(){var i=this.options;switch(this.$el.empty(),this.$handles=s("<div/>").addClass("handles").appendTo(this.el),this.$box=s("<label/>").addClass("box").appendTo(this.el),this.$pieToggles={},this.$el.addClass(i.type),this.$el.addClass(this.cellTypeCssClass()),this.$el.attr("data-type",i.cellView.model.get("type")),this.$handles.append(e.map(this.handles,this.renderHandle,this)),i.type){case"toolbar":case"surrounding":this.hasHandle("fork")&&this.toggleFork();break;case"pie":e.each(this.options.pieToggles,function(e){var i=s("<div/>");i.addClass("pie-toggle "+(e.position||"e")),i.attr("data-name",e.name),t.util.setAttributesBySelector(i,e.attrs),i.appendTo(this.el),this.$pieToggles[e.name]=i},this);break;default:throw new Error("ui.Halo: unknown type")}return this.update(),this.$el.addClass("animate").appendTo(i.paper.el),this.setPieIcons(),this},setPieIcons:function(){"pie"===this.options.type&&this.$el.find(".handle").each(e.bind(function(t,e){var i=s(e),n=i.attr("data-action"),r=this.getHandle(n);if(!r||!r.icon){var o=i.css("background-image");if(o){var a=o.match(/url\(['"]?([^\(\)'"]+)['"]?\)/);if(a){var l=a[1],c=i.find(".slice-icon");c.length>0&&h(c[0]).attr("xlink:href",l)}}}},this))},update:function(){if(this.isRendered()){this.updateBoxContent();var t=this.getBBox();this.$el.toggleClass("tiny",t.width<this.options.tinyThreshold&&t.height<this.options.tinyThreshold),this.$el.toggleClass("small",!this.$el.hasClass("tiny")&&t.width<this.options.smallThreshold&&t.height<this.options.smallThreshold),this.$el.css({width:t.width,height:t.height,left:t.x,top:t.y}),this.hasHandle("unlink")&&this.toggleUnlink()}},getBBox:function(){var t=this.options.cellView,i=this.options.bbox,n=e.isFunction(i)?i(t,this):i;return n=e.defaults({},n,{x:0,y:0,width:1,height:1}),u.rect(n)},cellTypeCssClass:function(){return this.options.typeCssName},updateBoxContent:function(){var t=this.options.boxContent,i=this.options.cellView;if(e.isFunction(t)){var n=t.call(this,i,this.$box[0]);n&&this.$box.html(n)}else t?this.$box.html(t):this.$box.remove()},extendHandles:function(t){e.each(t,function(t){var i=this.getHandle(t.name);i&&e.extend(i,t)},this)},addHandles:function(t){return e.each(t,this.addHandle,this),this},addHandle:function(t){!this.getHandle(t.name)&&(this.handles.push(t),e.each(t.events,function(i,n){e.isString(i)?this.on("action:"+t.name+":"+n,this[i],this):this.on("action:"+t.name+":"+n,i)},this),this.$handles)&&this.renderHandle(t).appendTo(this.$handles);return this},renderHandle:function(e){var i=this.getHandleIdx(e.name),n=s("<div/>").addClass("handle").addClass(e.name).attr("data-action",e.name).prop("draggable",!1);switch(this.options.type){case"toolbar":case"surrounding":n.addClass(e.position),e.content&&n.html(e.content);break;case"pie":var r=this.PIE_OUTER_RADIUS,o=this.PIE_INNER_RADIUS,a=(r+o)/2,l=u.point(r,r),c=u.toRad(this.options.pieSliceAngle),d=i*c+u.toRad(this.options.pieStartAngleOffset),p=d+c,f=h.createSlicePathData(o,r,d,p),g=h("svg").addClass("slice-svg"),m=h("path").attr("d",f).translate(r,r).addClass("slice"),v=u.point.fromPolar(a,-d-c/2,l),y=this.options.pieIconSize,b=h("image").attr(v).addClass("slice-icon");b.attr({width:y,height:y}),b.translate(-y/2,-y/2),g.append([m,b]),n.append(g.node)}return e.icon&&this.setHandleIcon(n,e.icon),t.util.setAttributesBySelector(n,e.attrs),n},setHandleIcon:function(t,e){switch(this.options.type){case"pie":var i=t.find(".slice-icon");h(i[0]).attr("xlink:href",e);break;case"toolbar":case"surrounding":t.css("background-image","url("+e+")")}},removeHandles:function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this},removeHandle:function(t){var i=this.getHandleIdx(t),n=this.handles[i];return n&&(e.each(n.events,function(e,i){this.off("action:"+t+":"+i)},this),this.$(".handle."+t).remove(),this.handles.splice(i,1)),this},changeHandle:function(t,i){var n=this.getHandle(t);return n&&(this.removeHandle(t),this.addHandle(e.merge({name:t},n,i))),this},hasHandle:function(t){return-1!==this.getHandleIdx(t)},getHandleIdx:function(t){return e.findIndex(this.handles,{name:t})},getHandle:function(t){return e.findWhere(this.handles,{name:t})},toggleHandle:function(t,i){var n=this.getHandle(t);if(n){var r=this.$(".handle."+t);e.isUndefined(i)&&(i=!r.hasClass("selected")),r.toggleClass("selected",i);var o=i?n.iconSelected:n.icon;o&&this.setHandleIcon(r,o)}return this},selectHandle:function(t){return this.toggleHandle(t,!0)},deselectHandle:function(t){return this.toggleHandle(t,!1)},deselectAllHandles:function(){return e.chain(this.handles).pluck("name").each(this.deselectHandle,this).value(),this},onHandlePointerDown:function(e){if(this._action=s(e.target).closest(".handle").attr("data-action"),this._action){e.preventDefault(),e.stopPropagation(),e=t.util.normalizeEvent(e);var i=this.options.paper.snapToGrid({x:e.clientX,y:e.clientY});this._localX=i.x,this._localY=i.y,this.triggerAction(this._action,"pointerdown",e,i.x,i.y)}},onPieTogglePointerDown:function(t){t.stopPropagation();var e=s(t.target).closest(".pie-toggle"),i=e.attr("data-name");this.isOpen(i)?this.toggleState(i):this.isOpen()?(this.toggleState(),this.toggleState(i)):this.toggleState(i)},triggerAction:function(t,e,i){var n=Array.prototype.slice.call(arguments,2);n.unshift("action:"+t+":"+e),this.trigger.apply(this,n)},stopBatch:function(){this.options.graph.trigger("batch:stop")},startBatch:function(){this.options.graph.trigger("batch:start")},pointermove:function(e){if(this._action){e.preventDefault(),e.stopPropagation(),e=t.util.normalizeEvent(e);var i=this.options.paper.snapToGrid({x:e.clientX,y:e.clientY}),n=i.x-this._localX,r=i.y-this._localY;this._localX=i.x,this._localY=i.y,this.triggerAction(this._action,"pointermove",e,i.x,i.y,n,r)}},pointerup:function(t){if(this._action){var e=this.options.paper.snapToGrid({x:t.clientX,y:t.clientY});this.triggerAction(this._action,"pointerup",t,e.x,e.y),this._action=null}},onRemove:function(){s(document.body).off("mousemove touchmove",this.pointermove),s(document).off("mouseup touchend",this.pointerup)},onSetTheme:function(){this.setPieIcons()},removeElement:function(){this.options.cellView.model.remove()},toggleUnlink:function(){var t=this.options.graph.getConnectedLinks(this.options.cellView.model).length>0;this.$handles.children(".unlink").toggleClass("hidden",!t)},toggleFork:function(){var t=this.options.cellView.model.clone(),e=this.options.paper.createViewForModel(t),i=this.options.paper.options.validateConnection(this.options.cellView,null,e,null,"target");this.$handles.children(".fork").toggleClass("hidden",!i),e.remove(),t=null},toggleState:function(t){if(this.isRendered()){var i=this.$el;if(e.each(this.$pieToggles,function(t){t.removeClass("open")}),this.isOpen())this.trigger("state:close",t),i.removeClass("open");else{if(this.trigger("state:open",t),t){var n=e.findWhere(this.options.pieToggles,{name:t});n&&i.attr({"data-pie-toggle-position":n.position,"data-pie-toggle-name":n.name}),this.$pieToggles[t].addClass("open")}i.addClass("open")}}},isOpen:function(t){return!!this.isRendered()&&(t?this.$pieToggles[t].hasClass("open"):this.$el.hasClass("open"))},isRendered:function(){return!e.isUndefined(this.$box)}},{clear:function(t){t.trigger("halo:create")}})}(d,o),function(t,e){t.ui.Toolbar=t.mvc.View.extend({options:{groups:{}},align:["left","right"],className:"joint-toolbar",defaultGroup:"default",init:function(){this.widgets=[],this.tools=this.options.tools||[]},getWidgetByName:function(t){return e.find(this.widgets,function(e){return e.options.name===t})},getWidgets:function(){return this.widgets},groupsWithItemsPairs:function(){var t={};return e.each(this.tools,function(e){var i=e.group||this.defaultGroup;t[i]=t[i]||{items:[],group:{}},t[i].items.push(e),t[i].group=this.options.groups[i]||{}},this),e.chain(t).pairs().sortBy(function(t){return t[1].group.index}).sortBy(function(t){return t[1].group.align||"left"}).value()},render:function(){var t=this.groupsWithItemsPairs(),i=!1;return e.each(t,function(t){var e=t[0],n=t[1],r=this.renderGroup(e,n);!i&&n.group.align&&"right"===n.group.align&&(i=!0,r.addClass("group-first")),r.appendTo(this.el)},this),this},renderGroup:function(t,i){var n=i.group,r=i.items,o=s("<div/>").addClass("joint-toolbar-group").attr("data-group",t);return n.align&&e.contains(this.align,n.align)&&o.addClass(n.align),this.renderItems(r,o),o},createWidget:function(i){var n=t.ui.Widget.create(i,this.options.references);return n.on("all",e.bind(function(t){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[i.name+":"+t].concat(e))},this)),this.widgets.push(n),n},renderItems:function(t,i){e.each(t,function(t){var e=this.createWidget(t);i.append(e.$el)},this)}})}(d,o),function(t,e){t.ui.Widget=t.mvc.View.extend({className:"joint-widget",references:[],constructor:function(e,i){
this.availableReferences=i||{},t.mvc.View.prototype.constructor.call(this,e)},updateAttrs:function(e){t.util.setAttributesBySelector(this.$el,e)},render:function(){return this},bindEvents:function(){},validateReferences:function(){var t=this.references||[],i=[];return e.each(t,function(t){e.isUndefined(this.availableReferences[t])&&i.push(t)},this),i},getReference:function(t){return this.availableReferences[t]},getReferences:function(){return this.availableReferences}},{create:function(i,n){var r=e.camelCase(e.isString(i)?i:i.type);if(!e.isFunction(t.ui.widgets[r]))throw new Error('Widget: unable to find widget: "'+r+'"');var o=new t.ui.widgets[r](i,n),s=o.validateReferences(n);if(s.length>0)throw new Error('Widget: "'+r+'" missing dependency: '+s.join(", "));return o.render(),o.updateAttrs(i.attrs),o.bindEvents(),o.$el.attr("data-type",r),i.name&&o.$el.attr("data-name",i.name),o}}),t.ui.widgets={checkbox:t.ui.Widget.extend({tagName:"label",events:{"change .input":"onChange",mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup"},init:function(){e.bindAll(this,"pointerup")},render:function(){var t=this.options,e=s("<span/>").text(t.label||"");return this.$input=s("<input/>",{type:"checkbox",class:"input"}).prop("checked",!!t.value),this.$span=s("<span/>"),this.$el.append([e,this.$input,this.$span]),this},onChange:function(t){this.trigger("change",!!t.target.checked,t)},pointerdown:function(e){e=t.util.normalizeEvent(e),this.$el.addClass("is-in-action"),this.trigger("pointerdown",e),s(document).on("mouseup.checkbox touchend.checkbox",this.pointerup)},pointerup:function(e){e=t.util.normalizeEvent(e),s(document).off("mouseup.checkbox touchend.checkbox"),this.trigger("pointerdown",e),this.$el.removeClass("is-in-action")}}),toggle:t.ui.Widget.extend({tagName:"label",events:{"change .toggle":"onChange",mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup"},init:function(){e.bindAll(this,"pointerup")},render:function(){var t=this.options,e=s("<span/>").text(t.label||""),i=s("<span><i/></span>"),n=s("<input/>",{type:"checkbox",class:"toggle"}).prop("checked",!!t.value),r=s("<div/>").addClass(t.type);return this.$el.append([e,r.append(n,i)]),this},onChange:function(t){this.trigger("change",!!t.target.checked,t)},pointerdown:function(e){e=t.util.normalizeEvent(e),this.$el.addClass("is-in-action"),this.trigger("pointerdown",e),s(document).on("mouseup.toggle touchend.toggle",this.pointerup)},pointerup:function(e){e=t.util.normalizeEvent(e),s(document).off("mouseup.toggle touchend.toggle"),this.$el.removeClass("is-in-action"),this.trigger("pointerup",e)}}),separator:t.ui.Widget.extend({render:function(){return this.options.width&&this.$el.css({width:this.options.width}),this}}),label:t.ui.Widget.extend({tagName:"label",render:function(){return this.$el.text(this.options.text),this}}),range:t.ui.Widget.extend({events:{"change .input":"onChange","input .input":"onInput"},render:function(){var t,e=this.options;return this.$output=s("<output/>").text(e.value),t=s("<span/>").addClass("units").text(e.unit),this.$input=s("<input/>",{type:"range",name:e.type,min:e.min,max:e.max,step:e.step,class:"input"}).val(e.value),this.$el.append([this.$input,this.$output,t]),this},onChange:function(t){var e=parseInt(this.$input.val(),10);this.$output.text(e),this.trigger("change",e,t)},onInput:function(t){this.$output.text(this.$input.val()),this.trigger("input",this.$input.val(),t)},setValue:function(t){this.$input.val(t),this.$output.text(t)}}),selectBox:t.ui.Widget.extend({render:function(){var i=e.omit(this.options,"type","group","index");return this.selectBox=new t.ui.SelectBox(i),this.selectBox.render().$el.appendTo(this.el),this},bindEvents:function(){this.selectBox.on("all",this.trigger,this)}}),button:t.ui.Widget.extend({events:{mousedown:"pointerdown",touchstart:"pointerdown",click:"pointerclick",touchend:"pointerclick"},tagName:"button",render:function(){var t=this.options;return this.$el.text(t.text),this},pointerclick:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerclick",e)},pointerdown:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerdown",e)}}),inputText:t.ui.Widget.extend({events:{mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup",click:"pointerclick",focusin:"pointerfocusin",focusout:"pointerfocusout"},tagName:"div",render:function(){var t=this.options;return this.$label=s("<label/>").text(t.label),this.$input=s("<div/>").append(s("<input/>",{type:"text",class:"input"}).val(t.value)),this.$el.append([this.$label,this.$input]),this},pointerclick:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerclick",e)},pointerdown:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerdown",e)},pointerup:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerup",e)},pointerfocusin:function(e){e=t.util.normalizeEvent(e),this.$el.addClass("is-focused"),this.trigger("pointerfocusin",e)},pointerfocusout:function(e){e=t.util.normalizeEvent(e),this.$el.removeClass("is-focused"),this.trigger("pointerfocusout",e)}}),inputNumber:t.ui.Widget.extend({events:{mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup",click:"pointerclick",focusin:"pointerfocusin",focusout:"pointerfocusout"},tagName:"div",render:function(){var t=this.options;return this.$label=s("<label/>").text(t.label),this.$input=s("<div/>").append(s("<input/>",{type:"number",class:"number",max:t.max,min:t.min}).val(t.value)),this.$el.append([this.$label,this.$input]),this},pointerclick:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerclick",e)},pointerdown:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerdown",e)},pointerup:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerup",e)},pointerfocusin:function(e){e=t.util.normalizeEvent(e),this.$el.addClass("is-focused"),this.trigger("pointerfocusin",e)},pointerfocusout:function(e){e=t.util.normalizeEvent(e),this.$el.removeClass("is-focused"),this.trigger("pointerfocusout",e)}}),textarea:t.ui.Widget.extend({events:{mousedown:"pointerdown",touchstart:"pointerdown",mouseup:"pointerup",touchend:"pointerup",click:"pointerclick",focusin:"pointerfocusin",focusout:"pointerfocusout"},tagName:"div",render:function(){var t=this.options;return this.$label=s("<label/>").text(t.label),this.$input=s("<div/>").append(s("<textarea/>",{class:"textarea"}).text(t.value)),this.$el.append([this.$label,this.$input]),this},pointerclick:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerclick",e)},pointerdown:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerdown",e)},pointerup:function(e){e=t.util.normalizeEvent(e),this.trigger("pointerup",e)},pointerfocusin:function(e){e=t.util.normalizeEvent(e),this.$el.addClass("is-focused"),this.trigger("pointerfocusin",e)},pointerfocusout:function(e){e=t.util.normalizeEvent(e),this.$el.removeClass("is-focused"),this.trigger("pointerfocusout",e)}}),selectButtonGroup:t.ui.Widget.extend({render:function(){var i=e.omit(this.options,"type","group","index");return this.selectButtonGroup=new t.ui.SelectButtonGroup(i),this.selectButtonGroup.render().$el.appendTo(this.el),this},bindEvents:function(){this.selectButtonGroup.on("all",this.trigger,this)}})},t.ui.widgets.zoomIn=t.ui.widgets.button.extend({references:["paperScroller"],options:{min:.2,max:5,step:.2},pointerdown:function(e){var i=this.options;this.getReferences().paperScroller.zoom(i.step,{max:i.max,grid:i.step}),t.ui.widgets.button.prototype.pointerdown.call(this,e)}}),t.ui.widgets.zoomOut=t.ui.widgets.button.extend({references:["paperScroller"],options:{min:.2,max:5,step:.2},pointerdown:function(e){var i=this.options;this.getReferences().paperScroller.zoom(-i.step,{min:i.min,grid:i.step}),t.ui.widgets.button.prototype.pointerdown.call(this,e)}}),t.ui.widgets.zoomToFit=t.ui.widgets.button.extend({references:["paperScroller"],options:{min:.2,max:5,step:.2},pointerdown:function(e){var i=this.options;this.getReferences().paperScroller.zoomToFit({padding:20,scaleGrid:i.step,minScale:i.min,maxScale:i.max}),t.ui.widgets.button.prototype.pointerdown.call(this,e)}}),t.ui.widgets.zoomSlider=t.ui.widgets.range.extend({references:["paperScroller"],options:{min:20,max:500,step:20,value:100,unit:" %"},bindEvents:function(){this.on("change",function(t){this.getReferences().paperScroller.zoom(t/100,{absolute:!0,grid:this.options.step/100})},this),this.getReferences().paperScroller.options.paper.on("scale",function(t){this.setValue(Math.floor(100*t))},this)}}),t.ui.widgets.undo=t.ui.widgets.button.extend({references:["commandManager"],pointerclick:function(){this.getReferences().commandManager.undo()}}),t.ui.widgets.redo=t.ui.widgets.button.extend({references:["commandManager"],pointerclick:function(){this.getReferences().commandManager.redo()}})}(d,o),function(t,e){var i={options:function(){return{columnWidth:this.options.width/2-10,columns:2,rowHeight:80,resizeToFit:!0,dy:10,dx:10}},layoutGroup:function(i,n){var r=this.options.layout;if(n=n||{},!t.layout.GridLayout)throw new Error("joint.ui.Stencil: joint.layout.GridLayout is not available.");t.layout.GridLayout.layout(i,e.extend({},r,n.layout))}};t.ui.Stencil=t.mvc.View.extend({className:"stencil",events:{"click .btn-expand":"openGroups","click .btn-collapse":"closeGroups","click .groups-toggle .group-label":"openGroups","click .group-label":"onGroupLabelClick","touchstart .group-label":"onGroupLabelClick","input .search":"onSearch","focusin .search":"pointerFocusIn","focusout .search":"pointerFocusOut"},options:{width:200,height:800,label:"Stencil",groups:null,groupsToggleButtons:null,dropAnimation:!1,search:null,layout:null,dragStartClone:function(t){return t.clone()},dragEndClone:function(t){return t.clone()},layoutGroup:null},init:function(){this.setPaper(this.options.paperScroller||this.options.paper),this.graphs={},this.papers={},this.$groups={},e.bindAll(this,"onDrag","onDragEnd","onDropEnd"),s(document.body).on({"mousemove.stencil touchmove.stencil":this.onDrag,"touchend.stencil":this.onDragEnd}),s(window).on("mouseup.stencil",this.onDragEnd),this.onSearch=e.debounce(this.onSearch,200),this.initializeLayout()},initializeLayout:function(){var t=this.options.layout;t&&(e.isFunction(t)?this.layoutGroup=t:(this.layoutGroup=e.bind(i.layoutGroup,this),this.options.layout=e.isObject(t)?t:{},e.defaults(this.options.layout,i.options.call(this))))},setPaper:function(e){var i=this.options;if(e instanceof t.dia.Paper)i.paperScroller=null,i.paper=e,i.graph=e.model;else{if(!("function"==typeof t.ui.PaperScroller&&e instanceof t.ui.PaperScroller))throw new Error("Stencil: paper required");i.paperScroller=e,i.paper=e.options.paper,i.graph=e.options.paper.model}},renderContent:function(){return s("<div/>").addClass("content")},renderPaperDrag:function(){return s("<div/>").addClass("stencil-paper-drag")},renderSearch:function(){return s("<div/>").addClass("search-wrap").append(s("<input/>",{type:"search",placeholder:"search"}).addClass("search"))},renderToggleAll:function(){return[s("<div/>").addClass("groups-toggle").append(s("<label/>",{text:this.options.label}).addClass("group-label")).append(s("<button/>",{text:"+"}).addClass("btn btn-expand")).append(s("<button/>",{text:"-"}).addClass("btn btn-collapse"))]},renderElementsContainer:function(){return s("<div/>").addClass("elements")},renderGroup:function(t){t=t||{};var e=s("<div/>").addClass("group").attr("data-name",t.name).toggleClass("closed",!!t.closed),i=s("<h3/>").addClass("group-label").text(t.label||t.name),n=this.renderElementsContainer();return e.append(i,n)},render:function(){this.$content=this.renderContent(),this.$paperDrag=this.renderPaperDrag(),this.$el.empty().append(this.$paperDrag,this.$content),this.options.search&&this.$el.addClass("searchable").prepend(this.renderSearch()),this.options.groupsToggleButtons&&this.$el.addClass("collapsible").prepend(this.renderToggleAll());var i={width:this.options.width,height:this.options.height,interactive:!1};if(this.options.groups){var n=e.sortBy(e.pairs(this.options.groups),function(t){return t[1].index});e.each(n,function(n){var r=n[0],o=n[1],s=this.$groups[r]=this.renderGroup({name:r,label:o.label,closed:o.closed}).appendTo(this.$content),a=new t.dia.Graph,l=new t.dia.Paper(e.extend({},i,{el:s.find(".elements"),model:a,width:o.width||i.width,height:o.height||i.height}));this.graphs[r]=a,this.papers[r]=l},this)}else{var r=this.renderElementsContainer().appendTo(this.$content),o=new t.dia.Graph,s=new t.dia.Paper(e.extend(i,{el:r,model:o}));this.graphs.__default__=o,this.papers.__default__=s}return this._graphDrag=new t.dia.Graph,this._paperDrag=new t.dia.Paper({el:this.$paperDrag,width:1,height:1,model:this._graphDrag}),e.each(this.papers,function(t){this.listenTo(t,"cell:pointerdown",this.onDragStart)},this),this},load:function(t,i){if(t=t||{},e.isArray(t))return void this.loadGroup(t,i);e.each(this.options.groups||[],function(e,i){t[i]&&this.loadGroup(t[i],i)},this)},loadGroup:function(t,e){var i=this.getGraph(e);i.resetCells(t);var n=this.options.height;e&&(n=this.getGroup(e).height),this.isLayoutEnabled()&&this.layoutGroup(i,this.getGroup(e)),n||this.getPaper(e).fitToContent({gridWidth:1,gridHeight:1,padding:this.options.paperPadding||10})},isLayoutEnabled:function(){return!!this.options.layout},getGraph:function(t){var e=this.graphs[t||"__default__"];if(!e)throw new Error("Stencil: group "+t+" does not exist.");return e},getPaper:function(t){return this.papers[t||"__default__"]},onDragStart:function(t,i){i.preventDefault(),this.options.graph.startBatch("stencil-drag"),this.$el.addClass("dragging"),this._paperDrag.$el.addClass("dragging"),s(document.body).append(this._paperDrag.$el),this._clone=this.options.dragStartClone(t.model),this._cloneBbox=t.getBBox();var n=u.point(this._cloneBbox.x-this._clone.get("position").x,this._cloneBbox.y-this._clone.get("position").y);this._clone.set("position",{x:5-n.x,y:5-n.y}).addTo(this._graphDrag),this._cloneView=this._clone.findView(this._paperDrag),this._clonePosition=e.clone(this._clone.position()),this._paperDrag.setDimensions(this._cloneBbox.width+10,this._cloneBbox.height+10);var r=document.body.scrollTop||document.documentElement.scrollTop;this._paperDragOriginalOffset={left:i.clientX-this._cloneBbox.width/2,top:i.clientY+r-this._cloneBbox.height/2},this._paperDrag.$el.offset(this._paperDragOriginalOffset)},onDrag:function(e){if(this._clone){e.preventDefault(),e=t.util.normalizeEvent(e);var i=document.body.scrollTop||document.documentElement.scrollTop,n=e.clientX-this._cloneBbox.width/2,r=e.clientY+i-this._cloneBbox.height/2;if(this._paperDrag.$el.offset({left:n,top:r}),this.options.paper.options.embeddingMode&&this._cloneView){var o=this.options.paper.clientToLocalPoint({x:n,y:r});o.x+=this._clonePosition.x,o.y+=this._clonePosition.y,this._clone.set("position",o,{silent:!0}),this._cloneView.processEmbedding({model:this._clone,paper:this.options.paper})}}},onDragEnd:function(e){if(this._clone&&this._cloneBbox){e=t.util.normalizeEvent(e),this._clone.set("position",this._clonePosition,{silent:!0});var i=this.options.dragEndClone(this._clone);this.drop(e,i,this._cloneBbox)?this.onDropEnd():this.onDropInvalid(e,i),this.options.paper.options.embeddingMode&&this._cloneView&&this._cloneView.finalizeEmbedding({model:i,paper:this.options.paper}),this.options.graph.stopBatch("stencil-drag")}},onDropEnd:function(){this.$el.append(this._paperDrag.$el),this.$el.removeClass("dragging"),this._paperDrag.$el.removeClass("dragging"),this._clone.remove(),this._clone=void 0},onDropInvalid:function(i,n){if(this._clone&&this._cloneBbox&&(i=t.util.normalizeEvent(i),n=n||this.options.dragEndClone(this._clone),this.trigger("drop:invalid",i,n),this.options.dropAnimation)){var r=e.isObject(this.options.dropAnimation)?this.options.dropAnimation.duration:150,o=e.isObject(this.options.dropAnimation)?this.options.dropAnimation.easing:"swing";this._paperDrag.$el.animate(this._paperDragOriginalOffset,r,o,this.onDropEnd)}},insideValidArea:function(t){var e,i=this.options.paper,n=this.options.paperScroller,r=this.getDropArea(this.$el);if(n)if(n.options.autoResizePaper)e=this.getDropArea(n.$el);else{var o=this.getDropArea(n.$el),s=this.getDropArea(i.$el);e=s.intersect(o)}else e=this.getDropArea(i.$el);return!(!e||!e.containsPoint(t)||r.containsPoint(t))},getDropArea:function(t){var e=t.offset(),i=document.body.scrollTop||document.documentElement.scrollTop,n=document.body.scrollLeft||document.documentElement.scrollLeft;return u.rect({x:e.left+parseInt(t.css("border-left-width"),10)-n,y:e.top+parseInt(t.css("border-top-width"),10)-i,width:t.innerWidth(),height:t.innerHeight()})},drop:function(t,e,i){var n=this.options.paper,r=this.options.graph,o=(document.body.scrollTop||document.documentElement.scrollTop,document.body.scrollLeft||document.documentElement.scrollLeft,{x:t.clientX,y:t.clientY});if(this.insideValidArea(o)){var s=n.clientToLocalPoint(o),a=e.getBBox();return s.x+=a.x-i.width/2,s.y+=a.y-i.height/2,e.set("position",{x:u.snapToGrid(s.x,n.options.gridSize),y:u.snapToGrid(s.y,n.options.gridSize)}),e.unset("z"),r.addCell(e,{stencil:this.cid}),!0}return!1},filter:function(i,n){var r=i.toLowerCase()==i,o=e.reduce(this.papers,function(o,s,a){var l=s.model.get("cells").filter(function(o){var a=s.findViewByModel(o),l=!i||e.some(n,function(n,s){return("*"==s||o.get("type")==s)&&e.some(n,function(n){var s=t.util.getByPath(o.attributes,n,"/");return!e.isUndefined(s)&&!e.isNull(s)&&(s=s.toString(),r&&(s=s.toLowerCase()),s.indexOf(i)>=0)})});return h(a.el).toggleClass("unmatched",!l),l},this),c=!e.isEmpty(l),u=(new t.dia.Graph).resetCells(l);return this.trigger("filter",u,a),this.isLayoutEnabled()&&this.layoutGroup(u,this.getGroup(a)),this.$groups[a]&&this.$groups[a].toggleClass("unmatched",!c),s.fitToContent({gridWidth:1,gridHeight:1,padding:this.options.paperPadding||10}),o||c},!1,this);this.$el.toggleClass("not-found",!o)},getGroup:function(t){return this.options.groups&&this.options.groups[t]||{}},onSearch:function(t){this.filter(t.target.value,this.options.search)},pointerFocusIn:function(){this.$el.addClass("is-focused")},pointerFocusOut:function(){this.$el.removeClass("is-focused")},onGroupLabelClick:function(t){t.preventDefault();var e=s(t.target).closest(".group");this.toggleGroup(e.data("name"))},toggleGroup:function(t){this.$('.group[data-name="'+t+'"]').toggleClass("closed")},closeGroup:function(t){this.$('.group[data-name="'+t+'"]').addClass("closed")},openGroup:function(t){this.$('.group[data-name="'+t+'"]').removeClass("closed")},closeGroups:function(){this.$(".group").addClass("closed")},openGroups:function(){this.$(".group").removeClass("closed")},onRemove:function(){e.invoke(this.papers,"remove"),this.papers={},this._paperDrag&&(this._paperDrag.remove(),this._paperDrag=null),s(document.body).off(".stencil",this.onDrag).off(".stencil",this.onDragEnd),s(window).off("mouseup.stencil",this.onDragEnd)}})}(d,o),function(t){t.ui.Inspector=t.mvc.View.extend({className:"inspector",options:{cellView:void 0,cell:void 0,live:!0,validateInput:function(t,e,i){return!t.validity||t.validity.valid},renderFieldContent:void 0,operators:{},multiOpenGroups:!0,stateKey:function(t){return t.id}},events:{mousedown:"startBatchCommand","change [data-attribute]:not([data-custom-field])":"onChangeInput","click .group-label":"onGroupLabelClick","click .btn-list-add":"addListItem","click .btn-list-del":"deleteListItem"},init:function(){this.options.groups=this.options.groups||{},o.bindAll(this,"stopBatchCommand"),s(document).on("mouseup",this.stopBatchCommand),this.widgets=[],this.flatAttributes=t.util.flattenObject(this.options.inputs,"/",function(t){return t.type}),this._when={},this._bound={};var e=o.map(this.flatAttributes,function(t,e){if(t.when){var i={expression:t.when,path:e};o.each(this.extractExpressionPaths(i.expression),function(t){(this._when[t]||(this._when[t]=[])).push(i)},this)}return"select"==t.type&&o.isString(t.options)&&(this._bound[e]=t.options),t.path=e,t},this);this.groupedFlatAttributes=o.sortBy(o.sortBy(e,"index"),function(t){var e=this.options.groups[t.group];return e&&e.index||Number.MAX_VALUE},this),this.on("render",function(){var t={},e=[];o.each(this.$("[data-attribute]"),function(i){var n=s(i),r=n.attr("data-attribute");t[r]=n,e.push(r.substring(0,r.indexOf("/"))||r)},this),this._byPath=t,this._attributeKeys=o.uniq(e),o.each(this.$groups,function(t){var e=s(t),i=0===e.find("> .field:not(.hidden)").length;e.toggleClass("empty",i)})},this),this.listenTo(this.getModel(),"all",this.onCellChange,this)},getModel:function(){return this.options.cell||this.options.cellView.model},onCellChange:function(t,e,i,n){if(n=n||{},n.inspector!=this.cid)switch(t){case"remove":this.remove();break;case"change:position":this.updateInputPosition();break;case"change:size":this.updateInputSize();break;case"change:angle":this.updateInputAngle();break;case"change:source":case"change:target":case"change:vertices":break;default:;if("change:"===t.slice(0,"change:".length)){var r=t.slice("change:".length);o.contains(this._attributeKeys,r)&&this.render()}}},render:function(){this.$el.empty(),o.invoke(this.widgets,"remove");var t,e,i=[];return o.each(this.groupedFlatAttributes,function(n){if(t!==n.group){var r=this.options.groups[n.group];e=this.renderGroup({name:n.group,label:r&&r.label}),r&&r.closed?this.closeGroup(e,{init:!0}):this.openGroup(e,{init:!0}),i.push(e)}this.renderTemplate(e,n,n.path),t=n.group},this),this.$groups=i,this.$el.append(i),this.trigger("render"),this},getCellAttributeValue:function(e,i){var n=this.getModel(),r=t.util.getByPath(n.attributes,e,"/");if(!(i=i||this.flatAttributes[e]))return r;if(o.isUndefined(r)&&!o.isUndefined(i.defaultValue)&&(r=i.defaultValue),i.valueRegExp){if(o.isUndefined(r))throw new Error("Inspector: defaultValue must be present when valueRegExp is used.");var s=r.match(new RegExp(i.valueRegExp));r=s&&s[2]}return r},resolveBindings:function(e){switch(e.type){case"select":var i=e.options||[];o.isString(i)&&(i=t.util.getByPath(this.getModel().attributes,i,"/")||[]),o.isObject(i[0])||(i=o.map(i,function(t){return{value:t,content:t}})),e.items=i}},updateBindings:function(t){var e=o.reduce(this._bound,function(e,i,n){return 0==t.indexOf(i)&&e.push(n),e},[]);o.isEmpty(e)||(o.each(e,function(t){this.renderTemplate(null,this.flatAttributes[t],t,{replace:!0})},this),this.trigger("render"))},renderFieldContent:function(e,i,n){var r;if(o.isFunction(this.options.renderFieldContent)&&(r=this.options.renderFieldContent(e,i,n)))return s(r).attr({"data-attribute":i,"data-type":e.type,"data-custom-field":!0});var a,l,c,h;switch(e.type){case"select-box":l=o.findIndex(e.options,function(t){return t.value===n||!(!o.isUndefined(t.value)||t.content!==n)}),a=new t.ui.SelectBox(o.extend({},o.omit(e,"type","group","index"),{selected:l})),a.$el.attr({"data-attribute":i,"data-type":e.type}),a.render(),h=s("<label/>",{html:e.label||i}),r=s("<div/>").append(h,a.el),e.previewMode?(c=a.selection,a.on("options:mouseout close",function(){a.selection=c,this.processInput(a.$el,{previewCancel:!0,dry:!0})},this),a.on("option:hover",function(t,e){a.selection=t,this.processInput(a.$el,{dry:!0})},this),a.on("option:select",function(t,e){var i=o.isUndefined(c)?void 0:a.getSelectionValue(c),n=a.getSelectionValue(t),r=i===n;this.processInput(a.$el,{previewDone:!0,dry:r,originalValue:i}),c=t},this)):a.on("option:select",function(t,e){this.processInput(a.$el)},this),this.widgets.push(a);break;case"color-palette":l=o.findIndex(e.options,function(t){return t.value===n||!(!o.isUndefined(t.value)||t.content!==n)}),a=new t.ui.ColorPalette(o.extend({},o.omit(e,"type","group","index"),{selected:l})),a.$el.attr({"data-attribute":i,"data-type":e.type}),a.render(),h=s("<label/>",{html:e.label||i}),r=s("<div/>").append(h,a.el),e.previewMode?(c=a.selection,a.on("options:mouseout close",function(){a.selection=c,this.processInput(a.$el,{previewCancel:!0,dry:!0})},this),a.on("option:hover",function(t,e){a.selection=t,this.processInput(a.$el,{dry:!0})},this),a.on("option:select",function(t,e){var i=o.isUndefined(c)?void 0:a.getSelectionValue(c),n=a.getSelectionValue(t),r=i===n;this.processInput(a.$el,{previewDone:!0,dry:r,originalValue:i}),c=t},this)):a.on("option:select",function(t,e){this.processInput(a.$el)},this),this.widgets.push(a);break;case"select-button-group":e.multi?(l=[],o.each(e.options,function(t,e){o.contains(n,o.isUndefined(t.value)?t.content:t.value)&&l.push(e)})):l=o.findIndex(e.options,function(t){return t.value===n||!(!o.isUndefined(t.value)||t.content!==n)}),a=new t.ui.SelectButtonGroup(o.extend({},o.omit(e,"type","group","index"),{selected:l})),a.$el.attr({"data-attribute":i,"data-type":e.type}),a.render(),h=s("<label/>",{html:e.label||i}),r=s("<div/>").append(h,a.el),e.previewMode?(c=a.selection,a.on("mouseout",function(){a.selection=c,this.processInput(a.$el,{previewCancel:!0,dry:!0})},this),a.on("option:hover",function(t,i){e.multi?a.selection=o.uniq(a.selection.concat([t])):a.selection=t,this.processInput(a.$el,{dry:!0})},this),a.on("option:select",function(t,e){var i=o.isUndefined(c)?void 0:a.getSelectionValue(c),n=a.getSelectionValue(t),r=o.isEqual(i,n);this.processInput(a.$el,{previewDone:!0,dry:r,originalValue:i}),c=t},this)):a.on("option:select",function(t,e){this.processInput(a.$el)},this),this.widgets.push(a);break;default:r=this.renderOwnFieldContent({options:e,type:e.type,label:e.label||i,attribute:i,value:n})}return r},renderGroup:function(t){t=t||{};var e=s("<div/>").addClass("group").attr("data-name",t.name),i=s("<h3/>").addClass("group-label").text(t.label||t.name);return e.append(i)},renderOwnFieldContent:function(t){var e,i,n,r,a,l,c,h;switch(h=s("<label/>").text(t.label),t.type){case"number":i=s("<input/>",{type:"number",min:t.options.min,max:t.options.max,step:t.options.step}).val(t.value),e=[h,i];break;case"range":h.addClass("with-output"),r=s("<output/>").text(t.value),a=s("<span/>").addClass("units").text(t.options.unit),i=s("<input/>",{type:"range",name:t.type,min:t.options.min,max:t.options.max,step:t.options.step}).val(t.value),i.on("input",function(){r.text(i.val())}),e=[h,r,a,i];break;case"textarea":i=s("<textarea/>").text(t.value),e=[h,i];break;case"select":i=s("<select/>",{size:t.options.length}).prop("multiple",!!t.multiple),o.each(t.options.items,function(e){var n=s("<option/>",{value:e.value}).text(e.content);(e.value===t.value||o.contains(t.value,e.value))&&n.attr("selected","selected"),i.append(n)}),e=[h,i];break;case"toggle":l=s("<span><i/></span>"),i=s("<input/>",{type:"checkbox"}).prop("checked",!!t.value),n=s("<div/>").addClass(t.type),e=[h,n.append(i,l)];break;case"color":i=s("<input/>",{type:"color"}).val(t.value),e=[h,i];break;case"text":i=s("<input/>",{type:"text"}).val(t.value),e=[h,i];break;case"object":i=s("<div/>"),c=s("<div/>").addClass("object-properties"),e=[h,i.append(c)];break;case"list":l=s("<button/>").addClass("btn-list-add").text(t.options.addButtonLabel||"+"),c=s("<div/>").addClass("list-items"),i=s("<div/>"),e=[h,i.append(l,c)]}return i&&i.addClass(t.type).attr({"data-type":t.type,"data-attribute":t.attribute}),s.fn.append.apply(s("<div>"),e).children()},renderObjectProperty:function(t){return t=t||{},s("<div/>",{"data-property":t.property,class:"object-property"})},renderListItem:function(t){t=t||{};var e=s("<button/>").addClass("btn-list-del").text(t.options.removeButtonLabel||"-");return s("<div/>",{"data-index":t.index,class:"list-item"}).append(e)},renderFieldContainer:function(t){return t=t||{},s("<div/>",{"data-field":t.path,class:"field"})},renderTemplate:function(e,i,n,r){e=e||this.$el,r=r||{},this.resolveBindings(i);var s=this.renderFieldContainer({path:n});i.when&&!this.isExpressionValid(i.when)&&(s.addClass("hidden"),i.when.otherwise&&i.when.otherwise.unset&&this.unsetProperty(n));var a=this.getCellAttributeValue(n,i),l=this.renderFieldContent(i,n,a);if(s.append(l),t.util.setAttributesBySelector(s,i.attrs),"list"===i.type)o.each(a,function(t,e){var r=this.renderListItem({index:e,options:i});this.renderTemplate(r,i.item,n+"/"+e),l.children(".list-items").append(r)},this);else if("object"===i.type){i.flatAttributes=t.util.flattenObject(i.properties,"/",function(t){return t.type});var c=o.map(i.flatAttributes,function(t,e){return t.path=e,t});c=o.sortBy(c,function(t){return t.index}),o.each(c,function(t){var e=this.renderObjectProperty({property:t.path});this.renderTemplate(e,t,n+"/"+t.path),l.children(".object-properties").append(e)},this)}r.replace?e.find('[data-field="'+n+'"]').replaceWith(s):e.append(s)},updateInputPosition:function(){var t=this._byPath["position/x"],e=this._byPath["position/y"],i=this.getModel().get("position");t&&t.val(i.x),e&&e.val(i.y)},updateInputSize:function(){var t=this._byPath["size/width"],e=this._byPath["size/height"],i=this.getModel().get("size");t&&t.val(i.width),e&&e.val(i.height)},updateInputAngle:function(){var t=this._byPath.angle,e=this.getModel().get("angle");t&&t.val(e)},validateInput:function(t,e,i){switch(t){case"select-box":case"color-palette":case"select-button-group":return!0;default:return this.options.validateInput(e,i,t)}},onChangeInput:function(t){this.processInput(s(t.target))},processInput:function(t,e){var i=t.attr("data-attribute"),n=t.attr("data-type");if(this.validateInput(n,t[0],i)){this.options.live&&this.updateCell(t,i,e);var r=this.getFieldValue(t[0],n),o=this.parse(n,r,t[0]);this.trigger("change:"+i,o,t[0],e),this.updateDependants(i)}},updateDependants:function(t){o.each(this._when[t],function(t){var e=this._byPath[t.path],i=e.closest(".field"),n=i.hasClass("hidden"),r=this.isExpressionValid(t.expression);i.toggleClass("hidden",!r),t.expression.otherwise&&t.expression.otherwise.unset&&this.options.live&&(r?n&&this.updateCell(e,t.path):(this.unsetProperty(t.path),this.renderTemplate(null,this.flatAttributes[t.path],t.path,{replace:!0}),this.trigger("render")))},this)},unsetProperty:function(e,i){var n=this.getModel(),r=e.split("/"),s=o.first(r),a=r.slice(1).join("/");if(i=i||{},i.inspector=this.cid,i["inspector_"+this.cid]=!0,"attrs"==e)n.removeAttr(a,i);else if(e==s)n.unset(s,i);else{var l=o.merge({},n.get(s)),c=t.util.unsetByPath(l,a,"/");n.set(s,c,i)}},getOptions:function(t){if(0!==t.length){var e=t.attr("data-attribute"),i=this.flatAttributes[e];if(!i){var n=t.parent().closest("[data-attribute]"),r=n.attr("data-attribute");i=this.getOptions(n);var o=e.replace(r+"/",""),s=i;i=s.item||s.flatAttributes[o],i.parent=s}return i}},updateCell:function(e,i,n){var r=this.getModel(),s={};e?s[i]=e:s=this._byPath,this.startBatchCommand();var a={},l={};o.each(s,function(e,i){if(!e.closest(".field").hasClass("hidden")){var n,o,s=e.attr("data-type");switch(s){case"list":o=this.findParentListByPath(i),o?(n=i.substr(o.length+1),t.util.setByPath(a[o],n,[],"/")):a[i]=[];break;case"object":break;default:if(!this.validateInput(s,e[0],i))return;var c=this.getFieldValue(e[0],s),h=this.parse(s,c,e[0]),u=this.getOptions(e);if(u.valueRegExp){h=(t.util.getByPath(r.attributes,i,"/")||u.defaultValue).replace(new RegExp(u.valueRegExp),"$1"+h+"$3")}if((o=this.findParentListByPath(i))&&a[o])return n=i.substr(o.length+1),void t.util.setByPath(a[o],n,h,"/");l[i]=h}}},this),o.each(l,function(t,e){this.setProperty(e,t,n),this.updateBindings(e)},this),o.each(a,function(t,e){this.setProperty(e,t,o.extend({rewrite:!0},n)),this.updateBindings(e)},this),this.stopBatchCommand()},findParentListByPath:function(t){for(var e,i,n=t.split("/"),r=0,o=n[r],s=this.flatAttributes[o];r<n.length-1&&(!s||"list"!==s.type);)s&&"object"===s.type&&(e=s.properties),i=n[++r],o+="/"+i,s=e?e[i]:this.flatAttributes[o];return o!==t?o:null},getFieldValue:function(t,e){if(o.isFunction(this.options.getFieldValue)){var i=this.options.getFieldValue(t,e);if(i)return i.value}var n=s(t);switch(e){case"select-box":case"color-palette":case"select-button-group":var r=n.data("view")
;if(!r)throw new Error("ui.Inspector: can not read value of removed "+e);return r.getSelectionValue();default:return n.val()}},setProperty:function(e,i,n){n=n||{},n.inspector=this.cid;var r=t.dia.Cell.prototype.prop,s=this.getModel();n.previewDone&&r.call(s,e,n.originalValue,{rewrite:!0,silent:!0}),o.isUndefined(i)?t.dia.Cell.prototype.removeProp.call(s,e,n):r.call(s,e,o.clone(i),n)},parse:function(t,e,i){switch(t){case"number":case"range":e=parseFloat(e);break;case"toggle":e=i.checked;break;default:e=e}return e},startBatchCommand:function(){this.inBatch||(this.inBatch=!0,this.getModel().startBatch("inspector",{cid:this.cid}))},stopBatchCommand:function(){this.inBatch&&(this.getModel().stopBatch("inspector",{cid:this.cid}),this.inBatch=!1)},addListItem:function(t){var e=s(t.target),i=e.closest("[data-attribute]"),n=i.attr("data-attribute"),r=this.getOptions(i),o=i.children(".list-items").children(".list-item").last(),a=0===o.length?-1:parseInt(o.attr("data-index"),10),l=a+1,c=this.renderListItem({index:l,options:r});this.renderTemplate(c,r.item,n+"/"+l),e.parent().children(".list-items").append(c),c.find("input:first").focus(),this.trigger("render"),this.options.live&&this.updateCell()},deleteListItem:function(t){var e=s(t.target).closest(".list-item");e.nextAll(".list-item").each(function(){var t=parseInt(s(this).attr("data-index"),10),e=t-1;s(this).find("[data-field]").each(function(){s(this).attr("data-field",s(this).attr("data-field").replace("/"+t,"/"+e))}),s(this).find("[data-attribute]").each(function(){s(this).attr("data-attribute",s(this).attr("data-attribute").replace("/"+t,"/"+e))}),s(this).attr("data-index",e)}),e.remove(),this.trigger("render"),this.options.live&&this.updateCell()},onRemove:function(){o.invoke(this.widgets,"remove"),s(document).off("mouseup",this.stopBatchCommand)},onGroupLabelClick:function(t){t.preventDefault(),this.options.multiOpenGroups||this.closeGroups();var e=s(t.target).closest(".group");this.toggleGroup(e)},toggleGroup:function(t){var e=o.isString(t)?this.$('.group[data-name="'+t+'"]'):s(t);e.hasClass("closed")?this.openGroup(e):this.closeGroup(e)},closeGroup:function(t,e){e=e||{};var i=o.isString(t)?this.$('.group[data-name="'+t+'"]'):s(t);!e.init&&i.hasClass("closed")||(i.addClass("closed"),this.trigger("group:close",i.data("name"),e))},openGroup:function(t,e){e=e||{};var i=o.isString(t)?this.$('.group[data-name="'+t+'"]'):s(t);(e.init||i.hasClass("closed"))&&(i.removeClass("closed"),this.trigger("group:open",i.data("name"),e))},closeGroups:function(){o.each(this.$groups,this.closeGroup,this)},openGroups:function(){o.each(this.$groups,this.openGroup,this)},COMPOSITE_OPERATORS:["not","and","or","nor"],PRIMITIVE_OPERATORS:["eq","ne","regex","text","lt","lte","gt","gte","in","nin"],_isComposite:function(t){return o.intersection(this.COMPOSITE_OPERATORS,o.keys(t)).length>0},_isPrimitive:function(t){var e=o.keys(this.options.operators).concat(this.PRIMITIVE_OPERATORS);return o.intersection(e,o.keys(t)).length>0},_evalCustomPrimitive:function(t,e,i){return!!this.options.operators[t].apply(this,[this.getModel(),e].concat(i))},_evalPrimitive:function(t){return o.reduce(t,function(t,e,i){return o.reduce(e,function(t,e,n){var r=this.getCellAttributeValue(n);if(o.isFunction(this.options.operators[i]))return this._evalCustomPrimitive(i,r,e);switch(i){case"eq":return e==r;case"ne":return e!=r;case"regex":return new RegExp(e).test(r);case"text":return!e||o.isString(r)&&r.toLowerCase().indexOf(e)>-1;case"lt":return r<e;case"lte":return r<=e;case"gt":return r>e;case"gte":return r>=e;case"in":return o.contains(e,r);case"nin":return!o.contains(e,r);default:return t}},!1,this)},!1,this)},_evalExpression:function(t){return this._isPrimitive(t)?this._evalPrimitive(t):o.reduce(t,function(t,e,i){if("not"==i)return!this._evalExpression(e);var n=o.map(e,this._evalExpression,this);switch(i){case"and":return o.every(n);case"or":return o.some(n);case"nor":return!o.some(n);default:return t}},!1,this)},_extractVariables:function(t){return o.isArray(t)||this._isComposite(t)?o.reduce(t,function(t,e){return t.concat(this._extractVariables(e))},[],this):o.reduce(t,function(t,e){return o.keys(e)},[])},isExpressionValid:function(t){return t=o.omit(t,"otherwise","dependencies"),this._evalExpression(t)},extractExpressionPaths:function(t){var e=t&&t.dependencies||[];return t=o.omit(t,"otherwise","dependencies"),o.uniq(this._extractVariables(t).concat(e))},getGroupsStateKey:function(){if(o.isFunction(this.options.stateKey))return this.options.stateKey(this.getModel());throw new Error("Inspector: Option stateKey must be a function")},storeGroupsState:function(){var e=this.getGroupsStateKey();t.ui.Inspector.groupStates[e]=o.map(this.$(".group.closed"),function(t){return s(t).attr("data-name")})},getGroupsState:function(){return t.ui.Inspector.groupStates[this.getGroupsStateKey()]},restoreGroupsState:function(){var e=function(t,e){o.each(e.options.groups,function(e,i){t(e,i)?this.closeGroup(i):this.openGroup(i)},e)},i=this.getGroupsStateKey();t.ui.Inspector.groupStates[i]?e(function(e,n){return o.contains(t.ui.Inspector.groupStates[i],n)},this):e(function(t){return t.closed},this)}},{groupStates:{},instance:null,create:function(e,i){i=i||{},o.defaults(i,{restoreGroupsState:!0,storeGroupsState:!0});var n=i.cell||i.cellView.model,r=t.ui.Inspector.instance;return r&&r.options.cell===n||(r&&r.el.parentNode&&(i.storeGroupsState&&r.storeGroupsState(),r.updateCell(),r.remove()),r=new t.ui.Inspector(i).render(),t.ui.Inspector.instance=r,s(e).html(r.el),i.restoreGroupsState&&r.restoreGroupsState()),r}})}(d),d.ui.FreeTransform=d.mvc.View.extend({className:"free-transform",events:{"mousedown .resize":"startResizing","mousedown .rotate":"startRotating","touchstart .resize":"startResizing","touchstart .rotate":"startRotating"},DIRECTIONS:["nw","n","ne","e","se","s","sw","w"],POSITIONS:["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],options:{cellView:void 0,rotateAngleGrid:15,preserveAspectRatio:!1,minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,allowOrthogonalResize:!0,allowRotation:!0},init:function(){this.options.cellView&&o.defaults(this.options,{cell:this.options.cellView.model,paper:this.options.cellView.paper,graph:this.options.cellView.paper.model}),o.bindAll(this,"update","remove","pointerup","pointermove"),d.ui.FreeTransform.clear(this.options.paper),s(document.body).on("mousemove touchmove",this.pointermove),s(document).on("mouseup touchend",this.pointerup),this.listenTo(this.options.graph,"all",this.update),this.listenTo(this.options.graph,"reset",this.remove),this.listenTo(this.options.cell,"remove",this.remove),this.listenTo(this.options.paper,"blank:pointerdown",this.remove),this.listenTo(this.options.paper,"scale translate",this.update),this.options.paper.$el.append(this.el),d.ui.FreeTransform.registerInstanceToPaper(this,this.options.paper)},renderHandles:function(){var t=s("<div/>").prop("draggable",!1),e=t.clone().addClass("rotate"),i=o.map(this.POSITIONS,function(e){return t.clone().addClass("resize").attr("data-position",e)});this.$el.empty().append(i,e)},render:function(){this.renderHandles(),this.$el.attr("data-type",this.options.cell.get("type")),this.$el.toggleClass("no-orthogonal-resize",this.options.preserveAspectRatio||!this.options.allowOrthogonalResize),this.$el.toggleClass("no-rotation",!this.options.allowRotation),this.update()},update:function(){var t=this.options.paper.viewport.getCTM(),e=this.options.cell.getBBox();e.x*=t.a,e.x+=t.e,e.y*=t.d,e.y+=t.f,e.width*=t.a,e.height*=t.d;var i=u.normalizeAngle(this.options.cell.get("angle")||0),n="rotate("+i+"deg)";this.$el.css({width:e.width+4,height:e.height+4,left:e.x-3,top:e.y-3,transform:n,"-webkit-transform":n,"-ms-transform":n});var r=Math.floor(i*(this.DIRECTIONS.length/360));if(r!=this._previousDirectionsShift){var o=this.DIRECTIONS.slice(r).concat(this.DIRECTIONS.slice(0,r));this.$(".resize").removeClass(this.DIRECTIONS.join(" ")).each(function(t,e){s(e).addClass(o[t])}),this._previousDirectionsShift=r}},calculateTrueDirection:function(t){var e=this.options.cell,i=u.normalizeAngle(e.get("angle")),n=this.POSITIONS.indexOf(t);return n+=Math.floor(i*(this.POSITIONS.length/360)),n%=this.POSITIONS.length,this.POSITIONS[n]},startResizing:function(t){t.stopPropagation(),this.options.graph.trigger("batch:start");var e=s(t.target).data("position"),i=this.calculateTrueDirection(e),n=0,r=0;o.each(e.split("-"),function(t){n={left:-1,right:1}[t]||n,r={top:-1,bottom:1}[t]||r});var a=this.toValidResizeDirection(e),l={"top-right":"bottomLeft","top-left":"corner","bottom-left":"topRight","bottom-right":"origin"}[a];this._initial={angle:u.normalizeAngle(this.options.cell.get("angle")||0),resizeX:n,resizeY:r,selector:l,direction:a,relativeDirection:e,trueDirection:i},this._action="resize",this.startOp(t.target)},toValidResizeDirection:function(t){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[t]||t},startRotating:function(t){t.stopPropagation(),this.options.graph.trigger("batch:start");var e=this.options.cell.getBBox().center(),i=this.options.paper.snapToGrid({x:t.clientX,y:t.clientY});this._initial={centerRotation:e,modelAngle:u.normalizeAngle(this.options.cell.get("angle")||0),startAngle:u.point(i).theta(e)},this._action="rotate",this.startOp(t.target)},pointermove:function(t){if(this._action){t=d.util.normalizeEvent(t);var e=this.options.paper.snapToGrid({x:t.clientX,y:t.clientY}),i=this.options.paper.options.gridSize,n=this.options.cell,r=this._initial;switch(this._action){case"resize":var o=n.getBBox(),s=u.point(e).rotate(o.center(),r.angle),a=s.difference(o[r.selector]()),l=r.resizeX?a.x*r.resizeX:o.width,c=r.resizeY?a.y*r.resizeY:o.height;if(l=u.snapToGrid(l,i),c=u.snapToGrid(c,i),l=Math.max(l,this.options.minWidth||i),c=Math.max(c,this.options.minHeight||i),l=Math.min(l,this.options.maxWidth),c=Math.min(c,this.options.maxHeight),this.options.preserveAspectRatio){var h=o.width*c/o.height,p=o.height*l/o.width;h>l?c=p:l=h}o.width==l&&o.height==c||n.resize(l,c,{direction:r.direction,relativeDirection:r.relativeDirection,trueDirection:r.trueDirection,ui:!0});break;case"rotate":var f=r.startAngle-u.point(e).theta(r.centerRotation);n.rotate(u.snapToGrid(r.modelAngle+f,this.options.rotateAngleGrid),!0)}}},pointerup:function(t){this._action&&(this.stopOp(),this.options.graph.trigger("batch:stop"),this._action=null,this._initial=null)},onRemove:function(){s(document.body).off("mousemove touchmove",this.pointermove),s(document).off("mouseup touchend",this.pointerup),d.ui.FreeTransform.unregisterInstanceFromPaper(this,this.options.paper)},startOp:function(t){t&&(s(t).addClass("in-operation"),this._elementOp=t),this.$el.addClass("in-operation")},stopOp:function(){this._elementOp&&(s(this._elementOp).removeClass("in-operation"),this._elementOp=null),this.$el.removeClass("in-operation")}},{instancesByPaper:{},clear:function(t){t.trigger("freetransform:create"),this.removeInstancesForPaper(t)},removeInstancesForPaper:function(t){o.invoke(this.getInstancesForPaper(t),"remove")},getInstancesForPaper:function(t){return this.instancesByPaper[t.cid]||{}},registerInstanceToPaper:function(t,e){this.instancesByPaper[e.cid]||(this.instancesByPaper[e.cid]={}),this.instancesByPaper[e.cid][t.cid]=t},unregisterInstanceFromPaper:function(t,e){this.instancesByPaper[e.cid]&&(this.instancesByPaper[e.cid][t.cid]=null)}}),d.ui.Tooltip=d.mvc.View.extend({className:"tooltip",options:{left:void 0,right:void 0,top:void 0,bottom:void 0,position:void 0,positionSelector:void 0,direction:void 0,padding:0,rootTarget:null,target:null,trigger:"hover",viewport:{selector:null,padding:0},dataAttributePrefix:"tooltip",template:'<div class="tooltip-arrow"/><div class="tooltip-arrow-mask"/><div class="tooltip-content"/>'},init:function(){this.eventNamespace="."+this.className+this.cid;var t=this.options.trigger.split(" ");o.bindAll(this,"render","hide","show","toggle","isVisible","position"),this.options.rootTarget?(this.$rootTarget=s(this.options.rootTarget),o.each(t,function(t){switch(t){case"click":this.$rootTarget.on("click"+this.eventNamespace,this.options.target,this.toggle);break;case"hover":this.$rootTarget.on("mouseover"+this.eventNamespace,this.options.target,this.render);break;case"focus":this.$rootTarget.on("focusin"+this.eventNamespace,this.options.target,this.render)}},this)):(this.$target=s(this.options.target),o.each(t,function(t){switch(t){case"click":this.$target.on("click"+this.eventNamespace,this.toggle);break;case"hover":this.$target.on("mouseover"+this.eventNamespace,this.render);break;case"focus":this.$target.on("focusin"+this.eventNamespace,this.render)}},this)),this.$el.append(this.options.template)},onRemove:function(){this.options.rootTarget?this.$rootTarget.off(this.eventNamespace):this.$target.off(this.eventNamespace)},hide:function(){var t=this.settings;if(t){this.unbindHideActions(t.currentTarget);var e=t.className||"";this.$el.removeClass(e.replace(this.className,"")),this.$el.removeClass("rendered"),this.$el.remove()}},show:function(t){this.render(t||{target:this.options.target})},toggle:function(t){this.isVisible()?this.hide():this.show(t)},isVisible:function(){return document.body.contains(this.el)},render:function(t){var e=o.isUndefined(t.x)||o.isUndefined(t.y)?null:t,i=s(t.target).closest(this.options.target)[0],n=this.loadDefinitionFromElementData(i);this.bindHideActions(i);var r=this.settings=this.evaluateOptions(i,n);r.currentTarget=i;var a;a=e?{x:e.x,y:e.y,width:1,height:1}:d.util.getElementBBox(i),this.$(".tooltip-content").html(r.content),this.$el.hide(),this.$el.removeClass("left right top bottom"),this.$el.addClass(r.className),r.direction&&"off"!==r.direction&&this.$el.addClass("auto"===r.direction?r.position:r.direction),s(document.body).append(this.$el);var l=this.$("img");l.length?l.on("load",o.bind(function(){this.position(a,r),this.$el.addClass("rendered")},this)):(this.position(a,r),this.$el.addClass("rendered"))},unbindHideActions:function(t){var e=this.eventNamespace+".remove";s(t).off(e),clearInterval(this.interval)},bindHideOnRemoveTarget:function(t){clearInterval(this.interval),this.interval=setInterval(o.bind(function(){s.contains(document,t)||(clearInterval(this.interval),this.hide())},this),500)},bindHideActions:function(t){var e=s(t),i=this.eventNamespace+".remove";this.bindHideOnRemoveTarget(t),o.each(this.options.trigger.split(" "),function(t){switch(t){case"hover":e.on("mouseout"+i,this.hide),e.on("mousedown"+i,this.hide);break;case"focus":e.on("focusout"+i,this.hide),e.on("mouseout"+i,this.hide)}},this)},evaluateOptions:function(t,e){e=e||{};var i=o.extend({},e,this.options);return o.each(i,function(n,r){var s=o.isFunction(n)?n(t):n;i[r]=o.isUndefined(s)||o.isNull(s)?e[r]:s}),this.normalizePosition(i),i},loadDefinitionFromElementData:function(t){if(!t)return{};var e=function(t){return"left"===t||"bottom"===t||"top"===t||"right"===t},i=s(t).data(),n=this.options.dataAttributePrefix,r={};return o.each(i,function(t,i){if(o.startsWith(i,n)){var s=o.trimLeft(i,n);s=s.charAt(0).toLowerCase()+s.slice(1),""===s&&(s="content"),e(s)||(r[s]=t)}}),r},normalizePosition:function(t){var e=t.left||t.right||t.top||t.bottom;!t.position&&e&&(t.left&&(t.position="left"),t.right&&(t.position="right"),t.top&&(t.position="top"),t.bottom&&(t.position="bottom")),!t.positionSelector&&e&&(t.positionSelector=e)},position:function(t,e){this.$el.show();var i=this.getTooltipBBox(e,t);i=this.respectViewport(i,e);var n={};"left"===e.position||"right"===e.position?n.top=t.y+t.height/2-i.top:"top"===e.position||"bottom"===e.position?n.left=t.x+t.width/2-i.left:n.top=t.y+t.height/2-i.top,this.$el.css(o.pick(i,"top","left"));var r=this.$(".tooltip-arrow, .tooltip-arrow-mask");r.removeAttr("style"),r.css(n)},getTooltipBBox:function(t,e){var i,n,r=t.padding,a={width:this.$el.outerWidth(),height:this.$el.outerHeight()};return i=s(t.positionSelector),n=i[0]?d.util.getElementBBox(i[0]):e,"left"===t.position?o.extend(a,{x:n.x+n.width+r,y:e.y+e.height/2-a.height/2}):"right"===t.position?o.extend(a,{x:n.x-a.width-r,y:e.y+e.height/2-a.height/2}):"top"===t.position?o.extend(a,{x:e.x+e.width/2-a.width/2,y:n.y+n.height+r}):"bottom"===t.position?o.extend(a,{x:e.x+e.width/2-a.width/2,y:n.y-a.height-r}):o.extend(a,{x:e.x+e.width+r,y:e.y+e.height/2-a.height/2}),a},respectViewport:function(t,e){t.top=t.y,t.left=t.x,t.right=t.left+t.width,t.bottom=t.top+t.height;var i=d.util.getElementBBox(e.viewport.selector||"html"),n=parseInt(this.$el.css("marginLeft"),10),r=parseInt(this.$el.css("marginTop"),10),o=s(window);return e.viewport.selector||(i.width=o.width()+o.scrollLeft(),i.height=o.height()+o.scrollTop()),i.top=i.y-r,i.left=i.x-n,i.right=i.left+i.width,i.bottom=i.top+i.height,t.left<i.left?t.left=t.x=i.left+e.viewport.padding:t.right>i.right&&(t.left=t.x=i.right-e.viewport.padding-t.width),t.top<i.top?t.top=t.y=i.top+e.viewport.padding:t.bottom>i.bottom&&(t.top=t.y=i.bottom-e.viewport.padding-t.height),t}}),d.ui.Snaplines=d.mvc.View.extend({options:{paper:void 0,distance:10},className:"snaplines",init:function(){o.bindAll(this,"hide"),this.$horizontal=s("<div>").addClass("snapline horizontal").appendTo(this.el),this.$vertical=s("<div>").addClass("snapline vertical").appendTo(this.el),this.$el.hide().appendTo(this.options.paper.el),this.startListening()},startListening:function(){this.stopListening(),this.listenTo(this.options.paper,"cell:pointerdown",this.captureCursorOffset),this.listenTo(this.options.paper,"cell:pointermove",this.snapWhileMoving),this.listenTo(this.options.paper.model,"batch:stop",this.onBatchStop),s(document).on("mouseup",this.hide),this.filterTypes={},this.filterCells={},this.filterFunction=void 0,o.isArray(this.options.filter)?o.each(this.options.filter,function(t){o.isString(t)?this.filterTypes[t]=!0:this.filterCells[t.id]=!0},this):o.isFunction(this.options.filter)&&(this.filterFunction=this.options.filter)},onBatchStop:function(t){t=t||{},"resize"===t.batchName&&this.snapWhileResizing(t.cell,t)},captureCursorOffset:function(t,e,i,n){if(!(t instanceof d.dia.LinkView)){var r=t.model.get("position");this._cursorOffset={x:i-r.x,y:n-r.y}}},snapWhileResizing:function(t,e){if(e.ui&&!e.snapped&&e.direction&&e.trueDirection){var i=this.options.paper.findViewByModel(t);if(!(i instanceof d.dia.LinkView)){var n=t.getBBox(),r=n.bbox(t.get("angle")),s=r.origin(),a=r.corner(),l=u.normalizeAngle(t.get("angle")),c=this.options.distance,h=null,p=null,f={vertical:0,horizontal:0};if(-1!==e.trueDirection.indexOf("right")?f.vertical=a.x:f.vertical=s.x,-1!==e.trueDirection.indexOf("bottom")?f.horizontal=a.y:f.horizontal=s.y,o.find(this.options.paper.model.getElements(),function(e){if(e.id===t.id||e.isEmbeddedIn(t)||this.filterTypes[e.get("type")]||this.filterCells[e.id]||this.filterFunction&&this.filterFunction(e))return!1;var i=e.getBBox().bbox(e.get("angle")),n=i.origin(),r=i.corner(),s={vertical:[n.x,r.x],horizontal:[n.y,r.y]};return o.each(s,function(t,e){t=o.map(t,function(t){return{position:t,distance:Math.abs(t-f[e])}}),t=o.filter(t,function(t){return t.distance<c}),t=o.sortBy(t,function(t,e){return t.distance>e.distance?1:t.distance===e.distance?0:-1}),s[e]=t}),o.isNull(h)&&s.vertical.length>0&&(h=s.vertical[0].position),o.isNull(p)&&s.horizontal.length>0&&(p=s.horizontal[0].position),o.isNumber(h)&&o.isNumber(p)},this),this.hide(),o.isNumber(h)||o.isNumber(p)){var g=0;o.isNumber(h)&&(g=-1!==e.trueDirection.indexOf("right")?h-r.corner().x:r.origin().x-h);var m=0;o.isNumber(p)&&(m=-1!==e.trueDirection.indexOf("bottom")?p-r.corner().y:r.origin().y-p);var v,y=0,b=0,I=l%90,x=!(l%90);if(v=l>=0&&l<90?1:l>=90&&l<180?4:l>=180&&l<270?3:2,x)90===l||270===l?(y=m,b=g):(y=g,b=m);else{var C=u.toRad(I);p&&h&&(m>g?(m=0,p=null):(g=0,h=null)),g&&(y=3===v?g/Math.cos(C):g/Math.sin(C)),m&&(b=3===v?m/Math.cos(C):m/Math.sin(C));var w=1===v||3===v;switch(e.relativeDirection){case"top":case"bottom":b=m?m/(w?Math.cos(C):Math.sin(C)):g/(w?Math.sin(C):Math.cos(C));break;case"left":case"right":y=g?g/(w?Math.cos(C):Math.sin(C)):m/(w?Math.sin(C):Math.cos(C))}}switch(e.relativeDirection){case"top":case"bottom":y=0;break;case"left":case"right":b=0}var A=n.width+y,M=n.height+b;t.resize(A,M,{restrictedArea:this.options.paper.getRestrictedArea(i),snapped:!0,direction:e.direction,relativeDirection:e.relativeDirection,trueDirection:e.trueDirection}),this.show({vertical:h,horizontal:p})}}}},snapWhileMoving:function(t,e,i,n){if(!(t instanceof d.dia.LinkView)){var r=t.model,s=r.get("position"),a=r.get("size"),l=u.rect(o.extend({x:i-this._cursorOffset.x,y:n-this._cursorOffset.y},a)),c=l.center(),h=l.bbox(r.get("angle")),p=h.origin(),f=h.corner(),g=this.options.distance,m=null,v=null,y=0,b=0;if(o.find(this.options.paper.model.getElements(),function(t){if(t===r||t.isEmbeddedIn(r)||this.filterTypes[t.get("type")]||this.filterCells[t.id]||this.filterFunction&&this.filterFunction(t))return!1;var e=t.getBBox().bbox(t.get("angle")),i=e.center(),n=e.origin(),s=e.corner();return o.isNull(m)&&(Math.abs(i.x-c.x)<g?(m=i.x,y=.5):Math.abs(n.x-p.x)<g?m=n.x:Math.abs(n.x-f.x)<g?(m=n.x,y=1):Math.abs(s.x-f.x)<g?(m=s.x,y=1):Math.abs(s.x-p.x)<g&&(m=s.x)),o.isNull(v)&&(Math.abs(i.y-c.y)<g?(v=i.y,b=.5):Math.abs(n.y-p.y)<g?v=n.y:Math.abs(n.y-f.y)<g?(v=n.y,b=1):Math.abs(s.y-f.y)<g?(v=s.y,b=1):Math.abs(s.y-p.y)<g&&(v=s.y)),o.isNumber(m)&&o.isNumber(v)},this),this.hide(),o.isNumber(m)||o.isNumber(v)){o.isNumber(m)&&(h.x=m-y*h.width),o.isNumber(v)&&(h.y=v-b*h.height);var I=h.center(),x=I.x-l.width/2,C=I.y-l.height/2;r.translate(x-s.x,C-s.y,{restrictedArea:this.options.paper.getRestrictedArea(t),snapped:!0}),this.show({vertical:m,horizontal:v})}}},show:function(t){t=t||{};var e=this.options.paper.viewport.getCTM();t.horizontal?this.$horizontal.css("top",t.horizontal*e.d+e.f).show():this.$horizontal.hide(),t.vertical?this.$vertical.css("left",t.vertical*e.a+e.e).show():this.$vertical.hide(),this.$el.show()},hide:function(){this.$el.hide()},onRemove:function(){s(document).off("mouseup",this.hide)}}),d.ui.TextEditor=d.mvc.View.extend({options:{text:void 0,newlineCharacterBBoxWidth:10,placeholder:void 0,focus:!0,debug:!1,useNativeSelection:!0,annotateUrls:!1,urlAnnotation:{attrs:{class:"url-annotation",fill:"lightblue","text-decoration":"underline"}},textareaAttributes:{autocorrect:"off",autocomplete:"off",autocapitalize:"off",spellcheck:"false",tabindex:"0"}},className:"text-editor",events:{"keyup textarea":"onKeyup","input textarea":"onInput","copy textarea":"onCopy","cut textarea":"onCut","paste textarea":"onPaste","mousedown .char-selection-box":"onMousedown","dblclick .char-selection-box":"onDoubleClick","click .char-selection-box":"onTripleClick"},selection:{start:null,end:null},selecting:!1,init:function(){o.bindAll(this,"onMousedown","onMousemove","onMouseup","onDoubleClick","onTripleClick","onKeydown","onAfterPaste","onAfterKeydown"),this.setTextElement(this.options.text),s(document.body).on("mousemove",this.onMousemove),s(document.body).on("mouseup",this.onMouseup),s(document.body).on("keydown",this.onKeydown),this.options.cellView?this.$viewport=s(this.options.cellView.paper.viewport):this.$viewport=s(this.options.text),this.options.annotations&&this.setAnnotations(this.options.annotations)},setTextElement:function(t){this.$elText&&this.unbindTextElement(),this.options.text=t,this.$elText=s(t),this.$elText.on("mousedown",this.onMousedown),this.$elText.on("dblclick",this.onDoubleClick),this.$elText.on("click",this.onTripleClick)},render:function(t){this.$caret=s("<div>",{class:"caret"}),this.$selection=s("<div>"),this.$selectionBox=s("<div>",{class:"char-selection-box"}),this.$el.append(this.$caret,this.$selection),this.$textareaContainer=s("<div>",{class:"textarea-container"}),this.$textarea=s("<textarea>",this.options.textareaAttributes),this.textarea=this.$textarea[0],this._textContent=this.textarea.value=this.getTextContent(),this._textareaValueBeforeInput=this.textarea.value,this.$textareaContainer.append(this.textarea),this.options.focus&&this.$el.append(this.$textareaContainer),s(t||document.body).append(this.$el);var e=h(this.options.text).bbox();return this.$textareaContainer.css({left:e.x,top:e.y}),this.focus(),h(this.options.text).attr("cursor","text"),this.selectAll(),this},annotateURLBeforeCaret:function(t){var e=this.getURLBoundary(Math.max(t-1,0));if(e){var i=this.getAnnotations();return i=this.annotateURL(i||[],e[0],e[1]),!0}return!1},hasSelection:function(){return o.isNumber(this.selection.start)&&o.isNumber(this.selection.end)&&this.selection.start!==this.selection.end},textContentHasChanged:function(){return this._textContent!==this.textarea.value},restoreTextAreaSelectionDirection:function(){this._selectionDirection&&(this.textarea.selectionDirection=this._selectionDirection)},storeSelectionDirection:function(){this._selectionDirection=this.textarea.selectionDirection},onKeydown:function(t){this.options.debug&&console.log("onKeydown(): ",t.keyCode),this.hasSelection()&&(this.deselect(),this.restoreTextAreaSelectionDirection()),setTimeout(this.onAfterKeydown,0),this._copied=!1,this._selectionStartBeforeInput=this.textarea.selectionStart,this._selectionEndBeforeInput=this.textarea.selectionEnd},onAfterKeydown:function(){this.$textarea.is(":focus")&&(this.storeSelectionDirection(),this.textarea.selectionStart===this.textarea.selectionEnd?this.setCaret(this.textarea.selectionStart):this.select(this.textarea.selectionStart,this.textarea.selectionEnd))},onKeyup:function(t){this.textContentHasChanged()&&this.onInput(t)},onCopy:function(t){this._copied||this.copyToClipboard()},onCut:function(t){this._copied||this.copyToClipboard()},copyToClipboard:function(){document.queryCommandSupported&&document.queryCommandSupported("copy")&&(this._copied=!0,document.execCommand("copy"))},onInput:function(t){if(this.textContentHasChanged()){var e=this.textarea.value.length-this._textareaValueBeforeInput.length,i={start:this._selectionStartBeforeInput,end:this._selectionEndBeforeInput},n={start:this.textarea.selectionStart,end:this.textarea.selectionEnd};this.options.debug&&console.log("onInput()",t,"selectionBeforeInput",i,"selectionAfterInput",n,"diffLength",e);var r=this.inferTextOperationType(i,n,e),o=!1,s=this.getAnnotations();if(this.options.annotateUrls&&"insert"===r){var a=this.textarea.value.substr(i.start,e);this.options.debug&&console.log("onInput()","inserted text",a),/\s/.test(a)&&(o=this.annotateURLBeforeCaret(i.start))&&(s=this.shiftAnnotations(s,n.end,e))}if(s&&(o||(s=this.annotate(s,i,n,e)),this.options.debug&&console.log("onInput()","modified annotations",s),this._currentAnnotationAttributes&&"insert"===r)){var l={start:i.start,end:n.end,attrs:this._currentAnnotationAttributes};s.push(l),this._currentAnnotationAttributes=void 0,this.options.debug&&console.log("onInput()","insert annotation",l,"final annotations",s)}this._annotations=s,this.trigger("text:change",this.textarea.value,this._textareaValueBeforeInput,s,i,n),this._selectionBeforeInput=n,this._textareaValueBeforeInput=this.textarea.value,this._textContent=this.textarea.value}},onPaste:function(t){this.options.debug&&console.log("onPaste()"),this._textareaValueBeforeInput=this.textarea.value,setTimeout(this.onAfterPaste,0)},onAfterPaste:function(){this.setCaret(this.textarea.selectionStart)},onMousedown:function(t){if(3!==t.originalEvent.detail){this.options.debug&&console.log("onMousedown()");var e=this.getCharNumFromEvent(t);this.startSelecting(),this.select(e),t.preventDefault(),t.stopPropagation()}},onMousemove:function(t){if(this.selectionInProgress()){this.options.debug&&console.log("onMousemove()");var e=this.getCharNumFromEvent(t);this.storeSelectionDirection(),this.select(null,e),t.preventDefault(),t.stopPropagation()}},onMouseup:function(t){this.selectionInProgress()&&(this.options.debug&&console.log("onMouseup()"),this.stopSelecting(),this.trigger("select:changed",this.selection.start,this.selection.end))},onDoubleClick:function(t){this.options.debug&&console.log("onDoubleClick()");var e=this.getCharNumFromEvent(t),i=this.getWordBoundary(e);this.select(i[0],i[1]),t.preventDefault(),t.stopPropagation()},onTripleClick:function(t){3===t.originalEvent.detail&&(this.options.debug&&console.log("onTripleClick()"),this.hideCaret(),this.selectAll(),t.preventDefault(),t.stopPropagation())},findAnnotationsUnderCursor:function(t,e){return h.findAnnotationsAtIndex(t,e)},findAnnotationsInSelection:function(t,e,i){return h.findAnnotationsBetweenIndexes(t,e,i)},inferTextOperationType:function(t,e,i){return t.start===t.end&&e.start===e.end&&i>0?"insert":t.start===t.end&&e.start===e.end&&i<=0?"delete-single":t.start!==t.end&&e.start===e.end&&e.start===t.start?"delete":t.start!==t.end&&e.start!==t.start?"delete-insert":void 0},annotate:function(t,e,i,n){var r=[],s=this.inferTextOperationType(e,i,n);return o.each(t,function(t){switch(s){case"insert":t.start<e.start&&e.start<=t.end?t.end+=n:t.start>=e.start&&(t.start+=n,t.end+=n);break;case"delete-single":t.start<e.start&&e.start<=t.end&&e.start!==i.start?t.end+=n:t.start<=e.start&&e.start<t.end&&e.start===i.start?t.end+=n:t.start>=e.start&&(t.start+=n,t.end+=n);break;case"delete":if(t.start<=e.start&&e.start<=t.end)e.end<=t.end?t.end+=n:t.end+=i.start-t.end;else if(t.start>=e.start&&t.start<e.end){var o=t.end-t.start,a=e.end-t.start;t.start=e.start,t.end=t.start+o-a}else t.start>=e.end&&(t.start+=n,t.end+=n);break;case"delete-insert":if(t.start<=e.start&&e.start<=t.end)e.start<t.end&&(e.end>t.end?t.end=i.end:t.end=i.end+(t.end-e.end));else if(t.start>=e.start&&t.start<=e.end){var l=i.start-e.start,a=e.end-t.start,o=t.end-t.start;t.start=e.start+l,t.end=t.start+o-a}else t.start>=e.start&&t.end<=e.end?t.start=t.end=0:t.start>=e.end&&(t.start+=n,t.end+=n);break;default:this.options.debug&&console.log("ui.TextEditor: Unknown text operation.")}t.end>t.start&&r.push(t)},this),r},shiftAnnotations:function(t,e,i){return h.shiftAnnotations(t,e,i)},setCurrentAnnotation:function(t){this._currentAnnotationAttributes=t},setAnnotations:function(t){this._annotations=t},getAnnotations:function(){return this._annotations},getCombinedAnnotationAttrsAtIndex:function(t,e){var i={};return o.each(e,function(e){o.isUndefined(e.start&&o.isUndefined(e.end))?h.mergeAttrs(i,e.attrs):t>=e.start&&t<e.end&&h.mergeAttrs(i,e.attrs)}),i},getSelectionAttrs:function(t,e){var i=t.start,n=t.end;if(i===n&&0===i)return this.getCombinedAnnotationAttrsAtIndex(i,e);if(i===n)return this.getCombinedAnnotationAttrsAtIndex(i-1,e);for(var r,s=i;s<n;s++){var a=this.getCombinedAnnotationAttrsAtIndex(s,e);if(r&&!o.isEqual(r,a)){r=d.util.flattenObject(h.mergeAttrs({},r)),a=d.util.flattenObject(h.mergeAttrs({},a));var l={};o.each(a,function(t,e){r[e]===a[e]&&d.util.setByPath(l,e,t)}),r=l}else r=a}return r},getTextContent:function(){var t=this.options.text,e=h(t).find(".v-line");return 0===e.length?t.textContent:o.reduce(e,function(t,e,i,n){var r=e.node.textContent;return e.hasClass("v-empty-line")&&(r=""),i===n.length-1?t+r:t+r+"\n"},"")},startSelecting:function(){this.selecting=!0},stopSelecting:function(){this.selecting=!1},selectionInProgress:function(){return!0===this.selecting},selectAll:function(){return this.select(0,this.getNumberOfChars())},select:function(t,e){return this.options.debug&&console.log("select(",t,e,")"),o.isUndefined(e)&&(e=t),o.isNumber(t)&&(this.selection.start=t),o.isNumber(e)&&(this.selection.end=e),o.isNumber(this.selection.end)||(this.selection.end=this.selection.start),o.isNumber(this.selection.start)&&o.isNumber(this.selection.end)&&(this.selection.start===this.selection.end?(this.clearSelection(),this.focus(),this.setCaret(this.selection.start)):(this.hideCaret(),this.renderSelection(this.selection.start,this.selection.end)),this.trigger("select:change",this.selection.start,this.selection.end)),this},setTextAreaSelection:function(t,e){var i={start:t,end:e};i=this.normalizeSelectionRange(i),this.textarea.focus(),
this.textarea.selectionStart=i.start,this.textarea.selectionEnd=i.end},renderSelection:function(t,e){this.options.debug&&console.log("renderSelection()");var i={start:t,end:e};if(i=this.normalizeSelectionRange(i),this.clearSelection(),this.options.useNativeSelection){this.$viewport&&(this._viewportUserSelectBefore=this.$viewport.css("user-select"),this.$viewport.css({"-webkit-user-select":"all","-moz-user-select":"all","user-select":"all"}));var n=i.end-i.start;this.selectTextInElement(this.options.text,i.start,n)}else this.renderSelectionBoxes(i.start,i.end)},normalizeSelectionStartAndLength:function(t,e,i){var n=t.substr(0,e),r=t.substr(e,i),o=this.countLineBreaks(n),s=this.countLineBreaks(r);e-=o,i-=s;var a=this.countEmptyLines(n),l=this.countEmptyLines(r);return e+=a,i+=a,i-=a,i+=l,{start:e,length:i}},selectTextInElement:function(t,e,i){if(o.isFunction(t.selectSubString)&&this.selectTextInElementUsingSelectSubString(t,e,i),!this.actualSelectionMatchesExpectedSelection(e,i))try{this.selectTextInElementUsingRanges(t,e,i)}catch(n){this.options.debug&&console.log(n),o.isFunction(t.selectSubString)&&this.selectTextInElementUsingSelectSubString(t,e,i)}},selectTextInElementUsingSelectSubString:function(t,e,i){var n=this.normalizeSelectionStartAndLength(this.getTextContent(),e,i);try{t.selectSubString(n.start,n.length)}catch(t){this.options.debug&&console.log(t)}},selectTextInElementUsingRanges:function(t,e,i){var n=window.getSelection();n.removeAllRanges();var r=this.normalizeSelectionStartAndLength(this.getTextContent(),e,i);e=0+r.start,i=0+r.length;for(var o,s,a,l,c,h,u=this.getTextNodesFromDomElement(t),d=0,p=e+i;i>0&&u.length>0;)o=u.shift(),a=d,l=d+o.length,(a>=e&&a<p||l>e&&l<=p||e>=a&&e<l||p>a&&p<=l)&&(c=Math.max(e-a,0),h=Math.min(c+Math.min(i,o.length),l),s=document.createRange(),s.setStart(o,c),s.setEnd(o,h),n.addRange(s),i-=h-c),d+=o.length},actualSelectionMatchesExpectedSelection:function(t,e){var i=window.getSelection(),n=i.toString(),r=this.getExpectedSelectedContent(t,e);return n=n.replace(/\s/g," "),r===n},getExpectedSelectedContent:function(t,e){var i=this.getTextContent(),n=i.substr(t,e);return n=n.replace(/(\n\r|\r|\n){2,}/g,"-"),n=n.replace(/\n\r|\r|\n/g,""),n=n.replace(/\s/g," ")},getTextNodesFromDomElement:function(t){var e=[];return o.each(t.childNodes,function(t){o.isUndefined(t.tagName)?e.push(t):e=e.concat(this.getTextNodesFromDomElement(t))},this),e},renderSelectionBoxes:function(t,e){this.options.debug&&console.log("renderSelectionBoxes()"),this.$selection.empty();for(var i,n,r,o=this.getFontSize(),s=this.getTextTransforms(),a=s.rotation,l=t;l<e;l++){var c=this.$selectionBox.clone();try{r=this.getCharBBox(l)}catch(i){this.trigger("select:out-of-range",t,e);break}n&&0===a&&Math.round(r.y)===Math.round(n.y)&&Math.round(r.height)===Math.round(n.height)&&Math.round(r.x)===Math.round(n.x+n.width)?i.css({width:"+="+r.width}):(c.css({left:r.x,top:r.y-r.height,width:r.width,height:r.height,"-webkit-transform":"rotate("+a+"deg)","-webkit-transform-origin":"0% 100%","-moz-transform":"rotate("+a+"deg)","-moz-transform-origin":"0% 100%"}),this.$selection.append(c),i=c),n=r}r&&this.$textareaContainer.css({left:r.x,top:r.y-o*s.scaleY})},clearSelection:function(){return this.options.debug&&console.log("clearSelection()"),this.$selection.empty(),this.options.text.selectSubString&&(this.$viewport&&this._viewportUserSelectBefore&&this.$viewport.css({"-webkit-user-select":this._viewportUserSelectBefore,"-moz-user-select":this._viewportUserSelectBefore,"user-select":this._viewportUserSelectBefore}),window.getSelection().removeAllRanges()),this},deselect:function(){return this.options.debug&&console.log("deselect()"),this.stopSelecting(),this.clearSelection(),this.setTextAreaSelection(this.selection.start,this.selection.end),this},getSelectionStart:function(){return this.selection.start},getSelectionEnd:function(){return this.selection.end},getSelectionRange:function(){return this.normalizeSelectionRange(this.selection)},normalizeSelectionRange:function(t){var t=o.clone(t);return t.start>t.end&&(t.end=[t.start,t.start=t.end][0]),t},getSelectionLength:function(){var t=this.getSelectionRange();return t.end-t.start},getSelection:function(){var t=this.getSelectionRange();return this.getTextContent().slice(t.start,t.end)},getWordBoundary:function(t){for(var e=this.textarea.value,i=/\W/,n=t;n;){if(i.test(e[n])){n+=1;break}n-=1}for(var r=this.getNumberOfChars(),o=t;o<=r&&!i.test(e[o]);)o+=1;return n<o?[n,o]:[o,n]},getURLBoundary:function(t){for(var e=this.textarea.value,i=/\s/,n=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/,r=t;r;){if(i.test(e[r])){r+=1;break}r-=1}for(var o=this.getNumberOfChars(),s=t;s<=o&&!i.test(e[s]);)s+=1;if(n.test(e.substring(r,s)))return[r,s]},annotateURL:function(t,e,i){var n=this.textarea.value.substring(e,i),r=o.extend({url:n},this.options.urlAnnotation);return r.start=e,r.end=i,o.isEqual(r,o.last(t))||t.push(r),t},getCharBBox:function(t){if(this.isLineEnding(t)){var e=this.getCharBBox(t-1);return e.x=e.x2,e.y=e.y2,e.width=this.options.newlineCharacterBBoxWidth||10,e}var i=this.realToSvgCharNum(t),n=this.options.text,r=n.getStartPositionOfChar(i),o=n.getEndPositionOfChar(i),s=n.getExtentOfChar(i);r=this.localToScreenCoordinates(r),o=this.localToScreenCoordinates(o);var a=this.getTextTransforms();return{x:r.x,y:r.y,width:s.width*a.scaleX,height:s.height*a.scaleY,x2:o.x,y2:o.y}},realToSvgCharNum:function(t){for(var e=0,i=0;i<=t;i++)this.isLineEnding(i)&&(e+=1);return t-e},selectionStartToSvgCharNum:function(t){return t-this.nonEmptyLinesBefore(t)},isLineEnding:function(t){var e=this.textarea.value;return"\n"===e[t]&&t>0&&"\n"!==e[t-1]},svgToRealCharNum:function(t){for(var e=(this.textarea.value,0),i=0;i<=t+e;i++)this.isLineEnding(i)&&(e+=1);return t+e},localToScreenCoordinates:function(t){return s(this.options.text).show(),h.transformPoint(t,this.options.text.getCTM())},getNumberOfChars:function(){return this.getTextContent().length},getCharNumFromEvent:function(t){var e=this.options.text,i=t.clientX,n=t.clientY,r=h(e).toLocalPoint(i,n),o=e.getCharNumAtPosition(r);if(o<0)return this.getNumberOfChars();var s=this.localToScreenCoordinates(r),a=this.getCharBBox(this.svgToRealCharNum(o));return Math.abs(a.x-s.x)<Math.abs(a.x+a.width-s.x)?this.svgToRealCharNum(o):this.svgToRealCharNum(o)+1},lineNumber:function(t){var e=this.textarea.value.substr(0,t);return this.countLineBreaks(e)},emptyLinesBefore:function(t){for(var e=this.textarea.value.split(/\n\r|\r|\n/g),i=this.lineNumber(t),n=0,r=i-1;r>=0;r--)e[r]||(n+=1);return n},countLineBreaks:function(t){return(t.match(/\n\r|\r|\n/g)||[]).length},countEmptyLines:function(t){return(t.match(/(\n\r|\r|\n){2,}/g)||[]).length},nonEmptyLinesBefore:function(t){return this.lineNumber(t)-this.emptyLinesBefore(t)},isEmptyLine:function(t){return!this.textarea.value.split(/\n\r|\r|\n/g)[t]},isEmptyLineUnderSelection:function(t){var e=this.lineNumber(t);return this.isEmptyLine(e)},getTextTransforms:function(){var t=this.options.text.getCTM();return h.decomposeMatrix(t)},getFontSize:function(){return parseInt(h(this.options.text).attr("font-size"),10)},getTextAnchor:function(){return h(this.options.text).attr("text-anchor")||""},setCaret:function(t,e){o.isObject(t)&&(e=t,t=void 0),e=e||{};var i=this.options.text,n=this.getNumberOfChars(),r=this.selection.start,s=this.textarea.value;void 0!==t&&(t=Math.min(Math.max(t,0),n),r=this.selection.start=this.selection.end=t),e.silent||this.trigger("caret:change",r),this.setTextAreaSelection(r,r),this.options.debug&&console.log("setCaret(",t,e,")","selectionStart",r,"isLineEnding",this.isLineEnding(r),"isEmptyLineUnderSelection",this.isEmptyLineUnderSelection(r),"svgCharNum",this.selectionStartToSvgCharNum(r),"nonEmptyLinesBefore",this.nonEmptyLinesBefore(r));var a;try{var l;this.isEmptyLineUnderSelection(r)||!this.isLineEnding(r)&&s.length!==r?(l=this.selectionStartToSvgCharNum(r),a=i.getStartPositionOfChar(l)):(l=this.selectionStartToSvgCharNum(r)-1,a=i.getEndPositionOfChar(l))}catch(t){this.trigger("caret:out-of-range",r),a={x:0,y:0}}var c=this.localToScreenCoordinates(a),h=this.getTextTransforms(),u=h.rotation,d=this.getFontSize()*h.scaleY;return this.options.placeholder&&this.$caret.toggleClass("placeholder",0===n),this.$caret.css({left:c.x,top:c.y+(n?-d:0),height:d,"line-height":d+"px","font-size":d+"px","-webkit-transform":"rotate("+u+"deg)","-webkit-transform-origin":"0% 100%","-moz-transform":"rotate("+u+"deg)","-moz-transform-origin":"0% 100%"}).attr({"text-anchor":this.getTextAnchor()}).show(),this.$textareaContainer.css({left:c.x,top:c.y+(n?-d:0)}),this.focus(),this},focus:function(){return this.options.debug&&console.log("focus()"),this.showCaret(),this},blur:function(){return this.options.debug&&console.log("blur()"),this.hideCaret(),this},showCaret:function(){return this.options.debug&&console.log("showCaret()"),this.$caret.show(),this},hideCaret:function(){return this.options.debug&&console.log("hideCaret()"),this.$caret.hide(),this},unbindTextElement:function(){this.$elText.off("mousedown",this.onMousedown),this.$elText.off("dblclick",this.onDoubleClick),this.$elText.off("click",this.onTripleClick)},onRemove:function(){this.unbindTextElement(),s(document.body).off("mousemove",this.onMousemove),s(document.body).off("mouseup",this.onMouseup),s(document.body).off("keydown",this.onKeydown),h(this.options.text).attr("cursor","")}},o.extend({getTextElement:function(t){var e=t.tagName.toUpperCase();if("TEXT"===e||"TSPAN"===e||"TEXTPATH"===e)return"TEXT"===e?t:this.getTextElement(t.parentNode)},edit:function(t,e){e=e||{};var i=!1!==e.update;this.options=o.extend({},e,{update:i});var n=this.getTextElement(t);if(!n)return void(this.options.debug&&console.log("ui.TextEditor: cannot find a text element."));this.close(),this.ed=new d.ui.TextEditor(o.extend({text:n},e)),this.ed.on("all",this.trigger,this);var r;if(e.cellView){if(r=e.cellView.paper.el,this.cellViewUnderEdit=e.cellView,this.cellViewUnderEditInteractiveOption=this.cellViewUnderEdit.options.interactive,this.cellViewUnderEdit.options.interactive=!1,e.annotationsProperty&&!this.ed.getAnnotations()){var a=this.cellViewUnderEdit.model.prop(e.annotationsProperty);a&&this.ed.setAnnotations(this.deepCloneAnnotations(a))}}else{r=h(n).svg().parentNode}return i&&this.ed.on("text:change",function(t,i,r){if(e.cellView){var o=null;if(e.textProperty&&(e.cellView.model.isLink()&&"labels"===e.textProperty.substr(0,"labels".length)&&(o=h(s(h(n).node).closest(".label")[0]).index()),e.cellView.model.prop(e.textProperty,t,{textEditor:this.ed.cid})),e.annotationsProperty&&e.cellView.model.prop(e.annotationsProperty,this.deepCloneAnnotations(r),{rewrite:!0,textEditor:this.ed.cid}),null!==o){var a=h(e.cellView.el).find(".label");n=a[o].findOne("text"),this.ed.setTextElement(n.node)}}else h(n).text(t,r)},this),this.ed.render(r),this},close:function(){if(this.ed){if(this.ed.options.annotateUrls){var t=this.ed.getSelectionStart(),e=this.findAnnotationsUnderCursor();if(!o.find(e,function(t){return!!t.url&&t})){this.ed.annotateURLBeforeCaret(t)&&this.applyAnnotations(this.getAnnotations())}}this.ed.remove(),this.cellViewUnderEdit&&(this.cellViewUnderEdit.options.interactive=this.cellViewUnderEditInteractiveOption),this.ed=this.cellViewUnderEdit=this.cellViewUnderEditInteractiveOption=void 0}},applyAnnotations:function(t){var e=this.options;if(this.ed&&e.update){e.cellView&&e.annotationsProperty?(e.cellView.model.prop(e.annotationsProperty,this.deepCloneAnnotations(t),{rewrite:!0}),this.ed.setAnnotations(t)):h(this.ed.options.text).text(this.ed.getTextContent(),t);var i=this.getSelectionRange();this.getSelectionLength()>0?this.ed.select(i.start,i.end):this.ed.setCaret()}},deepCloneAnnotations:function(t){try{return JSON.parse(JSON.stringify(t))}catch(t){return}},proxy:function(t,e){if(this.ed)return this.ed[t].apply(this.ed,e)},setCurrentAnnotation:function(t){return this.proxy("setCurrentAnnotation",arguments)},getAnnotations:function(){return this.proxy("getAnnotations",arguments)},setCaret:function(){return this.proxy("setCaret",arguments)},deselect:function(){return this.proxy("deselect",arguments)},selectAll:function(){return this.proxy("selectAll",arguments)},select:function(){return this.proxy("select",arguments)},getNumberOfChars:function(){return this.proxy("getNumberOfChars",arguments)},getCharNumFromEvent:function(){return this.proxy("getCharNumFromEvent",arguments)},getWordBoundary:function(){return this.proxy("getWordBoundary",arguments)},findAnnotationsUnderCursor:function(){return this.proxy("findAnnotationsUnderCursor",[this.ed.getAnnotations(),this.ed.getSelectionStart()])},findAnnotationsInSelection:function(){if(this.ed){var t=this.ed.getSelectionRange();return this.proxy("findAnnotationsInSelection",[this.ed.getAnnotations(),t.start,t.end])}},getSelectionAttrs:function(t){if(this.ed){var e=this.ed.getSelectionRange();return this.proxy("getSelectionAttrs",[e,t])}},getSelectionLength:function(){return this.proxy("getSelectionLength",arguments)},getSelectionRange:function(){return this.proxy("getSelectionRange",arguments)}},r.Events)),d.ui.Dialog=d.mvc.View.extend({className:"dialog",events:{"click .bg":"action","click .btn-close":"action","click .controls button":"action","mousedown .titlebar":"onDragStart","touchstart .titlebar":"onDragStart"},options:{draggable:!1,closeButtonContent:"&times;",closeButton:!0,inlined:!1,modal:!0},init:function(){o.bindAll(this,"onDrag","onDragEnd")},render:function(){var t=s("<div/>",{class:"bg","data-action":"close"}),e=s("<div/>",{class:"fg"}),i=s("<div/>",{class:"titlebar"}),n=s("<div/>",{class:"body"}),r=s("<button/>",{class:"btn-close","data-action":"close",html:this.options.closeButtonContent}),a=s("<div/>",{class:"controls"});return this.$el.toggleClass("draggable",!!this.options.draggable),this.options.type&&this.$el.attr("data-type",this.options.type),this.options.inlined&&this.$el.addClass("inlined"),this.options.modal&&this.$el.addClass("modal"),this.options.width&&e.width(this.options.width),this.options.title?i.append(this.options.title):i.addClass("empty"),this.options.content&&n.append(this.options.content),this.options.buttons&&o.each(this.options.buttons.reverse(),function(t){var e=s("<button/>",{class:"control-button",html:t.content,"data-action":t.action});t.position&&e.addClass(t.position),a.append(e)}),e.append(i,n,a),this.options.closeButton&&e.append(r),this.$el.empty().append(t,e),this},open:function(t){return this.delegateEvents(),this.on("action:close",this.close,this),s(document.body).on({"mousemove.dialog touchmove.dialog":this.onDrag,"mouseup.dialog touchend.dialog":this.onDragEnd}),s(t||document.body).append(this.render().el),this.$el.addClass("rendered"),this},close:function(){return this.remove(),this},onRemove:function(){s(document.body).off(".dialog",this.onDrag).off(".dialog",this.onDragStart)},action:function(t){var e=s(t.target).closest("[data-action]"),i=e.attr("data-action");i&&this.trigger("action:"+i)},onDragStart:function(t){this.options.draggable&&(t=d.util.normalizeEvent(t),this._dx=t.clientX,this._dy=t.clientY,this._dragging=!0)},onDrag:function(t){if(this._dragging){t=d.util.normalizeEvent(t);var e=this.$(".fg"),i=e.offset();e.css({top:i.top+(t.clientY-this._dy),left:i.left+(t.clientX-this._dx),margin:0}),this._dx=t.clientX,this._dy=t.clientY}},onDragEnd:function(){this._dragging=!1}}),d.ui.FlashMessage=d.ui.Dialog.extend({className:d.ui.Dialog.prototype.className+" flash-message",options:o.merge({},d.ui.Dialog.prototype.options,{closeButton:!0,modal:!1,cascade:!0,closeAnimation:{delay:2e3,duration:200,easing:"swing",properties:{opacity:0}},openAnimation:{duration:200,easing:"swing",properties:{opacity:1}}}),init:function(){o.bindAll(this,"startCloseAnimation"),d.ui.Dialog.prototype.init.apply(this,arguments),this.on("close:animation:complete",this.close,this)},open:function(){d.ui.Dialog.prototype.open.apply(this,arguments);var t=this.$(".fg");return this._foregroundHeight=t.height(),this.addToCascade(),t.css("height",0),this.startOpenAnimation(),this.options.closeAnimation&&this.options.closeAnimation.delay&&setTimeout(this.startCloseAnimation,this.options.closeAnimation.delay),this},close:function(){return d.ui.Dialog.prototype.close.apply(this,arguments),this.removeFromCascade(),this},addToCascade:function(){if(this.options.cascade){var t=this.constructor.top;this.$(".fg").css("top",t),this.constructor.top+=this._foregroundHeight+this.constructor.padding}this.constructor.opened.push(this)},removeFromCascade:function(){if(this.options.cascade){for(var t=this.constructor.opened,e=!1,i=0;i<t.length;i++){var n=t[i];if(n.options.cascade&&e){var r=parseInt(n.$(".fg").css("top"),10);n.$(".fg").css("top",r-this._foregroundHeight-this.constructor.padding)}n===this&&(e=!0)}e&&(this.constructor.top-=this._foregroundHeight+this.constructor.padding)}this.constructor.opened=o.without(this.constructor.opened,this)},startCloseAnimation:function(){this.$(".fg").animate(this.options.closeAnimation.properties,o.extend({complete:o.bind(function(){this.trigger("close:animation:complete")},this)},this.options.closeAnimation))},startOpenAnimation:function(){this.$(".fg").animate(o.extend({},this.options.openAnimation.properties,{height:this._foregroundHeight}),o.extend({complete:o.bind(function(){this.trigger("open:animation:complete")},this)},this.options.openAnimation))}},{top:20,padding:15,opened:[],open:function(t,e,i){return i=i||{},new d.ui.FlashMessage(o.extend({title:e,type:"info",content:t},i)).open(i.target)},close:function(){o.invoke(this.opened,"close")}}),function(t,e,i){"use strict";var n=function(){i.bindAll(this,"handleKey"),this.parser=new o,this.enable()};i.extend(n.prototype,e.Events),n.prototype.on=function(t,e,i){return r.Events.on.call(this,this.normalizeEvent(t),e,i),this},n.prototype.off=function(t,e,i){var n=t?this.normalizeEvent(t):null;return r.Events.off.call(this,n,e,i),this},n.prototype.normalizeEvent=function(t){return"object"==typeof t?i.transform(t,function(t,e,i){t[this.normalizeShortcut(i)]=e},null,this):this.normalizeShortcut(t)},n.prototype.normalizeShortcut=function(t){if("all"===t.toLowerCase())return t;for(var e=this.parser.toEventObjectList(t),i=[],n=0;n<e.length;n++)i.push(this.hash(e[n]));return i.join(" ")},n.prototype.enable=function(){window.addEventListener?(document.addEventListener("keydown",this.handleKey,!1),document.addEventListener("keypress",this.handleKey,!1),document.addEventListener("keyup",this.handleKey,!1)):window.attachEvent&&(document.attachEvent("keydown",this.handleKey,!1),document.attachEvent("keypress",this.handleKey,!1),document.attachEvent("keyup",this.handleKey,!1))},n.prototype.disable=function(){window.removeEventListener?(document.removeEventListener("keydown",this.handleKey,!1),document.removeEventListener("keypress",this.handleKey,!1),document.removeEventListener("keyup",this.handleKey,!1)):window.detachEvent&&(document.detachEvent("keydown",this.handleKey,!1),document.detachEvent("keypress",this.handleKey,!1),document.detachEvent("keyup",this.handleKey,!1))},n.prototype.isActive=function(t,e){return this.isModifierActive(t,e)},n.prototype.isModifierActive=function(t,e){for(var i=this.parser.toEventObjectList(t),n=0;n<i.length;n++)if(i[n].modifiersCompare(e))return!0;return!1},n.prototype.hash=function(t){var e=function(t){return t?1:0};return[t.type,":",t.which,e(t.shiftKey),e(t.ctrlKey),e(t.altKey),e(t.metaKey)].join("")},n.prototype.handleKey=function(t){if(!this.isUnsupportedElement(t)){var e=d.fromNative(t);r.Events.trigger.call(this,this.hash(e),t)}},n.prototype.isUnsupportedElement=function(t){var e=t.target||t.srcElement,i=(e?e.tagName:"").toUpperCase();return"INPUT"===i||"SELECT"===i||"TEXTAREA"===i};var o=function(){};o.prototype={constructor:o,parseEventString:function(t){t=t||"";var e,i,n=t.split("+"),r=new d(0);for(i=0;i<n.length;i++){e=n[i];var s=this.getModifierPropertyName(e);s?r[s]=!0:r.which=o.getCode(e)}return r},toEventObjectList:function(t){for(var e=t.replace(/\s*\+\s*/gi,"+").split(" "),i=[],n=0;n<e.length;n++)i.push(this.composeEventObject(e[n]));return i},composeEventObject:function(t){var e,i=t.split(":"),n=h.KEYDOWN,r=i[0];if(i.length>1&&(r=i[1],n=i[0]),-1===u.indexOf(n))throw t+": invalid shortcut definition";return e=this.parseEventString(r),e.setType(n),e},getModifierPropertyName:function(t){var e=s[t];return a[e]}},o.getCode=function(t){return c[t]||t.toUpperCase().charCodeAt(0)};var s={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91,meta:91},a={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"},l={57392:"ctrl",63289:"num",59:";",61:"=",173:"-"},c={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,plus:187,minus:189,"-":189,",":188,".":190,"/":191,"`":192,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},h={KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup"},u=[h.KEYPRESS,h.KEYDOWN,h.KEYUP],d=function(t,e,i,n,r,o){this.which=t,this.shiftKey=e||!1,this.ctrlKey=i||!1,this.altKey=n||!1,this.metaKey=r||!1,this.type=o||h.KEYDOWN};d.fromNative=function(t){var e=t.which;return t.type===h.KEYPRESS&&(e=String.fromCharCode(t.which).toUpperCase().charCodeAt(0)),l[e]&&(e=o.getCode(l[e])),new d(e,t.shiftKey,t.ctrlKey,t.altKey,t.metaKey,t.type)},d.prototype.modifiersCompare=function(t){return!(this.shiftKey&&this.shiftKey!==t.shiftKey||this.ctrlKey&&this.ctrlKey!==t.ctrlKey||this.altKey&&this.altKey!==t.altKey||this.metaKey&&this.metaKey!==t.metaKey)},d.prototype.setType=function(t){this.type=t},t.ui.Keyboard=n}(d,r,o),d.ui.Lightbox=d.ui.Dialog.extend({className:d.ui.Dialog.prototype.className+" lightbox",options:o.merge({},d.ui.Dialog.prototype.options,{closeButton:!0,modal:!0,closeAnimation:{delay:2e3,duration:200,easing:"swing",properties:{opacity:0}},top:100,windowArea:.8,openAnimation:!1}),init:function(){o.bindAll(this,"startCloseAnimation","positionAndScale"),d.ui.Dialog.prototype.init.apply(this,arguments),this.options.image&&(this.$image=s("<img/>",{src:this.options.image}),this.$image.on("load",this.positionAndScale),this.options.content=this.$image),s(window).on("resize",this.positionAndScale),this.on("close:animation:complete",this.remove,this)},open:function(){return d.ui.Dialog.prototype.open.apply(this,arguments),this.positionAndScale(),this.startOpenAnimation(),this},positionAndScale:function(){var t=this.$(".fg"),e=this.$(".body > img"),i=this.options.windowArea,n=window.innerWidth*i;this.$el.css("margin-top",this.options.top);var r=this.$(".titlebar");r.css("width",n);var o=r.height(),s=window.innerHeight*i-o-this.options.top;r.css("width","auto"),t.css({width:n,height:s});var a=e.width(),l=e.height();t.css({width:a,height:l})},close:function(){return this.options.closeAnimation?this.startCloseAnimation():d.ui.Dialog.prototype.close.apply(this,arguments),this},onRemove:function(){d.ui.Dialog.prototype.onRemove.apply(this,arguments),s(window).off("resize",this.positionAndScale),this.$image&&this.$image.off("load",this.positionAndScale)},startCloseAnimation:function(){this.$el.animate(this.options.closeAnimation.properties,o.extend({complete:o.bind(function(){this.trigger("close:animation:complete")},this)},this.options.closeAnimation))},startOpenAnimation:function(){this.$el.animate(o.extend({},this.options.openAnimation.properties,{height:this._foregroundHeight}),o.extend({complete:o.bind(function(){this.trigger("open:animation:complete")},this)},this.options.openAnimation))}}),d.ui.ContextToolbar=d.mvc.View.extend({className:"context-toolbar",eventNamespace:"context-toolbar",events:{"click .tool":"onToolPointerdown"},options:{padding:20,autoClose:!0},init:function(){o.bindAll(this,"onDocumentMousedown")},render:function(){return this.constructor.opened&&this.constructor.close(),this.bind(),this.options.type&&this.$el.attr("data-type",this.options.type),s(this.getRoot()).append(this.$el),this.renderContent(),this.position(),this.constructor.opened=this,this},renderContent:function(){var t=s("<div/>",{class:"tools"});this.options.tools&&o.each(this.options.tools,function(e){var i;i=e.icon?s("<img/>",{src:e.icon}):e.content;var n=s("<button/>",{class:"tool",html:i,"data-action":e.action});e.attrs&&n.attr(e.attrs),t.append(n)}),this.$el.append(t)},getRoot:function(){return this.options.root||document.documentElement},position:function(){var t=(s(this.options.target),d.util.getElementBBox(this.options.target)),e=d.util.getElementBBox(this.getRoot()),i=this.$el.outerWidth(),n=(this.$el.outerHeight(),t.x+t.width/2-i/2),r=t.y+t.height+this.options.padding;n-=e.x,r-=e.y,this.$el.css({left:n,top:r})},onRemove:function(){this.unbind(),this.constructor.opened=void 0},bind:function(){s(document).on("mousedown."+this.eventNamespace,this.onDocumentMousedown)},unbind:function(){return s(document).off("mousedown."+this.eventNamespace,this.onDocumentMousedown),this},onToolPointerdown:function(t){var e=s(t.target).closest("[data-action]"),i=e.attr("data-action");i&&this.trigger("action:"+i,t)},onDocumentMousedown:function(t){if(this.options.autoClose){var e=this.options.target;this.el.contains(t.target)||e.contains(t.target)||e===t.target||(this.constructor.close(),this.remove())}}},{opened:void 0,close:function(){this.opened&&(this.opened.remove(),this.opened=void 0)},update:function(){this.opened&&this.opened.position()}}),d.ui.Popup=d.ui.ContextToolbar.extend({className:"popup",eventNamespace:"popup",events:{},renderContent:function(){var t=o.isFunction(this.options.content)?this.options.content(this.el):this.options.content;t&&this.$el.html(t)}}),d.ui.SelectBox=d.mvc.View.extend({className:"select-box",events:{"click .select-box-selection":"onToggle","click .select-box-option":"onSelect"},options:{options:[],width:void 0,openPolicy:"auto",target:"undefined"!=typeof document?document.body:null,keyboardNavigation:!0,selected:void 0,selectBoxOptionsClass:void 0,disabled:!1},init:function(){o.bindAll(this,"onOutsideClick","onOptionHover","onSelect","onKeydown","onOptionsMouseOut"),s(document).on("click.selectBox",this.onOutsideClick),this.options.keyboardNavigation&&s(document).on("keydown.selectBox",this.onKeydown),this.$el.data("view",this),o.isUndefined(this.options.selected)?this.selection=o.findWhere(this.options.options,{selected:!0})||this.options.options[0]:this.selection=this.options.options[this.options.selected]},render:function(){return this.$el.empty(),this.$selection=null,this.renderSelection(this.selection),this.options.width&&this.$el.css("width",this.options.width),this.options.disabled&&this.disable(),this.$el.append(this.$options),this},renderOptions:function(){this.removeOptions(),this.$options=s("<div/>",{class:[this.className,"select-box-options",this.themeClassNamePrefix+this.theme].join(" ")}),this.$options.addClass(this.options.selectBoxOptionsClass),this.$options.on("click.selectBox",".select-box-option",this.onSelect),this.$options.on("mouseover.selectBox",".select-box-option",this.onOptionHover),this.$options.on("mouseleave.selectBox",this.onOptionsMouseOut),this.options.width&&this.$options.css("width",this.options.width),o.each(this.options.options,function(t,e){var i=this.renderOption(t,e);this.$options.append(i),this.selection===t&&i.addClass("selected hover")},this),this.$target=s(this.options.target),this.$optionsArrow=s("<div/>").addClass("select-box-options-arrow").appendTo(this.$options)},removeOptions:function(){this.$options&&(this.$options.removeClass("rendered"),this.$options.remove())},renderOption:function(t,e){var i=this.renderOptionContent(t);return i.addClass("select-box-option"),i.data("index",e),i},renderOptionContent:function(t){var e=s("<div/>",{class:"select-box-option-content",html:t.content});return t.icon&&e.prepend(s("<img/>",{class:"select-box-option-icon",src:t.icon})),e},renderSelection:function(t){if(this.$selection||(this.$selection=s("<div/>",{class:"select-box-selection"}),this.$el.append(this.$selection)),this.$selection.empty(),t){var e=this.renderOptionContent(t);this.$selection.append(e)}else if(this.options.placeholder){var i=s("<div/>",{class:"select-box-placeholder",html:this.options.placeholder});this.$selection.append(i)}},getOptionIndex:function(t){return s(t).closest(".select-box-option").data("index")},onSelect:function(t){var e=this.getOptionIndex(t.target);this.select(e,{ui:!0})},onToggle:function(t){this.toggle()},markOptionHover:function(t){this.$options.find(".hover").removeClass("hover"),s(this.$options.find(".select-box-option")[t]).addClass("hover")},onOptionHover:function(t){var e=this.getOptionIndex(t.target);this.markOptionHover(e),this.trigger("option:hover",this.options.options[e],e)},onOutsideClick:function(t){!this.el.contains(t.target)&&this.$el.hasClass("opened")&&this.close()},onOptionsMouseOut:function(t){this.trigger("options:mouseout",t)},getSelection:function(){return this.selection},getSelectionValue:function(t){return(t=t||this.selection)&&(o.isUndefined(t.value)?t.content:t.value)},getSelectionIndex:function(){return o.findIndex(this.options.options,this.selection)},getOptionHoverIndex:function(){return this.$options.find(".select-box-option.hover").index()},select:function(t,e){this.selection=this.options.options[t],this.renderSelection(this.selection),this.trigger("option:select",this.selection,t,e),this.close()},selectByValue:function(t,e){for(var i=this.options.options||[],n=0;n<i.length;n++){var r=i[n];if(o.isUndefined(r.value)&&r.content===t)return this.select(n,e);if(!o.isUndefined(r.value)&&r.value===t)return this.select(n,e)}},isOpen:function(){return this.$el.hasClass("opened")},toggle:function(){this.isOpen()?this.close():this.open()},position:function(){var t=this.$(".select-box-selection"),e=t.outerHeight(),i=t.offset(),n=i.left,r=i.top,o=this.$options.outerHeight(),a={left:0,top:0};this.options.target!==document.body?(a=this.$target.offset(),a.width=this.$target.outerWidth(),a.height=this.$target.outerHeight(),a.left-=this.$target.scrollLeft(),a.top-=this.$target.scrollTop()):(a.width=s(window).width(),a.height=s(window).height());var l=n,c="auto",h=this.options.openPolicy;switch("selected"!==h||this.selection||(h="auto"),h){case"above":c=r-o;break;case"coverAbove":c=r-o+e;break;case"below":c=r+e;break;case"coverBelow":c=r;break;case"selected":c=r-this.$options.find(".selected").position().top;break;default:c=r-this.$target.scrollTop()+o>a.top+a.height?r-o+e:r}l-=a.left,c-=a.top,this.$options.css({left:l,top:c})},open:function(){this.isDisabled()||(this.renderOptions(),this.$options.appendTo(this.options.target),this.$options.addClass("rendered"),this.position(),this.$el.addClass("opened"),this.respectWindowBoundaries(),this.alignOptionsArrow())},respectWindowBoundaries:function(){var t=this.calculateElOverflow(this.$options),e={left:0,top:0};this.$options.outerWidth()<=this.$target.innerWidth()&&(t.left&&t.right||(t.left?e.left=t.left:t.right&&(e.left=-t.right))),this.$options.outerHeight()<=this.$target.innerHeight()&&(t.top&&t.bottom||(t.top?e.top=t.top:t.bottom&&(e.top=-t.bottom))),this.$options.css({left:"+="+e.left,top:"+="+e.top})},alignOptionsArrow:function(){var t=this.$el[0].getBoundingClientRect(),e=this.$options[0].getBoundingClientRect(),i=t.left+t.width/2;i-=e.left,i-=this.$optionsArrow.outerWidth()/2,this.$optionsArrow.css({left:i})},close:function(){this.removeOptions(),this.$el.removeClass("opened"),this.trigger("close")},onRemove:function(){this.removeOptions(),s(document).off(".selectBox",this.onOutsideClick),this.options.keyboardNavigation&&s(document).off(".selectBox",this.onKeydown)},onKeydown:function(t){if(this.isOpen()){var e;switch(t.which){case 39:case 40:e=1;break;case 38:case 37:e=-1;break;case 13:var i=this.getOptionHoverIndex();return void(i>=0&&this.select(i));case 27:return this.close();default:return}t.preventDefault()
;var n=this.getOptionHoverIndex(),r=n+e,o=this.options.options;r<0&&(r=o.length-1),r>=o.length&&(r=0),this.markOptionHover(r),this.trigger("option:hover",this.options.options[r],r)}},isDisabled:function(){return this.$el.hasClass("disabled")},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.close(),this.$el.addClass("disabled")},onSetTheme:function(t,e){this.$options&&(t&&this.$options.removeClass(this.themeClassNamePrefix+t),this.$options.addClass(this.themeClassNamePrefix+e))},calculateElOverflow:function(t,e){e||(e=window),t instanceof jQuery&&(t=t[0]),e instanceof jQuery&&(e=e[0]);var i,n={},r=t.getBoundingClientRect();if(e===window){var s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;i={width:s,height:a,left:0,top:0,right:s,bottom:a}}else i=e.getBoundingClientRect();return o.each(["left","top"],function(t){n[t]=Math.min(0,r[t]-i[t])}),o.each(["right","bottom"],function(t){n[t]=Math.min(0,i[t]-r[t])}),o.each(n,function(t,e){n[e]=Math.abs(Math.round(t))}),n}}),d.ui.ColorPalette=d.ui.SelectBox.extend({className:"select-box color-palette",position:function(){var t=this.$(".select-box-selection"),e=t.outerHeight(),i=t.offset(),n=i.left,r=i.top+e;if(this.options.target!==document.body){this.$target=this.$target||s(this.options.target);var o=this.$target.offset();n-=o.left-this.$target.scrollLeft(),r-=o.top-this.$target.scrollTop()}this.$options.css({left:n,top:r})},renderOptionContent:function(t){var e=s("<div/>",{class:"select-box-option-content"});return e.css("background-color",t.content),t.icon&&e.prepend(s("<img/>",{class:"select-box-option-icon",src:t.icon})),e}}),d.ui.SelectButtonGroup=d.mvc.View.extend({className:"select-button-group",events:{"click .select-button-group-button":"onSelect","mouseover .select-button-group-button":"onOptionHover",mouseleave:"onMouseOut","mousedown .select-button-group-button":"pointerdown","touchstart .select-button-group-button":"pointerdown","mouseup .select-button-group-button":"pointerup","touchend .select-button-group-button":"pointerup"},options:{buttonWidth:void 0,buttonHeight:void 0,options:[],disabled:!1,multi:!1,selected:void 0},init:function(){o.bindAll(this,"onSelect","pointerup"),this.$el.data("view",this);var t=this.options.multi;o.isUndefined(this.options.selected)?this.selection=t?o.filter(this.options.options,{selected:!0}):o.findWhere(this.options.options,{selected:!0}):this.selection=t?o.isArray(this.options.selected)?o.filter(this.options.options,function(t,e){return o.contains(this.options.selected,e)},this):[this.options.options[this.options.selected]]:this.options.options[this.options.selected]},render:function(){return this.renderOptions(this.selection),this.options.width&&this.$el.css("width",this.options.width),this.options.disabled&&this.disable(),this.$el.append(this.$options),this},renderOptions:function(){this.removeOptions();var t=this.options.multi;o.each(this.options.options,function(e,i){var n=t?o.contains(this.selection,e):this.selection===e,r=this.renderOption(e,i,n);this.$el.append(r),n&&r.addClass("selected")},this)},removeOptions:function(){this.$el.empty()},renderOption:function(t,e,i){var n=this.renderOptionContent(t,i);n.data("index",e);var r=t.buttonWidth||this.options.buttonWidth;r&&n.css("width",r);var o=t.buttonHeight||this.options.buttonHeight;return o&&n.css("height",o),n},renderOptionContent:function(t,e){var i=s("<div/>",{class:"select-button-group-button",html:t.content});if(t.icon||e&&t.iconSelected){var n=s("<img/>",{class:"select-button-group-button-icon",src:e&&t.iconSelected?t.iconSelected:t.icon}),r=t.iconWidth||this.options.iconWidth;r&&n.css("width",r);var o=t.iconHeight||this.options.iconHeight;o&&n.css("height",o),i.prepend(n)}return d.util.setAttributesBySelector(i,t.attrs),i},getOptionIndex:function(t){return s(t).closest(".select-button-group-button").data("index")},onSelect:function(t){if(!this.isDisabled()){var e=this.getOptionIndex(t.target);this.select(e,{ui:!0})}},onOptionHover:function(t){if(!this.isDisabled()){var e=this.getOptionIndex(t.target);this.trigger("option:hover",this.options.options[e],e)}},onMouseOut:function(t){this.isDisabled()||this.trigger("mouseout",t)},getSelection:function(){return this.selection},getSelectionValue:function(t){if(t=t||this.selection)return this.options.multi?o.map(t,function(t){return o.isUndefined(t.value)?t.content:t.value}):o.isUndefined(t.value)?t.content:t.value},select:function(t,e){var i=this.options.options[t],n=s(this.$(".select-button-group-button")[t]);if(this.options.multi){n.toggleClass("selected");var r=n.hasClass("selected");r?-1===this.selection.indexOf(i)&&this.selection.push(i):this.selection=o.without(this.selection,i),i.iconSelected&&n.find(".select-button-group-button-icon").attr("src",r?i.iconSelected:i.icon)}else{this.selection=i;var a=this.$(".selected"),l=this.options.options[a.index()];a.removeClass("selected"),n.addClass("selected"),l&&l.iconSelected&&a.find(".select-button-group-button-icon").attr("src",l.icon),this.selection.iconSelected&&n.find(".select-button-group-button-icon").attr("src",this.selection.iconSelected)}this.trigger("option:select",this.selection,t,e)},selectByValue:function(t,e){o.isArray(t)||(t=[t]);for(var i=this.options.options||[],n=0;n<i.length;n++){var r=i[n];o.isUndefined(r.value)&&o.contains(t,r.content)?this.select(n,e):!o.isUndefined(r.value)&&o.contains(t,r.value)&&this.select(n,e)}},deselect:function(){this.$(".selected").removeClass("selected"),this.options.multi?this.selection=[]:this.selection=void 0},isDisabled:function(){return this.$el.hasClass("disabled")},enable:function(){this.$el.removeClass("disabled")},disable:function(){this.$el.addClass("disabled")},pointerdown:function(t){var e=this.getOptionIndex(t.target);s(this.$(".select-button-group-button")[e]).addClass("is-in-action"),s(document).on("mouseup.select-button-group touchend.select-button-group",this.pointerup)},pointerup:function(){this.$(".is-in-action").removeClass("is-in-action"),s(document).off("mouseup.select-button-group touchend.select-button-group")}}),d.ui.Navigator=d.mvc.View.extend({className:"navigator",events:{"mousedown .paper":"scrollTo","touchstart .paper":"scrollTo",mousedown:"startAction",touchstart:"startAction"},options:{paperConstructor:d.dia.Paper,paperOptions:{},zoomOptions:null,zoom:{min:.5,max:2},width:300,height:200,padding:10},init:function(){this.options.zoomOptions?this.options.zoom=o.extend({},this.options.zoom,this.options.zoomOptions):this.options.zoom&&(this.options.zoom=o.defaults({},this.options.zoom,this.constructor.prototype.options.zoom)),o.bindAll(this,"updateCurrentView","doAction","stopAction"),this.updateCurrentView=o.debounce(this.updateCurrentView,0);var t=this.options.paperScroller;t.$el.on("scroll.navigator",this.updateCurrentView);var e=this.sourcePaper=t.options.paper;this.listenTo(e,"resize",this.updatePaper);this.targetPaper=new this.options.paperConstructor(o.merge({model:e.model,interactive:!1},this.options.paperOptions));s(document.body).on({"mousemove.navigator touchmove.navigator":this.doAction,"mouseup.navigator touchend.navigator":this.stopAction})},render:function(){if(this.targetPaper.$el.appendTo(this.el),this.sourcePaper.model.get("cells").each(this.targetPaper.renderView,this.targetPaper),this.$currentView=s("<div>").addClass("current-view"),this.options.zoom){var t=s("<div>").addClass("current-view-control");this.$currentView.append(t)}return this.$el.append(this.$currentView).css({width:this.options.width,height:this.options.height,padding:this.options.padding}),this.updatePaper(this.sourcePaper.options.width,this.sourcePaper.options.height),this},updatePaper:function(t,e){var i=this.sourcePaper.options.origin,n=h(this.sourcePaper.viewport).scale(),r=this.options.width-2*this.options.padding,o=this.options.height-2*this.options.padding;t/=n.sx,e/=n.sy;var s=this.ratio=Math.min(r/t,o/e),a=i.x*s/n.sx,l=i.y*s/n.sy;t*=s,e*=s,this.targetPaper.setDimensions(t,e),this.targetPaper.setOrigin(a,l),this.targetPaper.scale(s,s),this.updateCurrentView()},updateCurrentView:function(){var t=this.ratio,e=h(this.sourcePaper.viewport).scale(),i=this.options.paperScroller,n=i.toLocalPoint(0,0),r=this.targetPaper.$el.position(),o=h(this.targetPaper.viewport).translate();o.ty=o.ty||0,this.currentViewGeometry={top:r.top+n.y*t+o.ty,left:r.left+n.x*t+o.tx,width:i.$el.innerWidth()*t/e.sx,height:i.$el.innerHeight()*t/e.sy},this.$currentView.css(this.currentViewGeometry)},startAction:function(t){t=d.util.normalizeEvent(t),this._action=s(t.target).hasClass("current-view-control")?"zooming":"panning",this._clientX=t.clientX,this._clientY=t.clientY},doAction:function(t){if(this._action){t=d.util.normalizeEvent(t);var e=h(this.sourcePaper.viewport).scale(),i=(t.clientX-this._clientX)*e.sx,n=(t.clientY-this._clientY)*e.sy;switch(this._action){case"panning":this.options.paperScroller.el.scrollLeft+=i/this.ratio,this.options.paperScroller.el.scrollTop+=n/this.ratio;break;case"zooming":var r=-i/this.currentViewGeometry.width;this.options.paperScroller.zoom(r,this.options.zoom)}this._clientX=t.clientX,this._clientY=t.clientY}},stopAction:function(){this._action=null},scrollTo:function(t){t=d.util.normalizeEvent(t);var e=h(this.targetPaper.viewport).translate();e.ty=e.ty||0;var i,n;if(o.isUndefined(t.offsetX)){var r=this.targetPaper.$el.offset();i=t.pageX-r.left,n=t.pageY-r.top}else i=t.offsetX,n=t.offsetY;var s=(i-e.tx)/this.ratio,a=(n-e.ty)/this.ratio;this.options.paperScroller.center(s,a)},onRemove:function(){this.targetPaper.remove(),this.options.paperScroller.$el.off(".navigator"),s(document.body).off(".navigator")}}),d.ui.TreeLayoutView=d.mvc.View.extend({MINIMAL_PREVIEW_SIZE:10,className:"tree-layout",options:{previewAttrs:{child:{},parent:{rx:2,ry:2}},useModelGeometry:!1,clone:function(t){return t.clone()},canInteract:o.constant(!0)},init:function(){o.bindAll(this,"onPointermove","onPointerup"),this.toggleDefaultInteraction(!1),this.startListening(),this.render(),this.onSetTheme(null,this.theme)},startListening:function(){var t=this.options.paper;this.listenTo(t,"element:pointerdown",this.canInteract(this.onPointerdown))},toggleDefaultInteraction:function(t){this.options.paper.setInteractivity(t)},render:function(){var t=this.options.paper;return this.$activeBox=s("<div>").addClass("tree-layout-box active hidden").appendTo(this.el),this.draggingPaper=new d.dia.Paper({model:new d.dia.Graph,interactive:!1,width:"100%",height:"100%"}),this.$translateBox=s("<div>").addClass("tree-layout-box translate hidden").append(this.draggingPaper.render().el).appendTo(this.el),this.$mask=s("<div>").addClass("tree-layout-mask"),this.svgViewport=h(t.viewport),this.svgPreviewChild=h("circle").attr(this.options.previewAttrs.child||{}).addClass("tree-layout-preview child"),this.svgPreviewConnection=h("path").attr(this.options.previewAttrs.link||{}).addClass("tree-layout-preview link"),this.svgPreviewParent=h("rect").attr(this.options.previewAttrs.parent||{}).addClass("tree-layout-preview parent"),this.svgPreview=h("g").addClass("tree-layout-preview-group").append([this.svgPreviewConnection,this.svgPreviewParent,this.svgPreviewChild]),this.$el.appendTo(t.el),this},onSetTheme:function(t,e){var i=[this.svgPreview,this.$mask];o.each(i,function(i){i&&(t&&i.removeClass(this.themeClassNamePrefix+t),i.addClass(this.themeClassNamePrefix+e))},this)},onRemove:function(){this.svgPreview.remove()},toggleDropping:function(t){this.$mask.toggleClass("dropping-not-allowed",!t),this.$translateBox.toggleClass("no-drop",!t)},canDrop:function(){return this.isActive()&&!this.$translateBox.hasClass("no-drop")},isActive:function(){return!this.$translateBox.hasClass("hidden")},_startDrag:function(t,e,i){var n=this.options.paper;this.$mask.appendTo(n.el),this.toggleDropping(!1),this.ctm=n.viewport.getCTM();var r=o.first(t),s=r.findView(n),a=s.getBBox({useModelGeometry:this.options.useModelGeometry});this.updateBox(this.$translateBox,o.defaults({x:e,y:i},a)),this.updateBox(this.$activeBox,a),this.$activeBox.removeClass("hidden"),this.$translateBox.removeClass("hidden"),this.prepareDraggingPaper(r)},updateBox:function(t,e){t.css({width:e.width,height:e.height,left:e.x,top:e.y})},positionTranslateBox:function(t){var e=h.transformPoint(t,this.ctm);this.$translateBox.css({left:e.x,top:e.y})},prepareDraggingPaper:function(t){var e=this.options.clone(t).position(0,0);this.draggingPaper.scale(this.ctm.a,this.ctm.d),this.draggingPaper.model.resetCells([e])},_doDrag:function(t,e,i){var n,r,s=this.model,a={x:e,y:i};if(this.candidate&&(this.candidate=null,this.hidePreview()),this.positionTranslateBox(a),n=s.getMinimalRootAreaByPoint(a),n&&(r=n.findMinimalAreaByPoint(a,{expandBy:Math.min(s.get("siblingGap"),s.get("gap"))/2})),r){var l=this.findDirection(r,a),c=r.getLayoutSiblings(l),h=c.getSiblingRankByPoint(a);o.every(t,o.partial(this.isConnectionValid,o,c,h),this)?(this.candidate={id:r.root.id,direction:l,siblingRank:h+.5},this.updatePreview(c,h),this.showPreview(),this.toggleDropping(!0)):this.toggleDropping(!1)}else this.toggleDropping(!0)},_finishDrag:function(t,e,i){this.$mask.remove().removeClass("dropping-not-allowed"),this.candidate?(o.each(t,o.partial(this.reconnectElement,o,this.candidate),this),this.candidate=null,this.model.layout({ui:!0})):this.canDrop()&&(o.each(t,o.partial(this.translateElement,o,e,i),this),this.model.layout({ui:!0})),this.$activeBox.addClass("hidden"),this.$translateBox.addClass("hidden"),this.hidePreview()},reconnectElement:function(t,e){var i={direction:e.direction,siblingRank:e.siblingRank,ui:!0};if(!this.model.reconnectElement(t,e.id,i)){var n=this.options.paper,r=n.getDefaultLink(t.findView(n));r.set({source:{id:e.id},target:{id:t.id}}),r.addTo(n.model,i),this.model.changeSiblingRank(t,e.siblingRank,i),this.model.changeDirection(t,e.direction,i);var o=this.model.getAttribute(t,"direction");this.model.updateDirections(t,[o,e.direction],i)}},translateElement:function(t,e,i){var n=this.model.graph.getConnectedLinks(t,{inbound:!0});o.invoke(n,"remove");var r=t.get("size");t.set("position",{x:e-r.width/2,y:i-r.height/2},{ui:!0})},updatePreview:function(t,e){var i=t.parentArea.root,n=Math.max(this.model.get("siblingGap")/2,this.MINIMAL_PREVIEW_SIZE),r={width:n,height:n},o=t.getNeighborPointFromRank(e),s=t.getConnectionPoints(o,{ignoreSiblings:!0}),a=t.getParentConnectionPoint(),l=t.getChildConnectionPoint(o,r);this.updateParentPreview(i.get("position"),i.get("size")),this.updateChildPreview(o,r),this.updateConnectionPreview(a,l,s)},showPreview:function(){this.svgViewport.append(this.svgPreview)},hidePreview:function(){this.svgPreview.remove()},updateParentPreview:function(t,e){this.svgPreviewParent.attr({x:t.x,y:t.y,width:e.width,height:e.height})},updateChildPreview:function(t,e){this.svgPreviewChild.attr({cx:t.x,cy:t.y,r:e.width/2})},updateConnectionPreview:function(t,e,i){this.svgPreviewConnection.attr({d:d.connectors.rounded(t,e,i,{})})},findDirection:function(t,e){var i,n=t.root.get("layout")||t.getType();switch(n){case"BL-BR":case"TL-TR":case"L-R":return i=n.split("-"),e.x>t.rootCX?i[1]:i[0];case"BL-TL":case"BR-TR":case"B-T":return i=n.split("-"),e.y>t.rootCY?i[0]:i[1];case"L":case"R":case"T":case"B":case"TR":case"TL":case"BR":case"BL":return n;default:return t.direction}},isConnectionValid:function(t,e,i){if(t.id==e.parentArea.root.id)return!1;if(this.model.graph.isSuccessor(t,e.parentArea.root))return!1;var n=this.model.getLayoutArea(t);if(n.parentArea&&n.parentArea==e.parentArea&&n.direction==e.direction){var r=n.siblingRank-i;if(0===r||1===r)return!1}return!0},canInteract:function(t){return o.bind(function(e){this.options.canInteract(e)&&t.apply(this,arguments)},this)},getEventNamespace:function(){return".tree-layout-"+this.cid},startDragging:function(t,e,i){var n=o.isArray(t)?t:[t];o.isEmpty(n)||(this._registerPointerEvents(),this._moveCounter=0,this._draggedElements=n)},onPointerdown:function(t,e,i,n){this.startDragging(t.model,i,n)},onPointermove:function(t){var e=this.options.paper,i=e.clientToLocalPoint({x:t.clientX,y:t.clientY});this._moveCounter===e.options.clickThreshold?this._startDrag(this._draggedElements,i.x,i.y):this._moveCounter>e.options.clickThreshold&&this._doDrag(this._draggedElements,i.x,i.y),this._moveCounter++},onPointerup:function(t){var e=this.options.paper;if(this._moveCounter>=e.options.clickThreshold){var i=e.clientToLocalPoint({x:t.clientX,y:t.clientY});this._finishDrag(this._draggedElements,i.x,i.y)}this._draggedElements=null,this._unregisterPointerEvents()},_registerPointerEvents:function(){var t=this.getEventNamespace();s(document).on("mousemove"+t+" touchmove"+t,this.onPointermove).on("mouseup"+t+" touchend"+t,this.onPointerup)},_unregisterPointerEvents:function(){s(document).off(this.getEventNamespace())}}),d.layout.ForceDirected=r.Model.extend({defaults:{linkDistance:10,linkStrength:1,charge:10},initialize:function(t){this.elements=this.get("graph").getElements(),this.links=this.get("graph").getLinks(),this.cells=this.get("graph").get("cells"),this.width=this.get("width"),this.height=this.get("height"),this.gravityCenter=this.get("gravityCenter"),this.t=1,this.energy=1/0,this.progress=0},start:function(){var t=this.get("width"),e=this.get("height");o.each(this.elements,function(i){i.set("position",{x:Math.random()*t,y:Math.random()*e}),i.charge=i.get("charge")||this.get("charge"),i.weight=i.get("weight")||1;var n=i.get("position");i.x=n.x,i.y=n.y,i.px=i.x,i.py=i.y,i.fx=0,i.fy=0},this),o.each(this.links,function(t){t.strength=t.get("strength")||this.get("linkStrength"),t.distance=t.get("distance")||this.get("linkDistance"),t.source=this.cells.get(t.get("source").id),t.target=this.cells.get(t.get("target").id)},this)},step:function(){if(.99*this.t<.005)return this.notifyEnd();var t=this.width,e=this.height,i=this.gravityCenter,n=this.energy;this.energy=0;var r,o,s=0,a=0,l=0,c=0,h=this.elements.length,u=this.links.length;for(r=0;r<h-1;r++){var d=this.elements[r];for(s+=d.x,a+=d.y,o=r+1;o<h;o++){var p=this.elements[o],f=p.x-d.x,g=p.y-d.y,m=f*f+g*g,v=Math.sqrt(m),y=this.t*d.charge/m,b=y*f,I=y*g;d.fx-=b,d.fy-=I,p.fx+=b,p.fy+=I,this.energy+=b*b+I*I}}for(s+=this.elements[h-1].x,a+=this.elements[h-1].y,r=0;r<u;r++){var x=this.links[r],d=x.source,p=x.target,f=p.x-d.x,g=p.y-d.y,m=f*f+g*g,v=Math.sqrt(m),C=this.t*x.strength*(v-x.distance)/v,b=C*f,I=C*g,w=d.weight/(d.weight+p.weight);d.x+=b*(1-w),d.y+=I*(1-w),p.x-=b*w,p.y-=I*w,this.energy+=b*b+I*I}for(r=0;r<h;r++){var A=this.elements[r],M={x:A.x,y:A.y};i&&(M.x+=(i.x-M.x)*this.t*.1,M.y+=(i.y-M.y)*this.t*.1),M.x+=A.fx,M.y+=A.fy,M.x=Math.max(0,Math.min(t,M.x)),M.y=Math.max(0,Math.min(e,M.y));M.x+=.9*(A.px-M.x),M.y+=.9*(A.py-M.y),A.px=M.x,A.py=M.y,A.fx=A.fy=0,A.x=M.x,A.y=M.y,l+=A.x,c+=A.y,this.notify(A,r,M)}this.t=this.cool(this.t,this.energy,n);var N=s-l,k=a-c;Math.sqrt(N*N+k*k)<1&&this.notifyEnd()},cool:function(t,e,i){return e<i?(this.progress+=1,this.progress>=5?(this.progress=0,t/.99):t):(this.progress=0,.99*t)},notify:function(t,e,i){t.set("position",i)},notifyEnd:function(){this.trigger("end")}}),d.layout=d.layout||{},d.layout.GridLayout={layout:function(t,e){var i;i=t instanceof d.dia.Graph?t:(new d.dia.Graph).resetCells(t),t=null,e=e||{};var n=i.getElements(),r=e.columns||1,s=e.dx||0,a=e.dy||0,l=e.columnWidth||this._maxDim(n,"width")+s,c=e.rowHeight||this._maxDim(n,"height")+a,h=o.isUndefined(e.centre)||!1!==e.centre,u=!!e.resizeToFit,p=e.marginX||0,f=e.marginY||0;i.startBatch("layout"),o.each(n,function(t,e){var i=0,n=0,o=t.get("size");if(u){var d=l-2*s,g=c-2*a,m=o.height*(o.width?d/o.width:1),v=o.width*(o.height?g/o.height:1);m>c?d=v:g=m,o={width:d,height:g},t.set("size",o)}h&&(i=(l-o.width)/2,n=(c-o.height)/2),i+=p,n+=f,t.set("position",{x:e%r*l+s+i,y:Math.floor(e/r)*c+a+n})}),i.stopBatch("layout")},_maxDim:function(t,e){return o.reduce(t,function(t,i){return Math.max(i.get("size")[e],t)},0)}},function(t,e,i,n){function r(t,e,n){n=i.defaults(n||{},{siblingGap:0}),this.width=0,this.height=0,this.layoutAreas=this.sortLayoutAreas(t),this.parentArea=e,this.siblingGap=n.siblingGap,this.exists()&&this.computeSize(n)}function o(t,e,n){var r=i.extend({},n,this.getRootAttributes(t,n.attributeNames)),o=n.gap||0;i.defaults(r,{parentGap:o,siblingGap:o,firstChildGap:o}),this.root=t,this.childAreas=e,this.siblingRank=r.siblingRank,this.rootOffset=r.rootOffset,this.nextSiblingGap=r.nextSiblingGap,this.prevSiblingGap=r.prevSiblingGap,this.gap=this.parentGap=r.parentGap,this.firstChildGap=r.firstChildGap,this.dx=0,this.dy=0,this.width=0,this.height=0,i.invoke(e,"addParentReference",this),this.computeRelativePosition(t,e,r)}i.extend(r.prototype,{sortLayoutAreas:function(t){var e=i.sortBy(t,"siblingRank");return i.each(e,function(t,e){t.siblingRank=e}),e},move:function(t,e){i.each(this.layoutAreas,function(i){i.dx+=t,i.dy+=e})},exists:function(){return this.layoutAreas.length>0},sumGaps:function(t){return Math.max(this.layoutAreas.length-1,0)*t},getSiblingRankByPoint:function(t){if(!this.exists())return-1;var e=this.findAreaByPoint(t);return e?e.siblingRank-1:this.layoutAreas.length-1},getFirstChildConnectionPoints:function(){return[]},getConnectionPoints:function(t,e){if(!this.exists())return this.getFirstChildConnectionPoints(t);var i={dx:t.x-this.parentArea.rootCX,dy:t.y-this.parentArea.rootCY};return this.layoutAreas[0].getRootVertices(i,e)},getParentConnectionPoint:function(){var t=this.parentArea,e=this.proxyLayoutArea("getConnectionPoint",t.rootSize);return n.point(t.rootCX,t.rootCY).offset(e.x,e.y)},getChildConnectionPoint:function(t,e){var i=this.proxyLayoutArea("getConnectionPoint",e);return n.point(t).difference(i)},proxyLayoutArea:function(t){var e=Array.prototype.slice.call(arguments,1);return o.fromDirection(this.direction).prototype[t].apply(this.parentArea,e)}}),r.extend=e.Model.extend;var s=r.extend({getTopDY:function(){return-this.height/2},findAreaByPoint:function(t){return i.find(this.layoutAreas,function(e){return e.rootCY>t.y})},computeSize:function(t){this.height=this.sumGaps(t.siblingGap),this.height+=i.sum(this.layoutAreas,function(t){return t.height+t.prevSiblingGap+t.nextSiblingGap}),i.reduce(this.layoutAreas,function(e,i){return this.width=Math.max(this.width,i.getExtendedWidth()),i.dy+=e+i.getCY(),e+i.prevSiblingGap+i.height+i.nextSiblingGap+t.siblingGap},this.getTopDY(),this)},getYTowardsParent:function(){return this.parentArea.rootCY},getXTowardsParent:function(){var t=this.parentArea;return t.rootCX+this.LRSign*(t.rootSize.width/2+t.gap)},getNeighborPointFromRank:function(t){var e,i=this.siblingGap;if(this.exists()){var n=this.layoutAreas[t],r=this.layoutAreas[t+1];e=n?r?(n.y+n.height+r.y)/2:n.y+n.height+i/2:r.y-i/2}else e=this.getYTowardsParent();return{x:this.getXTowardsParent(),y:e}}}),a=s.extend({direction:"L",LRSign:-1}),l=s.extend({direction:"R",LRSign:1}),c={getXTowardsParent:function(){var t=this.parentArea;return t.rootCX+this.LRSign*t.gap},getYTowardsParent:function(){var t=this.parentArea,e=t.getLRHeight(t.siblings)/2;return e+=Math.min(t.firstChildGap,this.siblingGap/2),t.rootCY+this.TBSign*e},getFirstChildConnectionPoints:function(t){return[n.point(this.parentArea.rootCX,t.y)]},getChildConnectionPoint:function(t,e){return n.point(t).offset(-this.LRSign*e.width/2,0)},getParentConnectionPoint:function(){var t=this.parentArea;return n.point(t.rootCX,t.rootCY).offset(0,this.TBSign*t.rootSize.height/2)}},h={getTopDY:function(){var t=this.layoutAreas[0];return t?t.prevSiblingGap:0}},u={getTopDY:function(){return-this.height}},d=s.extend({direction:"BR",LRSign:1,TBSign:1});i.extend(d.prototype,c,h);var p=s.extend({direction:"BL",LRSign:-1,TBSign:1});i.extend(p.prototype,c,h);var f=s.extend({direction:"TR",LRSign:1,TBSign:-1});i.extend(f.prototype,c,u);var g=s.extend({direction:"TL",LRSign:-1,TBSign:-1});i.extend(g.prototype,c,u);var m=r.extend({getLeftDX:function(){return-this.width/2},findAreaByPoint:function(t){return i.find(this.layoutAreas,function(e){return e.rootCX>t.x})},computeSize:function(t){this.width=this.sumGaps(t.siblingGap),this.width+=i.sum(this.layoutAreas,function(t){return t.width+t.prevSiblingGap+t.nextSiblingGap}),i.reduce(this.layoutAreas,function(e,i){return this.height=Math.max(this.height,i.getExtendedHeight()),i.dx+=e+i.getCX(),e+i.prevSiblingGap+i.width+i.nextSiblingGap+t.siblingGap},this.getLeftDX(),this)},getNeighborPointFromRank:function(t){var e;if(this.exists()){var i=this.layoutAreas[t],n=this.layoutAreas[t+1];e=i?n?(i.x+i.width+n.x)/2:i.x+i.width+this.siblingGap/2:n.x-this.siblingGap/2}else e=this.parentArea.rootCX;return{x:e,y:this.getYTowardsParent()}}}),v=m.extend({direction:"T",getYTowardsParent:function(){var t=this.parentArea;return t.rootCY-t.getLRHeight()/2-t.gap}}),y=m.extend({direction:"B",getYTowardsParent:function(){var t=this.parentArea;return t.rootCY+t.getLRHeight()/2+t.gap}});i.extend(o,{create:function(t,e,i,n){var r=o.fromDirection(t,n);return new r(e,i,n)},fromDirection:function(t,e){var i;switch(t){case"L":i=I;break;case"T":i=x;break;case"R":i=b;break;case"B":i=C;break;case"BR":i=w;break;case"BL":i=A;break;case"TR":i=M;break;case"TL":i=N;break;default:i=o}return i}}),i.extend(o.prototype,{direction:null,getHeight:function(t,e){return this.getTHeight(t)+this.getBHeight(t)+this.getLRHeight()},getWidth:function(t,e){return Math.max(t.T.width,t.B.width,this.getXLRWidth(t,e))},getLRHeight:function(){return Math.max(this.rootSize.height,this.siblings.L.height,this.siblings.R.height)},getTHeight:function(t){return t.T.height+this.getTXHeight(t)},getBHeight:function(t){return t.B.height+this.getBXHeight(t)},getXLRWidth:function(t,e){return this.getLWidth(t,e)+e.width+this.getRWidth(t,e)},getXRWidth:function(t,e){var i=Math.max(t.BR.width,t.TR.width);return i>0&&(i-=e.width/2),i},getTXHeight:function(t){var e=Math.max(t.TR.height,t.TL.height);return e>0&&(e+=this.firstChildGap),e},getBXHeight:function(t){var e=Math.max(t.BR.height,t.BL.height);return e>0&&(e+=this.firstChildGap),e},getXLWidth:function(t,e){var i=Math.max(t.BL.width,t.TL.width);return i>0&&(i-=e.width/2),i},getRWidth:function(t,e){return Math.max(t.R.width,this.getXRWidth(t,e))},getLWidth:function(t,e){return Math.max(t.L.width,this.getXLWidth(t,e))},getTBOverlap:function(t,e){var i=Math.max(t.T.width,t.B.width);return i>0&&(i-=e.width,i/=2),i},getMinimalGap:function(t){return Math.min(t.siblingGap,this.firstChildGap,this.parentGap)},getBBox:function(t){var e=n.rect(this),i=t&&t.expandBy;return i&&e.moveAndExpand({x:-i,y:-i,width:2*i,height:2*i}),e},containsPoint:function(t,e){return this.getBBox(e).containsPoint(t)},getLayoutSiblings:function(t){return this.siblings[t]},getExtendedWidth:function(){return this.width+this.gap+this.rootOffset},getExtendedHeight:function(){return this.height+this.gap+this.rootOffset},findMinimalAreaByPoint:function(t,e){if(!this.containsPoint(t,e))return null;var n;return i.some(this.childAreas,function(i){return!!(n=i.findMinimalAreaByPoint(t,e))}),n||this},getType:function(){return i.reduce(this.siblings,function(t,e,i){return e.exists()?t.concat(i):t},[]).sort().join("-")},addParentReference:function(t){this.parentArea=t},getRootAttributes:function(t,e){var n=t.get(e.siblingRank||"siblingRank");return{siblingRank:i.isNumber(n)?n:null,rootOffset:t.get(e.offset||"offset")||0,rootMargin:t.get(e.margin||"margin")||0,prevSiblingGap:t.get(e.prevSiblingGap||"prevSiblingGap")||0,nextSiblingGap:t.get(e.nextSiblingGap||"nextSiblingGap")||0}},getRootSize:function(t,e){var n=i.clone(t.get("size"));return n[this.marginDimension]+=e,n},createSiblings:function(t,e){var n=i.groupBy(t,"direction");return{L:new a(n.L,this,e),T:new v(n.T,this,e),R:new l(n.R,this,e),B:new y(n.B,this,e),BR:new d(n.BR,this,e),BL:new p(n.BL,this,e),TR:new f(n.TR,this,e),TL:new g(n.TL,this,e)}},computeSize:function(t,e){return{width:this.getWidth(t,e),height:this.getHeight(t,e)}},computeOrigin:function(){var t=this.siblings,e=this.rootSize,i=Math.max(this.getLWidth(t,e)+e.width/2,this.getXLWidth(t,e)+e.width/2,t.T.width/2,t.B.width/2);return{x:this.rootCX-i,y:this.rootCY-this.getTHeight(t)-this.getLRHeight()/2}},moveSiblings:function(t,e){if(this.hasHorizontalSiblings(t)){var i=e.width/2;t.L.move(-i,0),t.R.move(i,0)}if(this.hasVerticalSiblings(t)){var n=this.getLRHeight()/2;t.T.move(0,-n),t.B.move(0,n),t.BR.move(0,n),t.BL.move(0,n),t.B.move(0,this.getBXHeight(t)),t.TR.move(0,-n),t.TL.move(0,-n),t.T.move(0,-this.getTXHeight(t))}},moveRootToConnectionPoint:function(t){var e=this.getConnectionPoint(t);this.dx+=e.x,this.dy+=e.y},computeRelativePosition:function(t,e,n){var r=this.siblings=this.createSiblings(e,{siblingGap:n.siblingGap}),o=this.rootSize=this.getRootSize(t,n.rootMargin);i.extend(this,this.computeSize(r,o)),this.moveSiblings(r,o),this.moveRootToConnectionPoint(o),this.moveRootBehindSiblings(r,o),this.moveRootFromParent()},computeAbsolutePosition:function(){if(this.parentArea)this.rootCX=this.parentArea.rootCX+this.dx,this.rootCY=this.parentArea.rootCY+this.dy,this.level=this.parentArea.level+1;else{var t=this.root.getBBox().center();this.rootCX=t.x,this.rootCY=t.y,this.level=0}i.extend(this,this.computeOrigin())},hasVerticalSiblings:function(t){return t.T.exists()||t.B.exists()||t.BR.exists()||t.BL.exists()||t.TR.exists()||t.TL.exists()},hasHorizontalSiblings:function(t){return t.L.exists()||t.R.exists()},isSourceArea:function(){return!this.parentArea},isSinkArea:function(){return 0===this.childAreas.length},getRootPosition:function(){var t=this.root.get("size");return{x:this.rootCX-t.width/2,y:this.rootCY-t.height/2}},getRootVertices:function(t,e){if(e=e||{},t=t||this,0===t[this.deltaCoordinate]||!this.parentArea)return[];var n,r=this.parentArea.getInnerSize();if(!e.ignoreSiblings&&this.hasSiblingsBetweenParent()){var o=this.siblings[this.oppositeDirection];n=this.getRelativeVerticesAvoidingSiblings(r,t,o)}else n=this.getRelativeVertices(r,t);return i.invoke(n,"offset",this.parentArea.rootCX,this.parentArea.rootCY)},getInnerSize:function(){return{width:this.rootSize.width,height:this.getLRHeight()}},getConnectionPoint:function(){return null},getRelativeVertices:function(){return null},moveRootFromParent:function(){},moveRootBehindSiblings:function(){},hasSiblingsBetweenParent:function(){return!this.isSourceArea()&&this.siblings[this.oppositeDirection].exists()},getCY:function(){return this.height/2+this.prevSiblingGap},getCX:function(){return this.width/2+this.prevSiblingGap}}),o.extend=e.Model.extend;var b=o.extend({direction:"R",oppositeDirection:"L",deltaCoordinate:"dx",marginDimension:"height",getConnectionPoint:function(t){return n.point(t.width/2,0)},moveRootBehindSiblings:function(t,e){this.dx+=Math.max(this.getLWidth(t,e),this.getTBOverlap(t,e)),this.dy+=(this.getTHeight(t)-this.getBHeight(t))/2},moveRootFromParent:function(){this.dx+=this.parentGap+this.rootOffset},getRelativeVertices:function(t,e){var i=this.getConnectionPoint(t),n=this.parentGap/2;return[i.clone().offset(n,0),i.clone().offset(n,e.dy)]},getRelativeVerticesAvoidingSiblings:function(t,e,i){var n=this.getConnectionPoint(t),r=i.siblingGap,o=e.dy>0?-1:1,s=i.layoutAreas.length>1?1.5:1,a=e.dy+o*(i.height+r)/2,l=e.dy+o*this.rootSize.height/4,c=this.gap/2,h=s*c+i.width;return[n.clone().offset(c,0),n.clone().offset(c,a),n.clone().offset(h,a),n.clone().offset(h,l)]}}),I=o.extend({direction:"L",oppositeDirection:"R",deltaCoordinate:"dx",marginDimension:"height",getConnectionPoint:function(t){return n.point(-t.width/2,0)},moveRootBehindSiblings:function(t,e){this.dx-=Math.max(this.getRWidth(t,e),this.getTBOverlap(t,e)),this.dy+=(this.getTHeight(t)-this.getBHeight(t))/2},moveRootFromParent:function(){this.dx-=this.parentGap+this.rootOffset},getRelativeVertices:function(t,e){var i=this.getConnectionPoint(t),n=-this.parentGap/2;return[i.clone().offset(n,0),i.clone().offset(n,e.dy)]},getRelativeVerticesAvoidingSiblings:function(t,e,i){
var n=this.getConnectionPoint(t),r=i.siblingGap,o=e.dy>0?-1:1,s=i.layoutAreas.length>1?1.5:1,a=e.dy+o*(i.height+r)/2,l=e.dy+o*this.rootSize.height/4,c=this.gap/2,h=s*c+i.width;return[n.clone().offset(-c,0),n.clone().offset(-c,a),n.clone().offset(-h,a),n.clone().offset(-h,l)]}}),x=o.extend({direction:"T",oppositeDirection:"B",deltaCoordinate:"dy",marginDimension:"width",getConnectionPoint:function(t){return n.point(0,-t.height/2)},moveRootBehindSiblings:function(t,e){this.dx+=(this.getLWidth(t,e)-this.getRWidth(t,e))/2,this.hasHorizontalSiblings(t)&&(this.dy-=(this.getLRHeight()-e.height)/2),this.dy-=this.getBHeight(t)},moveRootFromParent:function(){this.dy-=this.parentGap+this.rootOffset},getRelativeVertices:function(t,e){var i=this.getConnectionPoint(t),n=-this.getTXHeight(this.parentArea.siblings)-this.parentGap/2;return[i.clone().offset(0,n),i.clone().offset(e.dx,n)]},getRelativeVerticesAvoidingSiblings:function(t,e,i){var n=this.getConnectionPoint(t),r=i.siblingGap,o=this.getTXHeight(this.parentArea.siblings)+this.parentGap/2,s=o+i.height;i.layoutAreas.length>1&&(s+=this.parentGap/4);var a=e.dx>0?-1:1,l=e.dx+a*(i.width+r)/2,c=e.dx+a*this.rootSize.width/4;return[n.clone().offset(0,-o),n.clone().offset(l,-o),n.clone().offset(l,-s),n.clone().offset(c,-s)]}}),C=o.extend({direction:"B",oppositeDirection:"T",deltaCoordinate:"dy",marginDimension:"width",getConnectionPoint:function(t){return n.point(0,t.height/2)},moveRootBehindSiblings:function(t,e){this.dx+=(this.getLWidth(t,e)-this.getRWidth(t,e))/2,this.dy+=this.getTHeight(t),this.hasHorizontalSiblings(t)&&(this.dy+=(this.getLRHeight()-e.height)/2)},moveRootFromParent:function(){this.dy+=this.parentGap+this.rootOffset},getRelativeVertices:function(t,e){var i=this.getConnectionPoint(t),n=this.getBXHeight(this.parentArea.siblings)+this.parentGap/2;return[i.clone().offset(0,n),i.clone().offset(e.dx,n)]},getRelativeVerticesAvoidingSiblings:function(t,e,i){var n=this.getConnectionPoint(t),r=i.siblingGap,o=this.getBXHeight(this.parentArea.siblings)+this.parentGap/2,s=o+i.height;i.layoutAreas.length>1&&(s+=this.parentGap/4);var a=e.dx>0?-1:1,l=e.dx+a*(i.width+r)/2,c=e.dx+a*this.rootSize.width/4;return[n.clone().offset(0,o),n.clone().offset(l,o),n.clone().offset(l,s),n.clone().offset(c,s)]}}),w=o.extend({direction:"BR",oppositeDirection:"L",deltaCoordinate:"dy",marginDimension:"height",getConnectionPoint:function(t){return n.point(0,t.height/2)},getCY:function(){return this.prevSiblingGap},moveRootBehindSiblings:function(t,e){var i=Math.max(t.T.width,t.B.width);this.dx+=Math.max(this.getLWidth(t,e),(i-e.width)/2),this.dy+=this.getTHeight(t),this.hasHorizontalSiblings(t)&&(this.dy+=(this.getLRHeight()-e.height)/2)},moveRootFromParent:function(){this.dy+=this.firstChildGap,this.dx+=this.rootSize.width/2+this.rootOffset+this.parentGap},getRelativeVertices:function(t,e){return[this.getConnectionPoint(t).clone().offset(0,e.dy-t.height/2)]},getRelativeVerticesAvoidingSiblings:function(t,e,i){var r=e.dx-this.rootSize.width/4,o=e.dy;return o+=Math.max(i.height,this.rootSize.height)/2,o+=this.getMinimalGap(i)/2,[n.point(0,o),n.point(r,o)]}}),A=o.extend({direction:"BL",oppositeDirection:"R",deltaCoordinate:"dy",marginDimension:"height",getConnectionPoint:function(t){return n.point(0,t.height/2)},getCY:function(){return this.prevSiblingGap},moveRootBehindSiblings:function(t,e){var i=Math.max(t.T.width,t.B.width);this.dx-=Math.max(this.getRWidth(t,e),(i-e.width)/2),this.dy+=this.getTHeight(t),this.hasHorizontalSiblings(t)&&(this.dy+=(this.getLRHeight()-e.height)/2)},moveRootFromParent:function(){this.dy+=this.firstChildGap,this.dx-=this.rootSize.width/2+this.rootOffset+this.parentGap},getRelativeVertices:function(t,e){return[this.getConnectionPoint(t).clone().offset(0,e.dy-t.height/2)]},getRelativeVerticesAvoidingSiblings:function(t,e,i){var r=e.dx+this.rootSize.width/4,o=e.dy;return o+=Math.max(i.height,this.rootSize.height)/2,o+=this.getMinimalGap(i)/2,[n.point(0,o),n.point(r,o)]}}),M=o.extend({direction:"TR",oppositeDirection:"L",deltaCoordinate:"dy",marginDimension:"height",getConnectionPoint:function(t){return n.point(0,t.height/2)},getCY:function(){return this.height-this.rootSize.height+this.prevSiblingGap},moveRootBehindSiblings:function(t,e){this.dx+=Math.max(this.getLWidth(t,e),this.getTBOverlap(t,e)),this.dy-=this.getBHeight(t),this.hasHorizontalSiblings(t)&&(this.dy-=(this.getLRHeight()-e.height)/2)},moveRootFromParent:function(){this.dy-=this.firstChildGap,this.dx+=this.rootSize.width/2+this.rootOffset+this.parentGap},getRelativeVertices:function(t,e){return[this.getConnectionPoint(t).clone().offset(0,e.dy-t.height/2)]},getRelativeVerticesAvoidingSiblings:function(t,e,i){var r=e.dx-this.rootSize.width/4,o=e.dy;return o-=Math.max(i.height,this.rootSize.height)/2,o-=this.getMinimalGap(i)/2,[n.point(0,o),n.point(r,o)]}}),N=o.extend({direction:"TL",oppositeDirection:"R",deltaCoordinate:"dy",marginDimension:"height",getConnectionPoint:function(t){return n.point(0,t.height/2)},getCY:function(){return this.height-this.rootSize.height+this.prevSiblingGap},moveRootBehindSiblings:function(t,e){this.dx-=Math.max(this.getRWidth(t,e),this.getTBOverlap(t,e)),this.dy-=this.getBHeight(t),this.hasHorizontalSiblings(t)&&(this.dy-=(this.getLRHeight()-e.height)/2)},moveRootFromParent:function(){this.dy-=this.firstChildGap,this.dx-=this.rootSize.width/2+this.rootOffset+this.parentGap},getRelativeVertices:function(t,e){return[this.getConnectionPoint(t).clone().offset(0,e.dy-t.height/2)]},getRelativeVerticesAvoidingSiblings:function(t,e,i){var r=e.dx+this.rootSize.width/4,o=e.dy;return o-=Math.max(i.height,this.rootSize.height)/2,o-=this.getMinimalGap(i)/2,[n.point(0,o),n.point(r,o)]}}),k={rotate:function(t){var e="LRBT",i=e.indexOf(t[0])-e.indexOf(t[1]);return function(t){var n=e.indexOf(t);return n>=0?e[(4+n-i)%4]:t}},flip:function(t){var e=t[0],i=t[1];return function(t){return t===e?i:t===i?e:t}},straighten:function(t){return i.constant(t[1])}},S=e.Model.extend({defaults:{graph:void 0,gap:20,parentGap:20,siblingGap:20,firstChildGap:20,direction:"R",directionRule:k.straighten,updatePosition:function(t,e,i){t.set("position",e,i)},updateVertices:function(t,e,i){t.set("vertices",e,i)},updateAttributes:null,filter:null,attributeNames:{}},initialize:function(){this._cacheOptions(this.attributes),this.layoutAreas={}},layout:function(t){return this.layoutAreas={},i.each(this.getGraphSources(t),i.partial(this.layoutTree,i,t),this),this.trigger("layout:done",t),this},layoutTree:function(t,e){e=e||{},e.treeLayout=!0;var i=this._computeLayoutAreas(t,this.get("direction"),e);return this._computeAbsolutePositions(i),this._updateCells(i,e),this},getLayoutArea:function(t){return this.layoutAreas[t.id||t]||null},getRootLayoutAreas:function(){return i.map(this.getGraphSources(),this.getLayoutArea,this)},getGraphSources:function(t){var e=this.graph.getSources();return this.filter&&e.length>0&&(e=this.filter(e,null,t)||e),e},getMinimalRootAreaByPoint:function(t){var e=i.filter(this.getRootLayoutAreas(),function(e){return e.containsPoint(t)});return i.isEmpty(e)?null:i.min(e,function(t){return t.width*t.height})},_computeLayoutAreas:function(t,e,n){var r=t.get(this.getAttributeName("direction"))||e,s=this._getChildren(t,n),a=i.map(s,i.partial(this._computeLayoutAreas,i,r,n),this),l=o.create(r,t,a,this.attributes);return l.link=this.graph.getConnectedLinks(t,{inbound:!0})[0],this.layoutAreas[t.id]=l,l},_cacheOptions:function(t){var e=["updateAttributes","updateVertices","updatePosition","filter"];i.each(e,function(e){this[e]=i.isFunction(t[e])?t[e]:null},this),this.graph=t.graph},_getChildren:function(t,e){var i=this.graph.getNeighbors(t,{outbound:!0});return this.filter&&i.length>0&&(i=this.filter(i,t,e)||i),i},_computeAbsolutePositions:function(t){t.computeAbsolutePosition(t),i.each(t.childAreas,this._computeAbsolutePositions,this)},_updateCells:function(t,e){var n=t.root,r=t.link||null;r&&(this.updatePosition&&this.updatePosition(n,t.getRootPosition(),e),this.updateVertices&&this.updateVertices(r,t.getRootVertices(),e)),this.changeSiblingRank(n,t.siblingRank,e),this.updateAttributes&&this.updateAttributes(t,n,r,e),i.each(t.childAreas,i.partial(this._updateCells,i,e),this)},updateDirections:function(t,e,n){n=n||{};var r=this.getAttributeName("direction"),o=this.get("directionRule")(e);this.graph.search(t,i.bind(function(t,e){if(0!==e){var i=o(t.get(r));this.changeDirection(t,i,n)}},this),{outbound:!0})},reconnectElement:function(t,e,i){i=i||{};var n=this.getLayoutArea(t),r=n.link;if(r){r.set("source",{id:e.id||e},i);var o=n.direction,s=i.direction||o,a=i.siblingRank||void 0;return this.changeSiblingRank(t,a,i),this.changeDirection(t,s,i),o!==s&&this.updateDirections(t,[o,i.direction],i),!0}return!1},changeSiblingRank:function(t,e,i){t.set(this.getAttributeName("siblingRank"),e,i)},changeDirection:function(t,e,i){t.set(this.getAttributeName("direction"),e,i)},getAttributeName:function(t){return this.get("attributeNames")[t]||t},getAttribute:function(t,e){return t.get(this.getAttributeName(e))},prepare:function(){return this}},{directionRules:k});t.layout.TreeLayout=S}(d,r,o,u),d.format.gexf={},d.format.gexf.toCellsArray=function(t,e,i){var n=new DOMParser,r=n.parseFromString(t,"text/xml");if("parsererror"==r.documentElement.nodeName)throw new Error("Error while parsing GEXF file.");var s=r.documentElement.querySelectorAll("node"),a=r.documentElement.querySelectorAll("edge"),l=[];return o.each(s,function(t){var i=parseFloat(t.querySelector("size").getAttribute("value")),n=e({id:t.getAttribute("id"),width:i,height:i,label:t.getAttribute("label")});l.push(n)}),o.each(a,function(t){var e=i({source:t.getAttribute("source"),target:t.getAttribute("target")});l.unshift(e)}),l},d.dia.Paper.prototype.toSVG=function(t,e){function i(){return(new XMLSerializer).serializeToString(l).replace(/&nbsp;/g,"")}function n(t){var e=h(m.shift());if(!e)return t();var i=e.attr("xlink:href")||e.attr("href");d.util.imageToDataUri(i,function(i,r){e.attr("xlink:href",r),n(t)})}e=e||{};var r=h(this.viewport).attr("transform");h(this.viewport).attr("transform","");var a=e.area||this.getContentBBox(),l=this.svg.cloneNode(!0);h(this.viewport).attr("transform",r||""),l.removeAttribute("style"),e.preserveDimensions?h(l).attr({width:a.width,height:a.height}):h(l).attr({width:"100%",height:"100%"}),h(l).attr("viewBox",a.x+" "+a.y+" "+a.width+" "+a.height);for(var c=document.styleSheets.length,u=[],p=c-1;p>=0;p--)u[p]=document.styleSheets[p],document.styleSheets[p].disabled=!0;var f={};s(this.svg).find("*").each(function(t){var e=window.getComputedStyle(this,null),i={};o.each(e,function(t){i[t]=e.getPropertyValue(t)}),f[t]=i}),c!=document.styleSheets.length&&o.each(u,function(t,e){document.styleSheets[e]=t});for(var p=0;p<c;p++)document.styleSheets[p].disabled=!1;var g={};s(this.svg).find("*").each(function(t){var e=window.getComputedStyle(this,null),i=f[t],n={};o.each(e,function(t){e.getPropertyValue(t)!==i[t]&&(n[t]=e.getPropertyValue(t))}),g[t]=n});var m=[];if(s(l).find("*").each(function(t){s(this).css(g[t]),"image"===this.tagName.toLowerCase()&&m.push(this)}),!e.convertImagesToDataUris||!m.length)return t(i());n(function(){t(i())})},d.dia.Paper.prototype.openAsSVG=function(t){var e=o.uniqueId("svg_output");this.toSVG(function(t){var i=window.open("",e,"menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes"),n="data:image/svg+xml,"+encodeURIComponent(t);i.document.write('<img src="'+n+'" style="max-height:100%" />')},o.extend({convertImagesToDataUris:!0},t))};var g=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],m=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];if(function(){function t(){var t={};return t.FRAMERATE=30,t.MAX_VIRTUAL_PIXELS=3e4,t.init=function(e){var i=0;t.UniqueId=function(){return"canvg"+ ++i},t.Definitions={},t.Styles={},t.Animations=[],t.Images=[],t.ctx=e,t.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},t.init(),t.ImagesLoaded=function(){for(var e=0;e<t.Images.length;e++)if(!t.Images[e].loaded)return!1;return!0},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},t.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},t.parseXml=function(t){if(window.DOMParser){return(new DOMParser).parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},t.Property=function(t,e){this.name=t,this.value=e},t.Property.prototype.getValue=function(){return this.value},t.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},t.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},t.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},t.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},t.Property.prototype.addOpacity=function(e){var i=this.value;if(null!=e&&""!=e&&"string"==typeof this.value){var n=new a(this.value);n.ok&&(i="rgba("+n.r+", "+n.g+", "+n.b+", "+e+")")}return new t.Property(this.name,i)},t.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);return e&&(e=e[1]),e||(e=this.value),t.Definitions[e]},t.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},t.Property.prototype.getFillStyleDefinition=function(e,i){var n=this.getDefinition();if(null!=n&&n.createGradient)return n.createGradient(t.ctx,e,i);if(null!=n&&n.createPattern){if(n.getHrefAttribute().hasValue()){var r=n.attribute("patternTransform");n=n.getHrefAttribute().getDefinition(),r.hasValue()&&(n.attribute("patternTransform",!0).value=r.value)}return n.createPattern(t.ctx,e)}return null},t.Property.prototype.getDPI=function(t){return 96},t.Property.prototype.getEM=function(e){var i=12,n=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);return n.hasValue()&&(i=n.toPixels(e)),i},t.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")},t.Property.prototype.toPixels=function(e,i){if(!this.hasValue())return 0;var n=this.value+"";if(n.match(/em$/))return this.numValue()*this.getEM(e);if(n.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(n.match(/px$/))return this.numValue();if(n.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(n.match(/pc$/))return 15*this.numValue();if(n.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(n.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(n.match(/in$/))return this.numValue()*this.getDPI(e);if(n.match(/%$/))return this.numValue()*t.ViewPort.ComputeSize(e);var r=this.numValue();return i&&r<1?r*t.ViewPort.ComputeSize(e):r},t.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},t.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},t.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,i,n,r,o,s){var a=null!=s?this.Parse(s):this.CreateFont("","","","","",t.ctx.font);return{fontFamily:o||a.fontFamily,fontSize:r||a.fontSize,fontStyle:e||a.fontStyle,fontWeight:n||a.fontWeight,fontVariant:i||a.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(i){for(var n={},r=t.trim(t.compressSpaces(i||"")).split(" "),o={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},s="",a=0;a<r.length;a++)o.fontStyle||-1==e.Styles.indexOf(r[a])?o.fontVariant||-1==e.Variants.indexOf(r[a])?o.fontWeight||-1==e.Weights.indexOf(r[a])?o.fontSize?"inherit"!=r[a]&&(s+=r[a]):("inherit"!=r[a]&&(n.fontSize=r[a].split("/")[0]),o.fontStyle=o.fontVariant=o.fontWeight=o.fontSize=!0):("inherit"!=r[a]&&(n.fontWeight=r[a]),o.fontStyle=o.fontVariant=o.fontWeight=!0):("inherit"!=r[a]&&(n.fontVariant=r[a]),o.fontStyle=o.fontVariant=!0):("inherit"!=r[a]&&(n.fontStyle=r[a]),o.fontStyle=!0);return""!=s&&(n.fontFamily=s),n}},t.ToNumberArray=function(e){for(var i=t.trim(t.compressSpaces((e||"").replace(/,/g," "))).split(" "),n=0;n<i.length;n++)i[n]=parseFloat(i[n]);return i},t.Point=function(t,e){this.x=t,this.y=e},t.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},t.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],i=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=i},t.CreatePoint=function(e){var i=t.ToNumberArray(e);return new t.Point(i[0],i[1])},t.CreatePath=function(e){for(var i=t.ToNumberArray(e),n=[],r=0;r<i.length;r+=2)n.push(new t.Point(i[r],i[r+1]));return n},t.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,i,n,r,o){var s=t+2/3*(i-t),a=e+2/3*(n-e),l=s+1/3*(r-t),c=a+1/3*(o-e);this.addBezierCurve(t,e,s,l,a,c,r,o)},this.addBezierCurve=function(t,e,n,r,o,s,a,l){var c=[t,e],h=[n,r],u=[o,s],d=[a,l];for(this.addPoint(c[0],c[1]),this.addPoint(d[0],d[1]),i=0;i<=1;i++){var p=function(t){return Math.pow(1-t,3)*c[i]+3*Math.pow(1-t,2)*t*h[i]+3*(1-t)*Math.pow(t,2)*u[i]+Math.pow(t,3)*d[i]},f=6*c[i]-12*h[i]+6*u[i],g=-3*c[i]+9*h[i]-9*u[i]+3*d[i],m=3*h[i]-3*c[i];if(0!=g){var v=Math.pow(f,2)-4*m*g;if(!(v<0)){var y=(-f+Math.sqrt(v))/(2*g);0<y&&y<1&&(0==i&&this.addX(p(y)),1==i&&this.addY(p(y)));var b=(-f-Math.sqrt(v))/(2*g);0<b&&b<1&&(0==i&&this.addX(p(b)),1==i&&this.addY(p(b)))}}else{if(0==f)continue;var I=-m/f;0<I&&I<1&&(0==i&&this.addX(p(I)),1==i&&this.addY(p(I)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},t.Transform=function(e){var i=this;this.Type={},this.Type.translate=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var i=t.ToNumberArray(e);this.angle=new t.Property("angle",i[0]),this.cx=i[1]||0,this.cy=i[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=t.ToNumberArray(e),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=i.Type.matrix,this.base(e),this.angle=new t.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=i.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=i.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var n=t.trim(t.compressSpaces(e)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<n.length;r++){var o=t.trim(n[r].split("(")[0]),s=n[r].split("(")[1].replace(")",""),a=new this.Type[o](s);a.type=o,this.transforms.push(a)}},t.AspectRatio=function(e,i,n,r,o,s,a,l,c,h){i=t.compressSpaces(i),i=i.replace(/^defer\s/,"");var u=i.split(" ")[0]||"xMidYMid",d=i.split(" ")[1]||"meet",p=n/r,f=o/s,g=Math.min(p,f),m=Math.max(p,f);"meet"==d&&(r*=g,s*=g),"slice"==d&&(r*=m,s*=m),c=new t.Property("refX",c),h=new t.Property("refY",h),c.hasValue()&&h.hasValue()?e.translate(-g*c.toPixels("x"),-g*h.toPixels("y")):(u.match(/^xMid/)&&("meet"==d&&g==f||"slice"==d&&m==f)&&e.translate(n/2-r/2,0),u.match(/YMid$/)&&("meet"==d&&g==p||"slice"==d&&m==p)&&e.translate(0,o/2-s/2),u.match(/^xMax/)&&("meet"==d&&g==f||"slice"==d&&m==f)&&e.translate(n-r,0),u.match(/YMax$/)&&("meet"==d&&g==p||"slice"==d&&m==p)&&e.translate(0,o-s)),"none"==u?e.scale(p,f):"meet"==d?e.scale(g,g):"slice"==d&&e.scale(m,m),e.translate(null==a?0:-a,null==l?0:-l)},t.Element={},t.EmptyProperty=new t.Property("EMPTY",""),t.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(e,i){var n=this.attributes[e];return null!=n?n:(1==i&&(n=new t.Property(e,""),this.attributes[e]=n),n||t.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if(e.match(/:href$/))return this.attributes[e];return t.EmptyProperty},this.style=function(e,i){var n=this.styles[e];if(null!=n)return n;var r=this.attribute(e);if(null!=r&&r.hasValue())return this.styles[e]=r,r;var o=this.parent;if(null!=o){var s=o.style(e);if(null!=s&&s.hasValue())return s}return 1==i&&(n=new t.Property(e,""),this.styles[e]=n),n||t.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var i=this.style("filter").getDefinition();null!=i&&i.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(e,i){var n=e;i&&(n=t.CreateElement(e)),n.parent=this,this.children.push(n)},null!=e&&1==e.nodeType){for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(1==n.nodeType&&this.addChild(n,!0),this.captureTextNodes&&3==n.nodeType){var r=n.nodeValue||n.text||"";""!=t.trim(t.compressSpaces(r))&&this.addChild(new t.Element.tspan(n),!1)}}for(var i=0;i<e.attributes.length;i++){var o=e.attributes[i];this.attributes[o.nodeName]=new t.Property(o.nodeName,o.nodeValue)}var s=t.Styles[e.nodeName];if(null!=s)for(var a in s)this.styles[a]=s[a];if(this.attribute("class").hasValue())for(var l=t.compressSpaces(this.attribute("class").value).split(" "),c=0;c<l.length;c++){if(null!=(s=t.Styles["."+l[c]]))for(var a in s)this.styles[a]=s[a];if(null!=(s=t.Styles[e.nodeName+"."+l[c]]))for(var a in s)this.styles[a]=s[a]}if(this.attribute("id").hasValue()){var s=t.Styles["#"+this.attribute("id").value];if(null!=s)for(var a in s)this.styles[a]=s[a]}if(this.attribute("style").hasValue())for(var s=this.attribute("style").value.split(";"),i=0;i<s.length;i++)if(""!=t.trim(s[i])){var h=s[i].split(":"),a=t.trim(h[0]),u=t.trim(h[1]);this.styles[a]=new t.Property(a,u)}this.attribute("id").hasValue()&&null==t.Definitions[this.attribute("id").value]&&(t.Definitions[this.attribute("id").value]=this)}},t.Element.RenderedElementBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var i=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=i&&(e.fillStyle=i)}else if(this.style("fill").hasValue()){var n=this.style("fill");"currentColor"==n.value&&(n.value=this.style("color").value),e.fillStyle="none"==n.value?"rgba(0,0,0,0)":n.value}if(this.style("fill-opacity").hasValue()){var n=new t.Property("fill",e.fillStyle);n=n.addOpacity(this.style("fill-opacity").value),e.fillStyle=n.value}if(this.style("stroke").isUrlDefinition()){var i=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=i&&(e.strokeStyle=i)}else if(this.style("stroke").hasValue()){var r=this.style("stroke");"currentColor"==r.value&&(r.value=this.style("color").value),e.strokeStyle="none"==r.value?"rgba(0,0,0,0)":r.value}if(this.style("stroke-opacity").hasValue()){var r=new t.Property("stroke",e.strokeStyle);r=r.addOpacity(this.style("stroke-opacity").value),e.strokeStyle=r.value}if(this.style("stroke-width").hasValue()){var o=this.style("stroke-width").toPixels();e.lineWidth=0==o?.001:o}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var s=t.ToNumberArray(this.style("stroke-dasharray").value);void 0!==e.setLineDash?e.setLineDash(s):void 0!==e.webkitLineDash?e.webkitLineDash=s:void 0!==e.mozDash&&(e.mozDash=s);var a=this.style("stroke-dashoffset").numValueOrDefault(1);void 0!==e.lineDashOffset?e.lineDashOffset=a:void 0!==e.webkitLineDashOffset?e.webkitLineDashOffset=a:void 0!==e.mozDashOffset&&(e.mozDashOffset=a)}if(void 0!==e.font&&(e.font=t.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){new t.Transform(this.attribute("transform").value).apply(e)}if(this.style("clip-path").hasValue()){var l=this.style("clip-path").getDefinition();null!=l&&l.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},t.Element.RenderedElementBase.prototype=new t.Element.ElementBase,t.Element.PathElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new t.BoundingBox},this.renderChildren=function(e){this.path(e),t.Mouse.checkPath(this,e),""!=e.fillStyle&&(this.attribute("fill-rule").hasValue()?e.fill(this.attribute("fill-rule").value):e.fill()),""!=e.strokeStyle&&e.stroke();var i=this.getMarkers();if(null!=i){if(this.style("marker-start").isUrlDefinition()){var n=this.style("marker-start").getDefinition();n.render(e,i[0][0],i[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var n=this.style("marker-mid").getDefinition(),r=1;r<i.length-1;r++)n.render(e,i[r][0],i[r][1]);if(this.style("marker-end").isUrlDefinition()){var n=this.style("marker-end").getDefinition();n.render(e,i[i.length-1][0],i[i.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},t.Element.PathElementBase.prototype=new t.Element.RenderedElementBase,t.Element.svg=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),t.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var i=t.ViewPort.width(),n=t.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root){i=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");var r=0,o=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(r=-this.attribute("refX").toPixels("x"),o=-this.attribute("refY").toPixels("y")),e.beginPath(),e.moveTo(r,o),e.lineTo(i,o),e.lineTo(i,n),e.lineTo(r,n),e.closePath(),e.clip()}if(t.ViewPort.SetCurrent(i,n),this.attribute("viewBox").hasValue()){var s=t.ToNumberArray(this.attribute("viewBox").value),a=s[0],l=s[1];i=s[2],n=s[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,t.ViewPort.width(),i,t.ViewPort.height(),n,a,l,this.attribute("refX").value,this.attribute("refY").value),t.ViewPort.RemoveCurrent(),t.ViewPort.SetCurrent(s[2],s[3])}}},t.Element.svg.prototype=new t.Element.RenderedElementBase,t.Element.rect=function(e){this.base=t.Element.PathElementBase,
this.base(e),this.path=function(e){var i=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),a=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(a=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=a),s=Math.min(s,r/2),a=Math.min(a,o/2),null!=e&&(e.beginPath(),e.moveTo(i+s,n),e.lineTo(i+r-s,n),e.quadraticCurveTo(i+r,n,i+r,n+a),e.lineTo(i+r,n+o-a),e.quadraticCurveTo(i+r,n+o,i+r-s,n+o),e.lineTo(i+s,n+o),e.quadraticCurveTo(i,n+o,i,n+o-a),e.lineTo(i,n+a),e.quadraticCurveTo(i,n,i+s,n),e.closePath()),new t.BoundingBox(i,n,i+r,n+o)}},t.Element.rect.prototype=new t.Element.PathElementBase,t.Element.circle=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var i=this.attribute("cx").toPixels("x"),n=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(i,n,r,0,2*Math.PI,!0),e.closePath()),new t.BoundingBox(i-r,n-r,i+r,n+r)}},t.Element.circle.prototype=new t.Element.PathElementBase,t.Element.ellipse=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var i=(Math.sqrt(2)-1)/3*4,n=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),o=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(o,s-r),e.bezierCurveTo(o+i*n,s-r,o+n,s-i*r,o+n,s),e.bezierCurveTo(o+n,s+i*r,o+i*n,s+r,o,s+r),e.bezierCurveTo(o-i*n,s+r,o-n,s+i*r,o-n,s),e.bezierCurveTo(o-n,s-i*r,o-i*n,s-r,o,s-r),e.closePath()),new t.BoundingBox(o-n,s-r,o+n,s+r)}},t.Element.ellipse.prototype=new t.Element.PathElementBase,t.Element.line=function(e){this.base=t.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new t.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new t.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var i=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(i[0].x,i[0].y),e.lineTo(i[1].x,i[1].y)),new t.BoundingBox(i[0].x,i[0].y,i[1].x,i[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},t.Element.line.prototype=new t.Element.PathElementBase,t.Element.polyline=function(e){this.base=t.Element.PathElementBase,this.base(e),this.points=t.CreatePath(this.attribute("points").value),this.path=function(e){var i=new t.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var n=1;n<this.points.length;n++)i.addPoint(this.points[n].x,this.points[n].y),null!=e&&e.lineTo(this.points[n].x,this.points[n].y);return i},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},t.Element.polyline.prototype=new t.Element.PathElementBase,t.Element.polygon=function(e){this.base=t.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},t.Element.polygon.prototype=new t.Element.polyline,t.Element.path=function(e){this.base=t.Element.PathElementBase,this.base(e);var i=this.attribute("d").value;i=i.replace(/,/gm," "),i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),i=i.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),i=i.replace(/([0-9])([+\-])/gm,"$1 $2"),i=i.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),i=i.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),i=t.compressSpaces(i),i=t.trim(i),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new t.Point(0,0),this.control=new t.Point(0,0),this.current=new t.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new t.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new t.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,i){null!=i&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(i),this.path=function(e){var i=this.PathParser;i.reset();var n=new t.BoundingBox;for(null!=e&&e.beginPath();!i.isEnd();)switch(i.nextCommand(),i.command){case"M":case"m":var r=i.getAsCurrentPoint();for(i.addMarker(r),n.addPoint(r.x,r.y),null!=e&&e.moveTo(r.x,r.y),i.start=i.current;!i.isCommandOrEnd();){var r=i.getAsCurrentPoint();i.addMarker(r,i.start),n.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"L":case"l":for(;!i.isCommandOrEnd();){var o=i.current,r=i.getAsCurrentPoint();i.addMarker(r,o),n.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"H":case"h":for(;!i.isCommandOrEnd();){var s=new t.Point((i.isRelativeCommand()?i.current.x:0)+i.getScalar(),i.current.y);i.addMarker(s,i.current),i.current=s,n.addPoint(i.current.x,i.current.y),null!=e&&e.lineTo(i.current.x,i.current.y)}break;case"V":case"v":for(;!i.isCommandOrEnd();){var s=new t.Point(i.current.x,(i.isRelativeCommand()?i.current.y:0)+i.getScalar());i.addMarker(s,i.current),i.current=s,n.addPoint(i.current.x,i.current.y),null!=e&&e.lineTo(i.current.x,i.current.y)}break;case"C":case"c":for(;!i.isCommandOrEnd();){var a=i.current,l=i.getPoint(),c=i.getAsControlPoint(),h=i.getAsCurrentPoint();i.addMarker(h,c,l),n.addBezierCurve(a.x,a.y,l.x,l.y,c.x,c.y,h.x,h.y),null!=e&&e.bezierCurveTo(l.x,l.y,c.x,c.y,h.x,h.y)}break;case"S":case"s":for(;!i.isCommandOrEnd();){var a=i.current,l=i.getReflectedControlPoint(),c=i.getAsControlPoint(),h=i.getAsCurrentPoint();i.addMarker(h,c,l),n.addBezierCurve(a.x,a.y,l.x,l.y,c.x,c.y,h.x,h.y),null!=e&&e.bezierCurveTo(l.x,l.y,c.x,c.y,h.x,h.y)}break;case"Q":case"q":for(;!i.isCommandOrEnd();){var a=i.current,c=i.getAsControlPoint(),h=i.getAsCurrentPoint();i.addMarker(h,c,c),n.addQuadraticCurve(a.x,a.y,c.x,c.y,h.x,h.y),null!=e&&e.quadraticCurveTo(c.x,c.y,h.x,h.y)}break;case"T":case"t":for(;!i.isCommandOrEnd();){var a=i.current,c=i.getReflectedControlPoint();i.control=c;var h=i.getAsCurrentPoint();i.addMarker(h,c,c),n.addQuadraticCurve(a.x,a.y,c.x,c.y,h.x,h.y),null!=e&&e.quadraticCurveTo(c.x,c.y,h.x,h.y)}break;case"A":case"a":for(;!i.isCommandOrEnd();){var a=i.current,u=i.getScalar(),d=i.getScalar(),p=i.getScalar()*(Math.PI/180),f=i.getScalar(),g=i.getScalar(),h=i.getAsCurrentPoint(),m=new t.Point(Math.cos(p)*(a.x-h.x)/2+Math.sin(p)*(a.y-h.y)/2,-Math.sin(p)*(a.x-h.x)/2+Math.cos(p)*(a.y-h.y)/2),v=Math.pow(m.x,2)/Math.pow(u,2)+Math.pow(m.y,2)/Math.pow(d,2);v>1&&(u*=Math.sqrt(v),d*=Math.sqrt(v));var y=(f==g?-1:1)*Math.sqrt((Math.pow(u,2)*Math.pow(d,2)-Math.pow(u,2)*Math.pow(m.y,2)-Math.pow(d,2)*Math.pow(m.x,2))/(Math.pow(u,2)*Math.pow(m.y,2)+Math.pow(d,2)*Math.pow(m.x,2)));isNaN(y)&&(y=0);var b=new t.Point(y*u*m.y/d,y*-d*m.x/u),I=new t.Point((a.x+h.x)/2+Math.cos(p)*b.x-Math.sin(p)*b.y,(a.y+h.y)/2+Math.sin(p)*b.x+Math.cos(p)*b.y),x=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},C=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(x(t)*x(e))},w=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(C(t,e))},A=w([1,0],[(m.x-b.x)/u,(m.y-b.y)/d]),M=[(m.x-b.x)/u,(m.y-b.y)/d],N=[(-m.x-b.x)/u,(-m.y-b.y)/d],k=w(M,N);C(M,N)<=-1&&(k=Math.PI),C(M,N)>=1&&(k=0);var S=1-g?1:-1,T=A+S*(k/2),D=new t.Point(I.x+u*Math.cos(T),I.y+d*Math.sin(T));if(i.addMarkerAngle(D,T-S*Math.PI/2),i.addMarkerAngle(h,T-S*Math.PI),n.addPoint(h.x,h.y),null!=e){var C=u>d?u:d,j=u>d?1:u/d,z=u>d?d/u:1;e.translate(I.x,I.y),e.rotate(p),e.scale(j,z),e.arc(0,0,C,A,A+k,1-g),e.scale(1/j,1/z),e.rotate(-p),e.translate(-I.x,-I.y)}}break;case"Z":case"z":null!=e&&e.closePath(),i.current=i.start}return n},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),i=[],n=0;n<t.length;n++)i.push([t[n],e[n]]);return i}},t.Element.path.prototype=new t.Element.PathElementBase,t.Element.pattern=function(e){this.base=t.Element.ElementBase,this.base(e),this.createPattern=function(e,i){var n=this.attribute("width").toPixels("x",!0),r=this.attribute("height").toPixels("y",!0),o=new t.Element.svg;o.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),o.attributes.width=new t.Property("width",n+"px"),o.attributes.height=new t.Property("height",r+"px"),o.attributes.transform=new t.Property("transform",this.attribute("patternTransform").value),o.children=this.children;var s=document.createElement("canvas");s.width=n,s.height=r;var a=s.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&a.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;l<=1;l++)for(var c=-1;c<=1;c++)a.save(),a.translate(l*s.width,c*s.height),o.render(a),a.restore();return e.createPattern(s,"repeat")}},t.Element.pattern.prototype=new t.Element.ElementBase,t.Element.marker=function(e){this.base=t.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,i,n){e.translate(i.x,i.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(n),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var r=new t.Element.svg;r.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new t.Property("refX",this.attribute("refX").value),r.attributes.refY=new t.Property("refY",this.attribute("refY").value),r.attributes.width=new t.Property("width",this.attribute("markerWidth").value),r.attributes.height=new t.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new t.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new t.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-n),e.translate(-i.x,-i.y)}},t.Element.marker.prototype=new t.Element.ElementBase,t.Element.defs=function(e){this.base=t.Element.ElementBase,this.base(e),this.render=function(t){}},t.Element.defs.prototype=new t.Element.ElementBase,t.Element.GradientBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var i=0;i<this.children.length;i++){var n=this.children[i];"stop"==n.type&&this.stops.push(n)}this.getGradient=function(){},this.createGradient=function(e,i,n){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition());var o=function(e){if(n.hasValue()){return new t.Property("color",e).addOpacity(n.value).value}return e},s=this.getGradient(e,i);if(null==s)return o(r.stops[r.stops.length-1].color);for(var a=0;a<r.stops.length;a++)s.addColorStop(r.stops[a].offset,o(r.stops[a].color));if(this.attribute("gradientTransform").hasValue()){var l=t.ViewPort.viewPorts[0],c=new t.Element.rect;c.attributes.x=new t.Property("x",-t.MAX_VIRTUAL_PIXELS/3),c.attributes.y=new t.Property("y",-t.MAX_VIRTUAL_PIXELS/3),c.attributes.width=new t.Property("width",t.MAX_VIRTUAL_PIXELS),c.attributes.height=new t.Property("height",t.MAX_VIRTUAL_PIXELS);var h=new t.Element.g;h.attributes.transform=new t.Property("transform",this.attribute("gradientTransform").value),h.children=[c];var u=new t.Element.svg;u.attributes.x=new t.Property("x",0),u.attributes.y=new t.Property("y",0),u.attributes.width=new t.Property("width",l.width),u.attributes.height=new t.Property("height",l.height),u.children=[h];var d=document.createElement("canvas");d.width=l.width,d.height=l.height;var p=d.getContext("2d");return p.fillStyle=s,u.render(p),p.createPattern(d,"no-repeat")}return s}},t.Element.GradientBase.prototype=new t.Element.ElementBase,t.Element.linearGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var i=e.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var n="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),o="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),s="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return n==o&&r==s?null:t.createLinearGradient(n,r,o,s)}},t.Element.linearGradient.prototype=new t.Element.GradientBase,t.Element.radialGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var i=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var n="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),o=n,s=r;this.attribute("fx").hasValue()&&(o="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(s="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var a="objectBoundingBox"==this.gradientUnits?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(o,s,0,n,r,a)}},t.Element.radialGradient.prototype=new t.Element.GradientBase,t.Element.stop=function(e){this.base=t.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var i=this.style("stop-color");this.style("stop-opacity").hasValue()&&(i=i.addOpacity(this.style("stop-opacity").value)),this.color=i.value},t.Element.stop.prototype=new t.Element.ElementBase,t.Element.AnimateBase=function(e){this.base=t.Element.ElementBase,this.base(e),t.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed&&(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var i=this.calcValue();if(this.attribute("type").hasValue()){i=this.attribute("type").value+"("+i+")"}this.getProperty().value=i,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var i=e.progress*(this.values.value.length-1),n=Math.floor(i),r=Math.ceil(i);e.from=new t.Property("from",parseFloat(this.values.value[n])),e.to=new t.Property("to",parseFloat(this.values.value[r])),e.progress=(i-n)/(r-n)}else e.from=this.from,e.to=this.to;return e}},t.Element.AnimateBase.prototype=new t.Element.ElementBase,t.Element.animate=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},t.Element.animate.prototype=new t.Element.AnimateBase,t.Element.animateColor=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=new a(t.from.value),i=new a(t.to.value);if(e.ok&&i.ok){var n=e.r+(i.r-e.r)*t.progress,r=e.g+(i.g-e.g)*t.progress,o=e.b+(i.b-e.b)*t.progress;return"rgb("+parseInt(n,10)+","+parseInt(r,10)+","+parseInt(o,10)+")"}return this.attribute("from").value}},t.Element.animateColor.prototype=new t.Element.AnimateBase,t.Element.animateTransform=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),i=t.ToNumberArray(e.from.value),n=t.ToNumberArray(e.to.value),r="",o=0;o<i.length;o++)r+=i[o]+(n[o]-i[o])*e.progress+" ";return r}},t.Element.animateTransform.prototype=new t.Element.animate,t.Element.font=function(e){this.base=t.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var i=0;i<this.children.length;i++){var n=this.children[i];"font-face"==n.type?(this.fontFace=n,n.style("font-family").hasValue()&&(t.Definitions[n.style("font-family").value]=this)):"missing-glyph"==n.type?this.missingGlyph=n:"glyph"==n.type&&(""!=n.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[n.unicode]&&(this.glyphs[n.unicode]=[]),this.glyphs[n.unicode][n.arabicForm]=n):this.glyphs[n.unicode]=n)}},t.Element.font.prototype=new t.Element.ElementBase,t.Element.fontface=function(e){this.base=t.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},t.Element.fontface.prototype=new t.Element.ElementBase,t.Element.missingglyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=0},t.Element.missingglyph.prototype=new t.Element.path,t.Element.glyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},t.Element.glyph.prototype=new t.Element.path,t.Element.text=function(e){this.captureTextNodes=!0,this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.style("dominant-baseline").hasValue()&&(t.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(t.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new t.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,i){var n=this.style("text-anchor").valueOrDefault("start");if("start"!=n){for(var r=0,o=i;o<e.children.length;o++){var s=e.children[o];if(o>i&&s.attribute("x").hasValue())break;r+=s.measureTextRecursive(t)}return-1*("end"==n?r:r/2)}return 0},this.renderChild=function(t,e,i){var n=e.children[i];n.attribute("x").hasValue()?n.x=n.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,i):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),n.attribute("dx").hasValue()&&(this.x+=n.attribute("dx").toPixels("x")),n.x=this.x),this.x=n.x+n.measureText(t),n.attribute("y").hasValue()?n.y=n.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),n.attribute("dy").hasValue()&&(this.y+=n.attribute("dy").toPixels("y")),n.y=this.y),this.y=n.y,n.render(t);for(var i=0;i<n.children.length;i++)this.renderChild(t,n,i)}},t.Element.text.prototype=new t.Element.RenderedElementBase,t.Element.TextElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getGlyph=function(t,e,i){var n=e[i],r=null;if(t.isArabic){var o="isolated";(0==i||" "==e[i-1])&&i<e.length-2&&" "!=e[i+1]&&(o="terminal"),i>0&&" "!=e[i-1]&&i<e.length-2&&" "!=e[i+1]&&(o="medial"),i>0&&" "!=e[i-1]&&(i==e.length-1||" "==e[i+1])&&(o="initial"),void 0!==t.glyphs[n]&&null==(r=t.glyphs[n][o])&&"glyph"==t.glyphs[n].type&&(r=t.glyphs[n])}else r=t.glyphs[n];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(e){var i=this.parent.style("font-family").getDefinition();if(null==i)""!=e.fillStyle&&e.fillText(t.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(t.compressSpaces(this.getText()),this.x,this.y);else{var n=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(t.Font.Parse(t.ctx.font).fontStyle),o=this.getText();i.isRTL&&(o=o.split("").reverse().join(""));for(var s=t.ToNumberArray(this.parent.attribute("dx").value),a=0;a<o.length;a++){var l=this.getGlyph(i,o,a),c=n/i.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(c,-c);var h=e.lineWidth;e.lineWidth=e.lineWidth*i.fontFace.unitsPerEm/n,"italic"==r&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==r&&e.transform(1,0,-.4,1,0,0),e.lineWidth=h,e.scale(1/c,-1/c),e.translate(-this.x,-this.y),this.x+=n*(l.horizAdvX||i.horizAdvX)/i.fontFace.unitsPerEm,void 0===s[a]||isNaN(s[a])||(this.x+=s[a])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),i=0;i<this.children.length;i++)e+=this.children[i].measureTextRecursive(t);return e},this.measureText=function(e){var i=this.parent.style("font-family").getDefinition();if(null!=i){var n=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=0,o=this.getText();i.isRTL&&(o=o.split("").reverse().join(""));for(var s=t.ToNumberArray(this.parent.attribute("dx").value),a=0;a<o.length;a++){r+=(this.getGlyph(i,o,a).horizAdvX||i.horizAdvX)*n/i.fontFace.unitsPerEm,void 0===s[a]||isNaN(s[a])||(r+=s[a])}return r}var l=t.compressSpaces(this.getText());if(!e.measureText)return 10*l.length;e.save(),this.setContext(e);var c=e.measureText(l).width;return e.restore(),c}},t.Element.TextElementBase.prototype=new t.Element.RenderedElementBase,t.Element.tspan=function(e){this.captureTextNodes=!0,this.base=t.Element.TextElementBase,this.base(e),this.text=e.nodeValue||e.text||"",this.getText=function(){return this.text}},t.Element.tspan.prototype=new t.Element.TextElementBase,t.Element.tref=function(e){this.base=t.Element.TextElementBase,this.base(e),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},t.Element.tref.prototype=new t.Element.TextElementBase,t.Element.a=function(e){this.base=t.Element.TextElementBase,this.base(e),this.hasText=!0;for(var i=0;i<e.childNodes.length;i++)3!=e.childNodes[i].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var i=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);t.Mouse.checkBoundingBox(this,new t.BoundingBox(this.x,this.y-i.toPixels("y"),this.x+this.measureText(e),this.y))}else{var n=new t.Element.g;n.children=this.children,n.parent=this,n.render(e)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){t.ctx.canvas.style.cursor="pointer"}},t.Element.a.prototype=new t.Element.TextElementBase,t.Element.image=function(e){this.base=t.Element.RenderedElementBase,this.base(e);var i=this.getHrefAttribute().value,n=i.match(/\.svg$/);if(t.Images.push(this),this.loaded=!1,n)this.img=t.ajax(i),this.loaded=!0;else{this.img=document.createElement("img");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+i+'" not found'),r.loaded=!0)},this.img.src=i}this.renderChildren=function(e){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),o=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");0!=o&&0!=s&&(e.save(),n?e.drawSvg(this.img,i,r,o,s):(e.translate(i,r),t.AspectRatio(e,this.attribute("preserveAspectRatio").value,o,this.img.width,s,this.img.height,0,0),e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new t.BoundingBox(e,i,e+n,i+r)}},t.Element.image.prototype=new t.Element.RenderedElementBase,t.Element.g=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new t.BoundingBox,i=0;i<this.children.length;i++)e.addBoundingBox(this.children[i].getBoundingBox());return e}},t.Element.g.prototype=new t.Element.RenderedElementBase,t.Element.symbol=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){if(this.baseSetContext(e),this.attribute("viewBox").hasValue()){var i=t.ToNumberArray(this.attribute("viewBox").value),n=i[0],r=i[1];width=i[2],height=i[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,n,r),t.ViewPort.SetCurrent(i[2],i[3])}}},t.Element.symbol.prototype=new t.Element.RenderedElementBase,t.Element.style=function(e){this.base=t.Element.ElementBase,this.base(e);for(var i="",n=0;n<e.childNodes.length;n++)i+=e.childNodes[n].nodeValue;i=i.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),i=t.compressSpaces(i);for(var r=i.split("}"),n=0;n<r.length;n++)if(""!=t.trim(r[n]))for(var o=r[n].split("{"),s=o[0].split(","),a=o[1].split(";"),l=0;l<s.length;l++){var c=t.trim(s[l]);if(""!=c){for(var h={},u=0;u<a.length;u++){var d=a[u].indexOf(":"),p=a[u].substr(0,d),f=a[u].substr(d+1,a[u].length-d);null!=p&&null!=f&&(h[t.trim(p)]=new t.Property(t.trim(p),t.trim(f)))}if(t.Styles[c]=h,"@font-face"==c)for(var g=h["font-family"].value.replace(/"/g,""),m=h.src.value.split(","),v=0;v<m.length;v++)if(m[v].indexOf('format("svg")')>0)for(var y=m[v].indexOf("url"),b=m[v].indexOf(")",y),I=m[v].substr(y+5,b-y-6),x=t.parseXml(t.ajax(I)),C=x.getElementsByTagName("font"),w=0;w<C.length;w++){var A=t.CreateElement(C[w]);t.Definitions[g]=A}}}},t.Element.style.prototype=new t.Element.ElementBase,t.Element.use=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var t=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(t.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(t.attribute("height",!0).value=this.attribute("height").value),t},this.path=function(t){var e=this.getDefinition();null!=e&&e.path(t)},this.getBoundingBox=function(){var t=this.getDefinition();if(null!=t)return t.getBoundingBox()},this.renderChildren=function(t){var e=this.getDefinition();if(null!=e){var i=e.parent;e.parent=null,e.render(t),e.parent=i}}},t.Element.use.prototype=new t.Element.RenderedElementBase,t.Element.mask=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e,i){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),o=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==o&&0==s){for(var a=new t.BoundingBox,l=0;l<this.children.length;l++)a.addBoundingBox(this.children[l].getBoundingBox());var n=Math.floor(a.x1),r=Math.floor(a.y1),o=Math.floor(a.width()),s=Math.floor(a.height())}var c=i.attribute("mask").value;i.attribute("mask").value="";var h=document.createElement("canvas");h.width=n+o,h.height=r+s;var u=h.getContext("2d");this.renderChildren(u);var d=document.createElement("canvas");d.width=n+o,d.height=r+s;var p=d.getContext("2d");i.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=u.createPattern(h,"no-repeat"),p.fillRect(0,0,n+o,r+s),e.fillStyle=p.createPattern(d,"no-repeat"),e.fillRect(0,0,n+o,r+s),i.attribute("mask").value=c},this.render=function(t){}},t.Element.mask.prototype=new t.Element.ElementBase,t.Element.clipPath=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(e){for(var i=0;i<this.children.length;i++){var n=this.children[i];if(void 0!==n.path){var r=null;n.attribute("transform").hasValue()&&(r=new t.Transform(n.attribute("transform").value),r.apply(e)),n.path(e),e.clip(),r&&r.unapply(e)}}},this.render=function(t){}},t.Element.clipPath.prototype=new t.Element.ElementBase,t.Element.filter=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e){var i=e.getBoundingBox(),n=Math.floor(i.x1),r=Math.floor(i.y1),o=Math.floor(i.width()),s=Math.floor(i.height()),a=e.style("filter").value;e.style("filter").value="";for(var l=0,c=0,h=0;h<this.children.length;h++){var u=this.children[h].extraFilterDistance||0;l=Math.max(l,u),c=Math.max(c,u)}var d=document.createElement("canvas");d.width=o+2*l,d.height=s+2*c;var p=d.getContext("2d");p.translate(-n+l,-r+c),e.render(p);for(var h=0;h<this.children.length;h++)this.children[h].apply(p,0,0,o+2*l,s+2*c);t.drawImage(d,0,0,o+2*l,s+2*c,n-l,r-c,o+2*l,s+2*c),e.style("filter",!0).value=a},this.render=function(t){}},t.Element.filter.prototype=new t.Element.ElementBase,
t.Element.feMorphology=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,i,n,r){}},t.Element.feMorphology.prototype=new t.Element.ElementBase,t.Element.feColorMatrix=function(e){function i(t,e,i,n,r,o){return t[i*n*4+4*e+o]}function n(t,e,i,n,r,o,s){t[i*n*4+4*e+o]=s}this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,r,o,s){for(var a=t.getImageData(0,0,o,s),r=0;r<s;r++)for(var e=0;e<o;e++){var l=i(a.data,e,r,o,s,0),c=i(a.data,e,r,o,s,1),h=i(a.data,e,r,o,s,2),u=(l+c+h)/3;n(a.data,e,r,o,s,0,u),n(a.data,e,r,o,s,1,u),n(a.data,e,r,o,s,2,u)}t.clearRect(0,0,o,s),t.putImageData(a,0,0)}},t.Element.feColorMatrix.prototype=new t.Element.ElementBase,t.Element.feGaussianBlur=function(e){this.base=t.Element.ElementBase,this.base(e),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,i,n,r,o){if(void 0===l)return void("undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work"));e.canvas.id=t.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),l(e.canvas.id,i,n,r,o,this.blurRadius),document.body.removeChild(e.canvas)}},t.Element.feGaussianBlur.prototype=new t.Element.ElementBase,t.Element.title=function(t){},t.Element.title.prototype=new t.Element.ElementBase,t.Element.desc=function(t){},t.Element.desc.prototype=new t.Element.ElementBase,t.Element.MISSING=function(t){"undefined"!=typeof console&&console.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},t.Element.MISSING.prototype=new t.Element.ElementBase,t.CreateElement=function(e){var i=e.nodeName.replace(/^[^:]+:/,"");i=i.replace(/\-/g,"");var n=null;return n=void 0!==t.Element[i]?new t.Element[i](e):new t.Element.MISSING(e),n.type=e.nodeName,n},t.load=function(e,i){t.loadXml(e,t.ajax(i))},t.loadXml=function(e,i){t.loadXmlDoc(e,t.parseXml(i))},t.loadXmlDoc=function(e,i){t.init(e);var n=function(t){for(var i=e.canvas;i;)t.x-=i.offsetLeft,t.y-=i.offsetTop,i=i.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=t.opts.ignoreMouse&&(e.canvas.onclick=function(e){var i=n(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onclick(i.x,i.y)},e.canvas.onmousemove=function(e){var i=n(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onmousemove(i.x,i.y)});var r=t.CreateElement(i.documentElement);r.root=!0;var o=!0,s=function(){t.ViewPort.Clear(),e.canvas.parentNode&&t.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=t.opts.ignoreDimensions&&(r.style("width").hasValue()&&(e.canvas.width=r.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),r.style("height").hasValue()&&(e.canvas.height=r.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var n=e.canvas.clientWidth||e.canvas.width,s=e.canvas.clientHeight||e.canvas.height;if(1==t.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(n=r.style("width").toPixels("x"),s=r.style("height").toPixels("y")),t.ViewPort.SetCurrent(n,s),null!=t.opts.offsetX&&(r.attribute("x",!0).value=t.opts.offsetX),null!=t.opts.offsetY&&(r.attribute("y",!0).value=t.opts.offsetY),null!=t.opts.scaleWidth&&null!=t.opts.scaleHeight){var a=1,l=1,c=t.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?a=r.attribute("width").toPixels("x")/t.opts.scaleWidth:isNaN(c[2])||(a=c[2]/t.opts.scaleWidth),r.attribute("height").hasValue()?l=r.attribute("height").toPixels("y")/t.opts.scaleHeight:isNaN(c[3])||(l=c[3]/t.opts.scaleHeight),r.attribute("width",!0).value=t.opts.scaleWidth,r.attribute("height",!0).value=t.opts.scaleHeight,r.attribute("viewBox",!0).value="0 0 "+n*a+" "+s*l,r.attribute("preserveAspectRatio",!0).value="none"}1!=t.opts.ignoreClear&&e.clearRect(0,0,n,s),r.render(e),o&&(o=!1,"function"==typeof t.opts.renderCallback&&t.opts.renderCallback(i))},a=!0;t.ImagesLoaded()&&(a=!1,s()),t.intervalID=setInterval(function(){var e=!1;if(a&&t.ImagesLoaded()&&(a=!1,e=!0),1!=t.opts.ignoreMouse&&(e|=t.Mouse.hasEvents()),1!=t.opts.ignoreAnimation)for(var i=0;i<t.Animations.length;i++)e|=t.Animations[i].update(1e3/t.FRAMERATE);"function"==typeof t.opts.forceRedraw&&1==t.opts.forceRedraw()&&(e=!0),e&&(s(),t.Mouse.runEvents())},1e3/t.FRAMERATE)},t.stop=function(){t.intervalID&&clearInterval(t.intervalID)},t.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var i=0;i<this.events.length;i++){var n=this.events[i];e.isPointInPath&&e.isPointInPath(n.x,n.y)&&(this.eventElements[i]=t)}},this.checkBoundingBox=function(t,e){for(var i=0;i<this.events.length;i++){var n=this.events[i];e.isPointInBox(n.x,n.y)&&(this.eventElements[i]=t)}},this.runEvents=function(){t.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var i=this.events[e],n=this.eventElements[e];n;)i.run(n),n=n.parent;this.events=[],this.eventElements=[]}},t}this.canvg=function(e,i,n){if(null!=e||null!=i||null!=n){n=n||{},"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var r=t();1==e.childNodes.length&&"OBJECT"==e.childNodes[0].nodeName||(e.svg=r),r.opts=n;var o=e.getContext("2d");void 0!==i.documentElement?r.loadXmlDoc(o,i):"<"==i.substr(0,1)?r.loadXml(o,i):r.load(o,i)}else for(var s=document.getElementsByTagName("svg"),a=0;a<s.length;a++){var l=s[a],c=document.createElement("canvas");c.width=l.clientWidth,c.height=l.clientHeight,l.parentNode.insertBefore(c,l),l.parentNode.removeChild(l);var h=document.createElement("div");h.appendChild(l),canvg(c,h.innerHTML)}}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,i,n,r){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:i,scaleWidth:n,scaleHeight:r})}),function(t,e){"use strict";function i(t,e){var i=o(e),r=1/n(e.size),s=u.rect({x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom}).scale(r,r);if(e.width&&e.height){var a=u.rect(t).moveAndExpand({x:i.left,y:i.right,width:i.top,height:i.bottom});s.scale(a.width/e.width,a.height/e.height)}return t.moveAndExpand(s)}function n(t){var i=1;if(!e.isUndefined(t)&&(i=parseFloat(t),!e.isFinite(i)||0===i))throw new Error("dia.Paper: invalid raster size ("+t+")");return i}function r(t,e){if(e.width&&e.height)return{width:e.width,height:e.height};var i=o(e),r=t.width||1,s=t.height||1,a=n(e.size);return r*=a,s*=a,{width:r+i.left+i.right,height:s+i.top+i.bottom}}function o(e){var i=t.util.normalizeSides(e.padding);return e.width&&e.height&&(i.left+i.right>=e.width&&(i.left=i.right=0),i.top+i.bottom>=e.height&&(i.top=i.bottom=0)),i}function s(t){return t.replace(/\<image[^>]*>/g,function(t){var e=t.match(/href="([^"]*)"/)[1];if("data:image/svg+xml"===e.substr(0,"data:image/svg+xml".length)){var i=decodeURIComponent(e.substr(e.indexOf(",")+1));return i.substr(i.indexOf("<svg"))}return t})}t.dia.Paper.prototype.toDataURL=function(t,n){if("function"!=typeof this.toSVG)throw new Error("The joint.format.svg.js plugin must be loaded.");n=n||{};var o,a=this.getContentBBox(),l=r(a,n),c=new Image;c.onload=function(){function i(){u=document.createElement("canvas"),u.width=l.width,u.height=l.height,h=u.getContext("2d"),h.fillStyle=n.backgroundColor||"white",h.fillRect(0,0,l.width,l.height)}function r(){a=u.toDataURL(n.type,n.quality),t(a),u.svg&&e.isFunction(u.svg.stop)&&e.defer(u.svg.stop)}var a,h,u;i();try{h.drawImage(c,0,0,l.width,l.height),r()}catch(t){if("undefined"==typeof canvg)return void console.error("Canvas tainted. Canvg library required.");i();var d={ignoreDimensions:!0,ignoreClear:!0,ignoreMouse:!0,ignoreAnimation:!0,offsetX:0,offsetY:0,useCORS:!0};canvg(u,o,e.extend(d,{forceRedraw:e.once(function(){return!0}),renderCallback:function(){try{r()}catch(t){o=s(o),i(),canvg(u,o,e.extend(d,{renderCallback:r}))}}}))}},this.toSVG(function(t){o=t=t.replace('width="100%"','width="'+l.width+'"').replace('height="100%"','height="'+l.height+'"'),c.src="data:image/svg+xml,"+encodeURIComponent(t)},{convertImagesToDataUris:!0,area:i(a,n)})},t.dia.Paper.prototype.toPNG=function(t,e){e=e||{},e.type="image/png",this.toDataURL(t,e)},t.dia.Paper.prototype.toJPEG=function(t,e){e=e||{},e.type="image/jpeg",this.toDataURL(t,e)},t.dia.Paper.prototype.openAsPNG=function(t){var i=e.uniqueId("png_output");this.toPNG(function(t){window.open("",i,"menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes").document.write('<img src="'+t+'"/>')},e.extend({padding:10},t))}}(d,o),function(t,e,i,n){function r(e){e=e||{},this.trigger("beforeprint",e),this.$printArea=t("<div/>").addClass("printarea"),e.size&&this.$printArea.addClass("printarea-size-"+e.size);var r=this.$el.clone().appendTo(this.$printArea),o=n.util.normalizeSides(e.padding),s=this.getContentBBox().moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom});i(r.find("svg")[0]).attr({width:"100%",height:"100%",viewBox:[s.x,s.y,s.width,s.height].join(" ")}),this.$detachedChildren=this.$el.children().detach(),this.$printArea.prependTo(document.body)}function o(t){t=t||{},this.$printArea.remove(),this.$el.append(this.$detachedChildren),this.$detachedChildren=null,this.$printArea=null,this.trigger("afterprint",t)}n.dia.Paper.prototype.print=function(i){i=i||{},e.defaults(i,{size:"a4",padding:5});var n=e.bind(r,this,i),s=e.bind(o,this,i),a=e.once(function(){s(),t(window).off("afterprint",a),t(window).off("mouseover",a)});t(window).one("afterprint",a),t(document).one("mouseover",a),e.delay(a,1e3),n(),window.print()}}(s,o,h,d),"object"==typeof n)var v=t("ws").Server,y=t("ws"),b=t("url");return y=y||"undefined"!=typeof window&&window.WebSocket,d.com=d.com||{},d.com.Channel=function(t){if(this.options=t,!this.options||!this.options.graph)throw new Error("Channel: missing a graph.");this.options.ttl=this.options.ttl||60,this.options.healthCheckInterval=this.options.healthCheckInterval||36e5,this.options.reconnectInterval=this.options.reconnectInterval||1e4,this.options.serverShouldSendGraph=!!o.isUndefined(this.options.serverShouldSendGraph)||this.options.serverShouldSendGraph,this._isClient=!!this.options.url,this._clients=[],this.messageQueue=[],this.id=this.options.id||(this._isClient?"c_":"s_")+d.util.uuid(),this.state={},this.state[this.id]=0,this.sites={},this.sites[this.id]={socket:void 0,outgoing:[],ttl:this.options.ttl},this.initialize()},o.extend(d.com.Channel.prototype,r.Events),d.com.Channel.prototype.initialize=function(){this.options.graph.on("all",this.onGraphChange.bind(this)),this._isClient?this.connectClient():this.options.port&&(this.server=new v({port:this.options.port}),this.server.on("connection",this.onConnection.bind(this))),this._isClient||(this._healthCheckInterval=setInterval(this.healthCheck.bind(this),this.options.healthCheckInterval))},d.com.Channel.prototype.connectClient=function(){var t=this.options.url+"/?channelId="+this.id+"&state="+JSON.stringify(this.state)+(this.options.query?"&query="+JSON.stringify(this.options.query):"");this.options.debugLevel>0&&this.log("connectClient",t);var e=new y(t);e.onopen=this.onConnection.bind(this,e),e.onclose=this.onClose.bind(this,e)},d.com.Channel.prototype.close=function(){this._reconnectTimeout&&clearTimeout(this._reconnectTimeout),this._healthCheckInterval&&clearInterval(this._healthCheckInterval),this._closed=!0,o.each(this.sites,function(t){t.socket&&t.socket.close()}),this.server&&this.server.close()},d.com.Channel.prototype.healthCheck=function(){this.options.debugLevel>0&&this.log("healthCheck",o.object(o.keys(this.sites),o.pluck(this.sites,"ttl"))),o.each(this.sites,function(t,e){e!==this.id&&(t.socket&&1===t.socket.readyState?t.ttl=this.options.ttl:t.ttl-=1,t.ttl<=0&&(this.sites=o.omit(this.sites,e),this.state=o.omit(this.state,e)))},this)},d.com.Channel.prototype.onConnection=function(t){if(this._clients.push(t),this.trigger("open",t),this._isClient)this.sites[this.id].socket=t,t.onmessage=function(e){this.onMessage(t,e.data)}.bind(this);else{var e=b.parse(t.upgradeReq.url,!0),i=e.query.channelId;if(this.sites[i])this.sites[i].socket=t;else if(this.debugLevel>1&&this.log("new_site",i),this.sites[i]={socket:t,outgoing:[],ttl:this.options.ttl},this.state[i]=0,this.options.serverShouldSendGraph){var n={channelId:this.id,state:JSON.parse(JSON.stringify(this.state)),action:"graph",graph:this.options.graph.toJSON()};this.messageQueue.push({type:"op",data:n,source:this.id,target:[i]}),this.send()}t.on("message",this.onMessage.bind(this,t)),t.on("close",this.onClose.bind(this,t))}},d.com.Channel.prototype.onClose=function(t){var e=this._clients.indexOf(t);-1!==e&&this._clients.splice(e,1),this._isClient&&!this._closed&&(this._reconnectTimeout&&clearTimeout(this._reconnectTimeout),this._reconnectTimeout=setTimeout(this.connectClient.bind(this),this.options.reconnectInterval)),this.trigger("close",t)},d.com.Channel.prototype.onMessage=function(t,e){this.trigger("message:received",e),this.options.debugLevel>1&&this.log("message",e);try{e=JSON.parse(e)}catch(t){return console.error("Channel: message parsing failed.",t)}if("notification"==e.type)return this.trigger(e.data.event,e.data.data),this.sendNotification(e);var i=e.data;if(this._isClient){var n=this.sites[this.id];i=this.receive(n,this.id,i)}else{var r=this.sites[i.channelId];i=this.receive(r,i.channelId,i);var n=this.sites[this.id];i=this.receive(n,this.id,i)}"graph"===i.action?this.state[i.channelId]=i.state[i.channelId]:this.state[i.channelId]=(this.state[i.channelId]||0)+1,this.options.debugLevel>1&&this.log("new state",this.state),this.execute(i),o.each(this.sites,function(t,e){e!==this.id&&e!==i.channelId&&this.receive(t,e,i)},this),this._isClient||(e.op=i,this.messageQueue.push(e),this.broadcast(e)),this.trigger("message:processed",e)},d.com.Channel.prototype.receive=function(t,e,i){if(!t)return i;this.options.debugLevel>1&&this.log("receive",e,i),this.options.debugLevel>1&&this.log("outgoing",t.outgoing),t.outgoing=o.filter(t.outgoing,function(t){return t.state[t.channelId]>=(i.state[t.channelId]||0)}),this.options.debugLevel>1&&this.log("outgoing.length",t.outgoing.length);for(var n=0;n<t.outgoing.length;n++){var r=t.outgoing[n],s=this.transform(i,r);i=s[0],t.outgoing[n]=s[1]}return i},d.com.Channel.prototype.transform=function(t,e){return this.options.debugLevel>1&&this.log("transform",t,e),"change:target"===t.action&&"remove"===e.action&&t.cell.target.id===e.cell.id&&(t.cell.target={x:0,y:0}),"change:source"===t.action&&"remove"===e.action&&t.cell.source.id===e.cell.id&&(t.cell.source={x:0,y:0}),[t,e]},d.com.Channel.prototype.execute=function(t){var e;switch(t.action){case"add":this.options.graph.addCell(t.cell,{remote:!0});break;case"remove":e=this.options.graph.getCell(t.cell.id),e&&e.remove({remote:!0,disconnectLinks:!0});break;case"graph":this.options.graph.fromJSON(t.graph);break;default:var i=t.action.substr("change:".length);e=this.options.graph.getCell(t.cell.id),e&&e.set(i,t.cell[i],{remote:!0})}},d.com.Channel.prototype.broadcast=function(t){this._isClient?t.target=o.keys(this.sites):t.target=o.keys(o.omit(this.sites,this.id,t.source)),this.send()},d.com.Channel.prototype.send=function(){if(!this._paused){for(var t=[],e=0;e<this.messageQueue.length;e++){var i=this.messageQueue[e];this.sendMessage(i)&&t.push(e)}t.forEach(o.bind(function(t){this.messageQueue.splice(t,1)},this))}},d.com.Channel.prototype.sendMessage=function(t){this.debugLevel>1&&this.log("sendMessage",t);var e=[];return t.target.forEach(function(i,n){var r=this.sites[i];if(!r)return e.push(n);r.socket&&1===r.socket.readyState&&(this.debugLevel>1&&this.log("sendMessage",i,t),r.socket.send(JSON.stringify(t)),e.push(n))},this),e.forEach(function(e){t.target.splice(e,1)}),!t.target.length},d.com.Channel.prototype.log=function(t,e){var i="Channel ["+this.id+"] "+t.toUpperCase()+": ";console.log.apply(console,[i].concat(Array.prototype.slice.call(arguments,1)))},d.com.Channel.prototype.pause=function(){this._paused=!0},d.com.Channel.prototype.unpause=function(){this._paused=!1,this.send()},d.com.Channel.prototype.notify=function(t,e){var i={type:"notification",source:this.id,data:{event:t,data:e}};this.sendNotification(i)},d.com.Channel.prototype.sendNotification=function(t){this._isClient?t.target=o.keys(this.sites):t.target=o.keys(o.omit(this.sites,this.id,t.source)),this.sendMessage(t)},d.com.Channel.prototype.onGraphChange=function(t,e,i,n){if(!n||!n.remote){if("add"===t||"remove"===t||"change:"===t.substr(0,"change:".length)){var r={channelId:this.id,state:JSON.parse(JSON.stringify(this.state)),action:t,cell:e.toJSON()},o={type:"op",data:r,source:this.id};this.options.debugLevel>1&&this.log("generate",o),this.messageQueue.push(o),this.broadcast(o),this.sites[this.id].outgoing.push(r),this.state[this.id]++}}},d.com.ChannelHub=function(t){if(this.options=t,!this.options.port)throw new Error("ChannelHub: missing a port.");this.initialize()},o.extend(d.com.ChannelHub.prototype,r.Events),d.com.ChannelHub.prototype.initialize=function(){this.server=new v({port:this.options.port}),this.server.on("connection",this.onConnection.bind(this))},d.com.ChannelHub.prototype.onConnection=function(t){var e=b.parse(t.upgradeReq.url,!0),i={query:e.query};if(!this.router)throw new Error("ChannelHub: missing a router.");var n=!1,r=this.router(i,function(e,i){if(e)throw new Error(e);i&&!n&&(i.onConnection(t),n=!0)});r instanceof d.com.Channel&&(r.onConnection(t),n=!0)},d.com.ChannelHub.prototype.route=function(t){this.router=t},d.com.ChannelHub.prototype.close=function(){this.server.close()},d.alg=d.alg||{},d.alg.Dijkstra=function(t,e,i){i=i||function(t,e){return 1};var n={};n[e]=0;var r={},o=new d.alg.PriorityQueue;for(var s in t)s!==e&&(n[s]=1/0),o.insert(n[s],s,s);for(var a={};!o.isEmpty();){var l=o.remove();a[l]=!0;for(var c=t[l]||[],h=0;h<c.length;h++){var s=c[h];if(!a[s]){var u=n[l]+i(l,s);u<n[s]&&(n[s]=u,r[s]=l,o.updatePriority(s,u))}}}return r},d.alg=d.alg||{},d.alg.PriorityQueue=function(t){t=t||{},this.comparator=t.comparator||function(t,e){return t-e},this.index={},this.data=t.data||[],this.heapify()},d.alg.PriorityQueue.prototype.isEmpty=function(){return 0===this.data.length},d.alg.PriorityQueue.prototype.insert=function(t,e,i){var n={priority:t,value:e};this.data.push(n);var r=this.data.length-1;i&&(n.id=i,this.index[i]=r),this.bubbleUp(r)},d.alg.PriorityQueue.prototype.peek=function(){return this.data[0]&&this.data[0].value},d.alg.PriorityQueue.prototype.peekPriority=function(){return this.data[0]&&this.data[0].priority},d.alg.PriorityQueue.prototype.updatePriority=function(t,e){var i=this.index[t];if(null===i||void 0===i)throw new Error("Node with id "+t+" was not found in the heap.");var n=this.data,r=n[i].priority,o=this.comparator(e,r);o<0?(n[i].priority=e,this.bubbleUp(i)):o>0&&(n[i].priority=e,this.bubbleDown(i))},d.alg.PriorityQueue.prototype.remove=function(){var t=this.data,e=t[0],i=t.pop();return this.index[t.length]=null,t.length>0&&(t[0]=i,i.id&&(this.index[i.id]=0),this.bubbleDown(0)),e&&e.value},d.alg.PriorityQueue.prototype.heapify=function(){for(var t=0;t<this.data.length;t++)this.bubbleUp(t)},d.alg.PriorityQueue.prototype.bubbleUp=function(t){for(var e,i,n=this.data;t>0&&(e=t-1>>>1,this.comparator(n[t].priority,n[e].priority)<0);)i=n[e],n[e]=n[t],n[t].id&&(this.index[n[t].id]=e),n[t]=i,n[t].id&&(this.index[n[t].id]=t),t=e},d.alg.PriorityQueue.prototype.bubbleDown=function(t){for(var e=this.data,i=e.length-1;;){var n=1+(t<<1),r=n+1,o=t;if(n<=i&&this.comparator(e[n].priority,e[o].priority)<0&&(o=n),r<=i&&this.comparator(e[r].priority,e[o].priority)<0&&(o=r),o===t)break;var s=e[o];e[o]=e[t],e[t].id&&(this.index[e[t].id]=o),e[t]=s,e[t].id&&(this.index[e[t].id]=t),t=o}},d.storage=d.storage||{},d.storage.Local={prefix:"joint.storage",insert:function(t,e,i){var n=e.id||o.uniqueId("doc-"),r=this.loadIndex(t);r.keys.push(n),this.setItem(this.docKey(t,n),e),this.setItem(this.indexKey(t),r),this.callback(i,null,o.extend({},e,{id:n}))},find:function(t,e,i){var n=this.loadIndex(t),r=[];if(o.isEmpty(e))o.each(n.keys,function(e){var n=this.getItem(this.docKey(t,e));n||this.callback(i,new Error("Storage incosistency. No document found for an ID "+e+" from index.")),r.push(n)},this),this.callback(i,null,r);else if(e.id){var s=this.getItem(this.docKey(t,e.id));this.callback(i,null,s?[s]:[])}else this.callback(i,null,[])},remove:function(t,e,i){var n=this.loadIndex(t);o.isEmpty(e)?(o.each(n.keys,function(e){localStorage.removeItem(this.docKey(t,e))},this),localStorage.removeItem(this.indexKey(t)),this.callback(i,null)):e.id&&(o.remove(n.keys,function(t){return t===e.id}),localStorage.removeItem(this.docKey(t,e.id)),this.setItem(this.indexKey(t),n),this.callback(i,null))},callback:function(t,e,i){t&&o.defer(function(){t(e,i)})},setItem:function(t,e){localStorage.setItem(t,JSON.stringify(e))},getItem:function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):e},loadIndex:function(t){var e=this.getItem(this.indexKey(t))||{};return e.keys=e.keys||[],e},docKey:function(t,e){return this.prefix+"."+t+".docs."+e},indexKey:function(t){return this.prefix+"."+t+".index"}},d.g=u,d.V=d.Vectorizer=h,d})},{backbone:1,dagre:2,graphlib:32,jquery:58,lodash:"lodash",url:60,ws:62}],58:[function(t,e,i){!function(t,i){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=!!t&&"length"in t&&t.length,i=rt.type(t);return"function"!==i&&!rt.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function n(t,e,i){if(rt.isFunction(e))return rt.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return rt.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ft.test(e))return rt.filter(e,t,i);e=rt.filter(e,t)}return rt.grep(t,function(t){return q.call(e,t)>-1!==i})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e={};return rt.each(t.match(bt)||[],function(t,i){e[i]=!0}),e}function s(){J.removeEventListener("DOMContentLoaded",s),t.removeEventListener("load",s),rt.ready()}function a(){this.expando=rt.expando+a.uid++}function l(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Nt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Mt.test(i)?rt.parseJSON(i):i)}catch(t){}At.set(t,e,i)}else i=void 0;return i}function c(t,e,i,n){var r,o=1,s=20,a=n?function(){return n.cur()}:function(){return rt.css(t,e,"")},l=a(),c=i&&i[3]||(rt.cssNumber[e]?"":"px"),h=(rt.cssNumber[e]||"px"!==c&&+l)&&St.exec(rt.css(t,e));if(h&&h[3]!==c){c=c||h[3],i=i||[],h=+l||1;do{o=o||".5",h/=o,rt.style(t,e,h+c)}while(o!==(o=a()/l)&&1!==o&&--s)}return i&&(h=+h||+l||0,r=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=h,n.end=r)),r}function h(t,e){var i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&rt.nodeName(t,e)?rt.merge([t],i):i}function u(t,e){for(var i=0,n=t.length;i<n;i++)wt.set(t[i],"globalEval",!e||wt.get(e[i],"globalEval"))}function d(t,e,i,n,r){for(var o,s,a,l,c,d,p=e.createDocumentFragment(),f=[],g=0,m=t.length;g<m;g++)if((o=t[g])||0===o)if("object"===rt.type(o))rt.merge(f,o.nodeType?[o]:o);else if(Bt.test(o)){for(s=s||p.appendChild(e.createElement("div")),a=(zt.exec(o)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,s.innerHTML=l[1]+rt.htmlPrefilter(o)+l[2],d=l[0];d--;)s=s.lastChild;rt.merge(f,s.childNodes),s=p.firstChild,s.textContent=""}else f.push(e.createTextNode(o));for(p.textContent="",g=0;o=f[g++];)if(n&&rt.inArray(o,n)>-1)r&&r.push(o);else if(c=rt.contains(o.ownerDocument,o),s=h(p.appendChild(o),"script"),c&&u(s),i)for(d=0;o=s[d++];)Et.test(o.type||"")&&i.push(o);return p}function p(){return!0}function f(){return!1}function g(){try{return J.activeElement}catch(t){}}function m(t,e,i,n,r,o){var s,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(a in e)m(t,a,i,n,e[a],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=f;else if(!r)return t;return 1===o&&(s=r,r=function(t){return rt().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=rt.guid++)),t.each(function(){rt.event.add(this,e,r,n,i)})}function v(t,e){return rt.nodeName(t,"table")&&rt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function b(t){var e=Wt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function I(t,e){var i,n,r,o,s,a,l,c;if(1===e.nodeType){if(wt.hasData(t)&&(o=wt.access(t),s=wt.set(e,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(i=0,n=c[r].length;i<n;i++)rt.event.add(e,r,c[r][i])}At.hasData(t)&&(a=At.access(t),l=rt.extend({},a),At.set(e,l))}}function x(t,e){var i=e.nodeName.toLowerCase();"input"===i&&jt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function C(t,e,i,n){e=Q.apply([],e);var r,o,s,a,l,c,u=0,p=t.length,f=p-1,g=e[0],m=rt.isFunction(g);if(m||p>1&&"string"==typeof g&&!nt.checkClone&&Rt.test(g))return t.each(function(r){var o=t.eq(r);m&&(e[0]=g.call(this,r,o.html())),C(o,e,i,n)});if(p&&(r=d(e,t[0].ownerDocument,!1,t,n),o=r.firstChild,1===r.childNodes.length&&(r=o),o||n)){for(s=rt.map(h(r,"script"),y),a=s.length;u<p;u++)l=r,u!==f&&(l=rt.clone(l,!0,!0),a&&rt.merge(s,h(l,"script"))),i.call(t[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,rt.map(s,b),u=0;u<a;u++)l=s[u],Et.test(l.type||"")&&!wt.access(l,"globalEval")&&rt.contains(c,l)&&(l.src?rt._evalUrl&&rt._evalUrl(l.src):rt.globalEval(l.textContent.replace(Yt,"")))}return t}function w(t,e,i){for(var n,r=e?rt.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||rt.cleanData(h(n)),n.parentNode&&(i&&rt.contains(n.ownerDocument,n)&&u(h(n,"script")),n.parentNode.removeChild(n));return t}function A(t,e){var i=rt(e.createElement(t)).appendTo(e.body),n=rt.css(i[0],"display");return i.detach(),n}function M(t){var e=J,i=Ut[t];return i||(i=A(t,e),"none"!==i&&i||(Vt=(Vt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Vt[0].contentDocument,e.write(),e.close(),i=A(t,e),Vt.detach()),Ut[t]=i),i}function N(t,e,i){var n,r,o,s,a=t.style;return i=i||Ft(t),s=i?i.getPropertyValue(e)||i[e]:void 0,""!==s&&void 0!==s||rt.contains(t.ownerDocument,t)||(s=rt.style(t,e)),i&&!nt.pixelMarginRight()&&Ht.test(s)&&Xt.test(e)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o),void 0!==s?s+"":s}function k(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function S(t){if(t in ee)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=te.length;i--;)if((t=te[i]+e)in ee)return t}function T(t,e,i){var n=St.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function D(t,e,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,s=0;o<4;o+=2)"margin"===i&&(s+=rt.css(t,i+Tt[o],!0,r)),n?("content"===i&&(s-=rt.css(t,"padding"+Tt[o],!0,r)),"margin"!==i&&(s-=rt.css(t,"border"+Tt[o]+"Width",!0,r))):(s+=rt.css(t,"padding"+Tt[o],!0,r),"padding"!==i&&(s+=rt.css(t,"border"+Tt[o]+"Width",!0,r)));return s}function j(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=Ft(t),s="border-box"===rt.css(t,"boxSizing",!1,o);if(r<=0||null==r){if(r=N(t,e,o),(r<0||null==r)&&(r=t.style[e]),Ht.test(r))return r;n=s&&(nt.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+D(t,e,i||(s?"border":"content"),n,o)+"px"}function z(t,e){for(var i,n,r,o=[],s=0,a=t.length;s<a;s++)n=t[s],n.style&&(o[s]=wt.get(n,"olddisplay"),i=n.style.display,e?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Dt(n)&&(o[s]=wt.access(n,"olddisplay",M(n.nodeName)))):(r=Dt(n),"none"===i&&r||wt.set(n,"olddisplay",r?i:rt.css(n,"display"))));for(s=0;s<a;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[s]||"":"none"));return t}function E(t,e,i,n,r){return new E.prototype.init(t,e,i,n,r)}function L(){return t.setTimeout(function(){ie=void 0}),ie=rt.now()}function B(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)i=Tt[n],r["margin"+i]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function P(t,e,i){for(var n,r=(Z.tweeners[e]||[]).concat(Z.tweeners["*"]),o=0,s=r.length;o<s;o++)if(n=r[o].call(i,e,t))return n}function G(t,e,i){var n,r,o,s,a,l,c,h=this,u={},d=t.style,p=t.nodeType&&Dt(t),f=wt.get(t,"fxshow");i.queue||(a=rt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,rt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],c=rt.css(t,"display"),"inline"===("none"===c?wt.get(t,"olddisplay")||M(t.nodeName):c)&&"none"===rt.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],re.exec(r)){if(delete e[n],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||void 0===f[n])continue;p=!0}u[n]=f&&f[n]||rt.style(t,n)}else c=void 0;if(rt.isEmptyObject(u))"inline"===("none"===c?M(t.nodeName):c)&&(d.display=c);else{f?"hidden"in f&&(p=f.hidden):f=wt.access(t,"fxshow",{}),o&&(f.hidden=!p),p?rt(t).show():h.done(function(){rt(t).hide()}),h.done(function(){var e;wt.remove(t,"fxshow");for(e in u)rt.style(t,e,u[e])});for(n in u)s=P(p?f[n]:0,n,h),n in f||(f[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function O(t,e){var i,n,r,o,s;for(i in t)if(n=rt.camelCase(i),r=e[n],o=t[i],rt.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(s=rt.cssHooks[n])&&"expand"in s){o=s.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=r)}else e[n]=r}function Z(t,e,i){var n,r,o=0,s=Z.prefilters.length,a=rt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ie||L(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,o=1-n,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,i]),o<1&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:rt.extend({},e),opts:rt.extend(!0,{specialEasing:{},easing:rt.easing._default},i),originalProperties:e,originalOptions:i,startTime:ie||L(),duration:i.duration,tweens:[],createTween:function(e,i){var n=rt.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),h=c.props;for(O(h,c.opts.specialEasing);o<s;o++)if(n=Z.prefilters[o].call(c,t,h,c.opts))return rt.isFunction(n.stop)&&(rt._queueHooks(c.elem,c.opts.queue).stop=rt.proxy(n.stop,n)),n;return rt.map(h,P,c),rt.isFunction(c.opts.start)&&c.opts.start.call(t,c),rt.fx.timer(rt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function _(t){return t.getAttribute&&t.getAttribute("class")||""}function R(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(bt)||[]
;if(rt.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function W(t,e,i,n){function r(a){var l;return o[a]=!0,rt.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=t===Ae;return r(e.dataTypes[0])||!o["*"]&&r("*")}function Y(t,e){var i,n,r=rt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&rt.extend(!0,t,n),t}function V(t,e,i){for(var n,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}function U(t,e,i,n){var r,o,s,a,l,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function X(t,e,i,n){var r;if(rt.isArray(e))rt.each(e,function(e,r){i||Se.test(t)?n(t,r):X(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)});else if(i||"object"!==rt.type(e))n(t,e);else for(r in e)X(t+"["+r+"]",e[r],i,n)}function H(t){return rt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var F=[],J=t.document,$=F.slice,Q=F.concat,K=F.push,q=F.indexOf,tt={},et=tt.toString,it=tt.hasOwnProperty,nt={},rt=function(t,e){return new rt.fn.init(t,e)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,at=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};rt.fn=rt.prototype={jquery:"2.2.4",constructor:rt,selector:"",length:0,toArray:function(){return $.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:$.call(this)},pushStack:function(t){var e=rt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return rt.each(this,t)},map:function(t){return this.pushStack(rt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:F.sort,splice:F.splice},rt.extend=rt.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||rt.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],n=t[e],s!==n&&(c&&n&&(rt.isPlainObject(n)||(r=rt.isArray(n)))?(r?(r=!1,o=i&&rt.isArray(i)?i:[]):o=i&&rt.isPlainObject(i)?i:{},s[e]=rt.extend(c,o,n)):void 0!==n&&(s[e]=n));return s},rt.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===rt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!rt.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==rt.type(t)||t.nodeType||rt.isWindow(t))return!1;if(t.constructor&&!it.call(t,"constructor")&&!it.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||it.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;(t=rt.trim(t))&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(st,"ms-").replace(at,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(i(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ot,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?rt.merge(n,"string"==typeof t?[t]:t):K.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:q.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,s=!i;r<o;r++)!e(t[r],r)!==s&&n.push(t[r]);return n},map:function(t,e,n){var r,o,s=0,a=[];if(i(t))for(r=t.length;s<r;s++)null!=(o=e(t[s],s,n))&&a.push(o);else for(s in t)null!=(o=e(t[s],s,n))&&a.push(o);return Q.apply([],a)},guid:1,proxy:function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),rt.isFunction(t))return n=$.call(arguments,2),r=function(){return t.apply(e||this,n.concat($.call(arguments)))},r.guid=t.guid=t.guid||rt.guid++,r},now:Date.now,support:nt}),"function"==typeof Symbol&&(rt.fn[Symbol.iterator]=F[Symbol.iterator]),rt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,i,n){var r,o,s,a,c,u,d,p,f=e&&e.ownerDocument,g=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return i;if(!n&&((e?e.ownerDocument||e:O)!==D&&T(e),e=e||D,z)){if(11!==g&&(u=gt.exec(t)))if(r=u[1]){if(9===g){if(!(s=e.getElementById(r)))return i;if(s.id===r)return i.push(s),i}else if(f&&(s=f.getElementById(r))&&P(e,s)&&s.id===r)return i.push(s),i}else{if(u[2])return $.apply(i,e.getElementsByTagName(t)),i;if((r=u[3])&&b.getElementsByClassName&&e.getElementsByClassName)return $.apply(i,e.getElementsByClassName(r)),i}if(b.qsa&&!Y[t+" "]&&(!E||!E.test(t))){if(1!==g)f=e,p=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(vt,"\\$&"):e.setAttribute("id",a=G),d=w(t),o=d.length,c=ht.test(a)?"#"+a:"[id='"+a+"']";o--;)d[o]=c+" "+h(d[o]);p=d.join(","),f=mt.test(t)&&l(e.parentNode)||e}if(p)try{return $.apply(i,f.querySelectorAll(p)),i}catch(t){}finally{a===G&&e.removeAttribute("id")}}}return M(t.replace(ot,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>I.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[G]=!0,t}function r(t){var e=D.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=i.length;n--;)I.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||U)-(~t.sourceIndex||U);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function c(){}function h(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function u(t,e,i){var n=e.dir,r=i&&"parentNode"===n,o=_++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o)}:function(e,i,s){var a,l,c,h=[Z,o];if(s){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(c=e[G]||(e[G]={}),l=c[e.uniqueID]||(c[e.uniqueID]={}),(a=l[n])&&a[0]===Z&&a[1]===o)return h[2]=a[2];if(l[n]=h,h[2]=t(e,i,s))return!0}}}function d(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function p(t,i,n){for(var r=0,o=i.length;r<o;r++)e(t,i[r],n);return n}function f(t,e,i,n,r){for(var o,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(o=t[a])&&(i&&!i(o,n,r)||(s.push(o),c&&e.push(a)));return s}function g(t,e,i,r,o,s){return r&&!r[G]&&(r=g(r)),o&&!o[G]&&(o=g(o,s)),n(function(n,s,a,l){var c,h,u,d=[],g=[],m=s.length,v=n||p(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?v:f(v,d,t,a,l),b=i?o||(n?t:m||r)?[]:s:y;if(i&&i(y,b,a,l),r)for(c=f(b,g),r(c,[],a,l),h=c.length;h--;)(u=c[h])&&(b[g[h]]=!(y[g[h]]=u));if(n){if(o||t){if(o){for(c=[],h=b.length;h--;)(u=b[h])&&c.push(y[h]=u);o(null,b=[],c,l)}for(h=b.length;h--;)(u=b[h])&&(c=o?K(n,u):d[h])>-1&&(n[c]=!(s[c]=u))}}else b=f(b===s?b.splice(m,b.length):b),o?o(null,s,b,l):$.apply(s,b)})}function m(t){for(var e,i,n,r=t.length,o=I.relative[t[0].type],s=o||I.relative[" "],a=o?1:0,l=u(function(t){return t===e},s,!0),c=u(function(t){return K(e,t)>-1},s,!0),p=[function(t,i,n){var r=!o&&(n||i!==N)||((e=i).nodeType?l(t,i,n):c(t,i,n));return e=null,r}];a<r;a++)if(i=I.relative[t[a].type])p=[u(d(p),i)];else{if(i=I.filter[t[a].type].apply(null,t[a].matches),i[G]){for(n=++a;n<r&&!I.relative[t[n].type];n++);return g(a>1&&d(p),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ot,"$1"),i,a<n&&m(t.slice(a,n)),n<r&&m(t=t.slice(n)),n<r&&h(t))}p.push(i)}return d(p)}function v(t,i){var r=i.length>0,o=t.length>0,s=function(n,s,a,l,c){var h,u,d,p=0,g="0",m=n&&[],v=[],y=N,b=n||o&&I.find.TAG("*",c),x=Z+=null==y?1:Math.random()||.1,C=b.length;for(c&&(N=s===D||s||c);g!==C&&null!=(h=b[g]);g++){if(o&&h){for(u=0,s||h.ownerDocument===D||(T(h),a=!z);d=t[u++];)if(d(h,s||D,a)){l.push(h);break}c&&(Z=x)}r&&((h=!d&&h)&&p--,n&&m.push(h))}if(p+=g,r&&g!==p){for(u=0;d=i[u++];)d(m,v,s,a);if(n){if(p>0)for(;g--;)m[g]||v[g]||(v[g]=F.call(l));v=f(v)}$.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(Z=x,N=y),m};return r?n(s):s}var y,b,I,x,C,w,A,M,N,k,S,T,D,j,z,E,L,B,P,G="sizzle"+1*new Date,O=t.document,Z=0,_=0,R=i(),W=i(),Y=i(),V=function(t,e){return t===e&&(S=!0),0},U=1<<31,X={}.hasOwnProperty,H=[],F=H.pop,J=H.push,$=H.push,Q=H.slice,K=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",nt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",rt=new RegExp(tt+"+","g"),ot=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),st=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ct=new RegExp(nt),ht=new RegExp("^"+et+"$"),ut={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+nt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+q+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,pt=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,vt=/'|\\/g,yt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),bt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},It=function(){T()};try{$.apply(H=Q.call(O.childNodes),O.childNodes),H[O.childNodes.length].nodeType}catch(t){$={apply:H.length?function(t,e){J.apply(t,Q.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}b=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},T=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:O;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,j=D.documentElement,z=!C(D),(i=D.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",It,!1):i.attachEvent&&i.attachEvent("onunload",It)),b.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=r(function(t){return t.appendChild(D.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=ft.test(D.getElementsByClassName),b.getById=r(function(t){return j.appendChild(t).id=G,!D.getElementsByName||!D.getElementsByName(G).length}),b.getById?(I.find.ID=function(t,e){if(void 0!==e.getElementById&&z){var i=e.getElementById(t);return i?[i]:[]}},I.filter.ID=function(t){var e=t.replace(yt,bt);return function(t){return t.getAttribute("id")===e}}):(delete I.find.ID,I.filter.ID=function(t){var e=t.replace(yt,bt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),I.find.TAG=b.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},I.find.CLASS=b.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&z)return e.getElementsByClassName(t)},L=[],E=[],(b.qsa=ft.test(D.querySelectorAll))&&(r(function(t){j.appendChild(t).innerHTML="<a id='"+G+"'></a><select id='"+G+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&E.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||E.push("\\["+tt+"*(?:value|"+q+")"),t.querySelectorAll("[id~="+G+"-]").length||E.push("~="),t.querySelectorAll(":checked").length||E.push(":checked"),t.querySelectorAll("a#"+G+"+*").length||E.push(".#.+[+~]")}),r(function(t){var e=D.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&E.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||E.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),E.push(",.*:")})),(b.matchesSelector=ft.test(B=j.matches||j.webkitMatchesSelector||j.mozMatchesSelector||j.oMatchesSelector||j.msMatchesSelector))&&r(function(t){b.disconnectedMatch=B.call(t,"div"),B.call(t,"[s!='']:x"),L.push("!=",nt)}),E=E.length&&new RegExp(E.join("|")),L=L.length&&new RegExp(L.join("|")),e=ft.test(j.compareDocumentPosition),P=e||ft.test(j.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return S=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!b.sortDetached&&e.compareDocumentPosition(t)===i?t===D||t.ownerDocument===O&&P(O,t)?-1:e===D||e.ownerDocument===O&&P(O,e)?1:k?K(k,t)-K(k,e):0:4&i?-1:1)}:function(t,e){if(t===e)return S=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],l=[e];if(!r||!o)return t===D?-1:e===D?1:r?-1:o?1:k?K(k,t)-K(k,e):0;if(r===o)return s(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?s(a[n],l[n]):a[n]===O?-1:l[n]===O?1:0},D):D},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==D&&T(t),i=i.replace(lt,"='$1']"),b.matchesSelector&&z&&!Y[i+" "]&&(!L||!L.test(i))&&(!E||!E.test(i)))try{var n=B.call(t,i);if(n||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,D,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==D&&T(t),P(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==D&&T(t);var i=I.attrHandle[e.toLowerCase()],n=i&&X.call(I.attrHandle,e.toLowerCase())?i(t,e,!z):void 0;return void 0!==n?n:b.attributes||!z?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(S=!b.detectDuplicates,k=!b.sortStable&&t.slice(0),t.sort(V),S){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return k=null,t},x=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=x(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=x(e);return i},I=e.selectors={cacheLength:50,createPseudo:n,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(yt,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ct.test(i)&&(e=w(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=R[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&R(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(rt," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(o){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(d=m,u=d[G]||(d[G]={}),h=u[d.uniqueID]||(u[d.uniqueID]={}),c=h[t]||[],p=c[0]===Z&&c[1],b=p&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||f.pop();)if(1===d.nodeType&&++b&&d===e){h[t]=[Z,p,b];break}}else if(y&&(d=e,u=d[G]||(d[G]={}),h=u[d.uniqueID]||(u[d.uniqueID]={}),c=h[t]||[],p=c[0]===Z&&c[1],b=p),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(u=d[G]||(d[G]={}),h=u[d.uniqueID]||(u[d.uniqueID]={}),h[t]=[Z,b]),d!==e)););return(b-=r)===n||b%n==0&&b/n>=0}}},PSEUDO:function(t,i){var r,o=I.pseudos[t]||I.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[G]?o(i):o.length>1?(r=[t,t,"",i],I.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),s=r.length;s--;)n=K(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=A(t.replace(ot,"$1"));return r[G]?n(function(t,e,i,n){for(var o,s=r(t,null,n,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(yt,bt),function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:n(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(yt,bt).toLowerCase(),function(e){var i;do{if(i=z?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===j},focus:function(t){return t===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!I.pseudos.empty(t)},header:function(t){return pt.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,i){return[i<0?i+e:i]}),even:a(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:a(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:a(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:a(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},I.pseudos.nth=I.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})I.pseudos[y]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(y);for(y in{submit:!0,reset:!0})I.pseudos[y]=function(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}(y);return c.prototype=I.filters=I.pseudos,I.setFilters=new c,w=e.tokenize=function(t,i){var n,r,o,s,a,l,c,h=W[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],c=I.preFilter;a;){n&&!(r=st.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=at.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(ot," ")}),a=a.slice(n.length));for(s in I.filter)!(r=ut[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):W(t,l).slice(0)},A=e.compile=function(t,e){var i,n=[],r=[],o=Y[t+" "];if(!o){for(e||(e=w(t)),i=e.length;i--;)o=m(e[i]),o[G]?n.push(o):r.push(o);o=Y(t,v(r,n)),o.selector=t}return o},M=e.select=function(t,e,i,n){var r,o,s,a,c,u="function"==typeof t&&t,d=!n&&w(t=u.selector||t);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&b.getById&&9===e.nodeType&&z&&I.relative[o[1].type]){if(!(e=(I.find.ID(s.matches[0].replace(yt,bt),e)||[])[0]))return i;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=ut.needsContext.test(t)?0:o.length;r--&&(s=o[r],!I.relative[a=s.type]);)if((c=I.find[a])&&(n=c(s.matches[0].replace(yt,bt),mt.test(o[0].type)&&l(e.parentNode)||e))){if(o.splice(r,1),!(t=n.length&&h(o)))return $.apply(i,n),i;break}}return(u||A(t,d))(n,e,!z,i,!e||mt.test(t)&&l(e.parentNode)||e),i},b.sortStable=G.split("").sort(V).join("")===G,b.detectDuplicates=!!S,T(),b.sortDetached=r(function(t){return 1&t.compareDocumentPosition(D.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(q,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);rt.find=ct,rt.expr=ct.selectors,rt.expr[":"]=rt.expr.pseudos,rt.uniqueSort=rt.unique=ct.uniqueSort,rt.text=ct.getText,rt.isXMLDoc=ct.isXML,rt.contains=ct.contains;var ht=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&rt(t).is(i))break;n.push(t)}return n},ut=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},dt=rt.expr.match.needsContext,pt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ft=/^.[^:#\[\.,]*$/;rt.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?rt.find.matchesSelector(n,t)?[n]:[]:rt.find.matches(t,rt.grep(e,function(t){return 1===t.nodeType}))},rt.fn.extend({find:function(t){var e,i=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(rt(t).filter(function(){for(e=0;e<i;e++)if(rt.contains(r[e],this))return!0}));for(e=0;e<i;e++)rt.find(t,r[e],n);return n=this.pushStack(i>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&dt.test(t)?rt(t):t||[],!1).length}});var gt,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(rt.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||gt,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:mt.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof rt?e[0]:e,rt.merge(this,rt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),pt.test(n[1])&&rt.isPlainObject(e))for(n in e)rt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):rt.isFunction(t)?void 0!==i.ready?i.ready(t):t(rt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),rt.makeArray(t,this))}).prototype=rt.fn,gt=rt(J);var vt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};rt.fn.extend({has:function(t){var e=rt(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(rt.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,o=[],s=dt.test(t)||"string"!=typeof t?rt(t,e||this.context):0;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&rt.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?rt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?q.call(rt(t),this[0]):q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(rt.uniqueSort(rt.merge(this.get(),rt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),rt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ht(t,"parentNode")},parentsUntil:function(t,e,i){return ht(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return ht(t,"nextSibling")},prevAll:function(t){return ht(t,"previousSibling")},nextUntil:function(t,e,i){return ht(t,"nextSibling",i)},prevUntil:function(t,e,i){return ht(t,"previousSibling",i)},siblings:function(t){return ut((t.parentNode||{}).firstChild,t)},children:function(t){return ut(t.firstChild)},contents:function(t){return t.contentDocument||rt.merge([],t.childNodes)}},function(t,e){rt.fn[t]=function(i,n){var r=rt.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=rt.filter(n,r)),this.length>1&&(yt[t]||rt.uniqueSort(r),vt.test(t)&&r.reverse()),this.pushStack(r)}});var bt=/\S+/g;rt.Callbacks=function(t){t="string"==typeof t?o(t):rt.extend({},t);var e,i,n,r,s=[],a=[],l=-1,c=function(){for(r=t.once,n=e=!0;a.length;l=-1)for(i=a.shift();++l<s.length;)!1===s[l].apply(i[0],i[1])&&t.stopOnFalse&&(l=s.length,i=!1);t.memory||(i=!1),e=!1,r&&(s=i?[]:"")},h={add:function(){return s&&(i&&!e&&(l=s.length-1,a.push(i)),function e(i){rt.each(i,function(i,n){rt.isFunction(n)?t.unique&&h.has(n)||s.push(n):n&&n.length&&"string"!==rt.type(n)&&e(n)})}(arguments),i&&!e&&c()),this},remove:function(){return rt.each(arguments,function(t,e){for(var i;(i=rt.inArray(e,s,i))>-1;)s.splice(i,1),i<=l&&l--}),this},has:function(t){return t?rt.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=i="",this},disabled:function(){return!s},lock:function(){return r=a=[],i||(s=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=i||[],i=[t,i.slice?i.slice():i],a.push(i),e||c()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},rt.extend({Deferred:function(t){var e=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return rt.Deferred(function(i){rt.each(e,function(e,o){var s=rt.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&rt.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[o[0]+"With"](this===n?i.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?rt.extend(t,n):n}},r={};return n.pipe=n.then,rt.each(e,function(t,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,o=$.call(arguments),s=o.length,a=1!==s||t&&rt.isFunction(t.promise)?s:0,l=1===a?t:rt.Deferred(),c=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?$.call(arguments):r,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(e=new Array(s),i=new Array(s),n=new Array(s);r<s;r++)o[r]&&rt.isFunction(o[r].promise)?o[r].promise().progress(c(r,i,e)).done(c(r,n,o)).fail(l.reject):--a;return a||l.resolveWith(n,o),l.promise()}});var It;rt.fn.ready=function(t){return rt.ready.promise().done(t),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?rt.readyWait++:rt.ready(!0)},ready:function(t){(!0===t?--rt.readyWait:rt.isReady)||(rt.isReady=!0,!0!==t&&--rt.readyWait>0||(It.resolveWith(J,[rt]),rt.fn.triggerHandler&&(rt(J).triggerHandler("ready"),rt(J).off("ready"))))}}),rt.ready.promise=function(e){return It||(It=rt.Deferred(),"complete"===J.readyState||"loading"!==J.readyState&&!J.documentElement.doScroll?t.setTimeout(rt.ready):(J.addEventListener("DOMContentLoaded",s),t.addEventListener("load",s))),It.promise(e)},rt.ready.promise();var xt=function(t,e,i,n,r,o,s){var a=0,l=t.length,c=null==i;if("object"===rt.type(i)){r=!0;for(a in i)xt(t,e,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,rt.isFunction(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(rt(t),i)})),e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:c?e.call(t):l?e(t[0],i):o},Ct=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};a.uid=1,a.prototype={register:function(t,e){var i=e||{};return t.nodeType?t[this.expando]=i:Object.defineProperty(t,this.expando,{value:i,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!Ct(t))return{};var e=t[this.expando];return e||(e={},Ct(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[e]=i;else for(n in e)r[n]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,i){var n
;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,rt.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,r,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{rt.isArray(e)?n=e.concat(e.map(rt.camelCase)):(r=rt.camelCase(e),e in o?n=[e,r]:(n=r,n=n in o?[n]:n.match(bt)||[])),i=n.length;for(;i--;)delete o[n[i]]}(void 0===e||rt.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!rt.isEmptyObject(e)}};var wt=new a,At=new a,Mt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Nt=/[A-Z]/g;rt.extend({hasData:function(t){return At.hasData(t)||wt.hasData(t)},data:function(t,e,i){return At.access(t,e,i)},removeData:function(t,e){At.remove(t,e)},_data:function(t,e,i){return wt.access(t,e,i)},_removeData:function(t,e){wt.remove(t,e)}}),rt.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=At.get(o),1===o.nodeType&&!wt.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=rt.camelCase(n.slice(5)),l(o,n,r[n])));wt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){At.set(this,t)}):xt(this,function(e){var i,n;if(o&&void 0===e){if(void 0!==(i=At.get(o,t)||At.get(o,t.replace(Nt,"-$&").toLowerCase())))return i;if(n=rt.camelCase(t),void 0!==(i=At.get(o,n)))return i;if(void 0!==(i=l(o,n,void 0)))return i}else n=rt.camelCase(t),this.each(function(){var i=At.get(this,n);At.set(this,n,e),t.indexOf("-")>-1&&void 0!==i&&At.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){At.remove(this,t)})}}),rt.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=wt.get(t,e),i&&(!n||rt.isArray(i)?n=wt.access(t,e,rt.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=rt.queue(t,e),n=i.length,r=i.shift(),o=rt._queueHooks(t,e),s=function(){rt.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return wt.get(t,i)||wt.access(t,i,{empty:rt.Callbacks("once memory").add(function(){wt.remove(t,[e+"queue",i])})})}}),rt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?rt.queue(this[0],t):void 0===e?this:this.each(function(){var i=rt.queue(this,t,e);rt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&rt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){rt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=rt.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=wt.get(o[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var kt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,St=new RegExp("^(?:([+-])=|)("+kt+")([a-z%]*)$","i"),Tt=["Top","Right","Bottom","Left"],Dt=function(t,e){return t=e||t,"none"===rt.css(t,"display")||!rt.contains(t.ownerDocument,t)},jt=/^(?:checkbox|radio)$/i,zt=/<([\w:-]+)/,Et=/^$|\/(?:java|ecma)script/i,Lt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td;var Bt=/<|&#?\w+;/;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div")),i=J.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),nt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Pt=/^key/,Gt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ot=/^([^.]*)(?:\.(.+)|)/;rt.event={global:{},add:function(t,e,i,n,r){var o,s,a,l,c,h,u,d,p,f,g,m=wt.get(t);if(m)for(i.handler&&(o=i,i=o.handler,r=o.selector),i.guid||(i.guid=rt.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==rt&&rt.event.triggered!==e.type?rt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(bt)||[""],c=e.length;c--;)a=Ot.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(u=rt.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=rt.event.special[p]||{},h=rt.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=l[p])||(d=l[p]=[],d.delegateCount=0,u.setup&&!1!==u.setup.call(t,n,f,s)||t.addEventListener&&t.addEventListener(p,s)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),rt.event.global[p]=!0)},remove:function(t,e,i,n,r){var o,s,a,l,c,h,u,d,p,f,g,m=wt.hasData(t)&&wt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(bt)||[""],c=e.length;c--;)if(a=Ot.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(u=rt.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)h=d[o],!r&&g!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(d.splice(o,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,m.handle)||rt.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)rt.event.remove(t,p+e[c],i,n,!0);rt.isEmptyObject(l)&&wt.remove(t,"handle events")}},dispatch:function(t){t=rt.event.fix(t);var e,i,n,r,o,s=[],a=$.call(arguments),l=(wt.get(this,"events")||{})[t.type]||[],c=rt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=rt.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0!==(n=((rt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,o,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(n=[],i=0;i<a;i++)o=e[i],r=o.selector+" ",void 0===n[r]&&(n[r]=o.needsContext?rt(r,this).index(l)>-1:rt.find(r,this,null,[l]).length),n[r]&&n.push(o);n.length&&s.push({elem:l,handlers:n})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||J,n=i.documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[rt.expando])return t;var e,i,n,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Gt.test(r)?this.mouseHooks:Pt.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new rt.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==g()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===g()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&rt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return rt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},rt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},rt.Event=function(t,e){if(!(this instanceof rt.Event))return new rt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?p:f):this.type=t,e&&rt.extend(this,e),this.timeStamp=t&&t.timeStamp||rt.now(),this[rt.expando]=!0},rt.Event.prototype={constructor:rt.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=p,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=p,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=p,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){rt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===n||rt.contains(n,r))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),rt.fn.extend({on:function(t,e,i,n){return m(this,t,e,i,n)},one:function(t,e,i,n){return m(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,rt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=f),this.each(function(){rt.event.remove(this,t,i,e)})}});var Zt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,_t=/<script|<style|<link/i,Rt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^true\/(.*)/,Yt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;rt.extend({htmlPrefilter:function(t){return t.replace(Zt,"<$1></$2>")},clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(!0),l=rt.contains(t.ownerDocument,t);if(!(nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||rt.isXMLDoc(t)))for(s=h(a),o=h(t),n=0,r=o.length;n<r;n++)x(o[n],s[n]);if(e)if(i)for(o=o||h(t),s=s||h(a),n=0,r=o.length;n<r;n++)I(o[n],s[n]);else I(t,a);return s=h(a,"script"),s.length>0&&u(s,!l&&h(t,"script")),a},cleanData:function(t){for(var e,i,n,r=rt.event.special,o=0;void 0!==(i=t[o]);o++)if(Ct(i)){if(e=i[wt.expando]){if(e.events)for(n in e.events)r[n]?rt.event.remove(i,n):rt.removeEvent(i,n,e.handle);i[wt.expando]=void 0}i[At.expando]&&(i[At.expando]=void 0)}}}),rt.fn.extend({domManip:C,detach:function(t){return w(this,t,!0)},remove:function(t){return w(this,t)},text:function(t){return xt(this,function(t){return void 0===t?rt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return C(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){v(this,t).appendChild(t)}})},prepend:function(){return C(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return C(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return C(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(rt.cleanData(h(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return rt.clone(this,t,e)})},html:function(t){return xt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!_t.test(t)&&!Lt[(zt.exec(t)||["",""])[1].toLowerCase()]){t=rt.htmlPrefilter(t);try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(rt.cleanData(h(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return C(this,arguments,function(e){var i=this.parentNode;rt.inArray(this,t)<0&&(rt.cleanData(h(this)),i&&i.replaceChild(e,this))},t)}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){rt.fn[t]=function(t){for(var i,n=[],r=rt(t),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),rt(r[s])[e](i),K.apply(n,i.get());return this.pushStack(n)}});var Vt,Ut={HTML:"block",BODY:"block"},Xt=/^margin/,Ht=new RegExp("^("+kt+")(?!px)[a-z%]+$","i"),Ft=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Jt=function(t,e,i,n){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=i.apply(t,n||[]);for(o in e)t.style[o]=s[o];return r},$t=J.documentElement;!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",$t.appendChild(s);var e=t.getComputedStyle(a);i="1%"!==e.top,o="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,$t.removeChild(s)}var i,n,r,o,s=J.createElement("div"),a=J.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),rt.extend(nt,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),r},reliableMarginLeft:function(){return null==n&&e(),o},reliableMarginRight:function(){var e,i=a.appendChild(J.createElement("div"));return i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",a.style.width="1px",$t.appendChild(s),e=!parseFloat(t.getComputedStyle(i).marginRight),$t.removeChild(s),a.removeChild(i),e}}))}();var Qt=/^(none|table(?!-c[ea]).+)/,Kt={position:"absolute",visibility:"hidden",display:"block"},qt={letterSpacing:"0",fontWeight:"400"},te=["Webkit","O","Moz","ms"],ee=J.createElement("div").style;rt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=N(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=rt.camelCase(e),l=t.style;if(e=rt.cssProps[a]||(rt.cssProps[a]=S(a)||a),s=rt.cssHooks[e]||rt.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:l[e];o=typeof i,"string"===o&&(r=St.exec(i))&&r[1]&&(i=c(t,e,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(rt.cssNumber[a]?"":"px")),nt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l[e]=i))}},css:function(t,e,i,n){var r,o,s,a=rt.camelCase(e);return e=rt.cssProps[a]||(rt.cssProps[a]=S(a)||a),s=rt.cssHooks[e]||rt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=N(t,e,n)),"normal"===r&&e in qt&&(r=qt[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),rt.each(["height","width"],function(t,e){rt.cssHooks[e]={get:function(t,i,n){if(i)return Qt.test(rt.css(t,"display"))&&0===t.offsetWidth?Jt(t,Kt,function(){return j(t,e,n)}):j(t,e,n)},set:function(t,i,n){var r,o=n&&Ft(t),s=n&&D(t,e,n,"border-box"===rt.css(t,"boxSizing",!1,o),o);return s&&(r=St.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=rt.css(t,e)),T(t,i,s)}}}),rt.cssHooks.marginLeft=k(nt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(N(t,"marginLeft"))||t.getBoundingClientRect().left-Jt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),rt.cssHooks.marginRight=k(nt.reliableMarginRight,function(t,e){if(e)return Jt(t,{display:"inline-block"},N,[t,"marginRight"])}),rt.each({margin:"",padding:"",border:"Width"},function(t,e){rt.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+Tt[n]+e]=o[n]||o[n-2]||o[0];return r}},Xt.test(t)||(rt.cssHooks[t+e].set=T)}),rt.fn.extend({css:function(t,e){return xt(this,function(t,e,i){var n,r,o={},s=0;if(rt.isArray(e)){for(n=Ft(t),r=e.length;s<r;s++)o[e[s]]=rt.css(t,e[s],!1,n);return o}return void 0!==i?rt.style(t,e,i):rt.css(t,e)},t,e,arguments.length>1)},show:function(){return z(this,!0)},hide:function(){return z(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Dt(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=E,E.prototype={constructor:E,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||rt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(rt.cssNumber[i]?"":"px")},cur:function(){var t=E.propHooks[this.prop];return t&&t.get?t.get(this):E.propHooks._default.get(this)},run:function(t){var e,i=E.propHooks[this.prop];return this.options.duration?this.pos=e=rt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=rt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){rt.fx.step[t.prop]?rt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[rt.cssProps[t.prop]]&&!rt.cssHooks[t.prop]?t.elem[t.prop]=t.now:rt.style(t.elem,t.prop,t.now+t.unit)}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},rt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},rt.fx=E.prototype.init,rt.fx.step={};var ie,ne,re=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;rt.Animation=rt.extend(Z,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return c(i.elem,t,St.exec(e),i),i}]},tweener:function(t,e){rt.isFunction(t)?(e=t,t=["*"]):t=t.match(bt);for(var i,n=0,r=t.length;n<r;n++)i=t[n],Z.tweeners[i]=Z.tweeners[i]||[],Z.tweeners[i].unshift(e)},prefilters:[G],prefilter:function(t,e){e?Z.prefilters.unshift(t):Z.prefilters.push(t)}}),rt.speed=function(t,e,i){var n=t&&"object"==typeof t?rt.extend({},t):{complete:i||!i&&e||rt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!rt.isFunction(e)&&e};return n.duration=rt.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in rt.fx.speeds?rt.fx.speeds[n.duration]:rt.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){rt.isFunction(n.old)&&n.old.call(this),n.queue&&rt.dequeue(this,n.queue)},n},rt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Dt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=rt.isEmptyObject(t),o=rt.speed(e,i,n),s=function(){var e=Z(this,rt.extend({},t),o);(r||wt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=rt.timers,s=wt.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&oe.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||rt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=wt.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=rt.timers,s=n?n.length:0;for(i.finish=!0,rt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),rt.each(["toggle","show","hide"],function(t,e){var i=rt.fn[e];rt.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(B(e,!0),t,n,r)}}),rt.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){rt.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),rt.timers=[],rt.fx.tick=function(){var t,e=0,i=rt.timers;for(ie=rt.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||rt.fx.stop(),ie=void 0},rt.fx.timer=function(t){rt.timers.push(t),t()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){ne||(ne=t.setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){t.clearInterval(ne),ne=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(e,i){return e=rt.fx?rt.fx.speeds[e]||e:e,i=i||"fx",this.queue(i,function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),i=e.appendChild(J.createElement("option"));t.type="checkbox",nt.checkOn=""!==t.value,nt.optSelected=i.selected,e.disabled=!0,nt.optDisabled=!i.disabled,t=J.createElement("input"),t.value="t",t.type="radio",nt.radioValue="t"===t.value}();var se,ae=rt.expr.attrHandle;rt.fn.extend({attr:function(t,e){return xt(this,rt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){rt.removeAttr(this,t)})}}),rt.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?rt.prop(t,e,i):(1===o&&rt.isXMLDoc(t)||(e=e.toLowerCase(),r=rt.attrHooks[e]||(rt.expr.match.bool.test(e)?se:void 0)),void 0!==i?null===i?void rt.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:(n=rt.find.attr(t,e),null==n?void 0:n))},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&rt.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(bt);if(o&&1===t.nodeType)for(;i=o[r++];)n=rt.propFix[i]||i,rt.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)}}),se={set:function(t,e,i){return!1===e?rt.removeAttr(t,i):t.setAttribute(i,i),i}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ae[e]||rt.find.attr;ae[e]=function(t,e,n){var r,o;return n||(o=ae[e],ae[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,ae[e]=o),r}});var le=/^(?:input|select|textarea|button)$/i,ce=/^(?:a|area)$/i;rt.fn.extend({prop:function(t,e){return xt(this,rt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[rt.propFix[t]||t]})}}),rt.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&rt.isXMLDoc(t)||(e=rt.propFix[e]||e,r=rt.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=rt.find.attr(t,"tabindex");return e?parseInt(e,10):le.test(t.nodeName)||ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),nt.optSelected||(rt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this});var he=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(t){var e,i,n,r,o,s,a,l=0;if(rt.isFunction(t))return this.each(function(e){rt(this).addClass(t.call(this,e,_(this)))});if("string"==typeof t&&t)for(e=t.match(bt)||[];i=this[l++];)if(r=_(i),n=1===i.nodeType&&(" "+r+" ").replace(he," ")){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=rt.trim(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,o,s,a,l=0;if(rt.isFunction(t))return this.each(function(e){rt(this).removeClass(t.call(this,e,_(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(bt)||[];i=this[l++];)if(r=_(i),n=1===i.nodeType&&(" "+r+" ").replace(he," ")){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=rt.trim(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):rt.isFunction(t)?this.each(function(i){rt(this).toggleClass(t.call(this,i,_(this),e),e)}):this.each(function(){var e,n,r,o;if("string"===i)for(n=0,r=rt(this),o=t.match(bt)||[];e=o[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||(e=_(this),e&&wt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":wt.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+_(i)+" ").replace(he," ").indexOf(e)>-1)return!0;return!1}});var ue=/\r/g,de=/[\x20\t\r\n\f]+/g;rt.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=rt.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,rt(this).val()):t,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(t){return null==t?"":t+""})),(e=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return(e=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(ue,""):null==i?"":i)}}}),rt.extend({valHooks:{option:{get:function(t){var e=rt.find.attr(t,"value");return null!=e?e:rt.trim(rt.text(t)).replace(de," ")}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type||r<0,s=o?null:[],a=o?r+1:n.length,l=r<0?a:o?r:0;l<a;l++)if(i=n[l],(i.selected||l===r)&&(nt.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!rt.nodeName(i.parentNode,"optgroup"))){if(e=rt(i).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,o=rt.makeArray(e),s=r.length;s--;)n=r[s],(n.selected=rt.inArray(rt.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(t,e){if(rt.isArray(e))return t.checked=rt.inArray(rt(t).val(),e)>-1}},nt.checkOn||(rt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var pe=/^(?:focusinfocus|focusoutblur)$/;rt.extend(rt.event,{trigger:function(e,i,n,r){var o,s,a,l,c,h,u,d=[n||J],p=it.call(e,"type")?e.type:e,f=it.call(e,"namespace")?e.namespace.split("."):[];if(s=a=n=n||J,3!==n.nodeType&&8!==n.nodeType&&!pe.test(p+rt.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,e=e[rt.expando]?e:new rt.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:rt.makeArray(i,[e]),u=rt.event.special[p]||{},r||!u.trigger||!1!==u.trigger.apply(n,i))){if(!r&&!u.noBubble&&!rt.isWindow(n)){for(l=u.delegateType||p,pe.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(n.ownerDocument||J)&&d.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=d[o++])&&!e.isPropagationStopped();)e.type=o>1?l:u.bindType||p,h=(wt.get(s,"events")||{})[e.type]&&wt.get(s,"handle"),h&&h.apply(s,i),(h=c&&s[c])&&h.apply&&Ct(s)&&(e.result=h.apply(s,i),!1===e.result&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),i)||!Ct(n)||c&&rt.isFunction(n[p])&&!rt.isWindow(n)&&(a=n[c],a&&(n[c]=null),rt.event.triggered=p,n[p](),rt.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(t,e,i){var n=rt.extend(new rt.Event,i,{type:t,isSimulated:!0});rt.event.trigger(n,null,e)}}),rt.fn.extend({trigger:function(t,e){return this.each(function(){rt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return rt.event.trigger(t,e,i,!0)}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){rt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),rt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),nt.focusin="onfocusin"in t,nt.focusin||rt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){rt.event.simulate(e,t.target,rt.event.fix(t))};rt.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=wt.access(n,e);r||n.addEventListener(t,i,!0),wt.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=wt.access(n,e)-1;r?wt.access(n,e,r):(n.removeEventListener(t,i,!0),wt.remove(n,e))}}});var fe=t.location,ge=rt.now(),me=/\?/;rt.parseJSON=function(t){return JSON.parse(t+"")},rt.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+e),i};var ve=/#.*$/,ye=/([?&])_=[^&]*/,be=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xe=/^(?:GET|HEAD)$/,Ce=/^\/\//,we={},Ae={},Me="*/".concat("*"),Ne=J.createElement("a");Ne.href=fe.href,rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fe.href,type:"GET",isLocal:Ie.test(fe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Me,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Y(Y(t,rt.ajaxSettings),e):Y(rt.ajaxSettings,t)},ajaxPrefilter:R(we),ajaxTransport:R(Ae),ajax:function(e,i){function n(e,i,n,a){var c,u,y,b,x,w=i;2!==I&&(I=2,l&&t.clearTimeout(l),r=void 0,s=a||"",C.readyState=e>0?4:0,c=e>=200&&e<300||304===e,n&&(b=V(d,C,n)),b=U(d,b,C,c),c?(d.ifModified&&(x=C.getResponseHeader("Last-Modified"),x&&(rt.lastModified[o]=x),(x=C.getResponseHeader("etag"))&&(rt.etag[o]=x)),204===e||"HEAD"===d.type?w="nocontent":304===e?w="notmodified":(w=b.state,u=b.data,y=b.error,c=!y)):(y=w,!e&&w||(w="error",e<0&&(e=0))),C.status=e,C.statusText=(i||w)+"",c?g.resolveWith(p,[u,w,C]):g.rejectWith(p,[C,w,y]),C.statusCode(v),v=void 0,
h&&f.trigger(c?"ajaxSuccess":"ajaxError",[C,d,c?u:y]),m.fireWith(p,[C,w]),h&&(f.trigger("ajaxComplete",[C,d]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=void 0),i=i||{};var r,o,s,a,l,c,h,u,d=rt.ajaxSetup({},i),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?rt(p):rt.event,g=rt.Deferred(),m=rt.Callbacks("once memory"),v=d.statusCode||{},y={},b={},I=0,x="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(2===I){if(!a)for(a={};e=be.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===I?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return I||(t=b[i]=b[i]||t,y[t]=e),this},overrideMimeType:function(t){return I||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(I<2)for(e in t)v[e]=[v[e],t[e]];else C.always(t[C.status]);return this},abort:function(t){var e=t||x;return r&&r.abort(e),n(0,e),this}};if(g.promise(C).complete=m.add,C.success=C.done,C.error=C.fail,d.url=((e||d.url||fe.href)+"").replace(ve,"").replace(Ce,fe.protocol+"//"),d.type=i.method||i.type||d.method||d.type,d.dataTypes=rt.trim(d.dataType||"*").toLowerCase().match(bt)||[""],null==d.crossDomain){c=J.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Ne.protocol+"//"+Ne.host!=c.protocol+"//"+c.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=rt.param(d.data,d.traditional)),W(we,d,i,C),2===I)return C;h=rt.event&&d.global,h&&0==rt.active++&&rt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!xe.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(me.test(o)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=ye.test(o)?o.replace(ye,"$1_="+ge++):o+(me.test(o)?"&":"?")+"_="+ge++)),d.ifModified&&(rt.lastModified[o]&&C.setRequestHeader("If-Modified-Since",rt.lastModified[o]),rt.etag[o]&&C.setRequestHeader("If-None-Match",rt.etag[o])),(d.data&&d.hasContent&&!1!==d.contentType||i.contentType)&&C.setRequestHeader("Content-Type",d.contentType),C.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Me+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)C.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(!1===d.beforeSend.call(p,C,d)||2===I))return C.abort();x="abort";for(u in{success:1,error:1,complete:1})C[u](d[u]);if(r=W(Ae,d,i,C)){if(C.readyState=1,h&&f.trigger("ajaxSend",[C,d]),2===I)return C;d.async&&d.timeout>0&&(l=t.setTimeout(function(){C.abort("timeout")},d.timeout));try{I=1,r.send(y,n)}catch(t){if(!(I<2))throw t;n(-1,t)}}else n(-1,"No Transport");return C},getJSON:function(t,e,i){return rt.get(t,e,i,"json")},getScript:function(t,e){return rt.get(t,void 0,e,"script")}}),rt.each(["get","post"],function(t,e){rt[e]=function(t,i,n,r){return rt.isFunction(i)&&(r=r||n,n=i,i=void 0),rt.ajax(rt.extend({url:t,type:e,dataType:r,data:i,success:n},rt.isPlainObject(t)&&t))}}),rt._evalUrl=function(t){return rt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},rt.fn.extend({wrapAll:function(t){var e;return rt.isFunction(t)?this.each(function(e){rt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=rt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return rt.isFunction(t)?this.each(function(e){rt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=rt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=rt.isFunction(t);return this.each(function(i){rt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(t){return!rt.expr.filters.visible(t)},rt.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var ke=/%20/g,Se=/\[\]$/,Te=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;rt.param=function(t,e){var i,n=[],r=function(t,e){e=rt.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(t)||t.jquery&&!rt.isPlainObject(t))rt.each(t,function(){r(this.name,this.value)});else for(i in t)X(i,t[i],e,r);return n.join("&").replace(ke,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=rt.prop(this,"elements");return t?rt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!rt(this).is(":disabled")&&je.test(this.nodeName)&&!De.test(t)&&(this.checked||!jt.test(t))}).map(function(t,e){var i=rt(this).val();return null==i?null:rt.isArray(i)?rt.map(i,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:i.replace(Te,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var ze={0:200,1223:204},Ee=rt.ajaxSettings.xhr();nt.cors=!!Ee&&"withCredentials"in Ee,nt.ajax=Ee=!!Ee,rt.ajaxTransport(function(e){var i,n;if(nt.cors||Ee&&!e.crossDomain)return{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(ze[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return rt.globalEval(t),t}}}),rt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),rt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,r){e=rt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Le=[],Be=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Le.pop()||rt.expando+"_"+ge++;return this[t]=!0,t}}),rt.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=!1!==e.jsonp&&(Be.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Be.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=rt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Be,"$1"+r):!1!==e.jsonp&&(e.url+=(me.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||rt.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},n.always(function(){void 0===o?rt(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,Le.push(r)),s&&rt.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),rt.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||J;var n=pt.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=d([t],e,r),r&&r.length&&rt(r).remove(),rt.merge([],n.childNodes))};var Pe=rt.fn.load;rt.fn.load=function(t,e,i){if("string"!=typeof t&&Pe)return Pe.apply(this,arguments);var n,r,o,s=this,a=t.indexOf(" ");return a>-1&&(n=rt.trim(t.slice(a)),t=t.slice(0,a)),rt.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&rt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(n?rt("<div>").append(rt.parseHTML(t)).find(n):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){rt.fn[e]=function(t){return this.on(e,t)}}),rt.expr.filters.animated=function(t){return rt.grep(rt.timers,function(e){return t===e.elem}).length},rt.offset={setOffset:function(t,e,i){var n,r,o,s,a,l,c,h=rt.css(t,"position"),u=rt(t),d={};"static"===h&&(t.style.position="relative"),a=u.offset(),o=rt.css(t,"top"),l=rt.css(t,"left"),c=("absolute"===h||"fixed"===h)&&(o+l).indexOf("auto")>-1,c?(n=u.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),rt.isFunction(e)&&(e=e.call(t,i,rt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):u.css(d)}},rt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){rt.offset.setOffset(this,t,e)});var e,i,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;if(o)return e=o.documentElement,rt.contains(e,n)?(r=n.getBoundingClientRect(),i=H(o),{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}):r},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===rt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),rt.nodeName(t[0],"html")||(n=t.offset()),n.top+=rt.css(t[0],"borderTopWidth",!0),n.left+=rt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-rt.css(i,"marginTop",!0),left:e.left-n.left-rt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===rt.css(t,"position");)t=t.offsetParent;return t||$t})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;rt.fn[t]=function(n){return xt(this,function(t,n,r){var o=H(t);if(void 0===r)return o?o[e]:t[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r},t,n,arguments.length)}}),rt.each(["top","left"],function(t,e){rt.cssHooks[e]=k(nt.pixelPosition,function(t,i){if(i)return i=N(t,e),Ht.test(i)?rt(t).position()[e]+"px":i})}),rt.each({Height:"height",Width:"width"},function(t,e){rt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){rt.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(!0===n||!0===r?"margin":"border");return xt(this,function(e,i,n){var r;return rt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?rt.css(e,i,s):rt.style(e,i,n,s)},e,o?n:void 0,o,null)}})}),rt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},size:function(){return this.length}}),rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var Ge=t.jQuery,Oe=t.$;return rt.noConflict=function(e){return t.$===rt&&(t.$=Oe),e&&t.jQuery===rt&&(t.jQuery=Ge),rt},e||(t.jQuery=t.$=rt),rt})},{}],59:[function(t,e,i){(function(t){!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},r=n._,o=Array.prototype,s=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,l=o.push,c=o.slice,h=s.toString,u=s.hasOwnProperty,d=Array.isArray,p=Object.keys,f=Object.create,g=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};void 0===i||i.nodeType?n._=m:(void 0!==e&&!e.nodeType&&e.exports&&(i=e.exports=m),i._=m),m.VERSION="1.9.1";var v,y=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)}}return function(){return t.apply(e,arguments)}},b=function(t,e,i){return m.iteratee!==v?m.iteratee(t,e):null==t?m.identity:m.isFunction(t)?y(t,e,i):m.isObject(t)&&!m.isArray(t)?m.matcher(t):m.property(t)};m.iteratee=v=function(t,e){return b(t,e,1/0)};var I=function(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),r=0;r<i;r++)n[r]=arguments[r+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(r=0;r<e;r++)o[r]=arguments[r];return o[e]=n,t.apply(this,o)}},x=function(t){if(!m.isObject(t))return{};if(f)return f(t);g.prototype=t;var e=new g;return g.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},w=function(t,e){return null!=t&&u.call(t,e)},A=function(t,e){for(var i=e.length,n=0;n<i;n++){if(null==t)return;t=t[e[n]]}return i?t:void 0},M=Math.pow(2,53)-1,N=C("length"),k=function(t){var e=N(t);return"number"==typeof e&&e>=0&&e<=M};m.each=m.forEach=function(t,e,i){e=y(e,i);var n,r;if(k(t))for(n=0,r=t.length;n<r;n++)e(t[n],n,t);else{var o=m.keys(t);for(n=0,r=o.length;n<r;n++)e(t[o[n]],o[n],t)}return t},m.map=m.collect=function(t,e,i){e=b(e,i);for(var n=!k(t)&&m.keys(t),r=(n||t).length,o=Array(r),s=0;s<r;s++){var a=n?n[s]:s;o[s]=e(t[a],a,t)}return o};var S=function(t){var e=function(e,i,n,r){var o=!k(e)&&m.keys(e),s=(o||e).length,a=t>0?0:s-1;for(r||(n=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var l=o?o[a]:a;n=i(n,e[l],l,e)}return n};return function(t,i,n,r){var o=arguments.length>=3;return e(t,y(i,r,4),n,o)}};m.reduce=m.foldl=m.inject=S(1),m.reduceRight=m.foldr=S(-1),m.find=m.detect=function(t,e,i){var n=k(t)?m.findIndex:m.findKey,r=n(t,e,i);if(void 0!==r&&-1!==r)return t[r]},m.filter=m.select=function(t,e,i){var n=[];return e=b(e,i),m.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},m.reject=function(t,e,i){return m.filter(t,m.negate(b(e)),i)},m.every=m.all=function(t,e,i){e=b(e,i);for(var n=!k(t)&&m.keys(t),r=(n||t).length,o=0;o<r;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return!1}return!0},m.some=m.any=function(t,e,i){e=b(e,i);for(var n=!k(t)&&m.keys(t),r=(n||t).length,o=0;o<r;o++){var s=n?n[o]:o;if(e(t[s],s,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,i,n){return k(t)||(t=m.values(t)),("number"!=typeof i||n)&&(i=0),m.indexOf(t,e,i)>=0},m.invoke=I(function(t,e,i){var n,r;return m.isFunction(e)?r=e:m.isArray(e)&&(n=e.slice(0,-1),e=e[e.length-1]),m.map(t,function(t){var o=r;if(!o){if(n&&n.length&&(t=A(t,n)),null==t)return;o=t[e]}return null==o?o:o.apply(t,i)})}),m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,i){var n,r,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=k(t)?t:m.values(t);for(var a=0,l=t.length;a<l;a++)null!=(n=t[a])&&n>o&&(o=n)}else e=b(e,i),m.each(t,function(t,i,n){((r=e(t,i,n))>s||r===-1/0&&o===-1/0)&&(o=t,s=r)});return o},m.min=function(t,e,i){var n,r,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=k(t)?t:m.values(t);for(var a=0,l=t.length;a<l;a++)null!=(n=t[a])&&n<o&&(o=n)}else e=b(e,i),m.each(t,function(t,i,n){((r=e(t,i,n))<s||r===1/0&&o===1/0)&&(o=t,s=r)});return o},m.shuffle=function(t){return m.sample(t,1/0)},m.sample=function(t,e,i){if(null==e||i)return k(t)||(t=m.values(t)),t[m.random(t.length-1)];var n=k(t)?m.clone(t):m.values(t),r=N(n);e=Math.max(Math.min(e,r),0);for(var o=r-1,s=0;s<e;s++){var a=m.random(s,o),l=n[s];n[s]=n[a],n[a]=l}return n.slice(0,e)},m.sortBy=function(t,e,i){var n=0;return e=b(e,i),m.pluck(m.map(t,function(t,i,r){return{value:t,index:n++,criteria:e(t,i,r)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}),"value")};var T=function(t,e){return function(i,n,r){var o=e?[[],[]]:{};return n=b(n,r),m.each(i,function(e,r){var s=n(e,r,i);t(o,e,s)}),o}};m.groupBy=T(function(t,e,i){w(t,i)?t[i].push(e):t[i]=[e]}),m.indexBy=T(function(t,e,i){t[i]=e}),m.countBy=T(function(t,e,i){w(t,i)?t[i]++:t[i]=1});var D=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(t){return t?m.isArray(t)?c.call(t):m.isString(t)?t.match(D):k(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:k(t)?t.length:m.keys(t).length},m.partition=T(function(t,e,i){t[i?0:1].push(e)},!0),m.first=m.head=m.take=function(t,e,i){return null==t||t.length<1?null==e?void 0:[]:null==e||i?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,i){return c.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},m.last=function(t,e,i){return null==t||t.length<1?null==e?void 0:[]:null==e||i?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,i){return c.call(t,null==e||i?1:e)},m.compact=function(t){return m.filter(t,Boolean)};var j=function(t,e,i,n){n=n||[];for(var r=n.length,o=0,s=N(t);o<s;o++){var a=t[o];if(k(a)&&(m.isArray(a)||m.isArguments(a)))if(e)for(var l=0,c=a.length;l<c;)n[r++]=a[l++];else j(a,e,i,n),r=n.length;else i||(n[r++]=a)}return n};m.flatten=function(t,e){return j(t,e,!1)},m.without=I(function(t,e){return m.difference(t,e)}),m.uniq=m.unique=function(t,e,i,n){m.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=b(i,n));for(var r=[],o=[],s=0,a=N(t);s<a;s++){var l=t[s],c=i?i(l,s,t):l;e&&!i?(s&&o===c||r.push(l),o=c):i?m.contains(o,c)||(o.push(c),r.push(l)):m.contains(r,l)||r.push(l)}return r},m.union=I(function(t){return m.uniq(j(t,!0,!0))}),m.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=N(t);n<r;n++){var o=t[n];if(!m.contains(e,o)){var s;for(s=1;s<i&&m.contains(arguments[s],o);s++);s===i&&e.push(o)}}return e},m.difference=I(function(t,e){return e=j(e,!0,!0),m.filter(t,function(t){return!m.contains(e,t)})}),m.unzip=function(t){for(var e=t&&m.max(t,N).length||0,i=Array(e),n=0;n<e;n++)i[n]=m.pluck(t,n);return i},m.zip=I(m.unzip),m.object=function(t,e){for(var i={},n=0,r=N(t);n<r;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i};var z=function(t){return function(e,i,n){i=b(i,n);for(var r=N(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(i(e[o],o,e))return o;return-1}};m.findIndex=z(1),m.findLastIndex=z(-1),m.sortedIndex=function(t,e,i,n){i=b(i,n,1);for(var r=i(e),o=0,s=N(t);o<s;){var a=Math.floor((o+s)/2);i(t[a])<r?o=a+1:s=a}return o};var E=function(t,e,i){return function(n,r,o){var s=0,a=N(n);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(i&&o&&a)return o=i(n,r),n[o]===r?o:-1;if(r!==r)return o=e(c.call(n,s,a),m.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(n[o]===r)return o;return-1}};m.indexOf=E(1,m.findIndex,m.sortedIndex),m.lastIndexOf=E(-1,m.findLastIndex),m.range=function(t,e,i){null==e&&(e=t||0,t=0),i||(i=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),o=0;o<n;o++,t+=i)r[o]=t;return r},m.chunk=function(t,e){if(null==e||e<1)return[];for(var i=[],n=0,r=t.length;n<r;)i.push(c.call(t,n,n+=e));return i};var L=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var o=x(t.prototype),s=t.apply(o,r);return m.isObject(s)?s:o};m.bind=I(function(t,e,i){if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=I(function(r){return L(t,n,e,this,i.concat(r))});return n}),m.partial=I(function(t,e){var i=m.partial.placeholder,n=function(){for(var r=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===i?arguments[r++]:e[a];for(;r<arguments.length;)s.push(arguments[r++]);return L(t,n,this,this,s)};return n}),m.partial.placeholder=m,m.bindAll=I(function(t,e){e=j(e,!1,!1);var i=e.length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=e[i];t[n]=m.bind(t[n],t)}}),m.memoize=function(t,e){var i=function(n){var r=i.cache,o=""+(e?e.apply(this,arguments):n);return w(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return i.cache={},i},m.delay=I(function(t,e,i){return setTimeout(function(){return t.apply(null,i)},e)}),m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,i){var n,r,o,s,a=0;i||(i={});var l=function(){a=!1===i.leading?0:m.now(),n=null,s=t.apply(r,o),n||(r=o=null)},c=function(){var c=m.now();a||!1!==i.leading||(a=c);var h=e-(c-a);return r=this,o=arguments,h<=0||h>e?(n&&(clearTimeout(n),n=null),a=c,s=t.apply(r,o),n||(r=o=null)):n||!1===i.trailing||(n=setTimeout(l,h)),s};return c.cancel=function(){clearTimeout(n),a=0,n=r=o=null},c},m.debounce=function(t,e,i){var n,r,o=function(e,i){n=null,i&&(r=t.apply(e,i))},s=I(function(s){if(n&&clearTimeout(n),i){var a=!n;n=setTimeout(o,e),a&&(r=t.apply(this,s))}else n=m.delay(o,e,this,s);return r});return s.cancel=function(){clearTimeout(n),n=null},s},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},m.once=m.partial(m.before,2),m.restArguments=I;var B=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],G=function(t,e){var i=P.length,n=t.constructor,r=m.isFunction(n)&&n.prototype||s,o="constructor";for(w(t,o)&&!m.contains(e,o)&&e.push(o);i--;)(o=P[i])in t&&t[o]!==r[o]&&!m.contains(e,o)&&e.push(o)};m.keys=function(t){if(!m.isObject(t))return[];if(p)return p(t);var e=[];for(var i in t)w(t,i)&&e.push(i);return B&&G(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var i in t)e.push(i);return B&&G(t,e),e},m.values=function(t){for(var e=m.keys(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=t[e[r]];return n},m.mapObject=function(t,e,i){e=b(e,i);for(var n=m.keys(t),r=n.length,o={},s=0;s<r;s++){var a=n[s];o[a]=e(t[a],a,t)}return o},m.pairs=function(t){for(var e=m.keys(t),i=e.length,n=Array(i),r=0;r<i;r++)n[r]=[e[r],t[e[r]]];return n},m.invert=function(t){for(var e={},i=m.keys(t),n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e},m.functions=m.methods=function(t){var e=[];for(var i in t)m.isFunction(t[i])&&e.push(i);return e.sort()};var O=function(t,e){return function(i){var n=arguments.length;if(e&&(i=Object(i)),n<2||null==i)return i;for(var r=1;r<n;r++)for(var o=arguments[r],s=t(o),a=s.length,l=0;l<a;l++){var c=s[l];e&&void 0!==i[c]||(i[c]=o[c])}return i}};m.extend=O(m.allKeys),m.extendOwn=m.assign=O(m.keys),m.findKey=function(t,e,i){e=b(e,i);for(var n,r=m.keys(t),o=0,s=r.length;o<s;o++)if(n=r[o],e(t[n],n,t))return n};var Z=function(t,e,i){return e in i};m.pick=I(function(t,e){var i={},n=e[0];if(null==t)return i;m.isFunction(n)?(e.length>1&&(n=y(n,e[1])),e=m.allKeys(t)):(n=Z,e=j(e,!1,!1),t=Object(t));for(var r=0,o=e.length;r<o;r++){var s=e[r],a=t[s];n(a,s,t)&&(i[s]=a)}return i}),m.omit=I(function(t,e){var i,n=e[0];return m.isFunction(n)?(n=m.negate(n),e.length>1&&(i=e[1])):(e=m.map(j(e,!1,!1),String),n=function(t,i){return!m.contains(e,i)}),m.pick(t,n,i)}),m.defaults=O(m.allKeys,!0),m.create=function(t,e){var i=x(t);return e&&m.extendOwn(i,e),i},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var i=m.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),o=0;o<n;o++){var s=i[o];if(e[s]!==r[s]||!(s in r))return!1}return!0};var _,R;_=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!==t)return e!==e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&R(t,e,i,n)},R=function(t,e,i,n){t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return a.valueOf.call(t)===a.valueOf.call(e)}var o="[object Array]"===r;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,l=e.constructor;if(s!==l&&!(m.isFunction(s)&&s instanceof s&&m.isFunction(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var c=i.length;c--;)if(i[c]===t)return n[c]===e;if(i.push(t),n.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!_(t[c],e[c],i,n))return!1}else{var u,d=m.keys(t);if(c=d.length,m.keys(e).length!==c)return!1;for(;c--;)if(u=d[c],!w(e,u)||!_(t[u],e[u],i,n))return!1}return i.pop(),n.pop(),!0},m.isEqual=function(t,e){return _(t,e)},m.isEmpty=function(t){return null==t||(k(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===h.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){m["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return w(t,"callee")});var W=n.document&&n.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof W&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return!m.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&isNaN(t)},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){if(!m.isArray(e))return w(t,e);for(var i=e.length,n=0;n<i;n++){var r=e[n];if(null==t||!u.call(t,r))return!1;t=t[r]}return!!i},m.noConflict=function(){return n._=r,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return m.isArray(t)?function(e){return A(e,t)}:C(t)},m.propertyOf=function(t){return null==t?function(){}:function(e){return m.isArray(e)?A(t,e):t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,i){var n=Array(Math.max(0,t));e=y(e,i,1);for(var r=0;r<t;r++)n[r]=e(r);return n},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},V=m.invert(Y),U=function(t){var e=function(e){return t[e]},i="(?:"+m.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};m.escape=U(Y),m.unescape=U(V),m.result=function(t,e,i){m.isArray(e)||(e=[e]);var n=e.length;if(!n)return m.isFunction(i)?i.call(t):i;for(var r=0;r<n;r++){var o=null==t?void 0:t[e[r]];void 0===o&&(o=i,r=n),t=m.isFunction(o)?o.call(t):o}return t};var X=0;m.uniqueId=function(t){var e=++X+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},J=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+F[t]};m.template=function(t,e,i){!e&&i&&(e=i),e=m.defaults({},e,m.templateSettings);var n=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(n,function(e,i,n,s,a){return o+=t.slice(r,a).replace(J,$),r=a+e.length,i?o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";var s;try{s=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var a=function(t){return s.call(this,t,m)};return a.source="function("+(e.variable||"obj")+"){\n"+o+"}",a},m.chain=function(t){var e=m(t);return e._chain=!0,e};var Q=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){return m.each(m.functions(t),function(e){var i=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),Q(this,i.apply(m,t))}}),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];m.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],Q(this,i)}}),m.each(["concat","join","slice"],function(t){var e=o[t];m.prototype[t]=function(){return Q(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&c.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function o(t){return c.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var l=t("punycode"),c=t("./util");i.parse=r,i.resolve=s,i.resolveObject=a,i.format=o,i.Url=n;var h=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(p),g=["'"].concat(f),m=["%","/","?",";","#"].concat(g),v=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,I={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=t("querystring");n.prototype.parse=function(t,e,i){if(!c.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(r),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(r);var a=t;if(a=a.trim(),!i&&1===t.split("#").length){var u=d.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],this.query=e?w.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=h.exec(a);if(p){p=p[0];var f=p.toLowerCase();this.protocol=f,a=a.substr(p.length)}if(i||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===a.substr(0,2);!A||p&&x[p]||(a=a.substr(2),this.slashes=!0)}if(!x[p]&&(A||p&&!C[p])){for(var M=-1,N=0;N<v.length;N++){var k=a.indexOf(v[N]);-1!==k&&(-1===M||k<M)&&(M=k)}var S,T;T=-1===M?a.lastIndexOf("@"):a.lastIndexOf("@",M),-1!==T&&(S=a.slice(0,T),a=a.slice(T+1),this.auth=decodeURIComponent(S)),M=-1;for(var N=0;N<m.length;N++){var k=a.indexOf(m[N]);-1!==k&&(-1===M||k<M)&&(M=k)}-1===M&&(M=a.length),this.host=a.slice(0,M),a=a.slice(M),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var j=this.hostname.split(/\./),N=0,z=j.length;N<z;N++){var E=j[N];if(E&&!E.match(y)){for(var L="",B=0,P=E.length;B<P;B++)E.charCodeAt(B)>127?L+="x":L+=E[B];if(!L.match(y)){
var G=j.slice(0,N),O=j.slice(N+1),Z=E.match(b);Z&&(G.push(Z[1]),O.unshift(Z[2])),O.length&&(a="/"+O.join(".")+a),this.hostname=G.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=l.toASCII(this.hostname));var _=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+_,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!I[f])for(var N=0,z=g.length;N<z;N++){var W=g[N];if(-1!==a.indexOf(W)){var Y=encodeURIComponent(W);Y===W&&(Y=escape(W)),a=a.split(W).join(Y)}}var V=a.indexOf("#");-1!==V&&(this.hash=a.substr(V),a=a.slice(0,V));var U=a.indexOf("?");if(-1!==U?(this.search=a.substr(U),this.query=a.substr(U+1),e&&(this.query=w.parse(this.query)),a=a.slice(0,U)):e&&(this.search="",this.query={}),a&&(this.pathname=a),C[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var _=this.pathname||"",X=this.search||"";this.path=_+X}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=w.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||C[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+r+i+s+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(c.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var h=a[l];"protocol"!==h&&(i[h]=t[h])}return C[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!C[t.protocol]){for(var u=Object.keys(t),d=0;d<u.length;d++){var p=u[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||x[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",m=i.search||"";i.path=g+m}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=y||v||i.host&&t.pathname,I=b,w=i.pathname&&i.pathname.split("/")||[],f=t.pathname&&t.pathname.split("/")||[],A=i.protocol&&!C[i.protocol];if(A&&(i.hostname="",i.port=null,i.host&&(""===w[0]?w[0]=i.host:w.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),b=b&&(""===f[0]||""===w[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),i.search=t.search,i.query=t.query;else if(!c.isNullOrUndefined(t.search)){if(A){i.hostname=i.host=w.shift();var M=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");M&&(i.auth=M.shift(),i.host=i.hostname=M.shift())}return i.search=t.search,i.query=t.query,c.isNull(i.pathname)&&c.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!w.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var N=w.slice(-1)[0],k=(i.host||t.host||w.length>1)&&("."===N||".."===N)||""===N,S=0,T=w.length;T>=0;T--)N=w[T],"."===N?w.splice(T,1):".."===N?(w.splice(T,1),S++):S&&(w.splice(T,1),S--);if(!b&&!I)for(;S--;S)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var D=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(A){i.hostname=i.host=D?"":w.length?w.shift():"";var M=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");M&&(i.auth=M.shift(),i.host=i.hostname=M.shift())}return b=b||i.host&&w.length,b&&!D&&w.unshift(""),w.length?i.pathname=w.join("/"):(i.pathname=null,i.path=null),c.isNull(i.pathname)&&c.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":61,punycode:53,querystring:56}],61:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],62:[function(t,e,i){function n(t,e,i){return e?new o(t,e):new o(t)}var r=function(){return this}(),o=r.WebSocket||r.MozWebSocket;e.exports=o?n:null,o&&(n.prototype=o.prototype)},{}],lodash:[function(t,e,i){(function(t){(function(){function n(t,e){if(t!==e){var i=null===t,n=t===M,r=t===t,o=null===e,s=e===M,a=e===e;if(t>e&&!o||!r||i&&!s&&a||n&&a)return 1;if(t<e&&!i||!a||o&&!n&&r||s&&r)return-1}return 0}function r(t,e,i){for(var n=t.length,r=i?n:-1;i?r--:++r<n;)if(e(t[r],r,t))return r;return-1}function o(t,e,i){if(e!==e)return m(t,i);for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}function s(t){return"function"==typeof t||!1}function a(t){return null==t?"":t+""}function l(t,e){for(var i=-1,n=t.length;++i<n&&e.indexOf(t.charAt(i))>-1;);return i}function c(t,e){for(var i=t.length;i--&&e.indexOf(t.charAt(i))>-1;);return i}function h(t,e){return n(t.criteria,e.criteria)||t.index-e.index}function u(t,e,i){for(var r=-1,o=t.criteria,s=e.criteria,a=o.length,l=i.length;++r<a;){var c=n(o[r],s[r]);if(c){if(r>=l)return c;var h=i[r];return c*("asc"===h||!0===h?1:-1)}}return t.index-e.index}function d(t){return Rt[t]}function p(t){return Wt[t]}function f(t,e,i){return e?t=Ut[t]:i&&(t=Xt[t]),"\\"+t}function g(t){return"\\"+Xt[t]}function m(t,e,i){for(var n=t.length,r=e+(i?0:-1);i?r--:++r<n;){var o=t[r];if(o!==o)return r}return-1}function v(t){return!!t&&"object"==typeof t}function y(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function b(t,e){for(var i=-1,n=t.length,r=-1,o=[];++i<n;)t[i]===e&&(t[i]=V,o[++r]=i);return o}function I(t,e){for(var i,n=-1,r=t.length,o=-1,s=[];++n<r;){var a=t[n],l=e?e(a,n,t):a;n&&i===l||(i=l,s[++o]=a)}return s}function x(t){for(var e=-1,i=t.length;++e<i&&y(t.charCodeAt(e)););return e}function C(t){for(var e=t.length;e--&&y(t.charCodeAt(e)););return e}function w(t){return Yt[t]}function A(t){function e(t){if(v(t)&&!Ta(t)&&!(t instanceof Rt)){if(t instanceof y)return t;if(es.call(t,"__chain__")&&es.call(t,"__wrapped__"))return pn(t)}return new y(t)}function i(){}function y(t,e,i){this.__wrapped__=t,this.__actions__=i||[],this.__chain__=!!e}function Rt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ss,this.__views__=[]}function Wt(){var t=new Rt(this.__wrapped__);return t.__actions__=ie(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ie(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ie(this.__views__),t}function Yt(){if(this.__filtered__){var t=new Rt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Vt(){var t=this.__wrapped__.value(),e=this.__dir__,i=Ta(t),n=e<0,r=i?t.length:0,o=Ui(0,r,this.__views__),s=o.start,a=o.end,l=a-s,c=n?a:s-1,h=this.__iteratees__,u=h.length,d=0,p=ws(l,this.__takeCount__);if(!i||r<_||r==l&&p==l)return ii(n&&i?t.reverse():t,this.__actions__);var f=[];t:for(;l--&&d<p;){c+=e;for(var g=-1,m=t[c];++g<u;){var v=h[g],y=v.iteratee,b=v.type,I=y(m);if(b==W)m=I;else if(!I){if(b==R)continue t;break t}}f[d++]=m}return f}function Ut(){this.__data__={}}function Xt(t){return this.has(t)&&delete this.__data__[t]}function Ht(t){return"__proto__"==t?M:this.__data__[t]}function Ft(t){return"__proto__"!=t&&es.call(this.__data__,t)}function Jt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function $t(t){var e=t?t.length:0;for(this.data={hash:vs(null),set:new us};e--;)this.push(t[e])}function Qt(t,e){var i=t.data;return("string"==typeof e||Lr(e)?i.set.has(e):i.hash[e])?0:-1}function Kt(t){var e=this.data;"string"==typeof t||Lr(t)?e.set.add(t):e.hash[t]=!0}function ee(t,e){for(var i=-1,n=t.length,r=-1,o=e.length,s=Ro(n+o);++i<n;)s[i]=t[i];for(;++r<o;)s[i++]=e[r];return s}function ie(t,e){var i=-1,n=t.length;for(e||(e=Ro(n));++i<n;)e[i]=t[i];return e}function ne(t,e){for(var i=-1,n=t.length;++i<n&&!1!==e(t[i],i,t););return t}function re(t,e){for(var i=t.length;i--&&!1!==e(t[i],i,t););return t}function oe(t,e){for(var i=-1,n=t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function se(t,e,i,n){for(var r=-1,o=t.length,s=n,a=s;++r<o;){var l=t[r],c=+e(l);i(c,s)&&(s=c,a=l)}return a}function ae(t,e){for(var i=-1,n=t.length,r=-1,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[++r]=s)}return o}function le(t,e){for(var i=-1,n=t.length,r=Ro(n);++i<n;)r[i]=e(t[i],i,t);return r}function ce(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function he(t,e,i,n){var r=-1,o=t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function ue(t,e,i,n){var r=t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function de(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function pe(t,e){for(var i=t.length,n=0;i--;)n+=+e(t[i])||0;return n}function fe(t,e){return t===M?e:t}function ge(t,e,i,n){return t!==M&&es.call(n,i)?t:e}function me(t,e,i){for(var n=-1,r=_a(e),o=r.length;++n<o;){var s=r[n],a=t[s],l=i(a,e[s],s,t,e);(l===l?l===a:a!==a)&&(a!==M||s in t)||(t[s]=l)}return t}function ve(t,e){return null==e?t:be(e,_a(e),t)}function ye(t,e){for(var i=-1,n=null==t,r=!n&&$i(t),o=r?t.length:0,s=e.length,a=Ro(s);++i<s;){var l=e[i];a[i]=r?Qi(l,o)?t[l]:M:n?M:t[l]}return a}function be(t,e,i){i||(i={});for(var n=-1,r=e.length;++n<r;){var o=e[n];i[o]=t[o]}return i}function Ie(t,e,i){var n=typeof t;return"function"==n?e===M?t:oi(t,e,i):null==t?So:"object"==n?Ze(t):e===M?Lo(t):_e(t,e)}function xe(t,e,i,n,r,o,s){var a;if(i&&(a=r?i(t,n,r):i(t)),a!==M)return a;if(!Lr(t))return t;var l=Ta(t);if(l){if(a=Xi(t),!e)return ie(t,a)}else{var c=ns.call(t),h=c==$;if(c!=K&&c!=U&&(!h||r))return _t[c]?Fi(t,c,e):r?t:{};if(a=Hi(h?{}:t),!e)return ve(a,t)}o||(o=[]),s||(s=[]);for(var u=o.length;u--;)if(o[u]==t)return s[u];return o.push(t),s.push(a),(l?ne:je)(t,function(n,r){a[r]=xe(n,e,i,r,t,o,s)}),a}function Ce(t,e,i){if("function"!=typeof t)throw new $o(Y);return ds(function(){t.apply(M,i)},e)}function we(t,e){var i=t?t.length:0,n=[];if(!i)return n;var r=-1,s=Wi(),a=s==o,l=a&&e.length>=_?fi(e):null,c=e.length;l&&(s=Qt,a=!1,e=l);t:for(;++r<i;){var h=t[r];if(a&&h===h){for(var u=c;u--;)if(e[u]===h)continue t;n.push(h)}else s(e,h,0)<0&&n.push(h)}return n}function Ae(t,e){var i=!0;return Ps(t,function(t,n,r){return i=!!e(t,n,r)}),i}function Me(t,e,i,n){var r=n,o=r;return Ps(t,function(t,s,a){var l=+e(t,s,a);(i(l,r)||l===n&&l===o)&&(r=l,o=t)}),o}function Ne(t,e,i,n){var r=t.length;for(i=null==i?0:+i||0,i<0&&(i=-i>r?0:r+i),n=n===M||n>r?r:+n||0,n<0&&(n+=r),r=i>n?0:n>>>0,i>>>=0;i<r;)t[i++]=e;return t}function ke(t,e){var i=[];return Ps(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i}function Se(t,e,i,n){var r;return i(t,function(t,i,o){if(e(t,i,o))return r=n?i:t,!1}),r}function Te(t,e,i,n){n||(n=[]);for(var r=-1,o=t.length;++r<o;){var s=t[r];v(s)&&$i(s)&&(i||Ta(s)||Mr(s))?e?Te(s,e,i,n):ce(n,s):i||(n[n.length]=s)}return n}function De(t,e){return Os(t,e,to)}function je(t,e){return Os(t,e,_a)}function ze(t,e){return Zs(t,e,_a)}function Ee(t,e){for(var i=-1,n=e.length,r=-1,o=[];++i<n;){var s=e[i];Er(t[s])&&(o[++r]=s)}return o}function Le(t,e,i){if(null!=t){i!==M&&i in un(t)&&(e=[i]);for(var n=0,r=e.length;null!=t&&n<r;)t=t[e[n++]];return n&&n==r?t:M}}function Be(t,e,i,n,r,o){return t===e||(null==t||null==e||!Lr(t)&&!v(e)?t!==t&&e!==e:Pe(t,e,Be,i,n,r,o))}function Pe(t,e,i,n,r,o,s){var a=Ta(t),l=Ta(e),c=X,h=X;a||(c=ns.call(t),c==U?c=K:c!=K&&(a=Yr(t))),l||(h=ns.call(e),h==U?h=K:h!=K&&(l=Yr(e)));var u=c==K,d=h==K,p=c==h;if(p&&!a&&!u)return Oi(t,e,c);if(!r){var f=u&&es.call(t,"__wrapped__"),g=d&&es.call(e,"__wrapped__");if(f||g)return i(f?t.value():t,g?e.value():e,n,r,o,s)}if(!p)return!1;o||(o=[]),s||(s=[]);for(var m=o.length;m--;)if(o[m]==t)return s[m]==e;o.push(t),s.push(e);var v=(a?Gi:Zi)(t,e,i,n,r,o,s);return o.pop(),s.pop(),v}function Ge(t,e,i){var n=e.length,r=n,o=!i;if(null==t)return!r;for(t=un(t);n--;){var s=e[n];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<r;){s=e[n];var a=s[0],l=t[a],c=s[1];if(o&&s[2]){if(l===M&&!(a in t))return!1}else{var h=i?i(l,c,a):M;if(!(h===M?Be(c,l,i,!0):h))return!1}}return!0}function Oe(t,e){var i=-1,n=$i(t)?Ro(t.length):[];return Ps(t,function(t,r,o){n[++i]=e(t,r,o)}),n}function Ze(t){var e=Yi(t);if(1==e.length&&e[0][2]){var i=e[0][0],n=e[0][1];return function(t){return null!=t&&(t[i]===n&&(n!==M||i in un(t)))}}return function(t){return Ge(t,e)}}function _e(t,e){var i=Ta(t),n=qi(t)&&nn(e),r=t+"";return t=dn(t),function(o){if(null==o)return!1;var s=r;if(o=un(o),(i||!n)&&!(s in o)){if(null==(o=1==t.length?o:Le(o,Fe(t,0,-1))))return!1;s=Nn(t),o=un(o)}return o[s]===e?e!==M||s in o:Be(e,o[s],M,!0)}}function Re(t,e,i,n,r){if(!Lr(t))return t;var o=$i(e)&&(Ta(e)||Yr(e)),s=o?M:_a(e);return ne(s||e,function(a,l){if(s&&(l=a,a=e[l]),v(a))n||(n=[]),r||(r=[]),We(t,e,l,Re,i,n,r);else{var c=t[l],h=i?i(c,a,l,t,e):M,u=h===M;u&&(h=a),h===M&&(!o||l in t)||!u&&(h===h?h===c:c!==c)||(t[l]=h)}}),t}function We(t,e,i,n,r,o,s){for(var a=o.length,l=e[i];a--;)if(o[a]==l)return void(t[i]=s[a]);var c=t[i],h=r?r(c,l,i,t,e):M,u=h===M;u&&(h=l,$i(l)&&(Ta(l)||Yr(l))?h=Ta(c)?c:$i(c)?ie(c):[]:_r(l)||Mr(l)?h=Mr(c)?Fr(c):_r(c)?c:{}:u=!1),o.push(l),s.push(h),u?t[i]=n(h,l,r,o,s):(h===h?h!==c:c===c)&&(t[i]=h)}function Ye(t){return function(e){return null==e?M:e[t]}}function Ve(t){var e=t+"";return t=dn(t),function(i){return Le(i,t,e)}}function Ue(t,e){for(var i=t?e.length:0;i--;){var n=e[i];if(n!=r&&Qi(n)){var r=n;ps.call(t,n,1)}}return t}function Xe(t,e){return t+ys(Ns()*(e-t+1))}function He(t,e,i,n,r){return r(t,function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)}),i}function Fe(t,e,i){var n=-1,r=t.length;e=null==e?0:+e||0,e<0&&(e=-e>r?0:r+e),i=i===M||i>r?r:+i||0,i<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Ro(r);++n<r;)o[n]=t[n+e];return o}function Je(t,e){var i;return Ps(t,function(t,n,r){return!(i=e(t,n,r))}),!!i}function $e(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function Qe(t,e,i){var n=_i(),r=-1;return e=le(e,function(t){return n(t)}),$e(Oe(t,function(t){return{criteria:le(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return u(t,e,i)})}function Ke(t,e){var i=0;return Ps(t,function(t,n,r){i+=+e(t,n,r)||0}),i}function qe(t,e){var i=-1,n=Wi(),r=t.length,s=n==o,a=s&&r>=_,l=a?fi():null,c=[];l?(n=Qt,s=!1):(a=!1,l=e?[]:c);t:for(;++i<r;){var h=t[i],u=e?e(h,i,t):h;if(s&&h===h){for(var d=l.length;d--;)if(l[d]===u)continue t;e&&l.push(u),c.push(h)}else n(l,u,0)<0&&((e||a)&&l.push(u),c.push(h))}return c}function ti(t,e){for(var i=-1,n=e.length,r=Ro(n);++i<n;)r[i]=t[e[i]];return r}function ei(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?Fe(t,n?0:o,n?o+1:r):Fe(t,n?o+1:0,n?r:o)}function ii(t,e){var i=t;i instanceof Rt&&(i=i.value());for(var n=-1,r=e.length;++n<r;){var o=e[n];i=o.func.apply(o.thisArg,ce([i],o.args))}return i}function ni(t,e,i){var n=0,r=t?t.length:n;if("number"==typeof e&&e===e&&r<=js){for(;n<r;){var o=n+r>>>1,s=t[o];(i?s<=e:s<e)&&null!==s?n=o+1:r=o}return r}return ri(t,e,So,i)}function ri(t,e,i,n){e=i(e);for(var r=0,o=t?t.length:0,s=e!==e,a=null===e,l=e===M;r<o;){var c=ys((r+o)/2),h=i(t[c]),u=h!==M,d=h===h;if(s)var p=d||n;else p=a?d&&u&&(n||null!=h):l?d&&(n||u):null!=h&&(n?h<=e:h<e);p?r=c+1:o=c}return ws(o,Ds)}function oi(t,e,i){if("function"!=typeof t)return So;if(e===M)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)};case 5:return function(i,n,r,o,s){return t.call(e,i,n,r,o,s)}}return function(){return t.apply(e,arguments)}}function si(t){var e=new ss(t.byteLength);return new fs(e).set(new fs(t)),e}function ai(t,e,i){for(var n=i.length,r=-1,o=Cs(t.length-n,0),s=-1,a=e.length,l=Ro(a+o);++s<a;)l[s]=e[s];for(;++r<n;)l[i[r]]=t[r];for(;o--;)l[s++]=t[r++];return l}function li(t,e,i){for(var n=-1,r=i.length,o=-1,s=Cs(t.length-r,0),a=-1,l=e.length,c=Ro(s+l);++o<s;)c[o]=t[o];for(var h=o;++a<l;)c[h+a]=e[a];for(;++n<r;)c[h+i[n]]=t[o++];return c}function ci(t,e){return function(i,n,r){var o=e?e():{};if(n=_i(n,r,3),Ta(i))for(var s=-1,a=i.length;++s<a;){var l=i[s];t(o,l,n(l,s,i),i)}else Ps(i,function(e,i,r){t(o,e,n(e,i,r),r)});return o}}function hi(t){return vr(function(e,i){var n=-1,r=null==e?0:i.length,o=r>2?i[r-2]:M,s=r>2?i[2]:M,a=r>1?i[r-1]:M;for("function"==typeof o?(o=oi(o,a,5),r-=2):(o="function"==typeof a?a:M,r-=o?1:0),s&&Ki(i[0],i[1],s)&&(o=r<3?M:o,r=1);++n<r;){var l=i[n];l&&t(e,l,o)}return e})}function ui(t,e){return function(i,n){var r=i?Ws(i):0;if(!en(r))return t(i,n);for(var o=e?r:-1,s=un(i);(e?o--:++o<r)&&!1!==n(s[o],o,s););return i}}function di(t){return function(e,i,n){for(var r=un(e),o=n(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var l=o[a];if(!1===i(r[l],l,r))break}return e}}function pi(t,e){function i(){return(this&&this!==qt&&this instanceof i?n:t).apply(e,arguments)}var n=mi(t);return i}function fi(t){return vs&&us?new $t(t):null}function gi(t){return function(e){for(var i=-1,n=Mo(ho(e)),r=n.length,o="";++i<r;)o=t(o,n[i],i);return o}}function mi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Bs(t.prototype),n=t.apply(i,e);return Lr(n)?n:i}}function vi(t){function e(i,n,r){r&&Ki(i,n,r)&&(n=M);var o=Pi(i,t,M,M,M,M,M,n);return o.placeholder=e.placeholder,o}return e}function yi(t,e){return vr(function(i){var n=i[0];return null==n?n:(i.push(e),t.apply(M,i))})}function bi(t,e){return function(i,n,r){if(r&&Ki(i,n,r)&&(n=M),n=_i(n,r,3),1==n.length){i=Ta(i)?i:hn(i);var o=se(i,n,t,e);if(!i.length||o!==e)return o}return Me(i,n,t,e)}}function Ii(t,e){return function(i,n,o){if(n=_i(n,o,3),Ta(i)){var s=r(i,n,e);return s>-1?i[s]:M}return Se(i,n,t)}}function xi(t){return function(e,i,n){return e&&e.length?(i=_i(i,n,3),r(e,i,t)):-1}}function Ci(t){return function(e,i,n){return i=_i(i,n,3),Se(e,i,t,!0)}}function wi(t){return function(){for(var e,i=arguments.length,n=t?i:-1,r=0,o=Ro(i);t?n--:++n<i;){var s=o[r++]=arguments[n];if("function"!=typeof s)throw new $o(Y);!e&&y.prototype.thru&&"wrapper"==Ri(s)&&(e=new y([],!0))}for(n=e?-1:i;++n<i;){s=o[n];var a=Ri(s),l="wrapper"==a?Rs(s):M;e=l&&tn(l[0])&&l[1]==(L|D|z|B)&&!l[4].length&&1==l[9]?e[Ri(l[0])].apply(e,l[3]):1==s.length&&tn(s)?e[a]():e.thru(s)}return function(){var t=arguments,n=t[0];if(e&&1==t.length&&Ta(n)&&n.length>=_)return e.plant(n).value();for(var r=0,s=i?o[r].apply(this,t):n;++r<i;)s=o[r].call(this,s);return s}}}function Ai(t,e){return function(i,n,r){return"function"==typeof n&&r===M&&Ta(i)?t(i,n):e(i,oi(n,r,3))}}function Mi(t){return function(e,i,n){return"function"==typeof i&&n===M||(i=oi(i,n,3)),t(e,i,to)}}function Ni(t){return function(e,i,n){return"function"==typeof i&&n===M||(i=oi(i,n,3)),t(e,i)}}function ki(t){return function(e,i,n){var r={};return i=_i(i,n,3),je(e,function(e,n,o){var s=i(e,n,o);n=t?s:n,e=t?e:s,r[n]=e}),r}}function Si(t){return function(e,i,n){return e=a(e),(t?e:"")+zi(e,i,n)+(t?"":e)}}function Ti(t){var e=vr(function(i,n){var r=b(n,e.placeholder);return Pi(i,t,M,n,r)});return e}function Di(t,e){return function(i,n,r,o){var s=arguments.length<3;return"function"==typeof n&&o===M&&Ta(i)?t(i,n,r,s):He(i,_i(n,o,4),r,s,e)}}function ji(t,e,i,n,r,o,s,a,l,c){function h(){for(var y=arguments.length,I=y,x=Ro(y);I--;)x[I]=arguments[I];if(n&&(x=ai(x,n,r)),o&&(x=li(x,o,s)),f||m){var C=h.placeholder,w=b(x,C);if((y-=w.length)<c){var A=a?ie(a):M,N=Cs(c-y,0),T=f?w:M,D=f?M:w,j=f?x:M,L=f?M:x;e|=f?z:E,e&=~(f?E:z),g||(e&=~(k|S));var B=[t,e,i,j,T,L,D,A,l,N],P=ji.apply(M,B);return tn(t)&&Ys(P,B),P.placeholder=C,P}}var G=d?i:this,O=p?G[t]:t;return a&&(x=ln(x,a)),u&&l<x.length&&(x.length=l),this&&this!==qt&&this instanceof h&&(O=v||mi(t)),O.apply(G,x)}var u=e&L,d=e&k,p=e&S,f=e&D,g=e&T,m=e&j,v=p?M:mi(t);return h}function zi(t,e,i){var n=t.length;if(e=+e,n>=e||!Is(e))return"";var r=e-n;return i=null==i?" ":i+"",vo(i,ms(r/i.length)).slice(0,r)}function Ei(t,e,i,n){function r(){for(var e=-1,a=arguments.length,l=-1,c=n.length,h=Ro(c+a);++l<c;)h[l]=n[l];for(;a--;)h[l++]=arguments[++e];return(this&&this!==qt&&this instanceof r?s:t).apply(o?i:this,h)}var o=e&k,s=mi(t);return r}function Li(t){var e=Uo[t];return function(t,i){return i=i===M?0:+i||0,i?(i=cs(10,i),e(t*i)/i):e(t)}}function Bi(t){return function(e,i,n,r){var o=_i(n);return null==n&&o===Ie?ni(e,i,t):ri(e,i,o(n,r,1),t)}}function Pi(t,e,i,n,r,o,s,a){var l=e&S;if(!l&&"function"!=typeof t)throw new $o(Y);var c=n?n.length:0;if(c||(e&=~(z|E),n=r=M),c-=r?r.length:0,e&E){var h=n,u=r;n=r=M}var d=l?M:Rs(t),p=[t,e,i,n,r,h,u,o,s,a];if(d&&(rn(p,d),e=p[1],a=p[9]),p[9]=null==a?l?0:t.length:Cs(a-c,0)||0,e==k)var f=pi(p[0],p[2]);else f=e!=z&&e!=(k|z)||p[4].length?ji.apply(M,p):Ei.apply(M,p);return(d?_s:Ys)(f,p)}function Gi(t,e,i,n,r,o,s){var a=-1,l=t.length,c=e.length;if(l!=c&&!(r&&c>l))return!1;for(;++a<l;){var h=t[a],u=e[a],d=n?n(r?u:h,r?h:u,a):M;if(d!==M){if(d)continue;return!1}if(r){if(!de(e,function(t){return h===t||i(h,t,n,r,o,s)}))return!1}else if(h!==u&&!i(h,u,n,r,o,s))return!1}return!0}function Oi(t,e,i){switch(i){case H:case F:return+t==+e;case J:return t.name==e.name&&t.message==e.message;case Q:return t!=+t?e!=+e:t==+e;case q:case tt:return t==e+""}return!1}function Zi(t,e,i,n,r,o,s){var a=_a(t),l=a.length;if(l!=_a(e).length&&!r)return!1;for(var c=l;c--;){var h=a[c];if(!(r?h in e:es.call(e,h)))return!1}for(var u=r;++c<l;){h=a[c];var d=t[h],p=e[h],f=n?n(r?p:d,r?d:p,h):M;if(!(f===M?i(d,p,n,r,o,s):f))return!1;u||(u="constructor"==h)}if(!u){var g=t.constructor,m=e.constructor;if(g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m))return!1}return!0}function _i(t,i,n){var r=e.callback||No;return r=r===No?Ie:r,n?r(t,i,n):r}function Ri(t){for(var e=t.name,i=Ls[e],n=i?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function Wi(t,i,n){var r=e.indexOf||An;return r=r===An?o:r,t?r(t,i,n):r}function Yi(t){for(var e=eo(t),i=e.length;i--;)e[i][2]=nn(e[i][1]);return e}function Vi(t,e){var i=null==t?M:t[e];return Gr(i)?i:M}function Ui(t,e,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=ws(e,t+s);break;case"takeRight":t=Cs(t,e-s)}}return{start:t,end:e}}function Xi(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&es.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function Hi(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ho),new e}function Fi(t,e,i){var n=t.constructor;switch(e){case et:return si(t);case H:case F:return new n(+t);case it:case nt:case rt:case ot:case st:case at:case lt:case ct:case ht:var r=t.buffer;return new n(i?si(r):r,t.byteOffset,t.length);case Q:case tt:return new n(t);case q:var o=new n(t.source,Tt.exec(t));o.lastIndex=t.lastIndex}return o}function Ji(t,e,i){null==t||qi(e,t)||(e=dn(e),t=1==e.length?t:Le(t,Fe(e,0,-1)),e=Nn(e));var n=null==t?t:t[e];return null==n?M:n.apply(t,i)}function $i(t){return null!=t&&en(Ws(t))}function Qi(t,e){return t="number"==typeof t||zt.test(t)?+t:-1,e=null==e?zs:e,t>-1&&t%1==0&&t<e}function Ki(t,e,i){if(!Lr(i))return!1;var n=typeof e;if("number"==n?$i(i)&&Qi(e,i.length):"string"==n&&e in i){var r=i[e];return t===t?t===r:r!==r}return!1}function qi(t,e){var i=typeof t;return!!("string"==i&&Ct.test(t)||"number"==i)||!Ta(t)&&(!xt.test(t)||null!=e&&t in un(e))}function tn(t){var i=Ri(t);if(!(i in Rt.prototype))return!1;var n=e[i];if(t===n)return!0;var r=Rs(n);return!!r&&t===r[0]}function en(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=zs}function nn(t){return t===t&&!Lr(t)}function rn(t,e){var i=t[1],n=e[1],r=i|n,o=r<L,s=n==L&&i==D||n==L&&i==B&&t[7].length<=e[8]||n==(L|B)&&i==D;if(!o&&!s)return t;n&k&&(t[2]=e[2],r|=i&k?0:T);var a=e[3];if(a){var l=t[3];t[3]=l?ai(l,a,e[4]):ie(a),t[4]=l?b(t[3],V):ie(e[4])}return a=e[5],a&&(l=t[5],t[5]=l?li(l,a,e[6]):ie(a),t[6]=l?b(t[5],V):ie(e[6])),a=e[7],a&&(t[7]=ie(a)),n&L&&(t[8]=null==t[8]?e[8]:ws(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function on(t,e){return t===M?e:Da(t,e,on)}function sn(t,e){t=un(t);for(var i=-1,n=e.length,r={};++i<n;){var o=e[i];o in t&&(r[o]=t[o])}return r}function an(t,e){var i={};return De(t,function(t,n,r){e(t,n,r)&&(i[n]=t)}),i}function ln(t,e){for(var i=t.length,n=ws(e.length,i),r=ie(t);n--;){var o=e[n];t[n]=Qi(o,i)?r[o]:M}return t}function cn(t){for(var e=to(t),i=e.length,n=i&&t.length,r=!!n&&en(n)&&(Ta(t)||Mr(t)),o=-1,s=[];++o<i;){var a=e[o];(r&&Qi(a,n)||es.call(t,a))&&s.push(a)}return s}function hn(t){return null==t?[]:$i(t)?Lr(t)?t:Ho(t):oo(t)}function un(t){return Lr(t)?t:Ho(t)}function dn(t){if(Ta(t))return t;var e=[];return a(t).replace(wt,function(t,i,n,r){e.push(n?r.replace(kt,"$1"):i||t)}),e}function pn(t){return t instanceof Rt?t.clone():new y(t.__wrapped__,t.__chain__,ie(t.__actions__))}function fn(t,e,i){e=(i?Ki(t,e,i):null==e)?1:Cs(ys(e)||1,1);for(var n=0,r=t?t.length:0,o=-1,s=Ro(ms(r/e));n<r;)s[++o]=Fe(t,n,n+=e);return s}function gn(t){for(var e=-1,i=t?t.length:0,n=-1,r=[];++e<i;){var o=t[e];o&&(r[++n]=o)}return r}function mn(t,e,i){return(t?t.length:0)?((i?Ki(t,e,i):null==e)&&(e=1),Fe(t,e<0?0:e)):[]}function vn(t,e,i){var n=t?t.length:0;return n?((i?Ki(t,e,i):null==e)&&(e=1),e=n-(+e||0),Fe(t,0,e<0?0:e)):[]}function yn(t,e,i){return t&&t.length?ei(t,_i(e,i,3),!0,!0):[]}function bn(t,e,i){return t&&t.length?ei(t,_i(e,i,3),!0):[]}function In(t,e,i,n){var r=t?t.length:0;return r?(i&&"number"!=typeof i&&Ki(t,e,i)&&(i=0,n=r),Ne(t,e,i,n)):[]}function xn(t){return t?t[0]:M}function Cn(t,e,i){var n=t?t.length:0;return i&&Ki(t,e,i)&&(e=!1),n?Te(t,e):[]}function wn(t){return(t?t.length:0)?Te(t,!0):[]}function An(t,e,i){var n=t?t.length:0;if(!n)return-1;if("number"==typeof i)i=i<0?Cs(n+i,0):i;else if(i){var r=ni(t,e);return r<n&&(e===e?e===t[r]:t[r]!==t[r])?r:-1}return o(t,e,i||0)}function Mn(t){return vn(t,1)}function Nn(t){var e=t?t.length:0;return e?t[e-1]:M}function kn(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=n;if("number"==typeof i)r=(i<0?Cs(n+i,0):ws(i||0,n-1))+1;else if(i){r=ni(t,e,!0)-1;var o=t[r];return(e===e?e===o:o!==o)?r:-1}if(e!==e)return m(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function Sn(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var i=0,n=Wi(),r=t.length;++i<r;)for(var o=0,s=t[i];(o=n(e,s,o))>-1;)ps.call(e,o,1);return e}function Tn(t,e,i){var n=[];if(!t||!t.length)return n;var r=-1,o=[],s=t.length;for(e=_i(e,i,3);++r<s;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Ue(t,o),n}function Dn(t){return mn(t,1)}function jn(t,e,i){var n=t?t.length:0;return n?(i&&"number"!=typeof i&&Ki(t,e,i)&&(e=0,i=n),Fe(t,e,i)):[]}function zn(t,e,i){return(t?t.length:0)?((i?Ki(t,e,i):null==e)&&(e=1),Fe(t,0,e<0?0:e)):[]}function En(t,e,i){var n=t?t.length:0;return n?((i?Ki(t,e,i):null==e)&&(e=1),e=n-(+e||0),Fe(t,e<0?0:e)):[]}function Ln(t,e,i){return t&&t.length?ei(t,_i(e,i,3),!1,!0):[]}function Bn(t,e,i){return t&&t.length?ei(t,_i(e,i,3)):[]}function Pn(t,e,i,n){if(!(t?t.length:0))return[];null!=e&&"boolean"!=typeof e&&(n=i,i=Ki(t,e,n)?M:e,e=!1);var r=_i();return null==i&&r===Ie||(i=r(i,n,3)),e&&Wi()==o?I(t,i):qe(t,i)}function Gn(t){if(!t||!t.length)return[];var e=-1,i=0;t=ae(t,function(t){if($i(t))return i=Cs(t.length,i),!0});for(var n=Ro(i);++e<i;)n[e]=le(t,Ye(e));return n}function On(t,e,i){if(!(t?t.length:0))return[];var n=Gn(t);return null==e?n:(e=oi(e,i,4),le(n,function(t){return he(t,e,M,!0)}))}function Zn(){for(var t=-1,e=arguments.length;++t<e;){var i=arguments[t];if($i(i))var n=n?ce(we(n,i),we(i,n)):i}return n?qe(n):[]}function _n(t,e){var i=-1,n=t?t.length:0,r={};for(!n||e||Ta(t[0])||(e=[]);++i<n;){var o=t[i];e?r[o]=e[i]:o&&(r[o[0]]=o[1])}return r}function Rn(t){var i=e(t);return i.__chain__=!0,i}function Wn(t,e,i){return e.call(i,t),t}function Yn(t,e,i){return e.call(i,t)}function Vn(){return Rn(this)}function Un(){return new y(this.value(),this.__chain__)}function Xn(t){for(var e,n=this;n instanceof i;){var r=pn(n);e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e}function Hn(){var t=this.__wrapped__,e=function(t){return i&&i.__dir__<0?t:t.reverse()};if(t instanceof Rt){var i=t;return this.__actions__.length&&(i=new Rt(this)),i=i.reverse(),i.__actions__.push({func:Yn,args:[e],thisArg:M}),new y(i,this.__chain__)}return this.thru(e)}function Fn(){return this.value()+""}function Jn(){return ii(this.__wrapped__,this.__actions__)}function $n(t,e,i){var n=Ta(t)?oe:Ae;return i&&Ki(t,e,i)&&(e=M),"function"==typeof e&&i===M||(e=_i(e,i,3)),n(t,e)}function Qn(t,e,i){var n=Ta(t)?ae:ke;return e=_i(e,i,3),n(t,e)}function Kn(t,e){return ra(t,Ze(e))}function qn(t,e,i,n){var r=t?Ws(t):0;return en(r)||(t=oo(t),r=t.length),i="number"!=typeof i||n&&Ki(e,i,n)?0:i<0?Cs(r+i,0):i||0,"string"==typeof t||!Ta(t)&&Wr(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&Wi(t,e,i)>-1}function tr(t,e,i){var n=Ta(t)?le:Oe;return e=_i(e,i,3),n(t,e)}function er(t,e){return tr(t,Lo(e))}function ir(t,e,i){var n=Ta(t)?ae:ke;return e=_i(e,i,3),n(t,function(t,i,n){return!e(t,i,n)})}function nr(t,e,i){if(i?Ki(t,e,i):null==e){t=hn(t);var n=t.length;return n>0?t[Xe(0,n-1)]:M}var r=-1,o=Hr(t),n=o.length,s=n-1;for(e=ws(e<0?0:+e||0,n);++r<e;){var a=Xe(r,s),l=o[a];o[a]=o[r],o[r]=l}return o.length=e,o}function rr(t){return nr(t,Ss)}function or(t){var e=t?Ws(t):0;return en(e)?e:_a(t).length}function sr(t,e,i){var n=Ta(t)?de:Je;return i&&Ki(t,e,i)&&(e=M),"function"==typeof e&&i===M||(e=_i(e,i,3)),n(t,e)}function ar(t,e,i){if(null==t)return[];i&&Ki(t,e,i)&&(e=M);var n=-1;return e=_i(e,i,3),$e(Oe(t,function(t,i,r){return{criteria:e(t,i,r),index:++n,value:t}}),h)}function lr(t,e,i,n){return null==t?[]:(n&&Ki(e,i,n)&&(i=M),Ta(e)||(e=null==e?[]:[e]),Ta(i)||(i=null==i?[]:[i]),Qe(t,e,i))}function cr(t,e){return Qn(t,Ze(e))}function hr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new $o(Y);var i=t;t=e,e=i}return t=Is(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function ur(t,e,i){return i&&Ki(t,e,i)&&(e=M),e=t&&null==e?t.length:Cs(+e||0,0),Pi(t,L,M,M,M,M,e)}function dr(t,e){var i;if("function"!=typeof e){if("function"!=typeof t)throw new $o(Y);var n=t;t=e,e=n}return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=M),i}}function pr(t,e,i){function n(){p&&as(p),c&&as(c),g=0,c=p=f=M}function r(e,i){i&&as(i),c=p=f=M,e&&(g=ga(),h=t.apply(d,l),p||c||(l=d=M))}function o(){var t=e-(ga()-u);t<=0||t>e?r(f,c):p=ds(o,t)}function s(){r(v,p)}
function a(){if(l=arguments,u=ga(),d=this,f=v&&(p||!y),!1===m)var i=y&&!p;else{c||y||(g=u);var n=m-(u-g),r=n<=0||n>m;r?(c&&(c=as(c)),g=u,h=t.apply(d,l)):c||(c=ds(s,n))}return r&&p?p=as(p):p||e===m||(p=ds(o,e)),i&&(r=!0,h=t.apply(d,l)),!r||p||c||(l=d=M),h}var l,c,h,u,d,p,f,g=0,m=!1,v=!0;if("function"!=typeof t)throw new $o(Y);if(e=e<0?0:+e||0,!0===i){var y=!0;v=!1}else Lr(i)&&(y=!!i.leading,m="maxWait"in i&&Cs(+i.maxWait||0,e),v="trailing"in i?!!i.trailing:v);return a.cancel=n,a}function fr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new $o(Y);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=t.apply(this,n);return i.cache=o.set(r,s),s};return i.cache=new fr.Cache,i}function gr(t){if("function"!=typeof t)throw new $o(Y);return function(){return!t.apply(this,arguments)}}function mr(t){return dr(2,t)}function vr(t,e){if("function"!=typeof t)throw new $o(Y);return e=Cs(e===M?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,r=Cs(i.length-e,0),o=Ro(r);++n<r;)o[n]=i[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,i[0],o);case 2:return t.call(this,i[0],i[1],o)}var s=Ro(e+1);for(n=-1;++n<e;)s[n]=i[n];return s[e]=o,t.apply(this,s)}}function yr(t){if("function"!=typeof t)throw new $o(Y);return function(e){return t.apply(this,e)}}function br(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new $o(Y);return!1===i?n=!1:Lr(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),pr(t,e,{leading:n,maxWait:+e,trailing:r})}function Ir(t,e){return e=null==e?So:e,Pi(e,z,M,[t],[])}function xr(t,e,i,n){return e&&"boolean"!=typeof e&&Ki(t,e,i)?e=!1:"function"==typeof e&&(n=i,i=e,e=!1),"function"==typeof i?xe(t,e,oi(i,n,1)):xe(t,e)}function Cr(t,e,i){return"function"==typeof e?xe(t,!0,oi(e,i,1)):xe(t,!0)}function wr(t,e){return t>e}function Ar(t,e){return t>=e}function Mr(t){return v(t)&&$i(t)&&es.call(t,"callee")&&!hs.call(t,"callee")}function Nr(t){return!0===t||!1===t||v(t)&&ns.call(t)==H}function kr(t){return v(t)&&ns.call(t)==F}function Sr(t){return!!t&&1===t.nodeType&&v(t)&&!_r(t)}function Tr(t){return null==t||($i(t)&&(Ta(t)||Wr(t)||Mr(t)||v(t)&&Er(t.splice))?!t.length:!_a(t).length)}function Dr(t,e,i,n){i="function"==typeof i?oi(i,n,3):M;var r=i?i(t,e):M;return r===M?Be(t,e,i):!!r}function jr(t){return v(t)&&"string"==typeof t.message&&ns.call(t)==J}function zr(t){return"number"==typeof t&&Is(t)}function Er(t){return Lr(t)&&ns.call(t)==$}function Lr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Br(t,e,i,n){return i="function"==typeof i?oi(i,n,3):M,Ge(t,Yi(e),i)}function Pr(t){return Zr(t)&&t!=+t}function Gr(t){return null!=t&&(Er(t)?os.test(ts.call(t)):v(t)&&jt.test(t))}function Or(t){return null===t}function Zr(t){return"number"==typeof t||v(t)&&ns.call(t)==Q}function _r(t){var e;if(!v(t)||ns.call(t)!=K||Mr(t)||!es.call(t,"constructor")&&"function"==typeof(e=t.constructor)&&!(e instanceof e))return!1;var i;return De(t,function(t,e){i=e}),i===M||es.call(t,i)}function Rr(t){return Lr(t)&&ns.call(t)==q}function Wr(t){return"string"==typeof t||v(t)&&ns.call(t)==tt}function Yr(t){return v(t)&&en(t.length)&&!!Zt[ns.call(t)]}function Vr(t){return t===M}function Ur(t,e){return t<e}function Xr(t,e){return t<=e}function Hr(t){var e=t?Ws(t):0;return en(e)?e?ie(t):[]:oo(t)}function Fr(t){return be(t,to(t))}function Jr(t,e,i){var n=Bs(t);return i&&Ki(t,e,i)&&(e=M),e?ve(n,e):n}function $r(t){return Ee(t,to(t))}function Qr(t,e,i){var n=null==t?M:Le(t,dn(e),e+"");return n===M?i:n}function Kr(t,e){if(null==t)return!1;var i=es.call(t,e);if(!i&&!qi(e)){if(e=dn(e),null==(t=1==e.length?t:Le(t,Fe(e,0,-1))))return!1;e=Nn(e),i=es.call(t,e)}return i||en(t.length)&&Qi(e,t.length)&&(Ta(t)||Mr(t))}function qr(t,e,i){i&&Ki(t,e,i)&&(e=M);for(var n=-1,r=_a(t),o=r.length,s={};++n<o;){var a=r[n],l=t[a];e?es.call(s,l)?s[l].push(a):s[l]=[a]:s[l]=a}return s}function to(t){if(null==t)return[];Lr(t)||(t=Ho(t));var e=t.length;e=e&&en(e)&&(Ta(t)||Mr(t))&&e||0;for(var i=t.constructor,n=-1,r="function"==typeof i&&i.prototype===t,o=Ro(e),s=e>0;++n<e;)o[n]=n+"";for(var a in t)s&&Qi(a,e)||"constructor"==a&&(r||!es.call(t,a))||o.push(a);return o}function eo(t){t=un(t);for(var e=-1,i=_a(t),n=i.length,r=Ro(n);++e<n;){var o=i[e];r[e]=[o,t[o]]}return r}function io(t,e,i){var n=null==t?M:t[e];return n===M&&(null==t||qi(e,t)||(e=dn(e),t=1==e.length?t:Le(t,Fe(e,0,-1)),n=null==t?M:t[Nn(e)]),n=n===M?i:n),Er(n)?n.call(t):n}function no(t,e,i){if(null==t)return t;var n=e+"";e=null!=t[n]||qi(e,t)?[n]:dn(e);for(var r=-1,o=e.length,s=o-1,a=t;null!=a&&++r<o;){var l=e[r];Lr(a)&&(r==s?a[l]=i:null==a[l]&&(a[l]=Qi(e[r+1])?[]:{})),a=a[l]}return t}function ro(t,e,i,n){var r=Ta(t)||Yr(t);if(e=_i(e,n,4),null==i)if(r||Lr(t)){var o=t.constructor;i=r?Ta(t)?new o:[]:Bs(Er(o)?o.prototype:M)}else i={};return(r?ne:je)(t,function(t,n,r){return e(i,t,n,r)}),i}function oo(t){return ti(t,_a(t))}function so(t){return ti(t,to(t))}function ao(t,e,i){return e=+e||0,i===M?(i=e,e=0):i=+i||0,t>=ws(e,i)&&t<Cs(e,i)}function lo(t,e,i){i&&Ki(t,e,i)&&(e=i=M);var n=null==t,r=null==e;if(null==i&&(r&&"boolean"==typeof t?(i=t,t=1):"boolean"==typeof e&&(i=e,r=!0)),n&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,i||t%1||e%1){var o=Ns();return ws(t+o*(e-t+ls("1e-"+((o+"").length-1))),e)}return Xe(t,e)}function co(t){return(t=a(t))&&t.charAt(0).toUpperCase()+t.slice(1)}function ho(t){return(t=a(t))&&t.replace(Et,d).replace(Nt,"")}function uo(t,e,i){t=a(t),e+="";var n=t.length;return i=i===M?n:ws(i<0?0:+i||0,n),(i-=e.length)>=0&&t.indexOf(e,i)==i}function po(t){return t=a(t),t&&vt.test(t)?t.replace(gt,p):t}function fo(t){return t=a(t),t&&Mt.test(t)?t.replace(At,f):t||"(?:)"}function go(t,e,i){t=a(t),e=+e;var n=t.length;if(n>=e||!Is(e))return t;var r=(e-n)/2,o=ys(r);return i=zi("",ms(r),i),i.slice(0,o)+t+i}function mo(t,e,i){return(i?Ki(t,e,i):null==e)?e=0:e&&(e=+e),t=Io(t),Ms(t,e||(Dt.test(t)?16:10))}function vo(t,e){var i="";if(t=a(t),(e=+e)<1||!t||!Is(e))return i;do{e%2&&(i+=t),e=ys(e/2),t+=t}while(e);return i}function yo(t,e,i){return t=a(t),i=null==i?0:ws(i<0?0:+i||0,t.length),t.lastIndexOf(e,i)==i}function bo(t,i,n){var r=e.templateSettings;n&&Ki(t,i,n)&&(i=n=M),t=a(t),i=me(ve({},n||i),r,ge);var o,s,l=me(ve({},i.imports),r.imports,ge),c=_a(l),h=ti(l,c),u=0,d=i.interpolate||Lt,p="__p += '",f=Fo((i.escape||Lt).source+"|"+d.source+"|"+(d===It?St:Lt).source+"|"+(i.evaluate||Lt).source+"|$","g"),m="//# sourceURL="+("sourceURL"in i?i.sourceURL:"lodash.templateSources["+ ++Ot+"]")+"\n";t.replace(f,function(e,i,n,r,a,l){return n||(n=r),p+=t.slice(u,l).replace(Bt,g),i&&(o=!0,p+="' +\n__e("+i+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),p+="';\n";var v=i.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(ut,""):p).replace(dt,"$1").replace(pt,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Qa(function(){return Vo(c,m+"return "+p).apply(M,h)});if(y.source=p,jr(y))throw y;return y}function Io(t,e,i){var n=t;return(t=a(t))?(i?Ki(n,e,i):null==e)?t.slice(x(t),C(t)+1):(e+="",t.slice(l(t,e),c(t,e)+1)):t}function xo(t,e,i){var n=t;return t=a(t),t?(i?Ki(n,e,i):null==e)?t.slice(x(t)):t.slice(l(t,e+"")):t}function Co(t,e,i){var n=t;return t=a(t),t?(i?Ki(n,e,i):null==e)?t.slice(0,C(t)+1):t.slice(0,c(t,e+"")+1):t}function wo(t,e,i){i&&Ki(t,e,i)&&(e=M);var n=P,r=G;if(null!=e)if(Lr(e)){var o="separator"in e?e.separator:o;n="length"in e?+e.length||0:n,r="omission"in e?a(e.omission):r}else n=+e||0;if(t=a(t),n>=t.length)return t;var s=n-r.length;if(s<1)return r;var l=t.slice(0,s);if(null==o)return l+r;if(Rr(o)){if(t.slice(s).search(o)){var c,h,u=t.slice(0,s);for(o.global||(o=Fo(o.source,(Tt.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(u);)h=c.index;l=l.slice(0,null==h?s:h)}}else if(t.indexOf(o,s)!=s){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+r}function Ao(t){return t=a(t),t&&mt.test(t)?t.replace(ft,w):t}function Mo(t,e,i){return i&&Ki(t,e,i)&&(e=M),t=a(t),t.match(e||Pt)||[]}function No(t,e,i){return i&&Ki(t,e,i)&&(e=M),v(t)?To(t):Ie(t,e)}function ko(t){return function(){return t}}function So(t){return t}function To(t){return Ze(xe(t,!0))}function Do(t,e){return _e(t,xe(e,!0))}function jo(t,e,i){if(null==i){var n=Lr(e),r=n?_a(e):M,o=r&&r.length?Ee(e,r):M;(o?o.length:n)||(o=!1,i=e,e=t,t=this)}o||(o=Ee(e,_a(e)));var s=!0,a=-1,l=Er(t),c=o.length;!1===i?s=!1:Lr(i)&&"chain"in i&&(s=i.chain);for(;++a<c;){var h=o[a],u=e[h];t[h]=u,l&&(t.prototype[h]=function(e){return function(){var i=this.__chain__;if(s||i){var n=t(this.__wrapped__);return(n.__actions__=ie(this.__actions__)).push({func:e,args:arguments,thisArg:t}),n.__chain__=i,n}return e.apply(t,ce([this.value()],arguments))}}(u))}return t}function zo(){return qt._=rs,this}function Eo(){}function Lo(t){return qi(t)?Ye(t):Ve(t)}function Bo(t){return function(e){return Le(t,dn(e),e+"")}}function Po(t,e,i){i&&Ki(t,e,i)&&(e=i=M),t=+t||0,i=null==i?1:+i||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,r=Cs(ms((e-t)/(i||1)),0),o=Ro(r);++n<r;)o[n]=t,t+=i;return o}function Go(t,e,i){if((t=ys(t))<1||!Is(t))return[];var n=-1,r=Ro(ws(t,Ts));for(e=oi(e,i,1);++n<t;)n<Ts?r[n]=e(n):e(n);return r}function Oo(t){var e=++is;return a(t)+e}function Zo(t,e){return(+t||0)+(+e||0)}function _o(t,e,i){return i&&Ki(t,e,i)&&(e=M),e=_i(e,i,3),1==e.length?pe(Ta(t)?t:hn(t),e):Ke(t,e)}t=t?te.defaults(qt.Object(),t,te.pick(qt,Gt)):qt;var Ro=t.Array,Wo=t.Date,Yo=t.Error,Vo=t.Function,Uo=t.Math,Xo=t.Number,Ho=t.Object,Fo=t.RegExp,Jo=t.String,$o=t.TypeError,Qo=Ro.prototype,Ko=Ho.prototype,qo=Jo.prototype,ts=Vo.prototype.toString,es=Ko.hasOwnProperty,is=0,ns=Ko.toString,rs=qt._,os=Fo("^"+ts.call(es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=t.ArrayBuffer,as=t.clearTimeout,ls=t.parseFloat,cs=Uo.pow,hs=Ko.propertyIsEnumerable,us=Vi(t,"Set"),ds=t.setTimeout,ps=Qo.splice,fs=t.Uint8Array,gs=Vi(t,"WeakMap"),ms=Uo.ceil,vs=Vi(Ho,"create"),ys=Uo.floor,bs=Vi(Ro,"isArray"),Is=t.isFinite,xs=Vi(Ho,"keys"),Cs=Uo.max,ws=Uo.min,As=Vi(Wo,"now"),Ms=t.parseInt,Ns=Uo.random,ks=Xo.NEGATIVE_INFINITY,Ss=Xo.POSITIVE_INFINITY,Ts=4294967295,Ds=Ts-1,js=Ts>>>1,zs=9007199254740991,Es=gs&&new gs,Ls={};e.support={};e.templateSettings={escape:yt,evaluate:bt,interpolate:It,variable:"",imports:{_:e}};var Bs=function(){function t(){}return function(e){if(Lr(e)){t.prototype=e;var i=new t;t.prototype=M}return i||{}}}(),Ps=ui(je),Gs=ui(ze,!0),Os=di(),Zs=di(!0),_s=Es?function(t,e){return Es.set(t,e),t}:So,Rs=Es?function(t){return Es.get(t)}:Eo,Ws=Ye("length"),Ys=function(){var t=0,e=0;return function(i,n){var r=ga(),o=Z-(r-e);if(e=r,o>0){if(++t>=O)return i}else t=0;return _s(i,n)}}(),Vs=vr(function(t,e){return v(t)&&$i(t)?we(t,Te(e,!1,!0)):[]}),Us=xi(),Xs=xi(!0),Hs=vr(function(t){for(var e=t.length,i=e,n=Ro(u),r=Wi(),s=r==o,a=[];i--;){var l=t[i]=$i(l=t[i])?l:[];n[i]=s&&l.length>=120?fi(i&&l):null}var c=t[0],h=-1,u=c?c.length:0,d=n[0];t:for(;++h<u;)if(l=c[h],(d?Qt(d,l):r(a,l,0))<0){for(var i=e;--i;){var p=n[i];if((p?Qt(p,l):r(t[i],l,0))<0)continue t}d&&d.push(l),a.push(l)}return a}),Fs=vr(function(t,e){e=Te(e);var i=ye(t,e);return Ue(t,e.sort(n)),i}),Js=Bi(),$s=Bi(!0),Qs=vr(function(t){return qe(Te(t,!1,!0))}),Ks=vr(function(t,e){return $i(t)?we(t,e):[]}),qs=vr(Gn),ta=vr(function(t){var e=t.length,i=e>2?t[e-2]:M,n=e>1?t[e-1]:M;return e>2&&"function"==typeof i?e-=2:(i=e>1&&"function"==typeof n?(--e,n):M,n=M),t.length=e,On(t,i,n)}),ea=vr(function(t){return t=Te(t),this.thru(function(e){return ee(Ta(e)?e:[un(e)],t)})}),ia=vr(function(t,e){return ye(t,Te(e))}),na=ci(function(t,e,i){es.call(t,i)?++t[i]:t[i]=1}),ra=Ii(Ps),oa=Ii(Gs,!0),sa=Ai(ne,Ps),aa=Ai(re,Gs),la=ci(function(t,e,i){es.call(t,i)?t[i].push(e):t[i]=[e]}),ca=ci(function(t,e,i){t[i]=e}),ha=vr(function(t,e,i){var n=-1,r="function"==typeof e,o=qi(e),s=$i(t)?Ro(t.length):[];return Ps(t,function(t){var a=r?e:o&&null!=t?t[e]:M;s[++n]=a?a.apply(t,i):Ji(t,e,i)}),s}),ua=ci(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),da=Di(he,Ps),pa=Di(ue,Gs),fa=vr(function(t,e){if(null==t)return[];var i=e[2];return i&&Ki(e[0],e[1],i)&&(e.length=1),Qe(t,Te(e),[])}),ga=As||function(){return(new Wo).getTime()},ma=vr(function(t,e,i){var n=k;if(i.length){var r=b(i,ma.placeholder);n|=z}return Pi(t,n,e,i,r)}),va=vr(function(t,e){e=e.length?Te(e):$r(t);for(var i=-1,n=e.length;++i<n;){var r=e[i];t[r]=Pi(t[r],k,t)}return t}),ya=vr(function(t,e,i){var n=k|S;if(i.length){var r=b(i,ya.placeholder);n|=z}return Pi(e,n,t,i,r)}),ba=vi(D),Ia=vi(j),xa=vr(function(t,e){return Ce(t,1,e)}),Ca=vr(function(t,e,i){return Ce(t,e,i)}),wa=wi(),Aa=wi(!0),Ma=vr(function(t,e){if(e=Te(e),"function"!=typeof t||!oe(e,s))throw new $o(Y);var i=e.length;return vr(function(n){for(var r=ws(n.length,i);r--;)n[r]=e[r](n[r]);return t.apply(this,n)})}),Na=Ti(z),ka=Ti(E),Sa=vr(function(t,e){return Pi(t,B,M,M,M,Te(e))}),Ta=bs||function(t){return v(t)&&en(t.length)&&ns.call(t)==X},Da=hi(Re),ja=hi(function(t,e,i){return i?me(t,e,i):ve(t,e)}),za=yi(ja,fe),Ea=yi(Da,on),La=Ci(je),Ba=Ci(ze),Pa=Mi(Os),Ga=Mi(Zs),Oa=Ni(je),Za=Ni(ze),_a=xs?function(t){var e=null==t?M:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&$i(t)?cn(t):Lr(t)?xs(t):[]}:cn,Ra=ki(!0),Wa=ki(),Ya=vr(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=le(Te(e),Jo);return sn(t,we(to(t),e))}var i=oi(e[0],e[1],3);return an(t,function(t,e,n){return!i(t,e,n)})}),Va=vr(function(t,e){return null==t?{}:"function"==typeof e[0]?an(t,oi(e[0],e[1],3)):sn(t,Te(e))}),Ua=gi(function(t,e,i){return e=e.toLowerCase(),t+(i?e.charAt(0).toUpperCase()+e.slice(1):e)}),Xa=gi(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),Ha=Si(),Fa=Si(!0),Ja=gi(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),$a=gi(function(t,e,i){return t+(i?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Qa=vr(function(t,e){try{return t.apply(M,e)}catch(t){return jr(t)?t:new Yo(t)}}),Ka=vr(function(t,e){return function(i){return Ji(i,t,e)}}),qa=vr(function(t,e){return function(i){return Ji(t,i,e)}}),tl=Li("ceil"),el=Li("floor"),il=bi(wr,ks),nl=bi(Ur,Ss),rl=Li("round");return e.prototype=i.prototype,y.prototype=Bs(i.prototype),y.prototype.constructor=y,Rt.prototype=Bs(i.prototype),Rt.prototype.constructor=Rt,Ut.prototype.delete=Xt,Ut.prototype.get=Ht,Ut.prototype.has=Ft,Ut.prototype.set=Jt,$t.prototype.push=Kt,fr.Cache=Ut,e.after=hr,e.ary=ur,e.assign=ja,e.at=ia,e.before=dr,e.bind=ma,e.bindAll=va,e.bindKey=ya,e.callback=No,e.chain=Rn,e.chunk=fn,e.compact=gn,e.constant=ko,e.countBy=na,e.create=Jr,e.curry=ba,e.curryRight=Ia,e.debounce=pr,e.defaults=za,e.defaultsDeep=Ea,e.defer=xa,e.delay=Ca,e.difference=Vs,e.drop=mn,e.dropRight=vn,e.dropRightWhile=yn,e.dropWhile=bn,e.fill=In,e.filter=Qn,e.flatten=Cn,e.flattenDeep=wn,e.flow=wa,e.flowRight=Aa,e.forEach=sa,e.forEachRight=aa,e.forIn=Pa,e.forInRight=Ga,e.forOwn=Oa,e.forOwnRight=Za,e.functions=$r,e.groupBy=la,e.indexBy=ca,e.initial=Mn,e.intersection=Hs,e.invert=qr,e.invoke=ha,e.keys=_a,e.keysIn=to,e.map=tr,e.mapKeys=Ra,e.mapValues=Wa,e.matches=To,e.matchesProperty=Do,e.memoize=fr,e.merge=Da,e.method=Ka,e.methodOf=qa,e.mixin=jo,e.modArgs=Ma,e.negate=gr,e.omit=Ya,e.once=mr,e.pairs=eo,e.partial=Na,e.partialRight=ka,e.partition=ua,e.pick=Va,e.pluck=er,e.property=Lo,e.propertyOf=Bo,e.pull=Sn,e.pullAt=Fs,e.range=Po,e.rearg=Sa,e.reject=ir,e.remove=Tn,e.rest=Dn,e.restParam=vr,e.set=no,e.shuffle=rr,e.slice=jn,e.sortBy=ar,e.sortByAll=fa,e.sortByOrder=lr,e.spread=yr,e.take=zn,e.takeRight=En,e.takeRightWhile=Ln,e.takeWhile=Bn,e.tap=Wn,e.throttle=br,e.thru=Yn,e.times=Go,e.toArray=Hr,e.toPlainObject=Fr,e.transform=ro,e.union=Qs,e.uniq=Pn,e.unzip=Gn,e.unzipWith=On,e.values=oo,e.valuesIn=so,e.where=cr,e.without=Ks,e.wrap=Ir,e.xor=Zn,e.zip=qs,e.zipObject=_n,e.zipWith=ta,e.backflow=Aa,e.collect=tr,e.compose=Aa,e.each=sa,e.eachRight=aa,e.extend=ja,e.iteratee=No,e.methods=$r,e.object=_n,e.select=Qn,e.tail=Dn,e.unique=Pn,jo(e,e),e.add=Zo,e.attempt=Qa,e.camelCase=Ua,e.capitalize=co,e.ceil=tl,e.clone=xr,e.cloneDeep=Cr,e.deburr=ho,e.endsWith=uo,e.escape=po,e.escapeRegExp=fo,e.every=$n,e.find=ra,e.findIndex=Us,e.findKey=La,e.findLast=oa,e.findLastIndex=Xs,e.findLastKey=Ba,e.findWhere=Kn,e.first=xn,e.floor=el,e.get=Qr,e.gt=wr,e.gte=Ar,e.has=Kr,e.identity=So,e.includes=qn,e.indexOf=An,e.inRange=ao,e.isArguments=Mr,e.isArray=Ta,e.isBoolean=Nr,e.isDate=kr,e.isElement=Sr,e.isEmpty=Tr,e.isEqual=Dr,e.isError=jr,e.isFinite=zr,e.isFunction=Er,e.isMatch=Br,e.isNaN=Pr,e.isNative=Gr,e.isNull=Or,e.isNumber=Zr,e.isObject=Lr,e.isPlainObject=_r,e.isRegExp=Rr,e.isString=Wr,e.isTypedArray=Yr,e.isUndefined=Vr,e.kebabCase=Xa,e.last=Nn,e.lastIndexOf=kn,e.lt=Ur,e.lte=Xr,e.max=il,e.min=nl,e.noConflict=zo,e.noop=Eo,e.now=ga,e.pad=go,e.padLeft=Ha,e.padRight=Fa,e.parseInt=mo,e.random=lo,e.reduce=da,e.reduceRight=pa,e.repeat=vo,e.result=io,e.round=rl,e.runInContext=A,e.size=or,e.snakeCase=Ja,e.some=sr,e.sortedIndex=Js,e.sortedLastIndex=$s,e.startCase=$a,e.startsWith=yo,e.sum=_o,e.template=bo,e.trim=Io,e.trimLeft=xo,e.trimRight=Co,e.trunc=wo,e.unescape=Ao,e.uniqueId=Oo,e.words=Mo,e.all=$n,e.any=sr,e.contains=qn,e.eq=Dr,e.detect=ra,e.foldl=da,e.foldr=pa,e.head=xn,e.include=qn,e.inject=da,jo(e,function(){var t={};return je(e,function(i,n){e.prototype[n]||(t[n]=i)}),t}(),!1),e.sample=nr,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return nr(e,t)}):nr(this.value())},e.VERSION=N,ne(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ne(["drop","take"],function(t,e){Rt.prototype[t]=function(i){var n=this.__filtered__;if(n&&!e)return new Rt(this);i=null==i?1:Cs(ys(i)||0,0);var r=this.clone();return n?r.__takeCount__=ws(r.__takeCount__,i):r.__views__.push({size:i,type:t+(r.__dir__<0?"Right":"")}),r},Rt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ne(["filter","map","takeWhile"],function(t,e){var i=e+1,n=i!=W;Rt.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:_i(t,e,1),type:i}),r.__filtered__=r.__filtered__||n,r}}),ne(["first","last"],function(t,e){var i="take"+(e?"Right":"");Rt.prototype[t]=function(){return this[i](1).value()[0]}}),ne(["initial","rest"],function(t,e){var i="drop"+(e?"":"Right");Rt.prototype[t]=function(){return this.__filtered__?new Rt(this):this[i](1)}}),ne(["pluck","where"],function(t,e){var i=e?"filter":"map",n=e?Ze:Lo;Rt.prototype[t]=function(t){return this[i](n(t))}}),Rt.prototype.compact=function(){return this.filter(So)},Rt.prototype.reject=function(t,e){return t=_i(t,e,1),this.filter(function(e){return!t(e)})},Rt.prototype.slice=function(t,e){t=null==t?0:+t||0;var i=this;return i.__filtered__&&(t>0||e<0)?new Rt(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==M&&(e=+e||0,i=e<0?i.dropRight(-e):i.take(e-t)),i)},Rt.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Rt.prototype.toArray=function(){return this.take(Ss)},je(Rt.prototype,function(t,i){var n=/^(?:filter|map|reject)|While$/.test(i),r=/^(?:first|last)$/.test(i),o=e[r?"take"+("last"==i?"Right":""):i];o&&(e.prototype[i]=function(){var e=r?[1]:arguments,i=this.__chain__,s=this.__wrapped__,a=!!this.__actions__.length,l=s instanceof Rt,c=e[0],h=l||Ta(s);h&&n&&"function"==typeof c&&1!=c.length&&(l=h=!1);var u=function(t){return r&&i?o(t,1)[0]:o.apply(M,ce([t],e))},d={func:Yn,args:[u],thisArg:M},p=l&&!a;if(r&&!i)return p?(s=s.clone(),s.__actions__.push(d),t.call(s)):o.call(M,this.value())[0];if(!r&&h){s=p?s:new Rt(this);var f=t.apply(s,e);return f.__actions__.push(d),new y(f,i)}return this.thru(u)})}),ne(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var i=(/^(?:replace|split)$/.test(t)?qo:Qo)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?i.apply(this.value(),t):this[n](function(e){return i.apply(e,t)})}}),je(Rt.prototype,function(t,i){var n=e[i];if(n){var r=n.name;(Ls[r]||(Ls[r]=[])).push({name:i,func:n})}}),Ls[ji(M,S).name]=[{name:"wrapper",func:M}],Rt.prototype.clone=Wt,Rt.prototype.reverse=Yt,Rt.prototype.value=Vt,e.prototype.chain=Vn,e.prototype.commit=Un,e.prototype.concat=ea,e.prototype.plant=Xn,e.prototype.reverse=Hn,e.prototype.toString=Fn,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Jn,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var M,N="3.10.1",k=1,S=2,T=4,D=8,j=16,z=32,E=64,L=128,B=256,P=30,G="...",O=150,Z=16,_=200,R=1,W=2,Y="Expected a function",V="__lodash_placeholder__",U="[object Arguments]",X="[object Array]",H="[object Boolean]",F="[object Date]",J="[object Error]",$="[object Function]",Q="[object Number]",K="[object Object]",q="[object RegExp]",tt="[object String]",et="[object ArrayBuffer]",it="[object Float32Array]",nt="[object Float64Array]",rt="[object Int8Array]",ot="[object Int16Array]",st="[object Int32Array]",at="[object Uint8Array]",lt="[object Uint8ClampedArray]",ct="[object Uint16Array]",ht="[object Uint32Array]",ut=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ft=/&(?:amp|lt|gt|quot|#39|#96);/g,gt=/[&<>"'`]/g,mt=RegExp(ft.source),vt=RegExp(gt.source),yt=/<%-([\s\S]+?)%>/g,bt=/<%([\s\S]+?)%>/g,It=/<%=([\s\S]+?)%>/g,xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Ct=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,At=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Mt=RegExp(At.source),Nt=/[\u0300-\u036f\ufe20-\ufe23]/g,kt=/\\(\\)?/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Tt=/\w*$/,Dt=/^0[xX]/,jt=/^\[object .+?Constructor\]$/,zt=/^\d+$/,Et=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Lt=/($^)/,Bt=/['\n\r\u2028\u2029\\]/g,Pt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Gt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ot=-1,Zt={};Zt[it]=Zt[nt]=Zt[rt]=Zt[ot]=Zt[st]=Zt[at]=Zt[lt]=Zt[ct]=Zt[ht]=!0,Zt[U]=Zt[X]=Zt[et]=Zt[H]=Zt[F]=Zt[J]=Zt[$]=Zt["[object Map]"]=Zt[Q]=Zt[K]=Zt[q]=Zt["[object Set]"]=Zt[tt]=Zt["[object WeakMap]"]=!1;var _t={};_t[U]=_t[X]=_t[et]=_t[H]=_t[F]=_t[it]=_t[nt]=_t[rt]=_t[ot]=_t[st]=_t[Q]=_t[K]=_t[q]=_t[tt]=_t[at]=_t[lt]=_t[ct]=_t[ht]=!0,_t[J]=_t[$]=_t["[object Map]"]=_t["[object Set]"]=_t["[object WeakMap]"]=!1;var Rt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Yt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Vt={function:!0,object:!0},Ut={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Xt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=Vt[typeof i]&&i&&!i.nodeType&&i,Ft=Vt[typeof e]&&e&&!e.nodeType&&e,Jt=Ht&&Ft&&"object"==typeof t&&t&&t.Object&&t,$t=Vt[typeof self]&&self&&self.Object&&self,Qt=Vt[typeof window]&&window&&window.Object&&window,Kt=Ft&&Ft.exports===Ht&&Ht,qt=Jt||Qt!==(this&&this.window)&&Qt||$t||this,te=A();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(qt._=te,define(function(){return te})):Ht&&Ft?Kt?(Ft.exports=te)._=te:Ht._=te:qt._=te}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],rappid:[function(t,e,i){"use strict";e.exports=t("./build/rappid")},{"./build/rappid":57}]},{},[]);